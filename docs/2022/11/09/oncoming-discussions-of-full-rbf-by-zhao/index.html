<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><title>近期关于 “全面 RBF” 的争论</title><meta name="keywords" content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name="description" content="比特币思想的中文集结地"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css?v=1673594422765"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/style/common/iconfont.css?v=1673594422765"><link rel="stylesheet" href="/style/base.css?v=1673594422765"><link rel="stylesheet" href="/style/common/helper.css?v=1673594422765"><link rel="stylesheet" href="/style/themes/animation.css?v=1673594422765"><script>function ready() {
  var bodyEl = document.querySelector('.body-container');
  var theme = localStorage.getItem('theme') || 'light';
  if (!['light', 'dark'].includes(theme)) {
    theme = 'light';
    localStorage.setItem('theme', 'light');
  }
  bodyEl.classList.remove('appearance-auto');
  bodyEl.classList.add('appearance-' + theme);
  quickInitialTheme();
}
function quickInitialTheme() {
  var theme = localStorage.getItem('theme') || 'light';
  var logoLightEl = document.querySelector('.logo-light');
  var logoDarkEl = document.querySelector('.logo-dark');
  
  var mLogoLightEl = document.querySelector('#mobile-header-logo > .logo-light');
  var mLogoDarkEl = document.querySelector('#mobile-header-logo > .logo-dark');
  var themeBtnEl = document.getElementById('theme-btn');
  
  var slideThemeLightEl = document.querySelector('.slide-theme-light');
  var slideThemeDarkEl = document.querySelector('.slide-theme-dark');
  
  document.body.classList.add(theme);
  if (theme === 'dark') {
    logoLightEl.classList.add('hidden');
    logoDarkEl.classList.remove('hidden');
    
    mLogoLightEl.classList.add('hidden');
    mLogoDarkEl.classList.remove('hidden');
    
    themeBtnEl.classList.remove('icon-icon_dark');
    themeBtnEl.classList.add('icon-icon_light');
    
    slideThemeLightEl.classList.remove('hidden');
  } else {
    slideThemeDarkEl.classList.remove('hidden');
  }
}
document.addEventListener("DOMContentLoaded", ready);</script><script src="/js/common.js?v=1673594422765"></script><script src="/js/libs/zepto.min.js"></script><link rel="stylesheet" href="/style/post.css?v=1673594422765"><link rel="stylesheet" href="/style/themes/highlight.css?v=1673594422765"><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="BTC Study" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column" onload="initialTheme()"><div class="clip"></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id="header"><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href="/"><svg class="logo-light" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#000000"></path></g></g></g></svg><svg class="logo-dark hidden" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#FFFFFF"></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id="header-menu"><a class="is-inline-block header-activity mr-4" href="/">首页</a><a class="is-inline-block mr-4" href="/archives">全站目录</a><a class="is-inline-block mr-4" href="/tags">标签</a><a class="is-inline-block mr-4" href="/maps">地图</a><a class="is-inline-block mr-4" href="/mempool">mempool</a><a class="is-inline-block mr-4" target="_blank" rel="noopener" href="https://123btc.org/">123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id="change-size-btn"></i><div class="size-input-wrap"><div class="input-wrap"><input id="size-change-input" type="range" min="12" max="32" step="2"></div></div></div><i class="iconfont icon-icon_dark mr-1" id="theme-btn"></i><div class="search-wrap"><input class="pl-3" id="search-input" placeholder="请输入搜索关键词"><i class="iconfont icon-icon_search" id="search-input-btn"></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">近期关于 “全面 RBF” 的争论</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id="change-size-btn2"></i><div class="size-input-wrap"><div class="input-wrap"><input id="size-change-input2" type="range" min="12" max="32" step="2"></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id="mobile-header"><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id="mobile-header-logo"><svg class="logo-light" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#000000"></path></g></g></g></svg><svg class="logo-dark hidden" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#FFFFFF"></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id="postTopicMobile"><p class="is-full-height">近期关于 “全面 RBF” 的争论</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class="mobile-search-wrap"><div class="search-input"><input class="pl-3" id="mobile-search-input" placeholder="请输入搜索关键词"><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class="mobile-search-input-btn">搜 索</button></div></div></header><div class="mobile-slide-menu"><a class="header-activity" href="/">首页</a><a href="/archives">全站目录</a><a href="/tags">标签</a><a href="/maps">地图</a><a href="/mempool">mempool</a><a target="_blank" rel="noopener" href="https://123btc.org/">123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class="slide-menu-fontsize"><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1673594422765"> </script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%83%8C%E6%99%AF"><span class="toc-text">背景</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#RBF-%E4%B8%8E-Full-RBF"><span class="toc-text">RBF 与 Full RBF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%91%E6%9C%9F%E7%9A%84%E4%BA%89%E8%AE%BA"><span class="toc-text">近期的争论</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E5%85%A8%E9%9D%A2-RBF-%E7%9A%84%E7%9C%8B%E6%B3%95"><span class="toc-text">对全面 RBF 的看法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mempoolfullrbf-%E9%80%89%E9%A1%B9"><span class="toc-text">-mempoolfullrbf 选项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%92%8C%E4%BA%8B%E5%AE%9E%E4%B8%8A%E7%9A%84%E5%88%86%E6%AD%A7"><span class="toc-text">问题和事实上的分歧</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%BF%9B"><span class="toc-text">前进</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%A6%E6%B5%8B%E7%BD%91%E7%BB%9C%E4%B8%AD%E7%9A%84%E5%85%A8%E9%9D%A2-RBF-%E8%A1%8C%E4%B8%BA"><span class="toc-text">侦测网络中的全面 RBF 行为</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bitcoin-Core-v24-0"><span class="toc-text">Bitcoin Core v24.0</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A8%E5%87%BA%E7%9A%84%E6%97%B6%E9%97%B4%E8%A1%A8"><span class="toc-text">推出的时间表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E5%A4%84%E7%90%86%E5%85%A8%E9%9D%A2-RBF-%E4%B8%8A%E9%9C%80%E8%A6%81%E5%B8%AE%E5%8A%A9%E7%9A%84%E4%BC%81%E4%B8%9A"><span class="toc-text">在处理全面 RBF 上需要帮助的企业</span></a></li></ol></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id="postTitle">近期关于 “全面 RBF” 的争论</h1><div class="page-author"><div class="is-flex is-flex-direction-row page-data mr-6"><img class="mr-1" src="//res.btcstudy.org/btcstudy/images/default_avatar.png" alt="Gloria Zhao"><div class="page-author-info"><strong>Gloria Zhao</strong><time class="has-text-grey" datetime="2022-11-09T13:06:57.000Z">2022-11-09</time></div></div><div class="is-flex"><a href="/tags/%E4%BA%A4%E6%98%93%E6%B1%A0"><i class="page-tag mr-1 px-1">交易池<!-- 订正图片路径--></i></a></div></div><article class="mt-4 post-content"><blockquote>
<p><em>作者：Gloria Zhao</em></p>
<p><em>来源：<a target="_blank" rel="noopener" href="https://github.com/glozow/bitcoin-notes/blob/full-rbf/full-rbf.md">https://github.com/glozow/bitcoin-notes/blob/full-rbf/full-rbf.md</a></em></p>
</blockquote>
<p>免责声明：这是我从阅读我可以得到的所有材料以及跟尽可能多的人交谈中得出的个人理解。在表达我个人的看法时，我将注明。此外，我已经尽可能保持心态开放和公平，但不能排除有不自知的偏见。</p>
<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><h3 id="RBF-与-Full-RBF"><a href="#RBF-与-Full-RBF" class="headerlink" title="RBF 与 Full RBF"></a>RBF 与 Full RBF</h3><p>“手续费替换（RBF，<a target="_blank" rel="noopener" href="https://bitcoinops.org/en/topics/replace-by-fee/">Replace-by-Fee</a>）” 是一种交易池策略，让节点可以基于交易的手续费率来定夺相互冲突的未确认交易。在这种交易池策略出现之前，交易池一般采取先到先得的策略（如果新进入的交易与交易池中的交易有冲突，则拒绝进入）。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/pull/6871">Bitcoin Core #6871</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0125.mediawiki">BIP 125</a></li>
<li>Bitcoin Core 已经从 0.12.0 开始使用 “选择性 RBF”（Opt-in RBF，BIP125）</li>
</ul>
<p>“全面 RBF（Full RBF）” 的定义<a target="_blank" rel="noopener" href="https://bitcoinops.org/en/newsletters/2022/10/19/#fn:full-rbf">一直在变化</a>。在本文中，全面 RBF 交易池策略意味着允许所有交易出现替换版本，不论原版本是否用信号位表示使用 BIP125 替换方法。</p>
<h3 id="近期的争论"><a href="#近期的争论" class="headerlink" title="近期的争论"></a>近期的争论</h3><p>2021 年 6 月：Antoine Riard 发帖提出了一份在 Bitcoin Core v24.0（计划于 2022 年 9 月/10 月发布）中添加一个 <code>-mempoolfullrbf</code> 的选项，同时征求意见和担忧。</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/issues/25353">optech 的总结</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://bitcoinops.org/en/newsletters/2022/07/13/#bitcoin-core-25353">optech 的总结</a>（<a target="_blank" rel="noopener" href="https://bitcoinops.org/zh/newsletters/2022/07/13/#bitcoin-core-25353">中文版本</a>）</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/020980.html">邮件组帖子</a></p>
</li>
</ul>
<p>2022 年 10 月：Dario Sneidermanis 发帖表示担心全面 RBF 和 <code>-mempoolfullrbf</code> 选项会给接受未确认交易作为结账手段的企业造成问题。他建议从 0.24.0 中移除 <code>-mempoolfullrbf</code> 选项，给 Muun 和其它应用一些时间来准备。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://bitcoinops.org/en/newsletters/2022/10/19/#transaction-replacement-option">optech 的总结</a>（<a target="_blank" rel="noopener" href="https://bitcoinops.org/zh/newsletters/2022/10/19/#transaction-replacement-option">中文版本</a>）</li>
<li><a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/020980.html">邮件组帖子</a></li>
</ul>
<p>这份帖子引出了许多的争论和邮件，主要是关于全面 RBF 的一般特性的：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/020981.html">许多人</a> <a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021017.html">回应</a>强调 Bitcoin Core 的默认 RBF 策略并没有改变。</li>
<li>Anthony Towns <a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021017.html">发帖</a>表示同意在网络层面部署全面 RBF 而不是在个体节点层面自选的办法，可以公开讨论。他建议，作为一种为协议和企业留出时间来测试和接收的办法，可以暂时约束这个选项，使之只能在测试网上使用，并创建一个在主网上部署默认的全面 RBF 的时间表。</li>
<li>Sergej Kotliar <a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021056.html">发帖</a>提出了全面 RBF 的问题，不同意重复花费风险已经很高、闪电网络可以替代链上的 “零确认” 支付的想法。他提供了一些来自 Bitrefill 的经验数据。他说，在现实中，“只有不到百万分之一” 重复花费成功了。他指出，只有 15% 的支付使用了闪电网络，而且，之前一项实验表明默认使用 bech32 地址只会赶走用户。他估计，如果 Bitrefill 停止接受未确认的支付，“他们 85% 的比特币用户都在链上支付；这些用户的绝大部分将不再使用比特币。”</li>
<li>John Carvaho <a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021011.html">发帖</a>讨论了 RBF 的一般问题。他相信这会让零确认支付的风险更难管理。在后面提到的同一篇<a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021056.html">帖子</a>中，Sergej Kotliar 也将免费期权问题作为交易替换技术的问题之一。见下文的美式期权部分。</li>
</ul>
<p>人们已经为 Bitcoin Core 提交了多个跟全面 RBF 相关的代码和并请求。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/pull/26287">#26287</a> 实现了在主网上移除该选项的请求。在多位审核人表示反对之后，该 PR 关闭了。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/pull/26323">#26323</a> 是一个默认启用全面 RBF 的 PR，但它有一个预定的时间（2023 年 5 月 1 日）。即使用户设定了 <code>-mempoolfullrbf=1</code> ，在这个时间点以前也不会影响节点的行为。在这个时间点之后，用户依然可以通过设定 <code>mempoolfullrbf=0</code> ，继续要求交易用信号位表态。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/pull/26305">#26305</a> 是一个默认启用全面 RBF 的请求，实现了 Antoine 在邮件组中的帖子的第二部分。这个 PR 不是为 v24.0 提出的。大多数审核人表示在概念上支持该特性进入 v25.0 及以后的版本。</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这是我在阅读和跟双方 1：1 交流之后的理解。还有一些人我没有联系上，而且我可能也会有偏见。我已经尽力了，如果我不公平地表达了其他人的观点，请谅解。</p>
<h3 id="对全面-RBF-的看法"><a href="#对全面-RBF-的看法" class="headerlink" title="对全面 RBF 的看法"></a>对全面 RBF 的看法</h3><p>人们的想法差不多可以分成 3 种：</p>
<ol>
<li>我们应该主动走向全面 RBF</li>
<li>我们现在应该阻止全面 RBF，但以后应该走向它</li>
<li>我们应该 <em>一以贯之</em> 地避免激活全面 RBF</li>
</ol>
<p>第一种立场主要由协议开发者持有，第二种是一些企业人士的观点。最后一种似乎很罕见。</p>
<p><strong>为什么我们应该主动走向全面 RBF</strong></p>
<ol>
<li>全面 RBF 是网络的自然状态。比特币区块、PoW 等等机制的用意就是解决资金的重复花费问题；未确认的交易本身就从来没有过终局性保证。当一个矿工收到两笔相互冲突的交易时，激励兼容的策略就是选择给他们更高收益的那一笔。使用 RBF 策略可以帮助节点对哪一笔交易更有可能确认获得更准确的认知。当一笔没有用信号位标记使用 RBF 的交易遇到相冲突的、手续费更高的版本时，“矿工会从善如流” 的安全假设大大弱于 “矿工会理性行事” 的假设</li>
<li>已经可以观察到全面 RBF 的行为了，所以我们应该准备好升级我们的交易池策略，以便更准确地预知什么交易会被挖出。如果全面 RBF 已经普及，而我的节点依然使用选择性 RBF 策略，那么我的节点会拒绝那些更有可能被挖出的交易，可能会让我对重复花费的尝试一无所知。</li>
<li>启用全面 RBF 可以解决多种 基于信号位的 DoS/钉死<a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-May/003033.html">攻击</a>。</li>
</ol>
<p>常见的反对意见：</p>
<ul>
<li>接受未确认的交易作为结账手段，在现实中通常是安全的。</li>
<li>对闪电网络的攻击在现实中不常见。</li>
</ul>
<p><strong>为什么我们现在应该阻止全面 RBF</strong></p>
<ol>
<li>全面 RBF 会给接受未确认交易作为结账手段的企业带来更高的重复花费风险。理论上来说，接受未发信号使用 RBF 的未确认的交易是不安全的；但在现实中，就目前来说，往往是安全的，而且也是比特币用户发送快速支付的常见方法。闪电网络已经有了，但整个生态还在开发技术和 UI 层、希望它能触达更多用户，但接受度依然很低。移除使用链上未确认交易的选择可能不会在实质上助推闪电网络，反而会赶走用户。见 <a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/020980.html">Dario Sneidermanis 的帖子</a>。</li>
</ol>
<p>常见的反对意见：</p>
<ul>
<li>零确认交易完全不安全；即使在当前，也是有可能被重复花费的。</li>
<li>如果零确认交易在现实中是安全的，这不是因为大家没有使用全面 RBF，而是因为企业采取了预防措施，例如要求用户附带更高的手续费率，而且会<a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021112.html">等待</a>一段时间、在<a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021084.html">其它（有时候是多个）交易池</a>中侦测相互赛跑的交易。而且企业往往会在用户重复花费时<a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021087.html">受到法律的保护</a>。</li>
</ul>
<p><strong>为什么我们应该一贯阻止全面 RBF</strong></p>
<ol>
<li>RBF 总会给接受未确认交易作为结账手段的企业带来更高的重复花费风险。当前的风险接近于 0。这些企业应该能够继续使用这个假设，因为它支持 “快速” 链上支付。</li>
<li><a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021056.html">美式看涨期权</a>：如果在交易确认之前，比特币的汇率升高，用户可以通过替换来 “取消” 这笔交易、创建新的交易。</li>
</ol>
<p>常见的反对意见：</p>
<ul>
<li>全面 RBF 是不可避免的，尤其是当手续费变成矿工收益的重要部分时。尝试强迫人们做激励不兼容的事是没有意义的，在一个去中心化的网络中也是不现实的。见 <a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021037.html">Russell O’Connor 的帖子</a>、<a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021067.html">Antoine Riard 的帖子</a>。</li>
<li>当前的选择性 RBF <a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021056.html">已经存在这个免费看涨期权问题</a>了，而且<a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021108.html">可能有其它的解决方案</a>。</li>
</ul>
<h3 id="mempoolfullrbf-选项"><a href="#mempoolfullrbf-选项" class="headerlink" title="-mempoolfullrbf 选项"></a><code>-mempoolfullrbf</code> 选项</h3><p><strong>为什么我们现在应该移除这个选项</strong>？</p>
<ol>
<li>这个选项的存在不能跟 Bitcoin Core 的背书分离开来。Bitcoin Core 没有默认开启它，但加入这个选项就已经是一种信号，表示开发者认为用户可以安全地拥有这个选项。</li>
<li>加入这个选项会让运行全面 RBF 变得更加容易，所以矿工 <em>就会</em> 打开这个选项，提高现实中无信号的替换交易的传播。只要少数人打开，无信号的替换交易就可以传播开来了。见 <a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/020984.html">Dario Sneidermanis 的帖子</a>。</li>
<li>如果这个选项导致网络在各企业准备好之前进入全面 RBF，企业们可能会被攻击 以及/或者 被迫缩小他们的（许多）用户的选择。这对比特币不是什么好事。</li>
</ol>
<p><strong>为什么我们应该保留这个选项</strong></p>
<ol>
<li>一个软件产品的用户不应该能够从用户手上剥夺选择。我们已经听到一些用户表示 “我想要这个选项来配置我的个人节点”，而其他用户说 “我不想要其他用户拥有这个选项，因为 …………”。如果你的回应是 “没错，不好意思，你们不能拥有这个特性，但不是因为我们做不到，而是因为其他用户不让你们这么做”，这听起来不合理。</li>
<li>这让 Bitcoin Core 需要对节点运营者的个人决定负责人。这个选项没有改变节点的默认行为。拥有这个选项并不意味着全面 RBF 就会被采用；即使我们移除这个选项，全面 RBF 依然可能落地。见 <a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021006.html">Pieter Wuille 的帖子</a></li>
</ol>
<p>常见的反对意见：</p>
<ul>
<li>要是添加这个选项没什么大不了，那么移除它也没什么大不了。见 <a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021001.html">Anthony Towns 的帖子</a></li>
</ul>
<h3 id="问题和事实上的分歧"><a href="#问题和事实上的分歧" class="headerlink" title="问题和事实上的分歧"></a>问题和事实上的分歧</h3><p>我认为，有必要为这些根本性的分歧专门安排一节，因为这些分歧导致了人们在许多讨论中相互推诿。</p>
<ul>
<li>全面 RBF 在网络中的流行<ul>
<li>Peter Todd <a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021012.html">报告</a>称他已经用 opentimestamps 观察到了没有使用 RBF 信号的交易的替换版本）。他指出这很少见，而且有可能这些替换交易是因为别的原因而出现的。</li>
<li>他也在 2016 年<a target="_blank" rel="noopener" href="https://np.reddit.com/r/Bitcoin/comments/40ejy8/peter_todd_with_my_doublespendpy_tool_with/cytlhh0/">发帖</a>讨论了相关主题。那场讨论读起来很像今天的争论。</li>
</ul>
</li>
<li>当前接受零确认交易的重复花费风险</li>
<li>RBF 和闪电网络在比特币生态中的接受程度</li>
<li>Bitcoin Core 给出了多少 “提醒”<ul>
<li>Murch 和其他人（尤其是在 <a target="_blank" rel="noopener" href="https://www.erisian.com.au/bitcoin-core-dev/log-2022-10-20.html">irc 会议</a>期间）<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/pull/26287#issuecomment-1276444078">表示</a>：“我们已经讨论全面 RBF 有 7 年了”</li>
<li>Antoine Riard 于 2021 年 6 月在邮件组中<a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-June/019074.html">发帖</a>，早于这个选项被合并到代码库中一年多。</li>
<li>David Harding <a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/pull/26287#issuecomment-1289901007">指出</a>，这篇帖子（译者注：应指 #25353 PR 本身的描述）可能没有完全搞清楚加入这个选项可能带来的影响和 <em>风险</em>。许多人认为这会直接导致全面 RBF 在网络中的流行，所以，应该传达的信息是，企业在那之前必须先做好准备。</li>
</ul>
</li>
</ul>
<p>我还有一些开放问题，如果能问到矿工，我会非常感激：</p>
<ul>
<li>如果 v24.0 包含 <code>-mempoolfullrbf</code> 选项，矿工会打开它吗？如果会，什么时候会行动？</li>
<li>如果我们移除 <code>-mempoolfullrbf</code> 选项，矿工最终依然会实现完全 RBF（例如运行一个补丁）吗？</li>
</ul>
<h2 id="前进"><a href="#前进" class="headerlink" title="前进"></a>前进</h2><h3 id="侦测网络中的全面-RBF-行为"><a href="#侦测网络中的全面-RBF-行为" class="headerlink" title="侦测网络中的全面 RBF 行为"></a>侦测网络中的全面 RBF 行为</h3><p>我们应该尝试侦测全面 RBF 的行为在网络中有多普遍，因为，如果无信号的替换交易已经非常普遍，这意味着我们有坚实的理由打开 <code>-mempoolfullrbf=1</code> 。还有一些事情需要关注：</p>
<ul>
<li>Peter Todd 的 <a target="_blank" rel="noopener" href="https://alice.btc.calendar.opentimestamps.org/">opentimestamps</a>。上面的每一笔交易都列出了其手续费；任何高于 182 聪的交易都是一笔无信号的替换交易。</li>
<li>无信号替换交易的个人实验。</li>
<li>对 Muun、Bitrefill 和其他接受未确认交易作为结账手段的企业尝试重复花费。</li>
<li>在其他软件上尝试全面 RBF 。例如，实现全面 RBF，或添加行为以假设替换交易可以不带信号。</li>
</ul>
<h3 id="Bitcoin-Core-v24-0"><a href="#Bitcoin-Core-v24-0" class="headerlink" title="Bitcoin Core v24.0"></a>Bitcoin Core v24.0</h3><p>Bitcoin Core v24.0 <a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/issues/24987">计划</a>在 2022 年 12 月 19 日发布。修复 bug 会提出发布时间，但我认为这件事是我们的最后一个障碍。我不认为 “已经太晚了，不应该更改内容了” 是一个很好的理由，但紧迫性是存在的。</p>
<p>全面 RBF 在每周一次的 bitcoin-core-dev IRC 会议上<a target="_blank" rel="noopener" href="https://www.erisian.com.au/bitcoin-core-dev/log-2022-10-20.html">讨论过</a>。没有作出合并或推进 #26323 和 #26287 的决定。许多人支持 #26305，但希望设置更长的时间周期（1 至 2 个版本，或者一两年后）。许多人不喜欢从用户手中剥夺选择的想法，尤其是这个选择是他们喜欢的，而且对节点运营者个体来说是安全的。</p>
<p>对我来说，最大的问题是：“加入这个选项会导致矿工切换到全面 RBF 吗？” 而且我认为，需要由矿工自己来回答，而不是我们去猜测。就像全面 RBF 的支持者不能一口咬定 “矿工会这样做因为这是理性的”，我也不认为人们可以断言 “矿工会这样做，因为这就是打开一个开关”。</p>
<p>Dario 发表了一份从 Muun 的角度对现有 PR 的分析。他显然支持全面 RBF，但对一些可预测性感兴趣。举个例子，如果预计从现在开始的一段时间（比如 6 个月）后每个人都会切换到全面 RBF，Muun 就有时间来实现和部署他们的解决方案。</p>
<h3 id="推出的时间表"><a href="#推出的时间表" class="headerlink" title="推出的时间表"></a>推出的时间表</h3><p>许多人建议为全面 RBF 的合作性部署安排一份时间表：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021026.html">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021026.html</a></li>
<li><a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021017.html">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021017.html</a></li>
<li><a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021099.html">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021099.html</a></li>
<li><a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021101.html">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-October/021101.html</a></li>
</ul>
<p>我个人也认为，部署全面 RBF 最安全的办法是合作性部署，并在时机上与人们认为整个生态可以准备好的时间抑制。但这并不是一种共识变更，只是每个人都在同一时间切换会更安全。</p>
<p>如前所述，如果全面 RBF 已经开始在网络中出现，而且大部分 Bitcoin Core 的用户没有办法配置他们的节点以接收不带信号的替换交易，那么他们的交易池就会变得不准确。即使我们密切地监控网络、矿工也主动表示他们正在接受不带信号的替换交易，让节点能够自动切换还是比让每个人自己用  <code>mempoolfullrbf=1</code> 重启节点更安全。</p>
<p>时间表可能会给企业压力、让他们搞清楚技术和用户体验上的东西，但从我的角度看，大约两年的时间是非常合理的。类似地，如果矿工计划在 2024 年的区块补贴减半后切换到全面 RBF（即，因为手续费因为补贴降低而变得更加重要），这（两年的周期）将与他们的计划一致，所以（我认为）他们不会通过打补丁来切换。</p>
<p>不过，我也认为，合并某种形式的超时激活方案，可能会使人们指责 Bitcoin Core 尝试强制推行全面 RBF。尝试问那些会受到全面 RBF 影响的企业 “你们什么时候会准备好接受全面 RBF？”，似乎永远只能得到一句 “想都别想！”，但我认为还是值得一试的。</p>
<h3 id="在处理全面-RBF-上需要帮助的企业"><a href="#在处理全面-RBF-上需要帮助的企业" class="headerlink" title="在处理全面 RBF 上需要帮助的企业"></a>在处理全面 RBF 上需要帮助的企业</h3><p><strong>替换交易的侦测</strong></p>
<p><strong>替换交易的防范</strong></p>
</article></div></div></main><script src="/js/post.js?v=1673594422765"></script><script src="/js/highlight.min.js?v=1673594422765"></script><script>var containerEl = document.querySelector('.post-container');
var postFontSize = localStorage.getItem('post-font-size') || '16';
var inputEl = document.querySelector('#size-change-input');
var inputEl2 = document.querySelector('#size-change-input2');
inputEl.value = postFontSize;
inputEl2.value = postFontSize;
containerEl.style.fontSize = postFontSize + 'px';
$(function(){
  function setSizeChangeInputValue(size) {
    $('.post-container').css('font-size', size + 'px');
    localStorage.setItem('post-font-size', size);
    $('#size-change-input').val(size);
    $('#size-change-input2').val(size);
  }
  $('#size-change-input').on('input propertychange', function(e) {
    const size = e.target.value;
    setSizeChangeInputValue(size);
  });
  $('#size-change-input2').on('input propertychange', function(e) {
    const size = e.target.value;
    setSizeChangeInputValue(size);
  });
});
</script><script>hljs.initHighlightingOnLoad();</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com/btcstudy">Twitter</a><!-- Github--><!-- Ins--><!-- RSS--><a title="rss" target="_blank" rel="noopener nofollow" href="/atom.xml">rss</a><!-- 知乎--><!-- 领英--><!-- 脸书--><!-- Telegram--><a title="telegram" target="_blank" rel="noopener nofollow" href="//t.me/btcstudyorg">Telegram</a></section></footer><script async src="/js/buttons.js?v=1673594422765"></script><script async src="/js/index.js?v=1673594422765"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-JVCJ9XXG1Z');</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306";
  hm.async = true;
  hm.defer = true;
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
  </script></body></html>