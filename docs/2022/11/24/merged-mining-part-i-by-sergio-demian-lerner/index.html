<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><title>合并挖矿：Part-1</title><meta name="keywords" content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name="description" content="比特币思想的中文集结地"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css?v=1675761398798"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/style/common/iconfont.css?v=1675761398798"><link rel="stylesheet" href="/style/base.css?v=1675761398798"><link rel="stylesheet" href="/style/common/helper.css?v=1675761398798"><link rel="stylesheet" href="/style/themes/animation.css?v=1675761398798"><script>function ready() {
  var bodyEl = document.querySelector('.body-container');
  var theme = localStorage.getItem('theme') || 'light';
  if (!['light', 'dark'].includes(theme)) {
    theme = 'light';
    localStorage.setItem('theme', 'light');
  }
  bodyEl.classList.remove('appearance-auto');
  bodyEl.classList.add('appearance-' + theme);
  quickInitialTheme();
}
function quickInitialTheme() {
  var theme = localStorage.getItem('theme') || 'light';
  var logoLightEl = document.querySelector('.logo-light');
  var logoDarkEl = document.querySelector('.logo-dark');
  
  var mLogoLightEl = document.querySelector('#mobile-header-logo > .logo-light');
  var mLogoDarkEl = document.querySelector('#mobile-header-logo > .logo-dark');
  var themeBtnEl = document.getElementById('theme-btn');
  
  var slideThemeLightEl = document.querySelector('.slide-theme-light');
  var slideThemeDarkEl = document.querySelector('.slide-theme-dark');
  
  document.body.classList.add(theme);
  if (theme === 'dark') {
    logoLightEl.classList.add('hidden');
    logoDarkEl.classList.remove('hidden');
    
    mLogoLightEl.classList.add('hidden');
    mLogoDarkEl.classList.remove('hidden');
    
    themeBtnEl.classList.remove('icon-icon_dark');
    themeBtnEl.classList.add('icon-icon_light');
    
    slideThemeLightEl.classList.remove('hidden');
  } else {
    slideThemeDarkEl.classList.remove('hidden');
  }
}
document.addEventListener("DOMContentLoaded", ready);</script><script src="/js/common.js?v=1675761398798"></script><script src="/js/libs/zepto.min.js"></script><link rel="stylesheet" href="/style/post.css?v=1675761398798"><link rel="stylesheet" href="/style/themes/highlight.css?v=1675761398798"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="BTC Study" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column" onload="initialTheme()"><div class="clip"></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id="header"><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href="/"><svg class="logo-light" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#000000"></path></g></g></g></svg><svg class="logo-dark hidden" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#FFFFFF"></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id="header-menu"><a class="is-inline-block header-activity mr-4" href="/">首页</a><a class="is-inline-block mr-4" href="/archives">全站目录</a><a class="is-inline-block mr-4" href="/tags">标签</a><a class="is-inline-block mr-4" href="/maps">地图</a><a class="is-inline-block mr-4" href="/mempool">mempool</a><a class="is-inline-block mr-4" target="_blank" rel="noopener" href="https://123btc.org/">123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id="change-size-btn"></i><div class="size-input-wrap"><div class="input-wrap"><input id="size-change-input" type="range" min="12" max="32" step="2"></div></div></div><i class="iconfont icon-icon_dark mr-1" id="theme-btn"></i><div class="search-wrap"><input class="pl-3" id="search-input" placeholder="请输入搜索关键词"><i class="iconfont icon-icon_search" id="search-input-btn"></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">合并挖矿：Part-1</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id="change-size-btn2"></i><div class="size-input-wrap"><div class="input-wrap"><input id="size-change-input2" type="range" min="12" max="32" step="2"></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id="mobile-header"><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id="mobile-header-logo"><svg class="logo-light" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#000000"></path></g></g></g></svg><svg class="logo-dark hidden" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#FFFFFF"></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id="postTopicMobile"><p class="is-full-height">合并挖矿：Part-1</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class="mobile-search-wrap"><div class="search-input"><input class="pl-3" id="mobile-search-input" placeholder="请输入搜索关键词"><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class="mobile-search-input-btn">搜 索</button></div></div></header><div class="mobile-slide-menu"><a class="header-activity" href="/">首页</a><a href="/archives">全站目录</a><a href="/tags">标签</a><a href="/maps">地图</a><a href="/mempool">mempool</a><a target="_blank" rel="noopener" href="https://123btc.org/">123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class="slide-menu-fontsize"><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1675761398798"> </script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%86%E5%8F%B2"><span class="toc-text">历史</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8B%AC%E7%AB%8B%E6%80%A7"><span class="toc-text">独立性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BA%E5%9D%97%E9%80%9F%E5%BA%A6"><span class="toc-text">出块速度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%88%E5%B9%B6%E6%8C%96%E7%9F%BF%E7%9A%84%E7%AB%9E%E4%BA%89%E8%80%85"><span class="toc-text">合并挖矿的竞争者</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%B9%E8%AF%84%E5%92%8C%E6%BC%94%E5%8C%96"><span class="toc-text">批评和演化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Namecoin-%E7%9A%84%E5%90%88%E5%B9%B6%E6%8C%96%E7%9F%BF%E8%AE%BE%E8%AE%A1"><span class="toc-text">Namecoin 的合并挖矿设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E9%93%BE-x2F-%E6%AC%A1%E7%BA%A7%E9%93%BE-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">主链&#x2F;次级链 的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%BA%E5%9D%97%E9%93%BE%E4%B8%AD%E7%AB%8B%E6%80%A7"><span class="toc-text">区块链中立性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%88%E5%B9%B6%E6%8C%96%E7%9F%BF%E7%9A%84%E4%BE%A7%E9%93%BE"><span class="toc-text">合并挖矿的侧链</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id="postTitle">合并挖矿：Part-1</h1><div class="page-author"><div class="is-flex is-flex-direction-row page-data mr-6"><img class="mr-1" src="//res.btcstudy.org/btcstudy/images/default_avatar.png" alt="Sergio Demian Lerner"><div class="page-author-info"><strong>Sergio Demian Lerner</strong><time class="has-text-grey" datetime="2022-11-24T08:34:55.000Z">2022-11-24</time></div></div><div class="is-flex"><a href="/tags/%E5%90%88%E5%B9%B6%E6%8C%96%E7%9F%BF"><i class="page-tag mr-1 px-1">合并挖矿<!-- 订正图片路径--></i></a></div></div><article class="mt-4 post-content"><blockquote>
<p><em>作者：Sergio Demian Lerner</em></p>
<p><em>来源：<a target="_blank" rel="noopener" href="https://bitslog.com/2022/11/22/merged-mining-part-i/">https://bitslog.com/2022/11/22/merged-mining-part-i/</a></em></p>
</blockquote>
<p>工作量证明（PoW）是 “<a target="_blank" rel="noopener" href="https://bitcoinmagazine.com/guides/what-is-nakamoto-consensus-bitcoin">中本聪共识</a>” 的基石，它有两个功能：其一，它是一种用来挑选区块生产者的抗女巫机制（Sybil resistance mechanism）；其二，它为逆转区块链提供了一种成本基准，并可不断提高这种攻击的成本。这就是为什么人们说 PoW 保护着比特币区块链。</p>
<p>“<a target="_blank" rel="noopener" href="https://sec.cs.univie.ac.at/fileadmin/user_upload/i_sec/docs/teaching/thesis/azamyatin_merged_mining.pdf">合并挖矿（merged mining）</a>” 是一种将花在保护一条区块链上的工作量复用、同时保护另一条区块链的技术。就像 PoW 为中本聪共识提供动力，合并挖矿也可以为另一条区块链的共识提供动力。合并挖矿链的共识可以是中本聪共识，也可以其某种变体，例如 <a target="_blank" rel="noopener" href="https://eprint.iacr.org/2013/881.pdf">GHOST</a> 和 <a target="_blank" rel="noopener" href="https://eprint.iacr.org/2022/684.pdf">DECOR</a>。应用合并挖矿技术的操作通常称为 “to merge-mine”。合并挖矿两条链的唯一要求就是它们俩的 PoW 使用同一种区块头哈希函数（以及难度检查）。</p>
<p>合并挖矿工作的方式很直接。首先，我们假设有一条主链（primary blockchain，假设是比特币）以及一条次级链 S。h<sub>B</sub> 和 h<sub>S</sub> 分别是比特币和 S 的两个新区块的区块头。假设 H 是任意一种密码学哈希函数。在挖矿的时候，合并挖矿的矿工必须在建构 h<sub>B</sub> 的模板时使之明确指向 H(h<sub>S</sub>) 。挖矿的过程没有很大不同。在挖矿的时候，矿工尝试找出一个 nonce 值，使得 h<sub>B</sub> 的工作量证明可以满足比特币网络的难度要求（即 SHA256D(h<sub>B</sub>) &lt; target<sub>b</sub>），跟只挖比特币没有什么区别。但是，如果矿工找到一个比特币区块头，其工作量满足合并挖矿链的难度要求（SHA256D(h<sub>B</sub>) &lt; target<sub>S</sub>），那么这个 h<sub>B</sub>、h<sub>S</sub> 以及一些额外的区块头关联信息，就成为次级链的一个有效的工作量证明。完整的合并挖矿区块可以包含这个工作量证明以及其他专属于这条链的数据（即由 h<sub>S</sub> 确认的交易）。这个区块会发到次级区块链的网络中，添加到次级区块链上。有了合并挖矿，一份力气就可以创建两种不同的工作量证明。</p>
<h2 id="历史"><a href="#历史" class="headerlink" title="历史"></a>历史</h2><p><img src="//res.btcstudy.org/btcstudy/images/merged-mining-part-i-by-sergio-demian-lerner/amecoin.png" alt="img"></p>
<p>合并挖矿技术的历史就跟比特币一样悠久。在 2010 年，中本聪自己就<a target="_blank" rel="noopener" href="https://bitcointalk.org/index.php?topic=1790.msg28696#msg28696">提议</a>使用合并挖矿来保护还是一种设想的 BitDNS 侧链（它的用途是存储去中心化的域名）。这个想法很快被实现了，然后推出了 <a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Merged_mining_specification">Namecoin</a> 。<a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Merged_mining_specification">Namecoin</a> 从 2011 年开始跟比特币合并挖矿，以实现更高的安全性。</p>
<p><img src="//res.btcstudy.org/btcstudy/images/merged-mining-part-i-by-sergio-demian-lerner/ogelite.jpg" alt="img"></p>
<p>在此期间，其它区块链也跟随这一趋势，开始跟比特币合并挖矿。但是好景不长。在 2012 年，LukeJR 对 Coiledcoin <a target="_blank" rel="noopener" href="https://www.reddit.com/r/Bitcoin/comments/o6qwx/lukejr_attacks_and_kills_coiledcoin_altcurrency/">发动</a>了一次 51% 攻击，当时该链正跟比特币合并挖矿。这一事件表明，合并挖矿并不是所有区块链的安全灵丹，而且，要让这套机制足够安全，新的合并挖矿链与老的链必须有高度的激励兼容性。</p>
<p>在 2014 年，另一个重要事件发生。Dogecoin（狗狗币）和 Litecoin（莱特币）使用了相同的挖矿算法，因此矿工开始在两个区块链之间频繁切换算力。当挖掘狗狗币收益更丰富时，矿工就去挖狗狗币；这会加快狗狗币的出块速度。当狗狗币的难度调整介入，使得挖矿更难盈利时，矿工就切换去挖莱特币；这样不断反复。这导致两条链的哈希率都不稳定，出块速度和货币发行也不稳定。此后，狗狗币的哈希率变得太低，已称不上安全。狗狗币决定开始接受<a target="_blank" rel="noopener" href="https://www.coindesk.com/markets/2014/09/11/dogecoin-community-celebrates-as-merge-mining-with-litecoin-begins/">跟莱特币合并挖矿的区块</a>。迄今为之，两者之间从没有一个社区的矿工尝试攻击另一个社区。没有攻击事件有以下几个原因：首先，合并挖矿对两个社区都有好处，因为合并挖矿使得出块难度和出块速度可以再次稳定下来；其次，这对矿工也有好处，因为他们可以暂时让收益翻倍（直到区块链的收益难度调整结束这个宽限期）；第三，有了可观的哈希率，就没有哪个矿工可以容易地攻击另一条链；第四，莱特币和狗狗币之间并没有意识形态分歧（我们可以自问是否能够从这两个社区中看到归属感），矿工就只是挖掘最为有利可图的链而已。</p>
<h2 id="独立性"><a href="#独立性" class="headerlink" title="独立性"></a>独立性</h2><p>以往，合并挖矿受到推崇的原因之一是它可以创建完全独立的区块链。这个 “独立” 的意思是，即使主链停止了（因为技术问题或者没有社区支持而死亡），次级链也可以继续存活。次级链可以继续从合并挖矿的矿工处获得工作量证明。早年间，连比特币的未来也没有保证。Rootstock 侧链为自己的共识协议选择合并挖矿（而不是 Liquid 那样的联盟共识）是因为 Rootstock 是在比特币的区块大小战争期间创建的，那时候比特币真的有被攻击者破坏或者被分裂的社区撕裂的风险。</p>
<h2 id="出块速度"><a href="#出块速度" class="headerlink" title="出块速度"></a>出块速度</h2><p><img src="//res.btcstudy.org/btcstudy/images/merged-mining-part-i-by-sergio-demian-lerner/fastcar.jpg" alt="img"></p>
<p>另一个推崇合并挖矿的理由是，相比于其它继承比特币安全性的方式，合并挖矿可以让次级链实现更高的出块速度。</p>
<p>在比特币之后，所有新的区块链都被设计成支持更高的出块速度（更低的出块间隔）。这被认为对去中心化有负面影响，因为它会让独自挖矿的矿工挖出孤儿块的几率上升，迫使他们加入更大的矿池以保持竞争力。更高的出块速度也有一些好处，最明显的一个是用户的交易会更快得到确认。更高的出块速度有一个悖论性的好处：收益支付的方差降低了，这反过来降低了加入矿池的激励、提升了去中心化。出块速度代表着一种可用性与去中心化的权衡，最优的数值是很难找到的。</p>
<p>因此，想要跟比特币合并挖矿的算法设计者应该对出块速度非常谨慎。低于 10 秒的平均出块间隔且不使用<a target="_blank" rel="noopener" href="https://fc15.ifca.ai/preproceedings/paper_101.pdf">更加内含式的共识协议（inclusive consensus protocols）</a>会给合并挖矿的矿池带来额外的带宽压力、提高他们的成本，使他们处于对不合并挖矿的矿池的下风。</p>
<h2 id="合并挖矿的竞争者"><a href="#合并挖矿的竞争者" class="headerlink" title="合并挖矿的竞争者"></a>合并挖矿的竞争者</h2><p><img src="//res.btcstudy.org/btcstudy/images/merged-mining-part-i-by-sergio-demian-lerner/tenders.jpg" alt="img"></p>
<p>类似于中本聪的合并挖矿，有别的办法可以从其它链继承安全性。已知的第一种方法是由 <a target="_blank" rel="noopener" href="https://bitcoinmagazine.com/technical/mastercoin-a-second-generation-protocol-on-the-bitcoin-blockchain-1383603310">Mastercoin</a>&#x2F;OMNI 协议实现的，后来被 <a target="_blank" rel="noopener" href="https://counterparty.io/">Counterparty 协议</a>沿用。新的项目例如 <a target="_blank" rel="noopener" href="https://www.coindesk.com/tech/2020/09/14/rgb-continues-its-work-to-bring-better-smart-contracts-to-bitcoin/">RGB</a> 也使用了这种方法。这种办法的基础是将另一条区块链（账本）的交易输入嵌入比特币交易中。RGB 依然使用这种嵌入方案，只不过，其内容是完全隐藏在 Tarpoot 树中的。但是，不论 Mastercoin&#x2F;Counterparty&#x2F;RGB 中的哪一个，其账本历史都不会形成一条专门的区块链。它们的账本历史仅仅是比特币区块中的特殊交易所形成的顺序列表。还有别的办法可以创建专门的区块链并从主链继承安全性，一般来说是尝试完全或者部分地同步两条区块链。这些方案都基于在 <a target="_blank" rel="noopener" href="https://link.springer.com/content/pdf/10.1007/s10723-020-09537-9.pdf">OP_RETURN</a> 输出中发布数据。一些例子有：<a target="_blank" rel="noopener" href="https://www.veriblock.org/">Veriblock</a>、<a target="_blank" rel="noopener" href="https://hackernoon.com/wtf-is-proof-of-transfer-and-why-should-anyone-care-wd2330p9">PoX</a> 和 <a target="_blank" rel="noopener" href="https://docs.rsk.co/SyncChain_WP.pdf">Syncchains</a> 。在这些 “同步” 链中，主链区块的逆转会自动逆转随后出现的次级链区块。这种模式的一个缺点在于，它迫使次级链节点必须运行主链节点。虽然相互关联的区块链可以提供共享的安全性（以及更快的跨链转账），同步的共识无法为次级链提供更快的出块速度，除非引入另一种可以切换的共识协议（即 <a target="_blank" rel="noopener" href="https://www.usenix.org/system/files/conference/nsdi16/nsdi16-paper-eyal.pdf">Bitcoin NG</a> 所用的 “微区块”）。相反，合并挖矿链就可以使用任意的出块速度，只不过，如上所述，这里面有一个阈值，假如超过了这个阈值，合并挖矿会因为高带宽要求而变得无利可图。</p>
<h2 id="批评和演化"><a href="#批评和演化" class="headerlink" title="批评和演化"></a>批评和演化</h2><p><img src="//res.btcstudy.org/btcstudy/images/merged-mining-part-i-by-sergio-demian-lerner/o_black.png" alt="img"></p>
<p>如今有许多论文<a target="_blank" rel="noopener" href="http://www.wcse.org/WCSE_2018/W072.pdf">分析</a>了中本聪共识的合并挖矿，既有<a target="_blank" rel="noopener" href="https://blog.bitmex.com/the-growth-of-bitcoin-merge-mining/">肯定意见</a>，也有<a target="_blank" rel="noopener" href="https://eprint.iacr.org/2017/791.pdf">批评意见</a>。不过，现在所有的研究都关注合并挖矿对去中心化的实际影响，但依然缺乏严谨的方法。学术研究还停留在 Namecoin 的合并挖矿机制，但这种机制已经优化了许多。2018 年 <a target="_blank" rel="noopener" href="http://rootstock.io/">Rootstock 侧链</a>的推出使研究重新活跃起来，使人们发现了更安全的合并挖矿协议，比如<a target="_blank" rel="noopener" href="https://github.com/rsksmart/RSKIPs/blob/master/IPs/RSKIP110.md">可以感知分叉的变种</a>。其中一些优化已经由 Rootstock 在连续几次网络升级中实现。但是，新的理论研究依然分散在网文和 RSKIP（Rootstock 升级提议）中，需要更好的归档。新的合并挖矿协议可以抵抗一些已知的攻击（我们会在后续的文章中详细讨论）。举个例子，人们通常认为合并挖矿的侧链在合并挖矿的哈希率较低（低于主链哈希率的 10%）时无法抵御重复花费攻击，但是一些新的协议是可以做到的（在稍有区别的安全性和活性假设之下）。</p>
<h2 id="Namecoin-的合并挖矿设计"><a href="#Namecoin-的合并挖矿设计" class="headerlink" title="Namecoin 的合并挖矿设计"></a>Namecoin 的合并挖矿设计</h2><p>Namecoin 跟比特币的合并挖矿机制是比较简单的。在区块奖励交易的 coinbase 字段，矿工写入 4 字节的数据，表明后面的是一个 <a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Merged_mining_specification">AuxPow</a> 记录。这种 4 字节的数据叫做 “魔法字节”，可以被 Namecoin 用来发现 AuxPow 记录。在 AuxPow 记录中，矿工必须存入一棵默克尔树的根哈希值，这棵默克尔树保存的是合并挖矿的各个链的区块哈希值。AuxPow 记录之后是 treeSize（树大小）字段，指明包含在树内的不同链的合并挖矿区块的数量。最后是一个 treeNonce 字段，预设用途是避免链 ID 的混淆，但这个设计是有问题的，所以这个值也没使用过。下图演示了一个携带着包含 4 条不同合并挖矿区块链的 4 个区块（W、X、Y、Z）的 AuxPow 记录的比特币区块：</p>
<p><img src="//res.btcstudy.org/btcstudy/images/merged-mining-part-i-by-sergio-demian-lerner/g5ip4io.png" alt="img"></p>
<p style="text-align:center">- Namecoin 的合并挖矿设计 -</p>


<p>当 Namecoin 节点要验证一个 Namecoin 区块的工作量证明时，区块必须包含如下字段：</p>
<ul>
<li>一个默克尔路径，证明一笔 Coinbase 交易包含在了某个比特币区块交易树中</li>
<li>Coinbase 交易自身（包含着 AuxPow 树根值）</li>
<li>一个默克尔路径，证明这个 Namecoin 的区块哈希值在这棵 AuxPow 树上</li>
</ul>
<p>Namecoin 共识有一个验证合并挖矿证明和比特币区块头的工作量证明的规则（会忽略比特币区块的其它数据）。</p>
<h2 id="主链-x2F-次级链-的区别"><a href="#主链-x2F-次级链-的区别" class="headerlink" title="主链&#x2F;次级链 的区别"></a>主链&#x2F;次级链 的区别</h2><p>一般来说，我们会把一条主链和所有合并挖矿的次级链区别开来，因为次级链的区块需要一个额外的默克尔证明以允许工作量证明的验证。但从博弈论的角度看，没有什么主链不主链。所有的链都为<a target="_blank" rel="noopener" href="https://braiins.com/blog/bitcoin-fees-security-threats">安全预算</a>作出了贡献。如果主链的哈希率下降到了全部合并挖矿哈希率的 10% 以下，有人会说这个次级链已经变成了主链，因为这个区块链可能才是给出大部分安全预算的一个。这个区别更让人困惑的地方在于，一条合并挖矿的 “次级链” 可以获得比主链更多的工作量，比如 Rootstock 就是这样。虽然大部分的 <a target="_blank" rel="noopener" href="https://stats.rsk.co/">Rootstock 哈希率</a>都来自比特币矿工，但有时候也会有少量哈希率来自 Bitcoin Cash 矿工，因此 Rootstock 继承了来自两条主链的哈希率。</p>
<p>即使出于理念上的原因你不希望从（比如说）Bitcoin SV 矿工处获得哈希率，也无法轻松阻止他们这样做。从 Roostock 的共识视角来看，比特币和 Bitcoin SV 的区块头看起来是一样的（父区块或者难度字段可以用来启发式地区分它们，但也不是精确的）。因此，Rootstock 有可能获得比比特币还要高的哈希率，因为它可以合并所有 SHA256D 链的哈希率，包括比特币的。</p>
<p>因此，我们坚持一个语法上的定义：“主链” 指的是带有较短的合并挖矿证明的链，通常只有一个区块头；而 “次级链” 指的是需要额外的区块头及其哈希值的链。</p>
<h2 id="区块链中立性"><a href="#区块链中立性" class="headerlink" title="区块链中立性"></a>区块链中立性</h2><p>在 2011 年至 2013 年期间，bitcointalik.org 论坛上有<a target="_blank" rel="noopener" href="https://bitcointalk.org/index.php?topic=198005.0">多种</a>提议，主张硬分叉比特币、把比特币的工作量证明抽象成一个单独的 “主” 头链，然后所有的合并挖矿区块链（包括比特币）都从这个主头链中衍生出来。所有区块链的区块哈希值都是一个 Pow 默克尔树的一部分。但是，这些提案没有多少人关注（总的来说，没有哪一个硬分叉比特币的提议是获得了关注的）。</p>
<p>事实上，主头完全不需要是一条链的一部分。头可以很小，直接指定链区块哈希值的默克尔根值，以及这些区块头满足 PoW 要求的 nonce 值。我们将在后续的文章中了解到，为这样的微型头加入一个时间戳字段可以提升所有合并挖矿链的安全性。下图展示了这种假想的微型头，其中 X 和 Y 值得是其它合并挖矿的区块链：</p>
<p><img src="//res.btcstudy.org/btcstudy/images/merged-mining-part-i-by-sergio-demian-lerner/7msnuy8.png" alt="img"></p>
<p style="text-align:center">- 一个没有主区块链的合并挖矿设计 -</p>


<p>如果这种数据结构被接受了，那在比特币的合并挖矿中就没有什么主链了。</p>
<p>在分析使用相同的工作量证明保护多于一条区块链的矿工的激励时，我们必须将所有的链一视同仁。为了分析合并挖矿的激励，我们必须关注 SHA256D 矿工（使用的是哪种哈希函数）而不是比特币矿工（使用了哪条链）。我们必须分析所有相关的区块链以及这些区块链为矿工提供的激励。</p>
<h2 id="合并挖矿的侧链"><a href="#合并挖矿的侧链" class="headerlink" title="合并挖矿的侧链"></a>合并挖矿的侧链</h2><p><img src="//res.btcstudy.org/btcstudy/images/merged-mining-part-i-by-sergio-demian-lerner/echains.jpg" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://medium.com/iovlabs-innovation-stories/bitcoin-sidechains-74a72ceba35d">比特币的侧链</a>（<a href="https://www.btcstudy.org/2022/02/16/bitcoin-sidechains/">中文译本</a>）提高了比特币的效用，因此也为比特币的价值作出了贡献。使用<a target="_blank" rel="noopener" href="https://www.coindesk.com/learn/an-introduction-to-sidechains/">侧链</a>，比特币人可以执行私密支付、创建 DAO（去中心化自治阻止）并开发新颖的用途，而不必把比特币换成波动更大的密码货币（有时候被比特币至上主义者称为 “垃圾币”）。现在主要有两条比特币侧链：<a target="_blank" rel="noopener" href="https://blockstream.com/liquid/">Liquid</a>（联盟共识）和 <a target="_blank" rel="noopener" href="http://rootstock.io/">Rootstock</a>（合并挖矿）。</p>
<p><a target="_blank" rel="noopener" href="https://eprint.iacr.org/2022/684">Rootstock 侧链</a>提供了更便宜的转账和去中心化金融（DeFi）应用。其中一个有用的应用是以 rBTC 作为担保的<a target="_blank" rel="noopener" href="https://www.sovryn.app/zero">自贷型</a>稳定币。这个解决方案让比特币人可以使用以法币计价的代币，同时不必为日常花费而卖出比特币。</p>
<p>人们普遍认为，比特币上的 DeFi 会在未来几年里显著成长，而且不可预见的应用会在未来出现。这也是为什么大部分比特币人都支持 Rootstock 并希望它成长得更快。</p>
<p>Rootstock 侧链专门设计成为比特币社区提供激励。它通过合并挖矿的共识协议激励比特币人，尤其是比特币矿工，的参与。比特币和 Rootstock 可以成功地合并挖矿，因为激励和社区都是共享的。</p>
<p>在后续文章中，我会介绍 Rootstock 的合并挖矿公式模型，而且我会展示 Rootstock 社区的多项创新，这些创新显著提高了合并挖矿的安全性。我将证明，合并挖矿在长期中可以通过提高比特币的安全预算而使比特币获益。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>合并挖矿是一种基于 PoW 的共识协议的关键部分，它让一条区块链可以从一条主链处继承安全性，且不会让挖矿的成本倍增。中本聪共识搭配合并挖矿可能实现比基于权威证明（proof-of-authority）和权益证明（proof-of-stake.）的共识协议更高的去中心化。但是，主链的安全性只有在两者互惠互利之时才能为合并挖矿链分享。因此，合并挖矿是可以为比特币网络带来巨大价值的比特币侧链的理想解决方案。Rootstock 是第一个图灵完备的比特币智能合约侧链，它当前使用超过 50% 的比特币网络哈希率来合并挖矿，而且它的哈希率每年都在增长，所以它已经成为现在最安全的智能合约网络之一。Rootstock 使用了合并挖矿的一种分叉感知型变种，我们将在下一篇文章中介绍。</p>
<p>（完）</p>
</article></div></div></main><script src="/js/post.js?v=1675761398798"></script><script src="/js/highlight.min.js?v=1675761398798"></script><script>var containerEl = document.querySelector('.post-container');
var postFontSize = localStorage.getItem('post-font-size') || '16';
var inputEl = document.querySelector('#size-change-input');
var inputEl2 = document.querySelector('#size-change-input2');
inputEl.value = postFontSize;
inputEl2.value = postFontSize;
containerEl.style.fontSize = postFontSize + 'px';
$(function(){
  function setSizeChangeInputValue(size) {
    $('.post-container').css('font-size', size + 'px');
    localStorage.setItem('post-font-size', size);
    $('#size-change-input').val(size);
    $('#size-change-input2').val(size);
  }
  $('#size-change-input').on('input propertychange', function(e) {
    const size = e.target.value;
    setSizeChangeInputValue(size);
  });
  $('#size-change-input2').on('input propertychange', function(e) {
    const size = e.target.value;
    setSizeChangeInputValue(size);
  });
});
</script><script>hljs.initHighlightingOnLoad();</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com/btcstudy">Twitter</a><!-- Github--><!-- Ins--><!-- RSS--><a title="rss" target="_blank" rel="noopener nofollow" href="/atom.xml">rss</a><!-- 知乎--><!-- 领英--><!-- 脸书--><!-- Telegram--><a title="telegram" target="_blank" rel="noopener nofollow" href="//t.me/btcstudyorg">Telegram</a></section></footer><script async src="/js/buttons.js?v=1675761398798"></script><script async src="/js/index.js?v=1675761398798"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-JVCJ9XXG1Z');</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306";
  hm.async = true;
  hm.defer = true;
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
  </script></body></html>