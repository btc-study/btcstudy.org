<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><title>Tapscript 将如何使比特币受益？</title><meta name="keywords" content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name="description" content="比特币思想的中文集结地"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css?v=1675068536944"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/style/common/iconfont.css?v=1675068536944"><link rel="stylesheet" href="/style/base.css?v=1675068536944"><link rel="stylesheet" href="/style/common/helper.css?v=1675068536944"><link rel="stylesheet" href="/style/themes/animation.css?v=1675068536944"><script>function ready() {
  var bodyEl = document.querySelector('.body-container');
  var theme = localStorage.getItem('theme') || 'light';
  if (!['light', 'dark'].includes(theme)) {
    theme = 'light';
    localStorage.setItem('theme', 'light');
  }
  bodyEl.classList.remove('appearance-auto');
  bodyEl.classList.add('appearance-' + theme);
  quickInitialTheme();
}
function quickInitialTheme() {
  var theme = localStorage.getItem('theme') || 'light';
  var logoLightEl = document.querySelector('.logo-light');
  var logoDarkEl = document.querySelector('.logo-dark');
  
  var mLogoLightEl = document.querySelector('#mobile-header-logo > .logo-light');
  var mLogoDarkEl = document.querySelector('#mobile-header-logo > .logo-dark');
  var themeBtnEl = document.getElementById('theme-btn');
  
  var slideThemeLightEl = document.querySelector('.slide-theme-light');
  var slideThemeDarkEl = document.querySelector('.slide-theme-dark');
  
  document.body.classList.add(theme);
  if (theme === 'dark') {
    logoLightEl.classList.add('hidden');
    logoDarkEl.classList.remove('hidden');
    
    mLogoLightEl.classList.add('hidden');
    mLogoDarkEl.classList.remove('hidden');
    
    themeBtnEl.classList.remove('icon-icon_dark');
    themeBtnEl.classList.add('icon-icon_light');
    
    slideThemeLightEl.classList.remove('hidden');
  } else {
    slideThemeDarkEl.classList.remove('hidden');
  }
}
document.addEventListener("DOMContentLoaded", ready);</script><script src="/js/common.js?v=1675068536944"></script><script src="/js/libs/zepto.min.js"></script><link rel="stylesheet" href="/style/post.css?v=1675068536944"><link rel="stylesheet" href="/style/themes/highlight.css?v=1675068536944"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="BTC Study" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column" onload="initialTheme()"><div class="clip"></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id="header"><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href="/"><svg class="logo-light" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#000000"></path></g></g></g></svg><svg class="logo-dark hidden" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#FFFFFF"></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id="header-menu"><a class="is-inline-block header-activity mr-4" href="/">首页</a><a class="is-inline-block mr-4" href="/archives">全站目录</a><a class="is-inline-block mr-4" href="/tags">标签</a><a class="is-inline-block mr-4" href="/maps">地图</a><a class="is-inline-block mr-4" href="/mempool">mempool</a><a class="is-inline-block mr-4" target="_blank" rel="noopener" href="https://123btc.org/">123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id="change-size-btn"></i><div class="size-input-wrap"><div class="input-wrap"><input id="size-change-input" type="range" min="12" max="32" step="2"></div></div></div><i class="iconfont icon-icon_dark mr-1" id="theme-btn"></i><div class="search-wrap"><input class="pl-3" id="search-input" placeholder="请输入搜索关键词"><i class="iconfont icon-icon_search" id="search-input-btn"></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Tapscript 将如何使比特币受益？</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id="change-size-btn2"></i><div class="size-input-wrap"><div class="input-wrap"><input id="size-change-input2" type="range" min="12" max="32" step="2"></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id="mobile-header"><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id="mobile-header-logo"><svg class="logo-light" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#000000"></path></g></g></g></svg><svg class="logo-dark hidden" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#FFFFFF"></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id="postTopicMobile"><p class="is-full-height">Tapscript 将如何使比特币受益？</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class="mobile-search-wrap"><div class="search-input"><input class="pl-3" id="mobile-search-input" placeholder="请输入搜索关键词"><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class="mobile-search-input-btn">搜 索</button></div></div></header><div class="mobile-slide-menu"><a class="header-activity" href="/">首页</a><a href="/archives">全站目录</a><a href="/tags">标签</a><a href="/maps">地图</a><a href="/mempool">mempool</a><a target="_blank" rel="noopener" href="https://123btc.org/">123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class="slide-menu-fontsize"><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1675068536944"> </script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Tapscript%EF%BC%88BIP-342%EF%BC%89"><span class="toc-text">Tapscript（BIP 342）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%93%8D%E4%BD%9C%E7%A0%81"><span class="toc-text">什么是操作码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Tapscript-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">Tapscript 是什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E6%AF%94%E7%89%B9%E5%B8%81%E4%B8%8A%E6%BF%80%E6%B4%BB-BIP-340-342"><span class="toc-text">在比特币上激活 BIP 340 ~ 342</span></a></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id="postTitle">Tapscript 将如何使比特币受益？</h1><div class="page-author"><div class="is-flex is-flex-direction-row page-data mr-6"><img class="mr-1" src="//res.btcstudy.org/btcstudy/images/default_avatar.png" alt="Interdax"><div class="page-author-info"><strong>Interdax</strong><time class="has-text-grey" datetime="2022-03-30T09:21:54.000Z">2022-03-30</time></div></div><div class="is-flex"></div></div><article class="mt-4 post-content"><blockquote>
<p><em>作者：Interdax</em></p>
<p><em>来源：<a target="_blank" rel="noopener" href="https://medium.com/interdax/what-is-tapscript-and-how-will-it-benefit-bitcoin-96fbb43a7169">https://medium.com/interdax/what-is-tapscript-and-how-will-it-benefit-bitcoin-96fbb43a7169</a></em></p>
<p><em>原文发表于 2020 年 3 月 19 日。</em></p>
</blockquote>
<p>这是我们关于 BIP 340 ~ 342 系列文章的最后一篇。本文将介绍 Tapscript 是什么、该提案有什么优点。</p>
<p>本系列前两篇文章分别介绍了 <a target="_blank" rel="noopener" href="https://medium.com/interdax/how-will-schnorr-signatures-benefit-bitcoin-b4482cf85d40?source=friends_link&sk=9fa1f45b98593398fde0f356569321ff">Schnorr</a> 和 <a target="_blank" rel="noopener" href="https://medium.com/interdax/what-is-taproot-and-how-will-it-benefit-bitcoin-5c8944eed8da?source=friends_link&sk=c7fa27c66217e29acc30ccf1ec850694">Taproot</a>。</p>
<p><img src="//res.btcstudy.org/btcstudy/images/what-is-tapscript-and-how-will-it-benefit-bitcoin/2d-LDhg.png" alt="img"></p>
<p>﻿本文也将介绍如何激活比特币改进协议（BIP）、实现加入<a target="_blank" rel="noopener" href="http://bitcoin.org/">比特币</a>的升级。</p>
<h2 id="Tapscript（BIP-342）"><a href="#Tapscript（BIP-342）" class="headerlink" title="Tapscript（BIP 342）"></a>Tapscript（BIP 342）</h2><p><a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0342.mediawiki"><strong>BIP 342</strong></a> 的第 3 部分提出了一个叫作 <strong>Tapscript</strong> 的升级，作为对 Schnorr 和 Taproot 的补充。正如我们在<a target="_blank" rel="noopener" href="https://medium.com/interdax/how-will-schnorr-signatures-benefit-bitcoin-b4482cf85d40">第一篇介绍 Schnorr&#x2F;Taproot&#x2F;Tapscript 的文章</a>中所言，比特币脚本是用来定义比特币的花费规则的。</p>
<p>BIP 342 通过改进签名哈希方法让我们能够验证 taproot 脚本，支持添加操作码来增强比特币的智能合约功能，还更改了一些针对资源要求的限制。</p>
<h2 id="什么是操作码"><a href="#什么是操作码" class="headerlink" title="什么是操作码"></a>什么是操作码</h2><p>操作码（opcode）其实就是脚本语言或者说命令。这些命令可能会返回“TRUE”或“FALSE”，用于成功发送&#x2F;接收交易。</p>
<p>例如，这些命令会指定解锁脚本所需的签名数量。它们也会指明转账的比特币数量，以及收款方的地址。</p>
<p>操作码可以用来移除堆栈中的元素和执行计算，计算结果会被添加到堆栈上。别忘了，由于 Script 是基于堆栈的编程语言，Script 命令是有序执行的，从堆栈顶部开始，到底部结束。</p>
<h2 id="Tapscript-是什么"><a href="#Tapscript-是什么" class="headerlink" title="Tapscript 是什么"></a>Tapscript 是什么</h2><p><strong>Tapscript</strong> 是比特币编程语言 Script 的升级版，建立在 <em>Schnorr 签名的批量可验证性</em> 之上，并且让添加新功能变得更容易。</p>
<blockquote>
<p>不知道什么是批量验证？点击<a target="_blank" rel="noopener" href="https://medium.com/interdax/how-will-schnorr-signatures-benefit-bitcoin-b4482cf85d40">此处</a>，阅读我们介绍 Schnorr&#x2F;Taproot&#x2F;Tapscript 的第一篇文章。</p>
</blockquote>
<p>Tapscript 也是对 <a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki">BIP 341</a> 中提议的比特币脚本结构改进方案（Taproot）的补充。Taproot 需要更改的操作码正是 <a target="_blank" rel="noopener" href="https://github.com/sipa/bips/blob/bip-schnorr/bip-tapscript.mediawiki">BIP 342 </a>所关注的。</p>
<p>你还可以这么理解 Tapscript：想象一下 <a target="_blank" rel="noopener" href="https://medium.com/interdax/what-is-taproot-and-how-will-it-benefit-bitcoin-5c8944eed8da">Taproot</a> 的默克尔树，上面每个叶节点都是与所谓的叶子版本（类似 <a target="_blank" rel="noopener" href="https://help.interdax.com/hc/en-001/articles/360002667557-What-is-Segregated-Witness-SegWit-">SegWit</a> 的脚本版本控制）相结合的脚本。</p>
<p>但是，特殊之处在于，这些脚本不会在接收支付时显示，只会在花费时显示。不同的叶子节点可以有不同的版本，但是只有真正使用的那个版本才会被显示出来。Tapscript 是 Taproot 默克尔树叶子版本的建议版本 0。</p>
<p>相较传统比特币脚本和 SegWit 比特币脚本，Tapscript 在操作上大致相同，但是有些许差别：</p>
<ul>
<li><p><strong>签名操作码验证的是 <a target="_blank" rel="noopener" href="https://medium.com/interdax/how-will-schnorr-signatures-benefit-bitcoin-b4482cf85d40">Schnorr 签名</a>（而非 ECDSA 签名）</strong></p>
</li>
<li><p><strong>使用操作码<code>OP_CHECKSIGADD</code> 代替<a target="_blank" rel="noopener" href="https://help.interdax.com/hc/en-001/articles/360002545817-What-is-a-Multi-signature-Wallet-">多签</a>操作码 <code>OP_CHECKMULTISIG</code> 和<code>OP_CHECKMULTISIGVERIFY</code> ，结合 Schnorr ，将可实现批量签名验证</strong>。</p>
</li>
</ul>
<p>由于签名验证是比特币脚本中最占用 CPU 的操作，这些操作码至关重要，能够帮助基于 Schnorr 的多签方案提升效率。</p>
<p>目前，2&#x2F;3 多签交易的脚本如下所示：</p>
<pre><code class="java">
2 &lt;Public Key A&gt; &lt;Public Key B&gt; &lt;Public Key C&gt; 3 CHECKMULTISIG
</code></pre>
<p>有了 Taproot&#x2F;Tapscript，我们也可以通过批量可验证的方式创建 2&#x2F;3 多签交易，其脚本如下所示：</p>
<pre><code class="java">
&lt;A pubkey&gt; OP_CHECKSIG &lt;B pubkey&gt; OP_CSADD &lt;C pubkey&gt; OP_CHECKSIGADD OP_2 OP_EQUAL
</code></pre>
<ul>
<li><strong>许多操作码都被重新定义为<code>OP_SUCCESS</code> 操作码，无条件地让整个脚本有效，以便简化软分叉升级</strong>。</li>
</ul>
<p>相比当前机制中使用的<code>OP_NOP</code>，<code>OP_SUCCESS</code> 让添加新的操作码变得更容易。</p>
<p>Tapscript 让之前不可用的操作码从返回“FALSE”变成返回 “TRUE”。每当脚本中存在这些操作码时，你都可以无条件使用该脚本。这么做的优点是操作码可以被重新定义成任何东西，不需要向后兼容。</p>
<p>相比当前的 SegWit 版本控制，新的机制能够利用新的操作码扩展脚本，因此协调和使用起来要简单得多。因此，在新机制的帮助下，我们能轻而易举地将更有用的操作码添加到比特币脚本。</p>
<p>现有的 NOP 操作码的存在目的大概率是为了创建一种升级机制，让我们可以轻松将新的操作码添加至比特币的 Script 语言。</p>
<p>但是，到目前为止，NOP 操作码仅用于 <code>CHECKLOCKTIMEVERIFY</code> 和 <code>CHECKSEQUENCEVERIFY</code>。为了兼容软分叉，这些 NOP 操作码要么会导致异常，要么不进行任何操作。</p>
<p>由于重新定义了NOP（空操作），操作码 <code>CHECKLOCKTIMEVERIFY</code> 和 <code>CHECKSEQUENCEVERIFY</code> 无法通过任何方式修改堆栈。因此，这两个操作码不会从堆栈中弹出参数，这时用户必须使用 <code>OP_DROP</code> 。</p>
<p>为了解决操作码无作为（即，NOP）的问题，Tapscript 新引入了一种只会 “返回 TRUE” 的操作码 <code>OP_SUCCESS</code> 。这种操作码在获得实际用处之后才会被使用，而且前提是它们在网络上已经定义了的不可更改的语义。</p>
<p>这就导致被禁用以及未被定义过的操作码会“返回 TRUE”。之后，这些操作码可以被重新定义成任何东西，因为 “只会返回 TRUE” 的操作码可以兼容任何软分叉。</p>
<ul>
<li><strong>Tapscript 在签名哈希（<code>SIGHASH</code> ）的计算方式上有别于传统脚本和 BIP143 v0 SegWit</strong>。</li>
</ul>
<p>签名哈希是什么？简而言之，签名哈希是对比特币<a target="_blank" rel="noopener" href="https://bitcoin.org/en/glossary/signature">签名</a>的标记，表明<a target="_blank" rel="noopener" href="https://bitcoin.org/en/glossary/signature">签名</a>签署的是交易的哪些部分。</p>
<p>通过 scriptsig（解锁签名），签名能够证明你有权花费比特币。这类签名均通过特定方式构建，而且每个签名都会附加一个字节来注明签署交易的方式。现在的比特币中已经实现了一些<code>SIGHASH</code> 标记了。</p>
<p>最常用的标记是<code>SIGHASH_ALL</code>，表明除 scriptsig 之外的所有部分都被签署。而其余标记，比如<code>SIGHASH_ANYONECANPAY</code>，其使用前提是，只有当前输入被签署，而交易的其它部分均未被签署且不包含在承诺中。</p>
<p>为满足用户只签署交易的特定部分，以及注明想（以及不想）在哪些条件下花费比特币的需求，已经有很多人针对现有<code>SIGHASH</code>标记提出了改进建议，还提议了许多新的<code>SIGHASH</code>标记，其中就包括 <code>SIGHASH_NOINPUT</code>。</p>
<p>这些不同的<code>SIGHASH</code> 标记的工作原理时：屏蔽交易的不同部分。<code>SIGHASH_NOINPUT</code>标记的原理是，用户并不关心具体输入及其来源交易 ID，只关心转账数量。该标记是<a target="_blank" rel="noopener" href="https://bitcointechtalk.com/transaction-malleability-explained-b7e240236fc7">交易可</a><a target="_blank" rel="noopener" href="https://bitcointechtalk.com/transaction-malleability-explained-b7e240236fc7">变形</a><a target="_blank" rel="noopener" href="https://bitcointechtalk.com/transaction-malleability-explained-b7e240236fc7">问题的解决方案</a>，先于 SegWit（同样旨在解决交易可延展性问题）在 2015 年提出。但是，围绕着 <code>SIGHASH_NOINPUT</code>标记的担忧和风险，意味着比特币社区并没有采用它（但是 SegWit 再度向这一升级打开了大门）。</p>
<p><code>SIGHASH_NOINPUT</code>标记的主要优点是让<a target="_blank" rel="noopener" href="https://help.interdax.com/hc/en-001/articles/360002737698-What-is-the-Lightning-Network-">闪电网络</a>等方案的支付通道运作起来更简单。还有一项提案 <a target="_blank" rel="noopener" href="https://blockstream.com/eltoo.pdf">eltoo</a> 同样能够降低支付通道的使用难度，它会改变闪电网络运作方式：如果有一方试图提交已经失效的旧状态来关闭通道，不会再触发惩罚机制。</p>
<p>eltoo 需要我们改变比特币脚本，尤其要改变的是将签名应用于交易的方式（即，sighash 系统），让用户能够通过再平衡重新得到一个不同的输入。</p>
<p>尽管已有的一些 sighash 类型只是做出了轻微调整，但是 Schnorr&#x2F;Taproot&#x2F;Tapscript 提案不会提供任何类似 <a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0118.mediawiki">BIP 118</a>（即，<code>SIGHASH_NOINPUT</code> ）的东西（原因是人们已经讨论出了多种实现方式和安全保障措施。）</p>
<p>虽然不支持 <code>SIGHASH_NOINPUT</code> ，但是 Tapscript 提供了一些灵活机制（即，带标记的公钥），将来能够在不引入额外成本的情况下实现 <code>SIGHASH_NOINPUT</code> 功能。有了 Tapscript，我们今后就可以通过软分叉添加新的 sighash 类型或做出其它改变，以扩展签名检查操作码。</p>
<p>有了 Tapscript，即使是以未定义的字节为开头的公钥也会被自动视为有效。因此，无论是引入新型签名方案还是新型 sighash 方案，我们都无需添加新的 checksig 操作码。<code>SIGHASH_NOINPUT</code> 之类的标记能够直接作为一种新的公钥版本采用，不会产生额外成本。</p>
<ul>
<li><strong>Tapscript 将改变资源限制</strong>。</li>
</ul>
<p>例如，Tapscript 不仅能让比特币脚本摆脱目前 1 万字节的大小上限，还能解除操作码数量限制。</p>
<p>由于<code>scriptCode</code>并不直接包含在签名哈希中（而是通过可预计算的 tapleaf 哈希间接包含在内），签名校验所消耗的 CPU 时间不再与被执行的脚本大小成正比。</p>
<p>在 Tapscript 中，签名操作码的数量不计入 BIP141 或传统的<a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-discuss/2016-February/000049.html">签名操作码限制</a>。以往的签名操作码限制使得构建区块时的交易选择变得很麻烦，因为它在<a target="_blank" rel="noopener" href="https://en.bitcoinwiki.org/wiki/Block_weight">区块重量</a>的基础上增加了新的限制。相较之下，Tapscript 的签名操作码数量仅受限于见证数据的重量。</p>
<p>在 Tapscript 与 BIP 340&#x2F;341 的协力之下，比特币有望迎来更多有趣的应用。富有表达力的 Taproot 合约就是其中一例，它不仅能实现较为复杂的多方合约，还使基于比特币的 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Decentralized_autonomous_organization">DAO（去中心化自治组织）</a>成为可能。</p>
<h2 id="在比特币上激活-BIP-340-342"><a href="#在比特币上激活-BIP-340-342" class="headerlink" title="在比特币上激活 BIP 340 ~ 342"></a>在比特币上激活 BIP 340 ~ 342</h2><p><em>如何将升级添加到比特币协议中</em>？</p>
<p>BIP 提议者在提交 BIP 之后需要编写符合规范的代码，然后通过 pull request 提交代码。这一阶段过后，用户和开发者就该 pull request 进行投票。即使该 BIP 已经被合并到比特币协议内，用户也可以通过选择是否运行新的代码来表明自己的立场。</p>
<p>Schnorr&#x2F;Taproot&#x2F;Tapscript 升级目前正处于生态反馈阶段（如下图所示）。后续阶段需要编写代码，以便提交 pull request 和准备测试网。</p>
<p>尽管下图所示的流程是线性的，但是生态反馈和协议实现阶段之间可能会出现循环反馈（例如，规范在被翻译成代码时，提案可能会发生变化）。</p>
<p><img src="//res.btcstudy.org/btcstudy/images/what-is-tapscript-and-how-will-it-benefit-bitcoin/lmOZrzRnrhb" alt="img"></p>
<p style="text-align:center">- 如何将 BIP 添加到比特币协议中 -</p>


<p>正如我们在 2017 年的 SegWit 升级中所见，使用 BIP 9（需要 95% 的矿工表示支持） 可能会在生态系统中的不同参与者，包括开发者、用户和矿工之间引发利益争夺战。</p>
<p>有些人认为比特币矿工可能会利用 BIP 9 在比特币协议中获取优势。例如，SegWit 没有靠 BIP 9 得到激活，而是转向了 shaolinfry 创建的另一种激活方案，即，用户激活软分叉（<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0148.mediawiki">BIP 148</a>）。</p>
<p>为了激活 BIP 340~342，比特币开发者 Matt Carallo 吸取 SegWit 升级的经验教训，<a target="_blank" rel="noopener" href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2020-January/017547.html">提出了一个叫作“大共识清理（Great Consensus Clean Up）”</a>的解决方案。该提案集 <a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0008.mediawiki">BIP 8</a> 和 <a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0009.mediawiki">BIP 9</a> 之长：</p>
<ol>
<li><p>该激活方法在初期与标准的 BIP 9 部署流程无异（需要在 1 年内获得 95% 的矿工的支持）。</p>
</li>
<li><p>如果某个升级激活失败，社区有 6 个月的时间讨论失败原因。</p>
</li>
<li><p>用户也可以选择 BIP 8 部署流程，有两年的激活期限。</p>
</li>
</ol>
<p>该激活方法试图找到一个平衡点，既能遵从社区意愿，又能留出足够久的激活期限，确保对比特币协议所做的任何改动都不会产生负面影响。</p>
<p>激活时间尚不确定，因为不知道将这些提案编写成代码时是否会出现意想不到的问题。BIP 340~342 有望在 2020 年底激活，大概率会推迟。</p>
<p>Schnorr&#x2F;Taproot&#x2F;Tapscript 对比特币来说可谓是迄今为止最大刀阔斧的改革，有助于增强可扩展性、支出策略隐私性和智能合约的功能。虽然这些升级还需要两年乃至更久才有望实现大规模落地，但是它们会对比特币产生深远影响。</p>
<p>（完）</p>
</article></div></div></main><script src="/js/post.js?v=1675068536944"></script><script src="/js/highlight.min.js?v=1675068536944"></script><script>var containerEl = document.querySelector('.post-container');
var postFontSize = localStorage.getItem('post-font-size') || '16';
var inputEl = document.querySelector('#size-change-input');
var inputEl2 = document.querySelector('#size-change-input2');
inputEl.value = postFontSize;
inputEl2.value = postFontSize;
containerEl.style.fontSize = postFontSize + 'px';
$(function(){
  function setSizeChangeInputValue(size) {
    $('.post-container').css('font-size', size + 'px');
    localStorage.setItem('post-font-size', size);
    $('#size-change-input').val(size);
    $('#size-change-input2').val(size);
  }
  $('#size-change-input').on('input propertychange', function(e) {
    const size = e.target.value;
    setSizeChangeInputValue(size);
  });
  $('#size-change-input2').on('input propertychange', function(e) {
    const size = e.target.value;
    setSizeChangeInputValue(size);
  });
});
</script><script>hljs.initHighlightingOnLoad();</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com/btcstudy">Twitter</a><!-- Github--><!-- Ins--><!-- RSS--><a title="rss" target="_blank" rel="noopener nofollow" href="/atom.xml">rss</a><!-- 知乎--><!-- 领英--><!-- 脸书--><!-- Telegram--><a title="telegram" target="_blank" rel="noopener nofollow" href="//t.me/btcstudyorg">Telegram</a></section></footer><script async src="/js/buttons.js?v=1675068536944"></script><script async src="/js/index.js?v=1675068536944"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-JVCJ9XXG1Z');</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306";
  hm.async = true;
  hm.defer = true;
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
  </script></body></html>