<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><title>比特币网络全景图</title><meta name="keywords" content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name="description" content="比特币思想的中文集结地"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css?v=1675838663893"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/style/common/iconfont.css?v=1675838663893"><link rel="stylesheet" href="/style/base.css?v=1675838663893"><link rel="stylesheet" href="/style/common/helper.css?v=1675838663893"><link rel="stylesheet" href="/style/themes/animation.css?v=1675838663893"><script>function ready() {
  var bodyEl = document.querySelector('.body-container');
  var theme = localStorage.getItem('theme') || 'light';
  if (!['light', 'dark'].includes(theme)) {
    theme = 'light';
    localStorage.setItem('theme', 'light');
  }
  bodyEl.classList.remove('appearance-auto');
  bodyEl.classList.add('appearance-' + theme);
  quickInitialTheme();
}
function quickInitialTheme() {
  var theme = localStorage.getItem('theme') || 'light';
  var logoLightEl = document.querySelector('.logo-light');
  var logoDarkEl = document.querySelector('.logo-dark');
  
  var mLogoLightEl = document.querySelector('#mobile-header-logo > .logo-light');
  var mLogoDarkEl = document.querySelector('#mobile-header-logo > .logo-dark');
  var themeBtnEl = document.getElementById('theme-btn');
  
  var slideThemeLightEl = document.querySelector('.slide-theme-light');
  var slideThemeDarkEl = document.querySelector('.slide-theme-dark');
  
  document.body.classList.add(theme);
  if (theme === 'dark') {
    logoLightEl.classList.add('hidden');
    logoDarkEl.classList.remove('hidden');
    
    mLogoLightEl.classList.add('hidden');
    mLogoDarkEl.classList.remove('hidden');
    
    themeBtnEl.classList.remove('icon-icon_dark');
    themeBtnEl.classList.add('icon-icon_light');
    
    slideThemeLightEl.classList.remove('hidden');
  } else {
    slideThemeDarkEl.classList.remove('hidden');
  }
}
document.addEventListener("DOMContentLoaded", ready);</script><script src="/js/common.js?v=1675838663893"></script><script src="/js/libs/zepto.min.js"></script><link rel="stylesheet" href="/style/post.css?v=1675838663893"><link rel="stylesheet" href="/style/themes/highlight.css?v=1675838663893"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="BTC Study" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column" onload="initialTheme()"><div class="clip"></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id="header"><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href="/"><svg class="logo-light" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#000000"></path></g></g></g></svg><svg class="logo-dark hidden" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#FFFFFF"></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id="header-menu"><a class="is-inline-block header-activity mr-4" href="/">首页</a><a class="is-inline-block mr-4" href="/archives">全站目录</a><a class="is-inline-block mr-4" href="/tags">标签</a><a class="is-inline-block mr-4" href="/maps">地图</a><a class="is-inline-block mr-4" href="/mempool">mempool</a><a class="is-inline-block mr-4" target="_blank" rel="noopener" href="https://123btc.org/">123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id="change-size-btn"></i><div class="size-input-wrap"><div class="input-wrap"><input id="size-change-input" type="range" min="12" max="32" step="2"></div></div></div><i class="iconfont icon-icon_dark mr-1" id="theme-btn"></i><div class="search-wrap"><input class="pl-3" id="search-input" placeholder="请输入搜索关键词"><i class="iconfont icon-icon_search" id="search-input-btn"></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">比特币网络全景图</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id="change-size-btn2"></i><div class="size-input-wrap"><div class="input-wrap"><input id="size-change-input2" type="range" min="12" max="32" step="2"></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id="mobile-header"><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id="mobile-header-logo"><svg class="logo-light" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#000000"></path></g></g></g></svg><svg class="logo-dark hidden" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#FFFFFF"></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id="postTopicMobile"><p class="is-full-height">比特币网络全景图</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class="mobile-search-wrap"><div class="search-input"><input class="pl-3" id="mobile-search-input" placeholder="请输入搜索关键词"><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class="mobile-search-input-btn">搜 索</button></div></div></header><div class="mobile-slide-menu"><a class="header-activity" href="/">首页</a><a href="/archives">全站目录</a><a href="/tags">标签</a><a href="/maps">地图</a><a href="/mempool">mempool</a><a target="_blank" rel="noopener" href="https://123btc.org/">123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class="slide-menu-fontsize"><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1675838663893"> </script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E8%A6%81%E5%9B%9E%E7%AD%94"><span class="toc-text">简要回答</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8A%82%E7%82%B9%E7%B1%BB%E5%9E%8B"><span class="toc-text">节点类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E6%9C%89%E5%85%B3%E8%8A%82%E7%82%B9%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-text">其它有关节点的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%86%E8%8A%82%E7%82%B9%E4%BD%9C%E4%B8%BA%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">将节点作为服务器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%82%B9%E5%AF%B9%E7%82%B9%E8%BF%9E%E6%8E%A5%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-text">点对点连接的类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E5%85%B3%E4%BA%8E%E7%82%B9%E5%AF%B9%E7%82%B9%E8%BF%9E%E6%8E%A5%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-text">其它关于点对点连接的概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BA%E7%AB%99%E8%BF%9E%E6%8E%A5%E7%9A%84%E5%A4%9A%E6%A0%B7%E6%80%A7"><span class="toc-text">出站连接的多样性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AA%E4%BD%93%E5%B7%AE%E5%BC%82"><span class="toc-text">个体差异</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%B1%E5%8E%BB%E4%BF%A1%E4%BB%BB%E3%80%81%E6%96%AD%E5%BC%80%E8%BF%9E%E6%8E%A5%E5%92%8C%E6%8B%89%E9%BB%91"><span class="toc-text">失去信任、断开连接和拉黑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E5%92%8C%E7%99%BD%E5%90%8D%E5%8D%95"><span class="toc-text">权限和白名单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E5%AF%B9%E7%A7%B0%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7"><span class="toc-text">非对称的重要性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E6%99%AF%E5%9B%BE"><span class="toc-text">全景图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AE%BA"><span class="toc-text">结论</span></a></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id="postTitle">比特币网络全景图</h1><div class="page-author"><div class="is-flex is-flex-direction-row page-data mr-6"><img class="mr-1" src="//res.btcstudy.org/btcstudy/images/default_avatar.png" alt="Gloria Zhao"><div class="page-author-info"><strong>Gloria Zhao</strong><time class="has-text-grey" datetime="2022-07-20T10:09:41.000Z">2022-07-20</time></div></div><div class="is-flex"><a href="/tags/%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%97"><i class="page-tag mr-1 px-1">入门系列<!-- 订正图片路径--></i></a><a href="/tags/%E6%AF%94%E7%89%B9%E5%B8%81"><i class="page-tag mr-1 px-1">比特币<!-- 订正图片路径--></i></a><a href="/tags/%E7%82%B9%E5%AF%B9%E7%82%B9%E7%BD%91%E7%BB%9C"><i class="page-tag mr-1 px-1">点对点网络<!-- 订正图片路径--></i></a></div></div><article class="mt-4 post-content"><blockquote>
<p><em>作者：Gloria Zhao</em></p>
<p><em>来源：<a target="_blank" rel="noopener" href="https://medium.com/@gloriazhao/map-of-the-bitcoin-network-c6f2619a76f3">https://medium.com/@gloriazhao/map-of-the-bitcoin-network-c6f2619a76f3</a></em></p>
</blockquote>
<p>比特币网络常被描述为点对点（P2P）、分布式或去中心化的。它常被绘制成如下方所示的同构图：</p>
<p>﻿<img src="//res.btcstudy.org/btcstudy/images/map-of-the-bitcoin-network/939Nu2Q.png" alt="img"></p>
<p>或某个结构相似，但使用了不同表现的顶点和边的图，如下所示：</p>
<p><img src="//res.btcstudy.org/btcstudy/images/map-of-the-bitcoin-network/V49mOckNwcb" alt="img"></p>
<p>节点是什么？它们发挥什么作用？它们是服务器还是客户端，还是二者皆是？在不计其数的比特币软件中，哪些才算作节点？比特币网络中的所有参与者（用户、矿工、节点、钱包）彼此间是如何交互的？</p>
<p>本文用图解的方式阐明了比特币网络中节点相关的定义，并隐去了一些复杂内容。首先，我们根据 服务器&#x2F;客户端 的功能对不同节点进行分类，并描述它们之间的点对点连接关系。本文主要聚焦于枚举网络中存在的各种可能性，并不提供整个网络的统计数据。</p>
<h2 id="简要回答"><a href="#简要回答" class="headerlink" title="简要回答"></a>简要回答</h2><p>首先，顶点代表点对点网络中的节点，边代表两个节点之间的连接。节点类别可以根据节点服务其它节点和客户端的能力进行划分。节点可以充当服务器、客户端，或身兼二职。</p>
<p><strong>节点</strong> &#x3D; 实现<a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Protocol_documentation#Message_types">比特币点对点协议</a>的点对点网络上的参与者。节点只要遵守该协议就行，并不非得运行某个软件。</p>
<p><strong>点对点连接</strong> &#x3D; 网络连接直接在使用比特币点对点协议通信的两个节点之间建立。通常来说，如果一个节点对点连接到其它节点，后者就是前者的“对等节点”（反过来说也是）。</p>
<h2 id="节点类型"><a href="#节点类型" class="headerlink" title="节点类型"></a>节点类型</h2><p>从广义上来说，我们可以根据节点维护的状态及其可以提供的服务将节点分成 4 大类。</p>
<p><strong>全节点（完全验证节点）</strong>是能够验证交易和区块的节点。全节点不会在每次验证交易时都搜索区块数据库，而是会存储一些状态，即，UTXO（未花费交易输出，即，比特币）集合。</p>
<p>因此，比特币节点不必为了验证而存储完整的区块链副本，只要维护一些区块元数据和最新的 UTXO 集合即可。<strong>剪枝节点</strong>（pruning node）就是这么做的：它们会下载并处理新的区块以构建验证所需的数据库，然后删除之前的区块来节省磁盘空间。剪枝节点拥有所有信息并且可以验证所有新的区块和交易，因此它们同样是全节点。</p>
<p><strong>归档节点（Archive Node）</strong>是存储完整区块链副本的节点。归档节点能够验证待上链的交易和区块，查询任意历史区块和交易数据，包括那些与验证无关的数据（因此被命名为“归档”）。归档节点发挥至关重要的作用，因为新加入的节点需要同步完整历史才能成为全节点。为此，新节点必须从归档节点那里一个区块一个区块地下载历史。</p>
<p><strong>挖矿节点</strong> （Mining Node）是生成新区块的节点。挖矿节点需要维护一个未确认交易池，验证新的交易并通过解开 PoW 哈希难题（即，找到 nonce）来创建区块。挖矿节点通常要使用额外的硬件（即矿机）来帮助他们解开哈希难题或加入矿池。从技术上来说，矿池内也有非全节点，连接到管理矿池的全节点，帮助求解 PoW 难题而不进行任何验证（因此存在非全节点的挖矿节点）。</p>
<p><strong>轻客户端</strong>指不存储完全验证所需完整状态的节点，因为这类节点相信其它节点会这么做。轻客户端可能会为了验证自己的交易而存储少量数据，但是它们并不验证所有区块。在 Bitcoin Core 中，“轻客户端” 常被用作<strong>简易支付验证（SPV）节点</strong>的同义词，但是请勿将其与剪枝节点混淆。在某些语境下，这类客户端不被称为“节点”，因为【全】节点做的大多数事情它们都不做。</p>
<p>这几类节点的重叠情况如下图所示：</p>
<p><img src="//res.btcstudy.org/btcstudy/images/map-of-the-bitcoin-network/a6pWHSA.png" alt="img"></p>
<h2 id="其它有关节点的概念"><a href="#其它有关节点的概念" class="headerlink" title="其它有关节点的概念"></a>其它有关节点的概念</h2><p>有的节点还具备其它一些特征，影响到了它们在网络中的参与情况，但是这些节点并不相互孤立，也不游离于上述 4 类节点之外。鉴于比特币的去中心化特性和对可及性的需求，<strong>只要节点实现点对点协议并遵守共识规则</strong>，具体的实现细节和决定采用哪些特性均由节点运营者决定。</p>
<p><strong>初始化区块下载（IBD）</strong>：节点尚未追赶至当前区块高度，还在下载区块链的临时状态。发信号称自己存储了完整区块链副本的全节点可能仍处于 IBD 状态，能够提供的服务也有限（即，无法告诉你它们还没有同步到的交易的信息）。getblockchaininfo RPC 调用会返回节点是否处于 IBD 状态的信息。</p>
<p><strong>仅验证区块模式（Blocks Only Mode）</strong>：全节点只验证区块及区块内交易的非临时模式。在这种模式下，全节点不验证任何未确认交易（他们自己的交易除外），不维护交易池，并且要求对等节点不要将交易转发给自己。</p>
<p><strong>Bitcoin Core</strong>：最初由中本聪编写、现由多位贡献者维护的开源软件，可以在 <a target="_blank" rel="noopener" href="https://bitcoincore.org/">bitcoincore.org</a> 或<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin">比特币的 github 库</a>中找到。我们知道 Bitcoin Core 并非比特币点对点网络中唯一存在的软件。有的节点会运行自定义补丁来实现特定行为，有的节点可能会使用无法理解新型协议消息的旧版本 Bitcoin Core。重要的是，我们要认识到哪些新功能需要全网合作，不奢求所有节点都诚实守信、不会出错，并且考虑到节点运营者面对软件升级时犹豫拖延的情况。</p>
<p><strong>作恶</strong>：任何蓄意破坏网络的行为（不包括漏洞、网络因素或其它非蓄意行为）。比特币假设了一个高度敌对的环境，包括 DoS 攻击的可能性、意图进行双重花费的 女巫&#x2F;日蚀攻击、试图将地址去匿名化的间谍节点，等等。</p>
<h2 id="将节点作为服务器"><a href="#将节点作为服务器" class="headerlink" title="将节点作为服务器"></a>将节点作为服务器</h2><p>如上文所述，每个节点都 <em>依赖</em> 对等节点传播所需信息。此外，节点通常通过非点对点界面（如 RPC、HTTP&#x2F;REST 和 GUI）为大量用户和客户端软件提供服务。</p>
<p>以下是一些可能会使用节点作为服务器的非节点客户端示例：</p>
<ul>
<li><p><strong>用户</strong>运行节点来发送和接收比特币。</p>
</li>
<li><p>用于管理密钥、创建交易的<strong>钱包。</strong>有的钱包还会保存与密钥相关的部分 UTXO 状态，但是不会保存完整的区块链副本，而是依靠节点来获取最新信息。</p>
</li>
<li><p><strong>面向用户的软件服务和应用</strong>，例如，区块浏览器、交易所和通过全节点查询信息展示在网页或应用上的服务商。</p>
</li>
<li><p><strong>开发者</strong>在 regtest 模式下创建节点以便亲自测试功能和接口。</p>
</li>
<li><p><strong>面向开发者的软件</strong>，例如，SDK、API 和其它接口。例如，Bitcoin Core CLI（bitcoin-cli）使用 RPC 接口实现了命令行界面。</p>
</li>
</ul>
<p>虽然这些连接对于一个服务器节点的对等节点来说是不可见的，但是它们构成了比特币功能的重要部分。Bitcoin Core 开发者在开发新功能或决定支持哪些功能时都会充分考虑这些参与者。</p>
<p>既然我们已经了解了节点作为服务器和客户端分别发挥什么作用，下面我们放大看看节点的样子：</p>
<p><img src="//res.btcstudy.org/btcstudy/images/map-of-the-bitcoin-network/35u9gig.png" alt="img"></p>
<p style="text-align:center">- 简化后的节点视图 -</p>


<h2 id="点对点连接的类型"><a href="#点对点连接的类型" class="headerlink" title="点对点连接的类型"></a>点对点连接的类型</h2><p>比特币中的点对点连接都“说同一种语言”，因为它们都使用点对点协议进行通信，但是通信内容多种多样。Bitcoin Core 实现试图通过促进对等节点发现和管理连接来平衡稳定性（倾向于静态连接）和可及性（倾向于接受来自新节点的连接请求）。Bitcoin Core 根据连接的发起方式将连接分为三大类，通常会影响点对点关系的本质。</p>
<p><strong>出站</strong>：你的节点通过对等节点发现发起的自动连接。<a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Satoshi_Client_Node_Discovery">节点发现</a>首先会获取已有节点的 IP 地址列表，然后持续动态宣传你自己的地址，并尝试连接你知道的地址。你的节点可能会按需求（例如，在 IBD 状态下）优先选择能够提供特定服务（例如，提供过去的区块和交易）的连接。</p>
<p><strong>入站</strong>：你的对等节点向你的节点发起的自动连接（对于你的对等节点来说是出站连接）。为确保安全性，入站流量是默认关闭的，你需要完成一些网络和防火墙设置才能启用。</p>
<p><strong>手动</strong>：手动（例如，通过 CLI 或 RPC）而非自动发起的连接。你可能会因为想要连接自己信任的人所运行的节点或正在测试软件或需要控制连接而创建手动连接。</p>
<h2 id="其它关于点对点连接的概念"><a href="#其它关于点对点连接的概念" class="headerlink" title="其它关于点对点连接的概念"></a>其它关于点对点连接的概念</h2><h3 id="出站连接的多样性"><a href="#出站连接的多样性" class="headerlink" title="出站连接的多样性"></a><strong>出站连接的多样性</strong></h3><p>出站连接可以根据收到的信息和连接的持续时间作进一步细分。</p>
<p><strong>全转发</strong>出站连接可以交流一切信息，包括区块、交易和<a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Protocol_documentation#addr">地址</a>（用于寻找对等节点，类似 IP 地址，请勿将其与交易中使用的钱包地址混淆）。<strong>仅转发区块</strong>出站连接只接收区块，但不同于仅验证区块模式。全节点只与 1 到 2 个对等节点建立仅转发区块连接，与其它参与者建立全转发连接是再正常不过的事。</p>
<p><strong>一次性连接（One-Shot）</strong>和<strong>感知连接（Feeler）</strong>都是在节点发现过程中使用的临时出站连接。一次性连接用于请求可以找到新的对等节点的地址列表。感知连接用于验证一个地址是否对应真正的节点。</p>
<h3 id="个体差异"><a href="#个体差异" class="headerlink" title="个体差异"></a>个体差异</h3><p>正如上文所言，每个节点提供的服务可能不同，需要向对等节点请求的信息也有可能不同。每个连接都从版本握手开始，即，节点发送关于自己的信息（例如，最大区块高度），交涉想要对话的内容（例如，只对区块感兴趣）。连接也有可能因后续消息而发生变化，例如，节点可以通过<a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Protocol_documentation#feefilter">手续费过滤消息</a>来表示它们只愿意转发手续费不低于某个阈值的交易。</p>
<h3 id="失去信任、断开连接和拉黑"><a href="#失去信任、断开连接和拉黑" class="headerlink" title="失去信任、断开连接和拉黑"></a>失去信任、断开连接和拉黑</h3><p>Bitcoin Core 节点会追踪有恶意行为或运行失灵软件的节点。一旦发现有对等节点行为不当，节点可能会不再信任它们（标记其不当行为，甚至与之断开连接，连接新的对等节点），或者与之断开连接，或者拉黑。</p>
<h3 id="权限和白名单"><a href="#权限和白名单" class="headerlink" title="权限和白名单"></a>权限和白名单</h3><p>节点还会保存每个对等节点的权限列表，例如，对等节点提供的特定服务或对会被惩罚的不当行为的容忍度。每次连接的版本握手期间都会进行服务协商。自定义的个人轻客户端和由相互信任的人运行的节点都支持手动将不当行为添加至白名单。节点还可以将特定 IP 地址加入白名单。</p>
<h3 id="非对称的重要性"><a href="#非对称的重要性" class="headerlink" title="非对称的重要性"></a>非对称的重要性</h3><p>请注意，每个连接都是双向的，但是具有<strong>非对称性</strong>：发起方节点理解的可能是【全转发】出站连接、仅转发区块连接、感知连接或一次性连接，但是接收方节点看到的可能只是带有既定规则的入站连接。这是因为节点行为被模糊化，其内部机制或连接本质无法被揭露。</p>
<p>例如，如果一个节点知道其对等节点处于仅验证区块模式（即，拒绝所有待验证交易信息），就知道该对等节点发送给它的所有交易都来自该对等节点的钱包地址。但是，接收方地址实际上看到的只是关闭了交易转发的入站连接，无法区别这是仅验证区块模式、仅转发区块连接还是连接偏好。</p>
<p>更详细的节点视图（请注意箭头方向仅反映连接的发起方，而非表示通信不是双向的）如下图所示：</p>
<p><img src="//res.btcstudy.org/btcstudy/images/map-of-the-bitcoin-network/BQg9kfw.png" alt="img"></p>
<p style="text-align:center">- 较为复杂的节点视图 -</p>


<h2 id="全景图"><a href="#全景图" class="headerlink" title="全景图"></a>全景图</h2><p>每个节点掌握的网络信息都是有限的。节点实际上只能看到自己的对等节点，对等节点可能会谎报自己的节点类型。如果一个节点遭到了日蚀攻击，那么它的所有对等节点有可能都是由同一个人运行的。这有利于保护隐私性和安全性，因为攻击者也面临同样的情况。信息局限性会让发起有针对性的攻击变得更难。虽然节点可以通过建立大量的临时连接来大致了解网络中有多少节点，但是无法得到全面的信息。</p>
<p>例如，一个节点是否加入了矿池在网络上并非一目了然。在大致了解哪些节点属于矿池，并观察其出块情况后，一些网站能够生成<a target="_blank" rel="noopener" href="https://btc.com/stats/pool">算力比例</a>分析。但是这些分析可能具有误导性，因为一个实体有可能运行多组节点乃至多个矿池。</p>
<p>综上，我们可以想象出一个简化的网络图：</p>
<p><img src="//res.btcstudy.org/btcstudy/images/map-of-the-bitcoin-network/NK8Z7-g.png" alt="img"></p>
<p style="text-align:center">- 简化后的网络图 -</p>


<p>上图反映了多种 <em>可能性</em>，而非网络大小（过于庞大）或拓扑结构（是动态且不可知的）。请注意，有以下几种可能性：</p>
<ul>
<li><p>一个 Bitcoin Core 全节点通过非点对点接口连接至多个客户端，例如，一个用户从 bitcoincore.org 上下载软件并使用 CLI 或 GUI 发送和接收比特币。</p>
</li>
<li><p>轻客户端连接至尽可能多的全节点来为其客户端提供服务。</p>
</li>
<li><p>一个全节点服务于一个或多个轻客户端。有一种可能是某个比特币爱好者在利用一些云服务提供商及其个人设备上的轻量级应用运行一个全节点。</p>
</li>
<li><p>一个自定义全节点（例如，矿池管理者）通过点对点网络和私有网络连接至一组自定义轻客户端（例如，个人矿池参与者）。</p>
</li>
</ul>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>希望本文能够帮助读者更好地理解“节点”和“点对点网络”，以及网络中的参与者是如何进行交互的。我还希望能让读者了解 Bitcoin Core 是如何实现点对点连接来保护隐私性、让新节点加入网络的。感谢阅读！</p>
<p>感谢<a target="_blank" rel="noopener" href="https://medium.com/u/f172f16c0e36?source=post_page-----c6f2619a76f3--------------------------------"> John Newbery</a> 和 <a target="_blank" rel="noopener" href="https://medium.com/u/ac2f03ed1cfa?source=post_page-----c6f2619a76f3--------------------------------">Amiti Uttarwar</a> 不吝时间帮助我理解这部分知识。</p>
<p>（完）</p>
</article></div></div></main><script src="/js/post.js?v=1675838663893"></script><script src="/js/highlight.min.js?v=1675838663893"></script><script>var containerEl = document.querySelector('.post-container');
var postFontSize = localStorage.getItem('post-font-size') || '16';
var inputEl = document.querySelector('#size-change-input');
var inputEl2 = document.querySelector('#size-change-input2');
inputEl.value = postFontSize;
inputEl2.value = postFontSize;
containerEl.style.fontSize = postFontSize + 'px';
$(function(){
  function setSizeChangeInputValue(size) {
    $('.post-container').css('font-size', size + 'px');
    localStorage.setItem('post-font-size', size);
    $('#size-change-input').val(size);
    $('#size-change-input2').val(size);
  }
  $('#size-change-input').on('input propertychange', function(e) {
    const size = e.target.value;
    setSizeChangeInputValue(size);
  });
  $('#size-change-input2').on('input propertychange', function(e) {
    const size = e.target.value;
    setSizeChangeInputValue(size);
  });
});
</script><script>hljs.initHighlightingOnLoad();</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com/btcstudy">Twitter</a><!-- Github--><!-- Ins--><!-- RSS--><a title="rss" target="_blank" rel="noopener nofollow" href="/atom.xml">rss</a><!-- 知乎--><!-- 领英--><!-- 脸书--><!-- Telegram--><a title="telegram" target="_blank" rel="noopener nofollow" href="//t.me/btcstudyorg">Telegram</a></section></footer><script async src="/js/buttons.js?v=1675838663893"></script><script async src="/js/index.js?v=1675838663893"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-JVCJ9XXG1Z');</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306";
  hm.async = true;
  hm.defer = true;
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
  </script></body></html>