<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><title>图解闪电网络钱包的架构</title><meta name="keywords" content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name="description" content="比特币思想的中文集结地"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css?v=1675158167821"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/style/common/iconfont.css?v=1675158167821"><link rel="stylesheet" href="/style/base.css?v=1675158167821"><link rel="stylesheet" href="/style/common/helper.css?v=1675158167821"><link rel="stylesheet" href="/style/themes/animation.css?v=1675158167821"><script>function ready() {
  var bodyEl = document.querySelector('.body-container');
  var theme = localStorage.getItem('theme') || 'light';
  if (!['light', 'dark'].includes(theme)) {
    theme = 'light';
    localStorage.setItem('theme', 'light');
  }
  bodyEl.classList.remove('appearance-auto');
  bodyEl.classList.add('appearance-' + theme);
  quickInitialTheme();
}
function quickInitialTheme() {
  var theme = localStorage.getItem('theme') || 'light';
  var logoLightEl = document.querySelector('.logo-light');
  var logoDarkEl = document.querySelector('.logo-dark');
  
  var mLogoLightEl = document.querySelector('#mobile-header-logo > .logo-light');
  var mLogoDarkEl = document.querySelector('#mobile-header-logo > .logo-dark');
  var themeBtnEl = document.getElementById('theme-btn');
  
  var slideThemeLightEl = document.querySelector('.slide-theme-light');
  var slideThemeDarkEl = document.querySelector('.slide-theme-dark');
  
  document.body.classList.add(theme);
  if (theme === 'dark') {
    logoLightEl.classList.add('hidden');
    logoDarkEl.classList.remove('hidden');
    
    mLogoLightEl.classList.add('hidden');
    mLogoDarkEl.classList.remove('hidden');
    
    themeBtnEl.classList.remove('icon-icon_dark');
    themeBtnEl.classList.add('icon-icon_light');
    
    slideThemeLightEl.classList.remove('hidden');
  } else {
    slideThemeDarkEl.classList.remove('hidden');
  }
}
document.addEventListener("DOMContentLoaded", ready);</script><script src="/js/common.js?v=1675158167821"></script><script src="/js/libs/zepto.min.js"></script><link rel="stylesheet" href="/style/post.css?v=1675158167821"><link rel="stylesheet" href="/style/themes/highlight.css?v=1675158167821"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="BTC Study" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column" onload="initialTheme()"><div class="clip"></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id="header"><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href="/"><svg class="logo-light" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#000000"></path></g></g></g></svg><svg class="logo-dark hidden" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#FFFFFF"></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id="header-menu"><a class="is-inline-block header-activity mr-4" href="/">首页</a><a class="is-inline-block mr-4" href="/archives">全站目录</a><a class="is-inline-block mr-4" href="/tags">标签</a><a class="is-inline-block mr-4" href="/maps">地图</a><a class="is-inline-block mr-4" href="/mempool">mempool</a><a class="is-inline-block mr-4" target="_blank" rel="noopener" href="https://123btc.org/">123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id="change-size-btn"></i><div class="size-input-wrap"><div class="input-wrap"><input id="size-change-input" type="range" min="12" max="32" step="2"></div></div></div><i class="iconfont icon-icon_dark mr-1" id="theme-btn"></i><div class="search-wrap"><input class="pl-3" id="search-input" placeholder="请输入搜索关键词"><i class="iconfont icon-icon_search" id="search-input-btn"></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">图解闪电网络钱包的架构</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id="change-size-btn2"></i><div class="size-input-wrap"><div class="input-wrap"><input id="size-change-input2" type="range" min="12" max="32" step="2"></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id="mobile-header"><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id="mobile-header-logo"><svg class="logo-light" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#000000"></path></g></g></g></svg><svg class="logo-dark hidden" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#FFFFFF"></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id="postTopicMobile"><p class="is-full-height">图解闪电网络钱包的架构</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class="mobile-search-wrap"><div class="search-input"><input class="pl-3" id="mobile-search-input" placeholder="请输入搜索关键词"><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class="mobile-search-input-btn">搜 索</button></div></div></header><div class="mobile-slide-menu"><a class="header-activity" href="/">首页</a><a href="/archives">全站目录</a><a href="/tags">标签</a><a href="/maps">地图</a><a href="/mempool">mempool</a><a target="_blank" rel="noopener" href="https://123btc.org/">123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class="slide-menu-fontsize"><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1675158167821"> </script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E7%BB%93%E8%AE%BA"><span class="toc-text">文章结论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B2%A1%E4%BB%80%E4%B9%88%E6%AF%94%E8%8D%89%E6%A0%B9%E8%BF%90%E5%8A%A8%E6%9B%B4%E5%BC%BA%E5%A4%A7%E7%9A%84%E4%BA%86"><span class="toc-text">没什么比草根运动更强大的了</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AA%E7%94%B5%E7%BD%91%E7%BB%9C%E9%92%B1%E5%8C%85%E7%9A%84%E5%BC%80%E5%8F%91"><span class="toc-text">闪电网络钱包的开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AA%E7%94%B5%E7%BD%91%E7%BB%9C%E9%92%B1%E5%8C%85%E7%9A%84%E6%9E%B6%E6%9E%84"><span class="toc-text">闪电网络钱包的架构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%89%E9%97%AA%E7%94%B5%E7%BD%91%E7%BB%9C%E5%85%A8%E8%8A%82%E7%82%B9"><span class="toc-text">1）闪电网络全节点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%89%E4%B8%8D%E5%AE%8C%E6%95%B4%E8%8A%82%E7%82%B9"><span class="toc-text">2）不完整节点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%EF%BC%89%E6%89%98%E7%AE%A1%E5%9E%8B%E9%92%B1%E5%8C%85"><span class="toc-text">3）托管型钱包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%EF%BC%89%E4%BA%92%E6%8D%A2%E6%9C%8D%E5%8A%A1"><span class="toc-text">4）互换服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%EF%BC%89%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6%E8%8A%82%E7%82%B9%E9%92%B1%E5%8C%85"><span class="toc-text">5）远程控制节点钱包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AE%BA"><span class="toc-text">结论</span></a></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id="postTitle">图解闪电网络钱包的架构</h1><div class="page-author"><div class="is-flex is-flex-direction-row page-data mr-6"><img class="mr-1" src="//res.btcstudy.org/btcstudy/images/default_avatar.png" alt="Veriphi"><div class="page-author-info"><strong>Veriphi</strong><time class="has-text-grey" datetime="2022-01-13T09:20:53.000Z">2022-01-13</time></div></div><div class="is-flex"><a href="/tags/%E5%85%A5%E9%97%A8%E7%B3%BB%E5%88%97"><i class="page-tag mr-1 px-1">入门系列<!-- 订正图片路径--></i></a><a href="/tags/%E9%97%AA%E7%94%B5%E7%BD%91%E7%BB%9C"><i class="page-tag mr-1 px-1">闪电网络<!-- 订正图片路径--></i></a></div></div><article class="mt-4 post-content"><blockquote>
<p><em>作者：Veriphi</em></p>
<p><em>来源：<a target="_blank" rel="noopener" href="https://www.veriphi.io/en/blog/lightning-wallet-architecture">https://www.veriphi.io/en/blog/lightning-wallet-architecture</a></em></p>
</blockquote>
<h2 id="文章结论"><a href="#文章结论" class="headerlink" title="文章结论"></a>文章结论</h2><p>Veriphi 建议使用的闪电网络钱包：</p>
<ol>
<li>Phoenix：闪电网络最好的入门钱包</li>
<li>Zap：适合高级用户的钱包，具备桌面版和移动版</li>
<li>RTL：适和高级用户，桌面版且适合用于商务</li>
</ol>
<h2 id="没什么比草根运动更强大的了"><a href="#没什么比草根运动更强大的了" class="headerlink" title="没什么比草根运动更强大的了"></a>没什么比草根运动更强大的了</h2><p>光靠钱袋，行之不远，“区块链” 和山寨币已经获得了<strong>数十亿美元</strong>的融资。但他们做成了什么事呢？乏善可陈。比特币已经带来了历史上最大的货币革命，而且至今每周都在发生技术和市场的突破。开发者生态的热情是自下而上的、真挚无比的。</p>
<p>到了什么程度呢？我要不要提醒你一下，所有的事情都肇始于一个以 “中本聪” 为假名的人，TA 拥有价值<strong>几十亿美元</strong>的比特币，但 TA 永远不会去动用，其真实身份也永远不会揭开。还有比这更草根的吗？</p>
<p><img src="//res.btcstudy.org/btcstudy/images/lightning-wallet-architecture/Fm8tvVMwPwe" alt="img"></p>
<p style="text-align:center">- 一个笑话（译者注：图中文字意为 “发明了比特币并挖出了 100 万个币，但弄丢了私钥并因为害怕嘲笑而保持匿名”—— 它假想了中本聪是这样一个倒霉蛋） -</p>


<p>往事如烟。如今，数十位技术高超的开发者持续在软件、密码学或概念层面创新，没有谁担保他们一定可以得到经济回报。<strong>真正的创新只能发自对科学的热爱而不是对名利的追逐</strong>。讽刺的是，比特币是唯一一个利用软件开发来实现货币开发的现实案例，其自身就是一场革命。</p>
<p>尽管许多人愿意不要报酬，但他们不该得到这样的待遇，我们也不会辜负他们。Blockstream 自 2014 年以来一直在雇佣开发者为开源项目工作，许多公司也正在加入。在 2020 年，出现了许多不同来源的开发者奖金，甚至有来自人权基金会（<a target="_blank" rel="noopener" href="https://hrf.org/programs_posts/devfund/">Human Rights Foundation</a>）的，他们给 Chris Belcher 奖励了 5 万美元，因后者在 CoinSwap（一种隐私技术）上的工作。有关隐私技术，过几个星期我会专门写一篇文章。</p>
<p><img src="//res.btcstudy.org/btcstudy/images/lightning-wallet-architecture/dhnv0x-Hwur" alt="img"></p>
<h2 id="闪电网络钱包的开发"><a href="#闪电网络钱包的开发" class="headerlink" title="闪电网络钱包的开发"></a>闪电网络钱包的开发</h2><p>今天我们来谈谈闪电网络钱包的生态，从中也可以看到比特币生态的草根开源创新带来的强大驱动力。我们已经在<a target="_blank" rel="noopener" href="https://docs.google.com/spreadsheets/d/1jzJ2Vut6q-cbr7bg3tshqJszJFLXpvi194os7GxQQ30/edit#gid=1531699029">这个网站</a>上发布了最完整的闪电钱包功能比较，从中你可以看到 55 个细分功能。</p>
<p>这些数据是很有用的，但它在一张表格中塞进了大量信息，所以虽然很全面，对大部分用户来说却不够直观。<strong>如果你想更进一步第了解闪电钱包是怎么工作的、他们的架构以及用户体验有何不同，这篇文章就是为你准备的。</strong></p>
<h2 id="闪电网络钱包的架构"><a href="#闪电网络钱包的架构" class="headerlink" title="闪电网络钱包的架构"></a>闪电网络钱包的架构</h2><p>下面是一张对不同类别的闪电网络钱包的图解。它需要托管吗？需要使用外部得节点吗？还是说它是个中介？这些问题都可以用许多案例和我们提到的平台了解答。</p>
<p><img src="//res.btcstudy.org/btcstudy/images/lightning-wallet-architecture/ning-2-.png" alt="img"></p>
<p>这是对上图所有信息和 5 种钱包分类的文字描述。</p>
<h3 id="1）闪电网络全节点"><a href="#1）闪电网络全节点" class="headerlink" title="1）闪电网络全节点"></a><strong>1）闪电网络全节点</strong></h3><p>闪电网络就像比特币一样，是一个点对点的网络，由许多节点组成。不过，与比特币不同的是，它没有全局共识机制，所以节点更加模块化，而且可以在彼此之间发送事务而不让其它节点知晓。重要的是记住，在这种闪电钱包中使用的私钥是由连接到网络的节点持有的。</p>
<p><strong>这个类别中的钱包都有完整的闪电网络节点，完全独立地在闪电网络中运行，不需要其它节点或服务器的协助。</strong></p>
<p>如上所述，私钥由节点持有，所以是完全处在用户的控制下的。闪电网络全节点也具有下列属性：</p>
<ul>
<li>私钥管理</li>
<li>网络结构图</li>
<li>连接到一个比特币全节点</li>
<li>通道管理，开启、关闭和强制关闭通道</li>
<li>交易和流动性处理</li>
<li>对等节点连接</li>
<li>接收支付</li>
</ul>
<p>同样地，autopilot 是基于 LND 闪电网络实现的全节点钱包（比如 Zap 和 Lightning App）中常用的功能模块。这类钱包需要承担更多的交易对手方风险，因为你的交易对手可能会欺诈你。这也是为什么 Lightning App 和 Electrum 提供了方便连接到一个瞭望塔（Watchtower）的功能。</p>
<p>私钥管理是另一项责任，闪电网络的私钥不像比特币私钥那么简单。静态的通道备份是有风险的，因为如果有更新的通道状态存在，而你恢复出来的是一个比较旧的状态，你的通道对手有可能会认为你是在欺诈，如果他能公开一个更新的状态，你在通道中所有的比特币都会被他拿走。这些钱包也会让你备份你的私钥，就像普通的、使用助记词的比特币钱包一样。</p>
<p>下面是这类钱包中最流行的几个：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://play.google.com/store/apps/details?id=fr.acinq.eclair.wallet.mainnet2">Eclair</a>。可以在所有桌面平台上作为闪电网络全节点来使用，有图形界面和命令行的版本；但最适合日常使用的是其安卓版本。它也是一个完整的比特币钱包，你可以用它来连接你自己的比特币全节点（通过一个 Electrum 服务器）。它是用 ACINQ 语言开发的。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/lightninglabs/lightning-app">Lightning App</a>。Linghtning Labs 在 2019 年推出了 Lightning App，在桌面和手机平台上基本都可用。这是用 Javascript 语言开发的，它使用 <a target="_blank" rel="noopener" href="https://bitcoinmagazine.com/articles/neutrino-privacy-preserving-light-wallet-protocol">Neutrino</a> 作为比特币全节点。</li>
<li><a target="_blank" rel="noopener" href="http://zaphq.io/">Zap</a>。Zap 最好用的闪电网络钱包之一，基于 LND 闪电网络实现。它也是用 Javascript 语言开发的，提供了很棒的用户界面，而且会在下一个版本中添加 <a target="_blank" rel="noopener" href="https://wiki.ion.radar.tech/tech/research/sphinx-send">Keysend</a> 功能。</li>
<li><a target="_blank" rel="noopener" href="http://electrum.org/">Electrum</a>。Electrum 是最好的比特币钱包之一，适合长期持币、搭配硬件钱包和多签名方案使用。从 2019 年开始，他们一直在开发自己的闪电钱包实现。现在已经在<a target="_blank" rel="noopener" href="https://github.com/spesmilo/electrum">这个 Github 库的主分支</a>里面了。只支持桌面版。</li>
</ul>
<h3 id="2）不完整节点"><a href="#2）不完整节点" class="headerlink" title="2）不完整节点"></a>2）不完整节点</h3><p>在业界，众所周知的是，当前的闪电网络全节点责任（尤其是私钥和通道管理）让用户的体验变差。吸引新用户进入需要教育他们，来解答他们的诸多疑惑，比如：</p>
<ul>
<li>为什么我明明跟一个对等节点开了通道，但是没法收到资金？</li>
<li>为什么我明明开了一个通道，却无法发送资金给网络上的那个谁？</li>
<li>为什么我要在谷歌云盘上备份我的通道呢？</li>
<li>为什么节点启动之前要加载好几分钟？</li>
<li>为什么要等半个小时才能在闪电网络上发交易？</li>
</ul>
<p>许多开发者团队都采取了不同的办法来解决这个问题。<strong>他们希望通过提供更好的用户体验来简化新用户的入门流程，而这需要技术上的取舍和用户的更多信任</strong>。</p>
<p>以下是几个在不完整节点钱包中已经作出的取舍：</p>
<ul>
<li>如果闪电网络的网络结构图不存储在钱包内，钱包就能立即加载完成，只不过要依赖一个外部的节点（他人的节点）。</li>
<li>如果用户要恢复闪电钱包，其对手方（在这里就是钱包的开发者）愿意直接把最新的通道状态发给他们，他们就不需要担心通道备份的问题。</li>
<li>如果通道管理完全由钱包开发者来做，用户就可以发送资金给任何人，无需担心支付路径的问题。</li>
<li>如果钱包开发者跟用户开启了一个零确认的通道，用户就可以直接发交易。</li>
</ul>
<p>不完整节点钱包总是需要一个外部的服务器或者节点。钱包与服务器之间的连接可以用传统的 “服务器-客户端” HTTP REST API 配置，也可以通过闪电网络点对点网络。</p>
<p>一些例子：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://lightning-wallet.com/">BLW</a>。几乎也是一个闪电网络全节点，但它依赖于一个 Olympus 服务器来获得闪电网络结构图（强制性的）以及瞭望塔（watchtower）功能（可选）。</li>
<li><a target="_blank" rel="noopener" href="https://breez.technology/">Breez</a>。Breez（公司）跟每个使用了钱包的用户都开启了一个通道，来协助用户进入，并且完全移除了用户自己管理通道的责任。用户只需保存通道到自己的云盘（Google Drive 或者 iCloud），但私钥是无法备份的，因为 Breez 完全是一个闪电钱包（译者注：不是一个比特币钱包）。</li>
<li><a target="_blank" rel="noopener" href="http://phoenix.acinq.co/">Phoenix</a>。Phoenix 是用 ACINQ 开发的，开发者跟流行的 Eclair 钱包的是同一群。个人意见，Phoenix 是在用户体验上做得最好的闪电钱包（不考虑自主权的话）。没有通道管理功能，因为用户只使用 ACINQ 连接，只有助记词需要备份，所以也没有通道备份功能。通道无需等待区块确认就可以开始使用，而且你可以通过一个互换服务来支付链上的手续费。</li>
</ul>
<h3 id="3）托管型钱包"><a href="#3）托管型钱包" class="headerlink" title="3）托管型钱包"></a><strong>3）托管型钱包</strong></h3><p>跟比特币一样，闪电网络也有托管型钱包，它的用户体验会跟支付类应用比如 Venmo 和支付宝一样，因为它们都可以即时收发资金。这些钱包都有很大的安全性和隐私风险，但至少允许用户更快上手。</p>
<p>在只有闪电网络全节点钱包的时候，托管行钱包看起来是个挺好的解决方案，但现在，我们已经拥有了许多其它类型的钱包，尤其是不完整节点钱包（比如 Phoenix），其上手流程跟托管型钱包一样平滑，还没有对手方风险。</p>
<p><strong>Veriphi 不建议在大多数敏感场合使用托管钱包，闪电钱包也不例外</strong>。以下是一些托管型闪电钱包的例子：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://bluewallet.io/">Blue Wallet </a>。它本身是一种很棒的比特币钱包，可能是除了 Blockstream 开发的 <a target="_blank" rel="noopener" href="https://www.veriphi.io/lightning-wallet-architecture/blockstream.com/green">Green Wallet</a> 以外，最好用的移动端钱包，在 iOS 和安卓系统上都可以用。他们提供了一种定制化的闪电钱包，该钱包默认是托管模式的，不过其后端的代码是完全开源的（钱包也是），所以你也可以拿它用作远程控制钱包。后端是 <a target="_blank" rel="noopener" href="https://github.com/BlueWallet/LndHub">LNDHub</a>，用了它，你就可以运行自己的银行了。</li>
<li><a target="_blank" rel="noopener" href="https://www.walletofsatoshi.com/">Wallet of Satoshi </a>。最流行的闪电钱包之一，在两种手机平台上都可用。是完全闭源的。</li>
<li><a target="_blank" rel="noopener" href="https://telegram.me/lntxbot">LNtxbot</a>。这是一款有趣的托管钱包，因为它是作为一个 Telegram 机器人运行在你的 Telegram 聊天应用中的。它开启了一种新的用户场景：通过 Telegram 来发送聪（比特币的最小单位）。最终可能会被闪电网络原生的聊天应用如 <a target="_blank" rel="noopener" href="https://www.veriphi.io/lightning-wallet-architecture/sphinx.chat">Sphinx</a> 取代。</li>
</ul>
<h3 id="4）互换服务"><a href="#4）互换服务" class="headerlink" title="4）互换服务"></a>4）互换服务</h3><p><strong>能不能做到我在链上给你发送比特币，你在闪电网络中付一笔钱给我呢</strong>？可以的，这种交易形式叫做 “互换（Swap）”，其免信任的形式则叫 “潜水艇互换（<a target="_blank" rel="noopener" href="https://blockonomi.com/submarine-swaps/">Submarine Swap</a>）”。Lightning Labs 已经在去年推出了一个互换服务 API，叫做 “<a target="_blank" rel="noopener" href="https://lightning.engineering/loop">Lightning Loop</a>”，它也成了内置在钱包中的一个功能。</p>
<ul>
<li>Muun Wallet。这是一种链上钱包，从客户端的代码上完全看不出跟闪电网络有关。但是，你可以跟钱包开发者公司的服务器做一次互换，来支付闪电网络的发票。这个支付稍后会通过他们的节点在闪电网络中执行，完全不需要你连接闪电网络。在这种类别的钱包和服务中，闪电网络完全被抽象掉了。</li>
</ul>
<h3 id="5）远程控制节点钱包"><a href="#5）远程控制节点钱包" class="headerlink" title="5）远程控制节点钱包"></a>5）远程控制节点钱包</h3><p>如果你想通过浏览器来使用闪电网络，你要么使用完全托管的方案，要么就得使用远程控制节点钱包，这种钱包只是一个节点的前端管理界面。你甚至可以通过一个手机 app 来远程控制你自己的节点。</p>
<p>闪电网络全节点钱包是非常有用的，但因为它们是作为整体构建的，用户体验就只能那样。<strong>许多高级用户都喜欢在专用服务器或者迷你电脑上 7 * 24 小时运行自己的闪电网络全节点</strong>。实际上这是很容易的事，有即插即用的解决方案，比如 <a target="_blank" rel="noopener" href="https://www.veriphi.io/lightning-wallet-architecture/mynodebtc.com">MyNode</a> 和 <a target="_blank" rel="noopener" href="https://www.veriphi.io/lightning-wallet-architecture/nodl.it">Nodl</a>。</p>
<p>案例：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://zeusln.app/">Zeus</a>。在安卓平台运行的钱包，你可以用它来连接许多后端，比如 LND、c-lightning、LNDConnect 和 BTCPay Server。它刚刚加入了 Keysend 功能。</li>
<li>Spark。Spark 有多种形式，既有自主托管的 Web 应用，也有 iOS 和安卓平台上的手机 app，也有桌面版。它需要一个 NodeJS Spark 服务器来连接到 c-lighning。</li>
<li>RTL。可以作为一个自主托管的 Web 应用跟 AngularJS 一起使用，它提供了最高级的接口来管理你的闪电节点。如果你安装了 BTCPay Server，它是自带了 RTL 的。你也可以用它来连接 LND 和 c-lightning，对 ptarmigan 和 Eclair 的支持也在开发中了。</li>
</ul>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>闪电网络上还有很多工作和新功能要做，比如 KeySend 和 <a target="_blank" rel="noopener" href="https://www.coindesk.com/multi-part-payments-could-bring-bigger-bitcoin-sums-to-lightning-network">MPP</a>（多路径支付），以在近期内来提升和改善用户的体验。<strong>明年，重大的变更比如 Eltoo 将革新闪电网络协议，最终会将闪电网络全节点钱包的用户体验变得更加完美，更不需要折中。</strong></p>
<p>幸运的是，在比特币网络需要闪电网络的时候（比特币价格到达几万美元且手续费非常高的时候），用户有许多选择。<a target="_blank" rel="noopener" href="https://medium.com/@squarecrypto/what-were-building-lightning-development-kit-1ed58b0cab06">Square Crypto 正致力于通过推出他们的闪电钱包移动端 SDK 来帮助整个社区实现这个目标</a>。</p>
<p><strong>目前，Veriphi 建议你这样选择闪电钱包：</strong></p>
<ol>
<li>Phoenix：闪电网络最好的入门钱包</li>
<li>Zap：适合高级用户的钱包，具备桌面版和移动版</li>
<li>RTL：适和高级用户，桌面版且适合用于商务</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://www.veriphi.io/lightning-wallet-architecture/twitter.com/GustavoJ_Flores"><strong>有任何疑问或反馈，都请在 Twitter 上联系我</strong></a>。</p>
<p>（完）</p>
</article></div></div></main><script src="/js/post.js?v=1675158167821"></script><script src="/js/highlight.min.js?v=1675158167821"></script><script>var containerEl = document.querySelector('.post-container');
var postFontSize = localStorage.getItem('post-font-size') || '16';
var inputEl = document.querySelector('#size-change-input');
var inputEl2 = document.querySelector('#size-change-input2');
inputEl.value = postFontSize;
inputEl2.value = postFontSize;
containerEl.style.fontSize = postFontSize + 'px';
$(function(){
  function setSizeChangeInputValue(size) {
    $('.post-container').css('font-size', size + 'px');
    localStorage.setItem('post-font-size', size);
    $('#size-change-input').val(size);
    $('#size-change-input2').val(size);
  }
  $('#size-change-input').on('input propertychange', function(e) {
    const size = e.target.value;
    setSizeChangeInputValue(size);
  });
  $('#size-change-input2').on('input propertychange', function(e) {
    const size = e.target.value;
    setSizeChangeInputValue(size);
  });
});
</script><script>hljs.initHighlightingOnLoad();</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com/btcstudy">Twitter</a><!-- Github--><!-- Ins--><!-- RSS--><a title="rss" target="_blank" rel="noopener nofollow" href="/atom.xml">rss</a><!-- 知乎--><!-- 领英--><!-- 脸书--><!-- Telegram--><a title="telegram" target="_blank" rel="noopener nofollow" href="//t.me/btcstudyorg">Telegram</a></section></footer><script async src="/js/buttons.js?v=1675158167821"></script><script async src="/js/index.js?v=1675158167821"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-JVCJ9XXG1Z');</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306";
  hm.async = true;
  hm.defer = true;
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
  </script></body></html>