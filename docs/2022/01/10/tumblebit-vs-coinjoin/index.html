<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><title>TumbleBit vs CoinJoin</title><meta name="keywords" content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name="description" content="比特币思想的中文集结地"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css?v=1676085091472"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/style/common/iconfont.css?v=1676085091472"><link rel="stylesheet" href="/style/base.css?v=1676085091472"><link rel="stylesheet" href="/style/common/helper.css?v=1676085091472"><link rel="stylesheet" href="/style/themes/animation.css?v=1676085091472"><script>function ready() {
  var bodyEl = document.querySelector('.body-container');
  var theme = localStorage.getItem('theme') || 'light';
  if (!['light', 'dark'].includes(theme)) {
    theme = 'light';
    localStorage.setItem('theme', 'light');
  }
  bodyEl.classList.remove('appearance-auto');
  bodyEl.classList.add('appearance-' + theme);
  quickInitialTheme();
}
function quickInitialTheme() {
  var theme = localStorage.getItem('theme') || 'light';
  var logoLightEl = document.querySelector('.logo-light');
  var logoDarkEl = document.querySelector('.logo-dark');
  
  var mLogoLightEl = document.querySelector('#mobile-header-logo > .logo-light');
  var mLogoDarkEl = document.querySelector('#mobile-header-logo > .logo-dark');
  var themeBtnEl = document.getElementById('theme-btn');
  
  var slideThemeLightEl = document.querySelector('.slide-theme-light');
  var slideThemeDarkEl = document.querySelector('.slide-theme-dark');
  
  document.body.classList.add(theme);
  if (theme === 'dark') {
    logoLightEl.classList.add('hidden');
    logoDarkEl.classList.remove('hidden');
    
    mLogoLightEl.classList.add('hidden');
    mLogoDarkEl.classList.remove('hidden');
    
    themeBtnEl.classList.remove('icon-icon_dark');
    themeBtnEl.classList.add('icon-icon_light');
    
    slideThemeLightEl.classList.remove('hidden');
  } else {
    slideThemeDarkEl.classList.remove('hidden');
  }
}
document.addEventListener("DOMContentLoaded", ready);</script><script src="/js/common.js?v=1676085091472"></script><script src="/js/libs/zepto.min.js"></script><link rel="stylesheet" href="/style/post.css?v=1676085091472"><link rel="stylesheet" href="/style/themes/highlight.css?v=1676085091472"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="BTC Study" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column" onload="initialTheme()"><div class="clip"></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id="header"><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href="/"><svg class="logo-light" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#000000"></path></g></g></g></svg><svg class="logo-dark hidden" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#FFFFFF"></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id="header-menu"><a class="is-inline-block header-activity mr-4" href="/">首页</a><a class="is-inline-block mr-4" href="/archives">全站目录</a><a class="is-inline-block mr-4" href="/tags">标签</a><a class="is-inline-block mr-4" href="/maps">地图</a><a class="is-inline-block mr-4" href="/mempool">mempool</a><a class="is-inline-block mr-4" target="_blank" rel="noopener" href="https://123btc.org/">123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id="change-size-btn"></i><div class="size-input-wrap"><div class="input-wrap"><input id="size-change-input" type="range" min="12" max="32" step="2"></div></div></div><i class="iconfont icon-icon_dark mr-1" id="theme-btn"></i><div class="search-wrap"><input class="pl-3" id="search-input" placeholder="请输入搜索关键词"><i class="iconfont icon-icon_search" id="search-input-btn"></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">TumbleBit vs CoinJoin</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id="change-size-btn2"></i><div class="size-input-wrap"><div class="input-wrap"><input id="size-change-input2" type="range" min="12" max="32" step="2"></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id="mobile-header"><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id="mobile-header-logo"><svg class="logo-light" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#000000"></path></g></g></g></svg><svg class="logo-dark hidden" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#FFFFFF"></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id="postTopicMobile"><p class="is-full-height">TumbleBit vs CoinJoin</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class="mobile-search-wrap"><div class="search-input"><input class="pl-3" id="mobile-search-input" placeholder="请输入搜索关键词"><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class="mobile-search-input-btn">搜 索</button></div></div></header><div class="mobile-slide-menu"><a class="header-activity" href="/">首页</a><a href="/archives">全站目录</a><a href="/tags">标签</a><a href="/maps">地图</a><a href="/mempool">mempool</a><a target="_blank" rel="noopener" href="https://123btc.org/">123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class="slide-menu-fontsize"><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1676085091472"> </script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%93%BE%E4%B8%8A%E9%9A%90%E7%A7%81%E6%80%A7"><span class="toc-text">链上隐私性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-text">基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AF%94%E7%89%B9%E5%B8%81%E4%BA%A4%E6%98%93"><span class="toc-text">比特币交易</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%BE%E9%9B%B6%E5%9C%B0%E5%9D%80"><span class="toc-text">找零地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SharedCoin"><span class="toc-text">SharedCoin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CoinJoin"><span class="toc-text">CoinJoin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JoinMarket"><span class="toc-text">JoinMarket</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CoinShuffle-CoinShuffle-ShufflePuff"><span class="toc-text">CoinShuffle, CoinShuffle++, ShufflePuff</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TumbleBit%EF%BC%9A%E4%BC%A0%E7%BB%9F%E7%9A%84-Tumbler-%E6%A8%A1%E5%BC%8F"><span class="toc-text">TumbleBit：传统的 Tumbler 模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CoinJoin-vs-TumbleBit"><span class="toc-text">CoinJoin vs TumbleBit</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%BA%E5%AF%86%E4%BA%A4%E6%98%93"><span class="toc-text">机密交易</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Schnorr-%E7%AD%BE%E5%90%8D"><span class="toc-text">Schnorr 签名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AE%BA"><span class="toc-text">结论</span></a></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id="postTitle">TumbleBit vs CoinJoin</h1><div class="page-author"><div class="is-flex is-flex-direction-row page-data mr-6"><img class="mr-1" src="//res.btcstudy.org/btcstudy/images/default_avatar.png" alt="nopara73"><div class="page-author-info"><strong>nopara73</strong><time class="has-text-grey" datetime="2022-01-10T11:20:19.000Z">2022-01-10</time></div></div><div class="is-flex"><a href="/tags/CoinJoin"><i class="page-tag mr-1 px-1">CoinJoin<!-- 订正图片路径--></i></a><a href="/tags/%E9%9A%90%E7%A7%81%E6%80%A7"><i class="page-tag mr-1 px-1">隐私性<!-- 订正图片路径--></i></a></div></div><article class="mt-4 post-content"><blockquote>
<p><em>作者：nopara73</em></p>
<p><em>来源：<a target="_blank" rel="noopener" href="https://nopara73.medium.com/tumblebit-vs-coinjoin-15e5a7d58e3">https://nopara73.medium.com/tumblebit-vs-coinjoin-15e5a7d58e3</a></em></p>
</blockquote>
<p><img src="//res.btcstudy.org/btcstudy/images/tumblebit-vs-coinjoin/UOVKtMy.jpg" alt="img"></p>
<p>很长时间以来，我一直在开发 <a target="_blank" rel="noopener" href="https://eprint.iacr.org/2016/575.pdf">TumbleBit</a>。它不像 <a target="_blank" rel="noopener" href="https://bitcointalk.org/index.php?topic=279249.0">CoinJoin</a>：CoinJoin 已经是一种古老的、被充分理解而且经过了产品测试的技术，而且有多种实现，比如 <a target="_blank" rel="noopener" href="https://github.com/JoinMarket-Org/joinmarket">JoinMarket</a>、<a target="_blank" rel="noopener" href="https://github.com/DanielKrawisz/Shufflepuff">ShufflePuff</a>、<a target="_blank" rel="noopener" href="https://github.com/darkwallet/darkwallet">DarkWallet</a> 和 <a target="_blank" rel="noopener" href="https://github.com/sharedcoin/Sharedcoin">SharedCoin</a>；甚至还有改进的协议 以及&#x2F;或者 实现，比如 <a target="_blank" rel="noopener" href="http://crypsys.mmci.uni-saarland.de/projects/CoinShuffle/coinshuffle.pdf">CoinShuffle</a>、<a target="_blank" rel="noopener" href="https://crypsys.mmci.uni-saarland.de/projects/FastDC/draft-paper.pdf">CoinShuffle++</a>。但所有这些都跟 Tumble 无缘。Tumble 只是一种新技术，只有一种协议实现 <a target="_blank" rel="noopener" href="https://github.com/NTumbleBit/NTumbleBit">NTumbleBit</a>，而其前身概念验证实现是 <a target="_blank" rel="noopener" href="https://github.com/BUSEC/TumbleBit">BUSEC&#x2F;TumbleBit</a>。实际上，迄今为止，我的主要工作都集中在理解其基本概念并向广泛的听众介绍它们，如：<a target="_blank" rel="noopener" href="https://hackernoon.com/understanding-tumblebit-part-1-making-the-case-823d786113f3">Understanding TumbleBit 1</a>、<a target="_blank" rel="noopener" href="https://hackernoon.com/understanding-tumblebit-part-2-the-endgame-instant-anonymous-scaleable-payment-system-on-top-479e7eb9ca24">2</a>、<a target="_blank" rel="noopener" href="https://hackernoon.com/understanding-tumblebit-part-3-not-even-the-tumbler-can-breach-your-privacy-how-8d49d89e3a0d">3</a>、<a target="_blank" rel="noopener" href="https://hackernoon.com/understanding-tumblebit-part-4-not-even-the-tumbler-can-steal-your-coins-482e7076ef22">4</a>、<a target="_blank" rel="noopener" href="https://hackernoon.com/understanding-tumblebit-part-5-try-it-out-65b7a8d21a96">5</a> ；然后是开发 Tumble 来赋能新技术如 <a target="_blank" rel="noopener" href="https://github.com/nopara73/HiddenBitcoin">HBitcoin</a>、<a target="_blank" rel="noopener" href="https://github.com/nopara73/DotNetTor">DotNetTor</a>、<a target="_blank" rel="noopener" href="https://github.com/nopara73/HiddenWallet">HiddenWallet</a>、<a target="_blank" rel="noopener" href="https://github.com/stratisproject/Breeze">BreezeWalle</a>；还有琢磨一些小问题。以前我不太确定这项技术在实践中的局限性。现在，我正在为 HiddenWallet 集成 TumbleBit，我感觉情形发生了变化，现在我已经能够写一篇考究的长文来探讨两种最受众望 以及&#x2F;或者 最被炒作的比特币链上隐私性技术了：TumbleBit 和 CoinJoin。</p>
<h2 id="链上隐私性"><a href="#链上隐私性" class="headerlink" title="链上隐私性"></a>链上隐私性</h2><p>TumbleBit 有多种模式：支付中心模式（Payment Hub mode）和传统 Tumbler 模式。当前的 NTumbleBit 几乎完全实现了传统 Tumbler 模式，它也正是我要在这篇文章中集中讨论的。至于支付中心模式，顾名思义，它不是一个完备的链上隐私性解决方案。拿支付中心模式跟 CoinJoin 相比会有点傻，至少做起来很更难。</p>
<p>出于相同的理由，我也不会讨论 <a target="_blank" rel="noopener" href="https://github.com/ignopeverell/grin">Mimblewimble</a> 以及尚未实现的以隐私为中心的侧链实现、可以建立在<a target="_blank" rel="noopener" href="https://lightning.network/">闪电网络</a>上的二层隐私技术（译者注：Mimblewimble 协议已经于 2019 年得到了实现，但不是在比特币上。）。我也不会讨论 <a target="_blank" rel="noopener" href="https://bitcointalk.org/index.php?topic=321228.0">CoinSwap</a>，因为一方面，其基本形式没有获得太多的关注，另一方面，就我所知，尽管它的概念已经提出多年，但还是没有得到实现（译者注：CoinSwap 在翻译之时（2022 年）也已经有了搭配 Statechain 概念的实现）。我要指出的是，TumbleBit 至少有一部分基于 CoinSwap；而且，有了<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0141.mediawiki">隔离见证</a>以及一些新的操作码，大家回去重看 CoinSwap 协议可能也是个好主意。</p>
<p>当然，我也不会讨论传统的比特币 tumbler，因为他们可以盗走你的币并泄露你的隐私。</p>
<p>我会在最后提提<a target="_blank" rel="noopener" href="https://elementsproject.org/elements/confidential-transactions/">机密交易</a>和 <a target="_blank" rel="noopener" href="https://www.elementsproject.org/elements/schnorr-signatures/">Schnorr 签名</a>，因为它们对 TumbleBit 和 CoinJoin 都是互补的技术，我会告诉你它们如何能从中受益。</p>
<h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><h3 id="比特币交易"><a href="#比特币交易" class="headerlink" title="比特币交易"></a>比特币交易</h3><p><img src="//res.btcstudy.org/btcstudy/images/tumblebit-vs-coinjoin/-KjYhXg.png" alt="img"></p>
<p>一笔简单的比特币交易就如上图所示。你可以把一些币从一个地址发送到另一个地址，然后找多余的零钱给原来的地址。当然，这种模式下的隐私性是很糟的，因此 “<a target="_blank" rel="noopener" href="https://bitcoin.org/en/glossary/change-address">找零地址</a>” 的概念和方法应运而生。</p>
<h3 id="找零地址"><a href="#找零地址" class="headerlink" title="找零地址"></a>找零地址</h3><p><img src="//res.btcstudy.org/btcstudy/images/tumblebit-vs-coinjoin/ttRXygA.png" alt="img"></p>
<p>模式是相同到，不同的地方在于，你的钱包软件不是直接把零钱发回原来的地址，而是生成另一个地址来接收你的零钱。这就引发了另一个问题：你怎么在一个钱包软件里储存这么多地址呢？“<a target="_blank" rel="noopener" href="https://bitcoin.org/en/developer-guide#hierarchical-deterministic-key-creation">层级式确定性钱包</a>” 就是来解决这个问题的，不过这已经超出了本文的范围了。（译者注：所谓层级式确定性钱包，即一个钱包使用的所有地址都是从同一份主私钥中推导出来的，从而用户只需备份主私钥即可。）</p>
<p>那要是你一个地址上没有足够多的钱来支付怎么办呢？如果你的两个地址加起来才有这么多钱，你的钱包就会通过增加钱包地址来添加交易的输入：</p>
<p><img src="//res.btcstudy.org/btcstudy/images/tumblebit-vs-coinjoin/GQA3BDw.png" alt="img"></p>
<p><em>严格来说，我这里的解说是不准确的。因为交易的输入不是 “地址-余额”这样成对的数据，而是 “地址-数量” 这样的数据，更准确地来说，是 “签名-数量-索引” 这样的三元组，不过，我们暂时先别拘泥于这些细节。</em></p>
<p>当前几乎所有的比特币钱包软件都使用这种模式。当然，它仍有许多隐私问题。</p>
<p>那么，要是多个人把彼此的输入结合起来、产生一笔大交易，会对隐私有帮助吗？</p>
<h3 id="SharedCoin"><a href="#SharedCoin" class="headerlink" title="SharedCoin"></a>SharedCoin</h3><p>SharedCoin 是 <a target="_blank" rel="noopener" href="https://blockchain.info/">Blockchain.info</a> 所用的一种方法。至于效果，则既有好的，也有坏的。</p>
<p><img src="//res.btcstudy.org/btcstudy/images/tumblebit-vs-coinjoin/sKXfR5A.png" alt="img"></p>
<p>它在理论上是很好的，因为它让区块链分析变得更加艰难，但是，简单数额分析方法 <a target="_blank" rel="noopener" href="http://www.coinjoinsudoku.com/">CoinJoin Sudoku</a> 可以辨别出许多关于 “谁向谁支付” 的信息。</p>
<p>它造成了坏的影响，则是因为某种程度上，它给公众造成了一种印象 “SharedCoin 就已经足够了” 但并未让用户知情：Blockchain.info 自己就能重建出支付关联。区块链分析并不是隐私考量的全部。</p>
<p>后来他们公司停止了这项服务，我估计跟法律原因有关。但<a target="_blank" rel="noopener" href="https://medium.com/@nopara73/privacy-and-schnorr-signatures-e2175d27f022">我向你保证</a>，在 Schnorr 签名引入比特币之后，他们又会重新提供这个服务，因为这类服务的手续费可以大幅下降。实际上，任何有足够流动性的钱包都会开始提供这项服务，以提供更便宜的交易，不过我这么说有点透露剧情了，这个是下文 Schnorr 签名的内容。</p>
<h3 id="CoinJoin"><a href="#CoinJoin" class="headerlink" title="CoinJoin"></a>CoinJoin</h3><p>CoinJoin 的前提是，所有用户的支付额必须相同。举个例子，在一笔 CoinJoin 交易中，每个人都必须支付 1 比特币、组合成一大笔交易，这样就没人知道谁支付给了谁。当然，如果你只观察一笔交易而不观察整个交易链条，那自然发现不了；但如果可以观察整个链条，问题就没有那么简单了。CoinJoin 实现的隐私性有点牵强，但我先撇开这一点不提。考虑一下现实问题：找到足够多在同一时间发送交易的人就够难得了，还需要让他们都发送同样的数额？首先恐怕就没有一个钱包软件有这么多流动性。</p>
<p>“机密交易（Confidential Transactions）” 如果能在未来引入，将能解决这个问题，因为它掩盖了交易的数额。不过，这样会产生更大体积的交易，因此手续费也会更高。如果我没有搞错，机密交易的体积会是 CoinJoin 的 10 倍。唉，我这里又剧透了。我在这里想说的是，CoinJoin 提出了一系列全新的问题：参与者如何在私下里相互协调？这个我们后面再作分解。</p>
<h3 id="JoinMarket"><a href="#JoinMarket" class="headerlink" title="JoinMarket"></a>JoinMarket</h3><p><img src="//res.btcstudy.org/btcstudy/images/tumblebit-vs-coinjoin/xZpnG9A.png" alt="img"></p>
<p>后来就出现了 JoinMarket（JM） 的概念。在上图所示的交易中，有三个输出是 2.32386728 BTC 的数额。即使你能分辨出哪个输入对应哪个找零输出，你也无法分辨出支付关系。注意，在这笔交易中，你的匿名集是 3。</p>
<p>那么，JM 如何解决 CoinJoin 的流动性问题呢？它引入了 maker-taker 的概念，maker 等待有 taker 希望执行一笔 CoinJoin 交易并要求 maker 提供一些流动性，maker 可以获得一些手续费作为回报。你肯定可以想到，如果一笔普通的比特币交易需要支付 1 美元的手续费，若你想要通过 JM 来发送资金，带上 3 个 maker，那你就要支付 3 美元的手续费。你若想要大小为 100 的匿名集呢？你就只好支付 100 美元的手续费了。</p>
<h3 id="CoinShuffle-CoinShuffle-ShufflePuff"><a href="#CoinShuffle-CoinShuffle-ShufflePuff" class="headerlink" title="CoinShuffle, CoinShuffle++, ShufflePuff"></a>CoinShuffle, CoinShuffle++, ShufflePuff</h3><p> 我必须承认，我并没有完全掌握这些概念，但介绍它们的基本前提是，它们以去中心化的方式解决了 CoinJoin 的协作问题。至少它们是这么说的。</p>
<p>CoinShuffle 是 CoinShuffle++ 的前身，而 ShufflePuff 是 <a target="_blank" rel="noopener" href="https://wallet.mycelium.com/">Mycelium</a> 钱包的实现。它从未投入到生产环境中，因为这个实现是他们完全失败的众筹的一部分，不过这是另一个故事了。基本上，他们从大众手上募得了很多钱，并承诺了要实现一大堆新功能。他们可能有，也可能没有把钱花在开发工作上，但总之是没能发布新功能。他们承诺的其中一个功能正是 ShufflePuff。不幸的是，他们的 <a target="_blank" rel="noopener" href="https://github.com/DanielKrawisz/Shufflepuff">GitHub 页面</a>的最后一次更新是在 7 个月以前，这基本上就是一个死胡同，除非某人又再把它捡起来。另外，我们不要忽略了，无论你想在上面开发什么样的隐私技术，Mycelium 都是一个糟糕的平台。如果你在<a target="_blank" rel="noopener" href="https://medium.com/@nopara73/bitcoin-privacy-landscape-in-2017-zero-to-hero-guidelines-and-research-a10d30f1e034">对付网络分析时先天不足</a>，你能对付区块链分析也意义不大了。</p>
<h3 id="TumbleBit：传统的-Tumbler-模式"><a href="#TumbleBit：传统的-Tumbler-模式" class="headerlink" title="TumbleBit：传统的 Tumbler 模式"></a>TumbleBit：传统的 Tumbler 模式</h3><p>TumbleBit 的想法跟 CoinJoin 完全不同。在传统的 Tumbler 模式中，在 Tumbler 验证你拥有两个完全不同的身份，但你其实是在跟你自己混币。</p>
<p>整个流程大概是：</p>
<ol>
<li>你使用 Alice 和 Bob 的身份分别与 Tumbler 开启一条支付通道</li>
<li>密码学魔法</li>
<li>关闭两条支付通道</li>
</ol>
<p>注意，有两条支付通道，因此链上有 4 比交易。而在 “密码学魔法” 一步中发生的事情是，许多其他用户，开启通道来告诉 Tumbler 把钱转移到他们想要的输出中，但是，在这个过程中，Tumbler 是无法断定谁给谁转了钱的。听起来不可思议？你可以直接信任我，也可以看看<a target="_blank" rel="noopener" href="https://medium.com/@nopara73/understanding-tumblebit-part-3-not-even-the-tumbler-can-breach-your-privacy-how-8d49d89e3a0d">这篇文章</a>来验证。</p>
<p> 我们并不关心它的工作原理，因为这篇文章的目的在于比较，而不是介绍。我们来看看它的参数：</p>
<p><strong>它有多快？</strong></p>
<p>开启两个通道，关闭两个通道，也就是两个区块，20 分钟。很棒！</p>
<p><strong>它的费用几何？</strong></p>
<p>你需要发起 4 比交易。而且它们都比普通交易要大，如果普通的交易需要花费 1 美元，你可能就需要花费 10 美元。另外，你还需要支付 Tumbler 手续费，可能是 1%。这个可能才是大头，不过，考虑到这是更大的匿名集，也并不必然就偏高。</p>
<p><strong>它可以实现多大的匿名集？</strong></p>
<p>无可限量。不过，在白皮书提供的概念验证实现中，可以实现 800 的匿名集，因此我们就默认是这个数。</p>
<p><strong>这只是理论。给我们看看实际的。</strong></p>
<ul>
<li>不幸的是，支付中心模式有一个很大而且很糟糕的缺陷，它必须持有许多比特币来应付混币需要。若是从比价来考虑，这是个好事，因为它会让币价上升；但另一方面，这也是个坏事，因为它会变成攻击的目标。</li>
<li>不幸的是，TumbleBit 需要使用固定的数额，跟 CoinJoin 一样，因此也面临同样的问题。</li>
<li>遗憾的是，如果 Tumbler 自己想击破用户的匿名，一些时序攻击（timing attack）是可以做到的。</li>
</ul>
<p>幸运的是，所有这些问题都可以用 TumbleBit 来解决，因此你不需要担心它们。不幸的是，所有的解决方案都让一次 tumble 的流程变得更长，最好的时候需要两个小时，一般来说甚至是半天。最近有人提出了标准时长为 1 天的方案，但有待实现。</p>
<p>当然，我注意到了这个格外长的混币实践，但这些东西对我来说都没有意义，我只希望我开发出它的时候能提出一些东西，让它的流程尽可能地快。现在我无法使之变快，无论我采取什么方法，都会打破别的一些东西。我依然相信有优化能使之变快很多，但我已经知道了它不会像我想的那么简单。</p>
<p>这使我产生了一个问题：要是这个周期需要这么长实践，我们能期望产生多大的匿名集呢？</p>
<p>我没有答案，不过我猜测是 10 到 50。首先我们要获得初始流动性，我们越晚推出，比特币的手续费就越高，如我上面所述，要在 TumbleBit 交易商再乘以 10 倍。最糟糕的你甚至无法发送自己想发送的数额。而我还没提到要怎么解决这个问题。</p>
<p>想要比较一下的看，看我对 JoinMaker 解决方案的介绍（maker-taker 的概念）。当然，我们不能使用同样的模式，因为手续费将随着匿名集变大而上升，而 TumbleBit 的基础手续费就比较高。</p>
<p>我们上面说过，你可以跟自己混币，如果你想发送 8.3 BTC，而 Tumbler 的面额是 1 BTC，这样你就要参与 8 轮的 TumbleBit，而且剩下的 0.3 BTC 就没法混币了。</p>
<p>多轮次同样会增加手续费，假设普通比特币的手续费是 1 美元，那你的 8 轮混币可能就是 80 美元。不过幸运的是，你无需按顺序等待一轮又一轮的完成，各轮可以重叠。</p>
<p><em>另一个注：一我不知道有谁像我一样，思考过在比特币手续费高涨的环境中 TumbleBit 传统 Tumbler 模式的经济模型（而高涨的手续费是我们必然走向的终局）。实际上，我一直假设的 1 美元的手续费是今天的现实，很难认为这已经是高手续费的环境了。</em></p>
<p><em>坦白说，我写下这些东西之后，我变得非常失望。</em></p>
<h2 id="CoinJoin-vs-TumbleBit"><a href="#CoinJoin-vs-TumbleBit" class="headerlink" title="CoinJoin vs TumbleBit"></a>CoinJoin vs TumbleBit</h2><p>比较两者是很难的，因为 CoinJoin 中的协作问题是很棘手的。同时，为了防止女巫攻击，又会有一系列全新的问题产生出来。因此，我把 NTumbleBit 的传统 Tumbler 模式与理想中的 CoinJoin 和 JoinMarket 相比较，后者是今天唯一可用的 CoinJoin 实现。不幸的是，我无法加入理想的 TumbleBit 作为比较项，因为我的想象已经实现了，而我看不到如何进一步克服它的局限性。</p>
<table>
<thead>
<tr>
<th>假设：</th>
<th>普通交易的手续费为 1 美元</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>TB 和理想化 CJ 的面额都为 1 BTC</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>TumbleBit 传统 Tumbler 模式</td>
<td>JoinMaket</td>
<td>理想化 CoinJoin</td>
</tr>
<tr>
<td>需要固定面额吗？</td>
<td>是</td>
<td>否</td>
<td>是</td>
</tr>
<tr>
<td>有多快？</td>
<td>每一轮大于 2 小时，可重叠</td>
<td>3 ~ 10 分钟</td>
<td>每一轮 1 ~ 10 分钟，可重叠</td>
</tr>
<tr>
<td>匿名集：3，混币 1 BTC</td>
<td>10 （美元，下同）</td>
<td>3</td>
<td>1</td>
</tr>
<tr>
<td>匿名集：300，混币 1 BTC</td>
<td>10</td>
<td>300</td>
<td>1</td>
</tr>
<tr>
<td>匿名集：3，混币 10 BTC</td>
<td>100</td>
<td>3</td>
<td>10</td>
</tr>
<tr>
<td>匿名集：300，混币 10 BTC</td>
<td>100</td>
<td>300</td>
<td>10</td>
</tr>
</tbody></table>
<p>虽然我用的是粗略估计，但我认为我是对的。</p>
<p>结论？如果存在理想化的 CoinJoin，那它是最优选。不过，因为它不存在，所以，对大匿名集的交易应该使用 TumbleBit，而小匿名集的交易可以使用 JoinMarket。</p>
<p>现在，我们该来谈谈未来了吧？</p>
<h2 id="机密交易"><a href="#机密交易" class="headerlink" title="机密交易"></a>机密交易</h2><p>CT 简单来说（也没那么简单）就是隐藏一笔交易的数额，理论上，如果比特币支持 CT，那 TumbleBit 和 CoinJoin 都可以利用它，代价是手续费提高 9 倍。不过，JoinMarket 不能利用它，或者说用了也没有意义，因为它已经解决了固定面额问题。那 CT 对它们的成本有何影响呢？</p>
<table>
<thead>
<tr>
<th>假设：</th>
<th>普通交易的手续费为 1 美元</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>TumbleBit 传统 Tumbler 模式</td>
<td>JoinMaket</td>
<td>理想化 CoinJoin</td>
</tr>
<tr>
<td>需要固定面额吗？</td>
<td>否</td>
<td>否</td>
<td>否</td>
</tr>
<tr>
<td>有多快？</td>
<td>大于 2 小时</td>
<td>3 ~ 10 分钟</td>
<td>1 ~ 10 分钟</td>
</tr>
<tr>
<td>匿名集：3，混币 1 BTC</td>
<td>90（美元，下同）</td>
<td>3</td>
<td>9</td>
</tr>
<tr>
<td>匿名集：300，混币 1 BTC</td>
<td>90</td>
<td>300</td>
<td>9</td>
</tr>
<tr>
<td>匿名集：3，混币 10 BTC</td>
<td>90</td>
<td>3</td>
<td>9</td>
</tr>
<tr>
<td>匿名集：300，混币 10 BTC</td>
<td>90</td>
<td>300</td>
<td>9</td>
</tr>
</tbody></table>
<p>如你所见，CT 在 TB 和 CJ 中都可以降低大量混币的成本，不过它会提高小规模混币的成本。</p>
<h3 id="Schnorr-签名"><a href="#Schnorr-签名" class="headerlink" title="Schnorr 签名"></a>Schnorr 签名</h3><p><img src="//res.btcstudy.org/btcstudy/images/tumblebit-vs-coinjoin/4jUfkZw.png" alt="img"></p>
<p><img src="//res.btcstudy.org/btcstudy/images/tumblebit-vs-coinjoin/JQh2NmQ.png" alt="img"></p>
<p>红色的块是输入，绿色的块是输出，现在特朗普要签名输入。Schnorr 签名让我们在一个交易中只需提供一个签名（译者注：这可能是对 Schnorr 签名的一种误解，作者期望的可能是 “跨输入的签名聚合” 功能）。不过，它没法显著优化 TumbleBit 的使用，只是有助于 JoinMarket 和理想化 CoinJoin。</p>
<p>那这些技术能得到什么好处呢？我在这里想给出一个粗糙的估计，数据源是这个 <a target="_blank" rel="noopener" href="https://bitcoin.stackexchange.com/a/46379/26859">Bitcoin Stackexchange 的回答</a>：</p>
<blockquote>
<p>签名的平均大小是 71 字节</p>
<p>而 P2SH&#x2F;P2PKH 交易的体积是：每个输入 146 字节 + 每个输出 33 字节 + 10 字节</p>
</blockquote>
<p>我们最常用到的交易有 1 个输入和 2 个输出，就是 233 字节；其中签名的体积占到了 30%。假设 Schnorr 签名的体积与此相同（实际上并不相同），Schnorr 就可以节约至少 30% 的 CoinJoin 交易费。</p>
<table>
<thead>
<tr>
<th>假设：</th>
<th>普通交易的手续费为 1 美元</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>TB 和理想化 CJ 的面额都为 1 BTC</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>TumbleBit 传统 Tumbler 模式</td>
<td>JoinMaket</td>
<td>理想化  CoinJoin</td>
</tr>
<tr>
<td>需要固定面额吗？</td>
<td>是</td>
<td>否</td>
<td>是</td>
</tr>
<tr>
<td>有多快？</td>
<td>每一轮大于 2 小时，可重叠</td>
<td>3  ~ 10 分钟</td>
<td>每一轮  1 ~ 10 分钟，可重叠</td>
</tr>
<tr>
<td>匿名集：3，混币 1 BTC</td>
<td>10 （美元，下同）</td>
<td>2.34</td>
<td>0.78</td>
</tr>
<tr>
<td>匿名集：300，混币 1 BTC</td>
<td>10</td>
<td>210</td>
<td>1</td>
</tr>
<tr>
<td>匿名集：3，混币 10 BTC</td>
<td>100</td>
<td>2.34</td>
<td>7.8</td>
</tr>
<tr>
<td>匿名集：300，混币 10 BTC</td>
<td>100</td>
<td>210</td>
<td>7</td>
</tr>
</tbody></table>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>TumbleBit 的传统 Tumbler 模式对大规模的匿名集很有用。今天我们能够实现的 CoinJoin：JoinMarket 无法应用在大规模匿名集上。TumbleBit 的传统 Tumbler 模式比较耗时，CoinJoin 则比较快。理想化的 CoinJoin 在大型匿名集上使用时会比 TumbleBit 的传统 Tumbler 模式更为实用。</p>
<p><em>尚待解决的问题是：</em></p>
<p><em>投入生产环境的 TumbleBit 能够获得实现大型匿名集所需的流动性吗？CoinJoin 能解决其协作问题，实现大规模的匿名集吗？</em></p>
<p>（完）</p>
</article></div></div></main><script src="/js/post.js?v=1676085091472"></script><script src="/js/highlight.min.js?v=1676085091472"></script><script>var containerEl = document.querySelector('.post-container');
var postFontSize = localStorage.getItem('post-font-size') || '16';
var inputEl = document.querySelector('#size-change-input');
var inputEl2 = document.querySelector('#size-change-input2');
inputEl.value = postFontSize;
inputEl2.value = postFontSize;
containerEl.style.fontSize = postFontSize + 'px';
$(function(){
  function setSizeChangeInputValue(size) {
    $('.post-container').css('font-size', size + 'px');
    localStorage.setItem('post-font-size', size);
    $('#size-change-input').val(size);
    $('#size-change-input2').val(size);
  }
  $('#size-change-input').on('input propertychange', function(e) {
    const size = e.target.value;
    setSizeChangeInputValue(size);
  });
  $('#size-change-input2').on('input propertychange', function(e) {
    const size = e.target.value;
    setSizeChangeInputValue(size);
  });
});
</script><script>hljs.initHighlightingOnLoad();</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com/btcstudy">Twitter</a><!-- Github--><!-- Ins--><!-- RSS--><a title="rss" target="_blank" rel="noopener nofollow" href="/atom.xml">rss</a><!-- 知乎--><!-- 领英--><!-- 脸书--><!-- Telegram--><a title="telegram" target="_blank" rel="noopener nofollow" href="//t.me/btcstudyorg">Telegram</a></section></footer><script async src="/js/buttons.js?v=1676085091472"></script><script async src="/js/index.js?v=1676085091472"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-JVCJ9XXG1Z');</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306";
  hm.async = true;
  hm.defer = true;
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
  </script></body></html>