<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><title>比特币共识分叉全史</title><meta name="keywords" content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name="description" content="比特币思想的中文集结地"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css?v=1675068529977"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/style/common/iconfont.css?v=1675068529977"><link rel="stylesheet" href="/style/base.css?v=1675068529977"><link rel="stylesheet" href="/style/common/helper.css?v=1675068529977"><link rel="stylesheet" href="/style/themes/animation.css?v=1675068529977"><script>function ready() {
  var bodyEl = document.querySelector('.body-container');
  var theme = localStorage.getItem('theme') || 'light';
  if (!['light', 'dark'].includes(theme)) {
    theme = 'light';
    localStorage.setItem('theme', 'light');
  }
  bodyEl.classList.remove('appearance-auto');
  bodyEl.classList.add('appearance-' + theme);
  quickInitialTheme();
}
function quickInitialTheme() {
  var theme = localStorage.getItem('theme') || 'light';
  var logoLightEl = document.querySelector('.logo-light');
  var logoDarkEl = document.querySelector('.logo-dark');
  
  var mLogoLightEl = document.querySelector('#mobile-header-logo > .logo-light');
  var mLogoDarkEl = document.querySelector('#mobile-header-logo > .logo-dark');
  var themeBtnEl = document.getElementById('theme-btn');
  
  var slideThemeLightEl = document.querySelector('.slide-theme-light');
  var slideThemeDarkEl = document.querySelector('.slide-theme-dark');
  
  document.body.classList.add(theme);
  if (theme === 'dark') {
    logoLightEl.classList.add('hidden');
    logoDarkEl.classList.remove('hidden');
    
    mLogoLightEl.classList.add('hidden');
    mLogoDarkEl.classList.remove('hidden');
    
    themeBtnEl.classList.remove('icon-icon_dark');
    themeBtnEl.classList.add('icon-icon_light');
    
    slideThemeLightEl.classList.remove('hidden');
  } else {
    slideThemeDarkEl.classList.remove('hidden');
  }
}
document.addEventListener("DOMContentLoaded", ready);</script><script src="/js/common.js?v=1675068529977"></script><script src="/js/libs/zepto.min.js"></script><link rel="stylesheet" href="/style/post.css?v=1675068529977"><link rel="stylesheet" href="/style/themes/highlight.css?v=1675068529977"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="BTC Study" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column" onload="initialTheme()"><div class="clip"></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id="header"><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href="/"><svg class="logo-light" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#000000"></path></g></g></g></svg><svg class="logo-dark hidden" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#FFFFFF"></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id="header-menu"><a class="is-inline-block header-activity mr-4" href="/">首页</a><a class="is-inline-block mr-4" href="/archives">全站目录</a><a class="is-inline-block mr-4" href="/tags">标签</a><a class="is-inline-block mr-4" href="/maps">地图</a><a class="is-inline-block mr-4" href="/mempool">mempool</a><a class="is-inline-block mr-4" target="_blank" rel="noopener" href="https://123btc.org/">123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id="change-size-btn"></i><div class="size-input-wrap"><div class="input-wrap"><input id="size-change-input" type="range" min="12" max="32" step="2"></div></div></div><i class="iconfont icon-icon_dark mr-1" id="theme-btn"></i><div class="search-wrap"><input class="pl-3" id="search-input" placeholder="请输入搜索关键词"><i class="iconfont icon-icon_search" id="search-input-btn"></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">比特币共识分叉全史</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id="change-size-btn2"></i><div class="size-input-wrap"><div class="input-wrap"><input id="size-change-input2" type="range" min="12" max="32" step="2"></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id="mobile-header"><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id="mobile-header-logo"><svg class="logo-light" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#000000"></path></g></g></g></svg><svg class="logo-dark hidden" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#FFFFFF"></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id="postTopicMobile"><p class="is-full-height">比特币共识分叉全史</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class="mobile-search-wrap"><div class="search-input"><input class="pl-3" id="mobile-search-input" placeholder="请输入搜索关键词"><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class="mobile-search-input-btn">搜 索</button></div></div></header><div class="mobile-slide-menu"><a class="header-activity" href="/">首页</a><a href="/archives">全站目录</a><a href="/tags">标签</a><a href="/maps">地图</a><a href="/mempool">mempool</a><a target="_blank" rel="noopener" href="https://123btc.org/">123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class="slide-menu-fontsize"><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1675068529977"> </script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AF%E8%AF%AD"><span class="toc-text">术语</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AF%94%E7%89%B9%E5%B8%81%E5%85%B1%E8%AF%86%E5%88%86%E5%8F%89%E5%88%97%E8%A1%A8"><span class="toc-text">比特币共识分叉列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2010-%E5%B9%B4-7-%E6%9C%88-28-%E6%97%A5%EF%BC%88%E7%A6%81%E7%94%A8-OP-RETURN%EF%BC%89"><span class="toc-text">2010 年 7 月 28 日（禁用 OP_RETURN）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2010-%E5%B9%B4-7-%E6%9C%88-31-%E6%97%A5%EF%BC%88%E5%8A%A0%E5%85%A5-OP-NOP%EF%BC%89"><span class="toc-text">2010 年 7 月 31 日（加入 OP_NOP）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2010-%E5%B9%B4-8-%E6%9C%88-1-%E6%97%A5%EF%BC%88%E9%9A%94%E7%A6%BB%E8%84%9A%E6%9C%AC%E7%AD%BE%E5%90%8D%E5%92%8C%E8%84%9A%E6%9C%AC%E5%85%AC%E9%92%A5%E7%9A%84%E6%B1%82%E5%80%BC%EF%BC%89"><span class="toc-text">2010 年 8 月 1 日（隔离脚本签名和脚本公钥的求值）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2010-%E5%B9%B4-8-%E6%9C%88-15-%E6%97%A5%EF%BC%88%E4%BF%AE%E5%A4%8D%E6%95%B0%E5%80%BC%E6%BA%A2%E5%87%BA%E6%BC%8F%E6%B4%9E%EF%BC%9B%E7%A6%81%E7%94%A8-OP-CAT%EF%BC%89"><span class="toc-text">2010 年 8 月 15 日（修复数值溢出漏洞；禁用 OP_CAT）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2010-%E5%B9%B4-9-%E6%9C%88-7-%E6%97%A5%EF%BC%88%E4%B8%8D%E6%AD%A3%E7%A1%AE%E5%9C%B0%E5%AE%9E%E7%8E%B0%E7%AD%BE%E5%90%8D%E6%93%8D%E4%BD%9C%E6%95%B0%E9%87%8F%E9%99%90%E5%88%B6%EF%BC%89"><span class="toc-text">2010 年 9 月 7 日（不正确地实现签名操作数量限制）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2010-%E5%B9%B4-9-%E6%9C%88-12-%E6%97%A5%EF%BC%88%E5%8A%A0%E5%85%A5%E5%8C%BA%E5%9D%97%E5%A4%A7%E5%B0%8F%E9%99%90%E5%88%B6%EF%BC%89"><span class="toc-text">2010 年 9 月 12 日（加入区块大小限制）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2012-%E5%B9%B4-3-%E6%9C%88-15-%E6%97%A5%EF%BC%88%E4%B8%8D%E5%85%81%E8%AE%B8%E4%BA%A4%E6%98%93%E4%BD%BF%E7%94%A8%E7%9B%B8%E5%90%8C%E7%9A%84-TXID%EF%BC%89"><span class="toc-text">2012 年 3 月 15 日（不允许交易使用相同的 TXID）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2012-%E5%B9%B4-4-%E6%9C%88-1-%E6%97%A5%EF%BC%88P2SH%EF%BC%89"><span class="toc-text">2012 年 4 月 1 日（P2SH）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2013-%E5%B9%B4-3-%E6%9C%88-24-%E6%97%A5%EF%BC%88%E8%A6%81%E6%B1%82-coinbase-%E4%BA%A4%E6%98%93%E5%8C%85%E5%90%AB%E5%8C%BA%E5%9D%97%E9%AB%98%E5%BA%A6%EF%BC%89"><span class="toc-text">2013 年 3 月 24 日（要求 coinbase 交易包含区块高度）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2013-%E5%B9%B4-3-%E6%9C%88-11-%E6%97%A5%EF%BC%88Bitcoin-Core-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%87%E6%8D%A2%EF%BC%8C%E6%84%8F%E6%96%99%E4%B9%8B%E5%A4%96%E7%9A%84%E7%A1%AC%E5%88%86%E5%8F%89%EF%BC%89"><span class="toc-text">2013 年 3 月 11 日（Bitcoin Core 数据库切换，意料之外的硬分叉）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2013-%E5%B9%B4-3-%E6%9C%88-18-%E6%97%A5%EF%BC%88%E8%BE%93%E5%85%A5%E6%95%B0%E9%87%8F%E7%9A%84%E5%8C%BA%E5%9D%97%E7%BA%A7%E9%99%90%E5%88%B6%EF%BC%89"><span class="toc-text">2013 年 3 月 18 日（输入数量的区块级限制）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2013-%E5%B9%B4-5-%E6%9C%88-15-%E6%97%A5%E6%88%96-8-%E6%9C%88-16-%E6%97%A5%EF%BC%88%E5%BA%9F%E6%AD%A2%E8%BE%93%E5%85%A5%E6%95%B0%E9%87%8F%E7%9A%84%E5%8C%BA%E5%9D%97%E7%BA%A7%E9%99%90%E5%88%B6%EF%BC%89"><span class="toc-text">2013 年 5 月 15 日或 8 月 16 日（废止输入数量的区块级限制）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2015-%E5%B9%B4-7-%E6%9C%88-4-%E6%97%A5%EF%BC%88%E6%9B%B4%E4%B8%A5%E6%A0%BC%E7%9A%84-DER-%E5%BD%A2%E5%BC%8F%E7%AD%BE%E5%90%8D%EF%BC%89"><span class="toc-text">2015 年 7 月 4 日（更严格的 DER 形式签名）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2015-%E5%B9%B4-12-%E6%9C%88-14-%E6%97%A5%EF%BC%88CLTV-%E8%84%9A%E6%9C%AC%E7%BA%A7%E7%BB%9D%E5%AF%B9%E6%97%B6%E9%97%B4%E9%94%81%EF%BC%89"><span class="toc-text">2015 年 12 月 14 日（CLTV 脚本级绝对时间锁）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2016-%E5%B9%B4-7-%E6%9C%88-4-%E6%97%A5%EF%BC%88%E7%9B%B8%E5%AF%B9%E6%97%B6%E9%97%B4%E9%94%81%EF%BC%89"><span class="toc-text">2016 年 7 月 4 日（相对时间锁）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017-%E5%B9%B4-7-%E6%9C%88-23-%E6%97%A5%EF%BC%88%E5%8A%A0%E9%80%9F%E9%9A%94%E7%A6%BB%E8%A7%81%E8%AF%81%E6%BF%80%E6%B4%BB%E8%A1%A8%E6%80%81%EF%BC%89"><span class="toc-text">2017 年 7 月 23 日（加速隔离见证激活表态）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017-%E5%B9%B4-8-%E6%9C%88-1-%E6%97%A5%EF%BC%88%E5%8A%A0%E9%80%9F%E9%9A%94%E7%A6%BB%E8%A7%81%E8%AF%81%E6%BF%80%E6%B4%BB%E8%A1%A8%E6%80%81%EF%BC%89"><span class="toc-text">2017 年 8  月 1 日（加速隔离见证激活表态）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017-%E5%B9%B4-8-%E6%9C%88-24-%E6%97%A5%EF%BC%88SegWit-%E5%8D%87%E7%BA%A7%EF%BC%89"><span class="toc-text">2017 年 8 月 24 日（SegWit 升级）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E%E4%BB%8A%E5%B9%B4%E5%88%B0-2262-%E5%B9%B4"><span class="toc-text">从今年到 2262 年</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E9%87%8A"><span class="toc-text">注释</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2013-%E5%B9%B4%E9%82%A3%E5%9C%BA%E6%84%8F%E5%A4%96%E7%AE%97%E6%98%AF%E4%B8%80%E6%AC%A1%E7%A1%AC%E5%88%86%E5%8F%89%E5%90%97%EF%BC%9F"><span class="toc-text">2013 年那场意外算是一次硬分叉吗？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2015-%E5%B9%B4%E7%9A%84%E9%93%BE%E5%88%86%E8%A3%82%E4%BA%8B%E6%95%85"><span class="toc-text">2015 年的链分裂事故</span></a></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id="postTitle">比特币共识分叉全史</h1><div class="page-author"><div class="is-flex is-flex-direction-row page-data mr-6"><img class="mr-1" src="//res.btcstudy.org/btcstudy/images/default_avatar.png" alt="BitMEX Research"><div class="page-author-info"><strong>BitMEX Research</strong><time class="has-text-grey" datetime="2022-09-05T07:28:40.000Z">2022-09-05</time></div></div><div class="is-flex"><a href="/tags/%E6%AF%94%E7%89%B9%E5%B8%81"><i class="page-tag mr-1 px-1">比特币<!-- 订正图片路径--></i></a><a href="/tags/%E6%96%87%E5%8C%96"><i class="page-tag mr-1 px-1">文化<!-- 订正图片路径--></i></a></div></div><article class="mt-4 post-content"><blockquote>
<p><em>作者：BitMEX Research</em></p>
<p><em>来源：<a target="_blank" rel="noopener" href="https://blog.bitmex.com/bitcoins-consensus-forks/">https://blog.bitmex.com/bitcoins-consensus-forks/</a></em></p>
</blockquote>
<p><strong>摘要</strong>：在本文中，我们列出了比特币共识规则的 19 次更改（或者应该叫 18 次，因为有一次意外地 “失败了”），我们相信它们代表了比特币历史上的几乎所有重大事件。至少有三次事件导致了可辨识的链分裂，分别在 2010 年、2013 年和 2015 年发生，分别持续了 51 个、24 个和 6 个区块。</p>
<p><img src="//res.btcstudy.org/btcstudy/images/a-complete-history-of-bitcoins-consensus-forks/forks.jpg" alt="img"></p>
<p style="text-align:center">- 图片来源：<a target="_blank" rel="noopener" href="https://www.flickr.com/photos/105239286@N06/10247171643/">gryb25</a> -</p>


<h2 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h2><table>
<thead>
<tr>
<th>术语</th>
<th>定义</th>
</tr>
</thead>
<tbody><tr>
<td>链分裂（chainsplit）</td>
<td>区块链的分裂，产生两条相互独立但拥有共同祖先的链。原因可能是硬分叉，也可能是软分叉，甚至可以是非分叉的其它原因。</td>
</tr>
<tr>
<td>硬分叉</td>
<td>放松关于区块有效性的共识规则，使得一些原本被认为是无效的区块在新规则下会被认为是有效的。<br>现有的节点必须升级才能跟随硬分叉后的链。</td>
</tr>
<tr>
<td>软分叉</td>
<td>收紧关于区块有效性的共识规则，使得一些原本被认为有效的区块在新规则下会被认为是无效的。<br>现有的节点不是必须升级，不升级也能跟随软分叉后的链。</td>
</tr>
</tbody></table>
<p>注意：这些术语被认为始创于 <a target="_blank" rel="noopener" href="https://gist.github.com/gavinandresen/2355445">2012 年 4 月</a>，并在 <a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0099.mediawiki">BIP99</a> 和 <a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0123.mediawiki">BIP123</a> 中得到正式表述。</p>
<h2 id="比特币共识分叉列表"><a href="#比特币共识分叉列表" class="headerlink" title="比特币共识分叉列表"></a>比特币共识分叉列表</h2><h3 id="2010-年-7-月-28-日（禁用-OP-RETURN）"><a href="#2010-年-7-月-28-日（禁用-OP-RETURN）" class="headerlink" title="2010 年 7 月 28 日（禁用 OP_RETURN）"></a>2010 年 7 月 28 日（禁用 OP_RETURN）</h3><p><strong>激活区块号</strong>：无 <sup>1</sup></p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Common_Vulnerabilities_and_Exposures#CVE-2010-5141">0.3.5</a></p>
<p><strong>内容</strong>：禁用 OP_RETURN，修复一个致命的 bug，该 bug 可以让任何人花费任何比特币。</p>
<p><strong>类型</strong>：软分叉</p>
<p><strong>结果</strong>：未有证据表明该次升级期间出现了问题。</p>
<h3 id="2010-年-7-月-31-日（加入-OP-NOP）"><a href="#2010-年-7-月-31-日（加入-OP-NOP）" class="headerlink" title="2010 年 7 月 31 日（加入 OP_NOP）"></a>2010 年 7 月 31 日（加入 OP_NOP）</h3><p><strong>激活区块号</strong>：无 <sup>1</sup></p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/commit/a75560d828464c3f1138f52cf247e956fc8f937d">0.3.6</a></p>
<p><strong>内容</strong>：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/commit/a75560d828464c3f1138f52cf247e956fc8f937d#diff-8458adcedc17d046942185cb709ff5c3L109">禁用</a> OP_VER 和 OP_VERIF <sup>3</sup>。</li>
<li>加入 OP_NOP 功能。</li>
</ol>
<p><strong>类型</strong>：第一项为软分叉；第二项为硬分叉。</p>
<p><strong>结果</strong>：一些用户在升级期间遇到了问题，并且无法升级的用户被建议强制关闭节点 <sup>2</sup>。</p>
<h3 id="2010-年-8-月-1-日（隔离脚本签名和脚本公钥的求值）"><a href="#2010-年-8-月-1-日（隔离脚本签名和脚本公钥的求值）" class="headerlink" title="2010 年 8 月 1 日（隔离脚本签名和脚本公钥的求值）"></a>2010 年 8 月 1 日（隔离脚本签名和脚本公钥的求值）</h3><p><strong>激活区块号</strong>：无 <sup>1</sup></p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/commit/73aa262647ff9948eaf95e83236ec323347e95d0">0.3.7</a></p>
<p><strong>内容</strong>：<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/commit/6ff5f718b6a67797b2b3bab8905d607ad216ee21#diff-8458adcedc17d046942185cb709ff5c3L1135">让脚本签名和脚本公钥分别求值</a>。修复了一个致命的 bug，该 bug 可以让任何人花费任何比特币。</p>
<p><strong>类型</strong>：硬分叉</p>
<p><strong>结果</strong>：没有证据证明在此期间出现了问题。</p>
<h3 id="2010-年-8-月-15-日（修复数值溢出漏洞；禁用-OP-CAT）"><a href="#2010-年-8-月-15-日（修复数值溢出漏洞；禁用-OP-CAT）" class="headerlink" title="2010 年 8 月 15 日（修复数值溢出漏洞；禁用 OP_CAT）"></a>2010 年 8 月 15 日（修复数值溢出漏洞；禁用 OP_CAT）</h3><p><strong>激活区块号</strong>：74,638</p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/commit/08fee75201e82f2e34fcc1549ee8edd152f5d040">0.3.10</a></p>
<p><strong>内容</strong>：</p>
<ol>
<li>在 1845 亿比特币被花费的事故出现后，修复输出的数值溢出漏洞。作为该交易的输入的 0.5 BTC <a target="_blank" rel="noopener" href="https://blockchain.info/address/17TASsYPbdLrJo3UDxFfCMu5GXmxFwVZSW">至今没有再被花费过</a>。</li>
<li>禁用 OP_CAT，从而移除了一个 DoS 攻击界面，同时还禁用了 14 种<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/commit/4bd188c4383d6e614e18f79dc337fbabe8464c82#diff-8458adcedc17d046942185cb709ff5c3R94">其它功能</a>。</li>
</ol>
<p><strong>类型</strong>：都是软分叉</p>
<p><strong>结果</strong>：发生了一次链分裂。大概在这次事故的 5 个小时后，修复措施作为 0.3.10 版放出。人们普遍认为，在 “好的链” 重新变成最长链之前，“坏的链” 一共挖出了 <a target="_blank" rel="noopener" href="https://bitcointalk.org/index.php?topic=823.msg9734#msg9734">51 个区块</a></p>
<h3 id="2010-年-9-月-7-日（不正确地实现签名操作数量限制）"><a href="#2010-年-9-月-7-日（不正确地实现签名操作数量限制）" class="headerlink" title="2010 年 9 月 7 日（不正确地实现签名操作数量限制）"></a>2010 年 9 月 7 日（不正确地实现签名操作数量限制）</h3><p><strong>激活区块号</strong>：无 <sup>1</sup></p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/commit/8c9479c6bbbc38b897dc97de9d04e4d5a5a36730">0.3.12</a></p>
<p><strong>内容</strong>：以不正确的方式加入了 20000 个签名的操作数量限制。</p>
<p><strong>类型</strong>：软分叉</p>
<p><strong>结果</strong>：没有证据表明在此期间出现了问题。</p>
<h3 id="2010-年-9-月-12-日（加入区块大小限制）"><a href="#2010-年-9-月-12-日（加入区块大小限制）" class="headerlink" title="2010 年 9 月 12 日（加入区块大小限制）"></a>2010 年 9 月 12 日（加入区块大小限制）</h3><p><strong>激活区块号</strong>：79,400</p>
<p><strong>BIP 号或软件版本号</strong>：无</p>
<p><strong>内容</strong>：加入了 1MB 的区块体积限制。加入 <code>MAX_BLOCK_SIZE = 1000000</code> 代码的提交在 2010 年 7 月 15 日<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/blob/a30b56ebe76ffff9f9cc8a6667186179413c6349/main.h#L18">发生</a>，该版本在 <a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/commit/9d2174b6f5f3fac2463c7ebc2dbb9004b3740d23">2010 年 7 月 19 日</a>以 0.3.1 rc1 的版本号发布。<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/commit/8c9479c6bbbc38b897dc97de9d04e4d5a5a36730">这段新代码</a>从 2010 年 9 月 7 日开始强制执行 1MB 的区块大小限制规则，并在区块高度 79400 处激活。在 2010 年 9 月 20 日，中本聪<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/commit/172f006020965ae8763a0610845c051ed1e3b522">移除</a>了这种激活逻辑，但保留了 1MB 的大小限制。  </p>
<p><strong>类型</strong>：软分叉</p>
<p><strong>结果</strong>：没有证据表明在此期间出现了问题。</p>
<h3 id="2012-年-3-月-15-日（不允许交易使用相同的-TXID）"><a href="#2012-年-3-月-15-日（不允许交易使用相同的-TXID）" class="headerlink" title="2012 年 3 月 15 日（不允许交易使用相同的 TXID）"></a>2012 年 3 月 15 日（不允许交易使用相同的 TXID）</h3><p><strong>激活区块号</strong>：171,193</p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0030.mediawiki">BIP30</a></p>
<p><strong>内容</strong>：不允许交易使用完全相同的 TXID，除非旧的那一笔已经被完全花费掉。在 <a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/commit/ab91bf39b7c11e9c86bb2043c24f0f377f1cf514">2012 年 9 月</a>，这个规则施加到所有区块上，只有 91842 和 91800 两个区块是特例（它们是违反了这条规则的历史区块）。</p>
<p><strong>类型</strong>：软分叉</p>
<p><strong>结果</strong>：这是一次信号日（flag-day）软分叉。没有证据表明在此期间出现了问题。</p>
<h3 id="2012-年-4-月-1-日（P2SH）"><a href="#2012-年-4-月-1-日（P2SH）" class="headerlink" title="2012 年 4 月 1 日（P2SH）"></a>2012 年 4 月 1 日（P2SH）</h3><p><strong>激活区块号</strong>：173,805</p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0016.mediawiki">BIP16</a></p>
<p><strong>内容</strong>：支付到脚本哈希值（Pay-to-script hash，P2SH）允许交易被发送给一条脚本哈希值（以数字 3 开头的地址），而不仅仅是一个公钥的哈希值（以数字 1 开头的地址）。</p>
<p><strong>类型</strong>：软分叉</p>
<p><strong>结果</strong>：在 2012 年 2 月 1 日的前一周，达到 55% 的激活门槛。矿工的<a target="_blank" rel="noopener" href="https://bitcointalk.org/index.php?topic=66514.0;all">升级速度不够快</a>，所以激活时间点被推迟到 3 月 15 日。使用 0.6.0 rc1 版本而没有升级（因此不适用推迟）的用户，更早地激活了软分叉，并被卡在了<a target="_blank" rel="noopener" href="https://bitcointalk.org/index.php?topic=63165.60">区块高度 170060 处</a>，因为根据他们的节点，这个区块中包含了一笔无效交易。在激活之后，因为仍有 45% 的矿工在生产无效的区块，问题持续了几个月。</p>
<h3 id="2013-年-3-月-24-日（要求-coinbase-交易包含区块高度）"><a href="#2013-年-3-月-24-日（要求-coinbase-交易包含区块高度）" class="headerlink" title="2013 年 3 月 24 日（要求 coinbase 交易包含区块高度）"></a>2013 年 3 月 24 日（要求 coinbase 交易包含区块高度）</h3><p><strong>激活区块号</strong>：227,835</p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0034.mediawiki">BIP34</a></p>
<p><strong>内容</strong>：要求 coinbase 交易包含区块高度。</p>
<p><strong>类型</strong>：软分叉</p>
<p><strong>结果</strong>：达到 95% 的激活门槛。成功启动。</p>
<h3 id="2013-年-3-月-11-日（Bitcoin-Core-数据库切换，意料之外的硬分叉）"><a href="#2013-年-3-月-11-日（Bitcoin-Core-数据库切换，意料之外的硬分叉）" class="headerlink" title="2013 年 3 月 11 日（Bitcoin Core 数据库切换，意料之外的硬分叉）"></a>2013 年 3 月 11 日（Bitcoin Core 数据库切换，意料之外的硬分叉）</h3><p><strong>激活区块号</strong>：225,430</p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://bitcoin.org/en/alert/2013-03-11-chain-fork">0.8.0</a></p>
<p><strong>内容</strong>：这是一次意料之外的硬分叉，由 Bitcoin Core 的数据库技术从 Berkeley DB 切换成 LevelDB 导致；切换意外地移除了一个未知的 10000-BDB 数据库锁限制。这导致了 2013 年 3 月 11 日的硬分叉，虽然导致错误的软件是在 2013 年 2 月 20 日（20 天以前）发布的了。这次变更因为比特币社区和矿工切换会 0.7.2 规则而回滚。</p>
<p><strong>类型</strong>：共识规则没有发生改变</p>
<p><strong>结果</strong>：发生了一次至少持续 24 个区块的链分裂，使用 0.8.0 的链最多领先 13 个区块。还发生了<a target="_blank" rel="noopener" href="http://archive.is/64Rkj">一次成功的重复花费</a>。</p>
<h3 id="2013-年-3-月-18-日（输入数量的区块级限制）"><a href="#2013-年-3-月-18-日（输入数量的区块级限制）" class="headerlink" title="2013 年 3 月 18 日（输入数量的区块级限制）"></a>2013 年 3 月 18 日（输入数量的区块级限制）</h3><p><strong>激活区块号</strong>：无 <sup>1</sup></p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/commit/34d62a8efe4c51b2dd73d56fa03001d4accee4ad">0.8.1</a></p>
<p><strong>内容</strong>：这是一次临时的软分叉，引入了一条新规则：一个区块内通过交易输入引用的 TXID 数量不能超过 4500 个。这条规则比起 10000-DBD 锁限制更为严格。这个规则在 2013 年 5 月 15 日通过信号日硬分叉<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/commit/8bd02881899bbae2d8e5082081e02c7d577994e5#diff-7ec3c68a81efff79b6ca22ac1f1eabba">废止</a>。</p>
<p><strong>类型</strong>：软分叉</p>
<p><strong>结果</strong>：没有证据表明在此期间出现了问题。</p>
<h3 id="2013-年-5-月-15-日或-8-月-16-日（废止输入数量的区块级限制）"><a href="#2013-年-5-月-15-日或-8-月-16-日（废止输入数量的区块级限制）" class="headerlink" title="2013 年 5 月 15 日或 8 月 16 日（废止输入数量的区块级限制）"></a>2013 年 5 月 15 日或 8 月 16 日（废止输入数量的区块级限制）</h3><p><strong>激活区块号</strong>：252,451 或更早</p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0050.mediawiki">BIP50</a></p>
<p><strong>内容</strong>：在 2013 年 8 月，一个生产出来的区块可能违反了最初的 10000-BDB 锁限制规则；该规则在 2013 年 5 月 15 日放宽了。</p>
<p><strong>类型</strong>：硬分叉</p>
<p><strong>结果</strong>：没有证据表明在此期间出现了问题。</p>
<h3 id="2015-年-7-月-4-日（更严格的-DER-形式签名）"><a href="#2015-年-7-月-4-日（更严格的-DER-形式签名）" class="headerlink" title="2015 年 7 月 4 日（更严格的 DER 形式签名）"></a>2015 年 7 月 4 日（更严格的 DER 形式签名）</h3><p><strong>激活区块号</strong>：363,731</p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0066.mediawiki">BIP66</a></p>
<p><strong>内容</strong>：严格使用 DER 形式的签名，意味着比特币不再依赖于 OpenSSL 的签名解析。</p>
<p><strong>类型</strong>：软分叉</p>
<p><strong>结果</strong>：在一个为期 1000 个区块的周期内获得 95% 的同意。发生了一次链分裂，留下了 6 个区块，因为一些矿工发信号表示支持 BIP66，但没有升级，同时又是 <a target="_blank" rel="noopener" href="https://blog.bitmex.com/empty-block-data-by-mining-pool/">SPY 挖矿</a>的。最终软分叉的链领先了。</p>
<h3 id="2015-年-12-月-14-日（CLTV-脚本级绝对时间锁）"><a href="#2015-年-12-月-14-日（CLTV-脚本级绝对时间锁）" class="headerlink" title="2015 年 12 月 14 日（CLTV 脚本级绝对时间锁）"></a>2015 年 12 月 14 日（CLTV 脚本级绝对时间锁）</h3><p><strong>激活区块号</strong>：388,380</p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0065.mediawiki">BIP65</a></p>
<p><strong>内容</strong>：Check Lock Time Verity（OP_CLTV）在未来某个时间点以前可以一直锁定。这是比特币的第一个新功能。</p>
<p><strong>类型</strong>：软分叉</p>
<p><strong>结果</strong>：达到 95% 的激活阈值，成功激活。</p>
<h3 id="2016-年-7-月-4-日（相对时间锁）"><a href="#2016-年-7-月-4-日（相对时间锁）" class="headerlink" title="2016 年 7 月 4 日（相对时间锁）"></a>2016 年 7 月 4 日（相对时间锁）</h3><p><strong>激活区块号</strong>：419,328</p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0068.mediawiki">BIP68</a>、<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0112.mediawiki">BIP112</a>、<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0113.mediawiki">BIP113</a></p>
<p><strong>内容</strong>：</p>
<ul>
<li>交易级相对事件锁，允许交易的输出在交易得到确认后的一段时间内禁止花费。</li>
<li>CheckSequenceVerify，脚本级相对时间锁。</li>
<li>中值时间（Median time-past）消除了矿工使用未来的时间戳来获得更多交易手续费的激励。</li>
</ul>
<p><strong>类型</strong>：软分叉</p>
<p><strong>结果</strong>：使用 95% 的版本位（versionbits）信号机制，成功激活。</p>
<h3 id="2017-年-7-月-23-日（加速隔离见证激活表态）"><a href="#2017-年-7-月-23-日（加速隔离见证激活表态）" class="headerlink" title="2017 年 7 月 23 日（加速隔离见证激活表态）"></a>2017 年 7 月 23 日（加速隔离见证激活表态）</h3><p><strong>激活区块号</strong>：477,800</p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0091.mediawiki">BIP91</a></p>
<p><strong>内容</strong>：这个临时的软分叉强制要求对 SegWit 表示支持。</p>
<p><strong>类型</strong>：软分叉</p>
<p><strong>结果</strong>：在一个为期 336 个区块的周期里，这个软分叉以 80% 的挖矿阈值成功激活，虽然只有少数用户强制执行 BIP91 规则，因此它被废止了。因此，在此期间，发生链分裂的风险增加了。</p>
<h3 id="2017-年-8-月-1-日（加速隔离见证激活表态）"><a href="#2017-年-8-月-1-日（加速隔离见证激活表态）" class="headerlink" title="2017 年 8  月 1 日（加速隔离见证激活表态）"></a>2017 年 8  月 1 日（加速隔离见证激活表态）</h3><p><strong>激活区块号</strong>：478,479</p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0148.mediawiki">BIP148</a></p>
<p><strong>内容</strong>：这个临时的软分叉强制要求在 2017 年 8 月 1 日后的两周内对 SegWit 升级表示支持。</p>
<p><strong>类型</strong>：软分叉</p>
<p><strong>结果</strong>：信号日软分叉似乎成功了，没有出现问题，虽然只有少数用户执行 BIP148 规则，因此它被废止。在此期间，链分裂的风险增加了。</p>
<h3 id="2017-年-8-月-24-日（SegWit-升级）"><a href="#2017-年-8-月-24-日（SegWit-升级）" class="headerlink" title="2017 年 8 月 24 日（SegWit 升级）"></a>2017 年 8 月 24 日（SegWit 升级）</h3><p><strong>激活区块号</strong>：481,824</p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0141.mediawiki">BIP141</a>、<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0143.mediawiki">BIP143</a>、<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0147.mediawiki">BIP147</a></p>
<p><strong>内容</strong>：隔离见证（<a target="_blank" rel="noopener" href="https://blog.bitmex.com/the-segwit-transaction-capacity-increase-part-1/">SegWit</a>）升级。</p>
<p><strong>类型</strong>：软分叉</p>
<p><strong>结果</strong>：以 95% 的版本位信号激活。</p>
<h3 id="从今年到-2262-年"><a href="#从今年到-2262-年" class="headerlink" title="从今年到 2262 年"></a>从今年到 2262 年</h3><p><strong>激活区块号</strong>： 1,3440,000</p>
<p><strong>BIP 号或软件版本号</strong>：<a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0042.mediawiki">BIP42</a></p>
<p><strong>内容</strong>：修复 2100 万 BTC 供给量限制的 bug。软件在 2014 年 4 月升级以修复这个漏洞，但新的规则不会在 23 世纪以前适用。</p>
<p><strong>类型</strong>：软分叉</p>
<p><strong>结果</strong>：这个软分叉尚未被应用。</p>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><ol>
<li>除了 1MB 区块大小限制的软分叉以外，在 2012 年 BIP16 软分叉以前，软分叉激活是没有方法可言的，所以如果分叉平滑地发生，没有出现链分裂的话，共识分叉并不必然有准确的区块高度和日期。</li>
<li>“如果你不立即升级到 0.3.6，最好关掉你的比特币节点，升级之后再开启。”—— <a target="_blank" rel="noopener" href="http://archive.is/L7amG">Satoshi Nakamoto</a></li>
<li>在移除 OP_VER 以前，每一次软件升级都可以被认为是一种非确定式的硬分叉，而这些升级到没有记录在这个列表中。如果硬分叉的定义要包含这些升级，那会有点迂腐。</li>
<li>上表没有连贯一直的定义，因为，比如说，根据具体的情形选取分叉发生时间的定义，会更有用。</li>
<li>有些人提到，对 P2P 协议的改变也可以被认为是硬分叉，因为这让旧软件变得不可用（它们将不再能连接到网络）。但是，严格来说，这种变更没有放松关于区块有效性的定义，所以你可以通过建立一个过渡版本的软件作为中继，从而同步旧版本的软件。所以这类变更都从这个列表中排除了。</li>
<li>一些人认为 <a target="_blank" rel="noopener" href="https://github.com/bitcoin/bips/blob/master/bip-0090.mediawiki">BIP90</a> 是一次硬分叉，但因为它只放松了过去发生的软分叉相关的规则，所以它没有常规的硬分叉所具有的许多特性和风险。因为相同的逻辑，区块检查点方案也可以被认为是软分叉。</li>
<li>在 <a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/commit/40cd0369419323f8d7385950e20342e998c994e1#diff-623e3fd6da1a45222eeec71496747b31R420">2010 年 7 月</a>，链选择规则被替换成选择累积工作量最多的链，而不是最长的链。技术上来说，这不是对区块有效性规则的变更；但是，这一变更跟共识规则变更一样具有某些风险。</li>
</ol>
<h2 id="2013-年那场意外算是一次硬分叉吗？"><a href="#2013-年那场意外算是一次硬分叉吗？" class="headerlink" title="2013 年那场意外算是一次硬分叉吗？"></a>2013 年那场意外算是一次硬分叉吗？</h2><p>从我们的角度来看，公平地说，2013 年 3 月 11 日的链分叉之后，对 BDB 锁限制的提高是一次硬分叉。相关的规则是 10000-BDB 的锁限制，在分叉后被放松了。这个规则是在  <a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/commit/8bd02881899bbae2d8e5082081e02c7d577994e5#diff-7ec3c68a81efff79b6ca22ac1f1eabba">2013 年 3 月 15 日</a>在软件的 0.8.1 上放松的，并在 <a target="_blank" rel="noopener" href="https://github.com/bitcoin/bitcoin/commit/34d62a8efe4c51b2dd73d56fa03001d4accee4ad">2013 年 3 月 18 日</a>发布。超出这个限制的区块最终在 2013 年 8 月 16 日产生，所以你可以将硬分叉的日期定为 2013 年 5 月 15 日，或者 2013 年 8 月 16 日。</p>
<p>一些人会认为，因为许多原因，这次变更不算硬分叉，包括：这条规则是 “准-非确定性的”，或者说，你可以手动改变 BDB 的配置。实际上，因为这个锁限制的非确定性特性，理论上来说你可以建立一个本地系统，使得旧有的 BDB 锁限制永远无法被突破。因此，你可以断言比特币 “从来没发生过硬分叉”，但你的硬分叉定义将要求硬分叉是确定性的，或者必须直接跟比特币的数据（比如交易和区块头）相关。</p>
<p>在讨论这次意外时，比特币开发者 Gregory Maxwell <a target="_blank" rel="noopener" href="https://bitcointalk.org/index.php?topic=702755.msg8116032#msg8116032">说</a>：</p>
<blockquote>
<p>这有点复杂，实际机上，你可以使用一个 BIP-50 以前的节点完整地同步区块链，几个月前我刚刚用 0.3.24 版本这么干过。它只是不能可靠地处理涉及大区块的链重组，除非你也改变 BDB 配置。所以，它到底是不是一次硬分叉，当然是可以争辩的，因为它是准非确定性的。在此之前，同样有其它的 bug 修复会导致更旧的版本被卡住、停止同步区块链 …… 所以我认为，从一个非常强的定义 —— 硬分叉将导致新链违反被以前的版本强制执行的规则 —— 来看，我们没有硬分叉过。</p>
</blockquote>
<h2 id="2015-年的链分裂事故"><a href="#2015-年的链分裂事故" class="headerlink" title="2015 年的链分裂事故"></a>2015 年的链分裂事故</h2><p>在上面的共识规则变更列表中，有三次时间导致了可辨识的链分裂。最近的一次发生在 2015 年 7 月 4 日，在 BIP66 软分叉升级期间。</p>
<p>在 BIP66 激活之后，立即出现了长达 6 个区块的孤链，因为一个矿工创建了一个无效区块，但其他一些矿池不认为这是个无效区块，因为他们根本不验证新区块。</p>
<p>所以实情是，一些矿工表示支持 BIP66 软分叉，但没有升级自己的节点来验证；你可以认为一些矿工是在 “做样子”。要是矿工们一直都验证区块，他们会发现这个区块是无效的，然后拒绝掉。相反，一些矿工直接在无效区块上继续挖矿，所以发生了链分裂。</p>
<p>下图展示了这个长达 6 个区块的链分裂。</p>
<p><img src="//res.btcstudy.org/btcstudy/images/a-complete-history-of-bitcoins-consensus-forks/split.png" alt="img"></p>
<p style="text-align:center">- 来源：Blockchain.info；http://archive.is/WqGRp 和 http://archive.is/LHlF7  -</p>


<p><strong>注意</strong>：在本文出版之后，<a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Consensus_versions">Bitcoin Wiki</a> 发布了另一份共识版本的清单。</p>
<p><strong>免责声明</strong></p>
<p>虽然本文引用了许多来源，但我们并不保证准确定。我们可能犯了错误，或偶然漏过了一些共识规则变更。欢迎更正。</p>
<p>（完）</p>
</article></div></div></main><script src="/js/post.js?v=1675068529977"></script><script src="/js/highlight.min.js?v=1675068529977"></script><script>var containerEl = document.querySelector('.post-container');
var postFontSize = localStorage.getItem('post-font-size') || '16';
var inputEl = document.querySelector('#size-change-input');
var inputEl2 = document.querySelector('#size-change-input2');
inputEl.value = postFontSize;
inputEl2.value = postFontSize;
containerEl.style.fontSize = postFontSize + 'px';
$(function(){
  function setSizeChangeInputValue(size) {
    $('.post-container').css('font-size', size + 'px');
    localStorage.setItem('post-font-size', size);
    $('#size-change-input').val(size);
    $('#size-change-input2').val(size);
  }
  $('#size-change-input').on('input propertychange', function(e) {
    const size = e.target.value;
    setSizeChangeInputValue(size);
  });
  $('#size-change-input2').on('input propertychange', function(e) {
    const size = e.target.value;
    setSizeChangeInputValue(size);
  });
});
</script><script>hljs.initHighlightingOnLoad();</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com/btcstudy">Twitter</a><!-- Github--><!-- Ins--><!-- RSS--><a title="rss" target="_blank" rel="noopener nofollow" href="/atom.xml">rss</a><!-- 知乎--><!-- 领英--><!-- 脸书--><!-- Telegram--><a title="telegram" target="_blank" rel="noopener nofollow" href="//t.me/btcstudyorg">Telegram</a></section></footer><script async src="/js/buttons.js?v=1675068529977"></script><script async src="/js/index.js?v=1675068529977"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-JVCJ9XXG1Z');</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306";
  hm.async = true;
  hm.defer = true;
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
  </script></body></html>