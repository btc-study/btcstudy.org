<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><title>工作量证明本质上是一个去中心化时钟 </title><meta name="keywords" content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name="description" content="比特币思想的中文集结地"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css?v=1673690025633"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/style/common/iconfont.css?v=1673690025633"><link rel="stylesheet" href="/style/base.css?v=1673690025633"><link rel="stylesheet" href="/style/common/helper.css?v=1673690025633"><link rel="stylesheet" href="/style/themes/animation.css?v=1673690025633"><script>function ready() {
  var bodyEl = document.querySelector('.body-container');
  var theme = localStorage.getItem('theme') || 'light';
  if (!['light', 'dark'].includes(theme)) {
    theme = 'light';
    localStorage.setItem('theme', 'light');
  }
  bodyEl.classList.remove('appearance-auto');
  bodyEl.classList.add('appearance-' + theme);
  quickInitialTheme();
}
function quickInitialTheme() {
  var theme = localStorage.getItem('theme') || 'light';
  var logoLightEl = document.querySelector('.logo-light');
  var logoDarkEl = document.querySelector('.logo-dark');
  
  var mLogoLightEl = document.querySelector('#mobile-header-logo > .logo-light');
  var mLogoDarkEl = document.querySelector('#mobile-header-logo > .logo-dark');
  var themeBtnEl = document.getElementById('theme-btn');
  
  var slideThemeLightEl = document.querySelector('.slide-theme-light');
  var slideThemeDarkEl = document.querySelector('.slide-theme-dark');
  
  document.body.classList.add(theme);
  if (theme === 'dark') {
    logoLightEl.classList.add('hidden');
    logoDarkEl.classList.remove('hidden');
    
    mLogoLightEl.classList.add('hidden');
    mLogoDarkEl.classList.remove('hidden');
    
    themeBtnEl.classList.remove('icon-icon_dark');
    themeBtnEl.classList.add('icon-icon_light');
    
    slideThemeLightEl.classList.remove('hidden');
  } else {
    slideThemeDarkEl.classList.remove('hidden');
  }
}
document.addEventListener("DOMContentLoaded", ready);</script><script src="/js/common.js?v=1673690025633"></script><script src="/js/libs/zepto.min.js"></script><link rel="stylesheet" href="/style/post.css?v=1673690025634"><link rel="stylesheet" href="/style/themes/highlight.css?v=1673690025634"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="BTC Study" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column" onload="initialTheme()"><div class="clip"></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id="header"><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href="/"><svg class="logo-light" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#000000"></path></g></g></g></svg><svg class="logo-dark hidden" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#FFFFFF"></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id="header-menu"><a class="is-inline-block header-activity mr-4" href="/">首页</a><a class="is-inline-block mr-4" href="/archives">全站目录</a><a class="is-inline-block mr-4" href="/tags">标签</a><a class="is-inline-block mr-4" href="/maps">地图</a><a class="is-inline-block mr-4" href="/mempool">mempool</a><a class="is-inline-block mr-4" target="_blank" rel="noopener" href="https://123btc.org/">123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id="change-size-btn"></i><div class="size-input-wrap"><div class="input-wrap"><input id="size-change-input" type="range" min="12" max="32" step="2"></div></div></div><i class="iconfont icon-icon_dark mr-1" id="theme-btn"></i><div class="search-wrap"><input class="pl-3" id="search-input" placeholder="请输入搜索关键词"><i class="iconfont icon-icon_search" id="search-input-btn"></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">工作量证明本质上是一个去中心化时钟 </p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id="change-size-btn2"></i><div class="size-input-wrap"><div class="input-wrap"><input id="size-change-input2" type="range" min="12" max="32" step="2"></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id="mobile-header"><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id="mobile-header-logo"><svg class="logo-light" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#000000"></path></g></g></g></svg><svg class="logo-dark hidden" width="125px" height="23px" viewBox="0 0 125 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>BTCStudy</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页-响应式" transform="translate(-249.000000, -23.000000)" fill-rule="nonzero"><g id="BTCStudy" transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id="BTC" fill="#F2A900"></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id="Study" fill-opacity="0.85" fill="#FFFFFF"></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id="postTopicMobile"><p class="is-full-height">工作量证明本质上是一个去中心化时钟 </p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class="mobile-search-wrap"><div class="search-input"><input class="pl-3" id="mobile-search-input" placeholder="请输入搜索关键词"><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class="mobile-search-input-btn">搜 索</button></div></div></header><div class="mobile-slide-menu"><a class="header-activity" href="/">首页</a><a href="/archives">全站目录</a><a href="/tags">标签</a><a href="/maps">地图</a><a href="/mempool">mempool</a><a target="_blank" rel="noopener" href="https://123btc.org/">123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class="slide-menu-fontsize"><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1673690025634"> </script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%BB%E4%B8%AD%E5%BF%83%E5%8C%96%E8%B4%A6%E6%9C%AC%E4%B8%AD%E7%9A%84%E6%97%B6%E9%97%B4%E9%A1%BA%E5%BA%8F%E9%97%AE%E9%A2%98"><span class="toc-text">去中心化账本中的时间顺序问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E6%8E%92%E5%BA%8F%E6%98%AF%E6%9C%80%E6%A0%B9%E6%9C%AC%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">时间排序是最根本的问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E8%A6%81%E5%9B%9E%E9%A1%BE-%E2%80%9C%E5%B7%A5%E4%BD%9C%E9%87%8F%E8%AF%81%E6%98%8E%E2%80%9D"><span class="toc-text">简要回顾 “工作量证明”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%BA%E5%9D%97%E4%B9%8B%E9%97%B4%E6%97%A0%E4%BA%8B%E5%8F%91%E7%94%9F"><span class="toc-text">区块之间无事发生</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SHA-%E5%87%BD%E6%95%B0%E6%98%AF%E6%97%A0%E8%AE%B0%E5%BF%86%E6%80%A7%E3%80%81%E6%97%A0%E8%BF%87%E7%A8%8B%E6%80%A7%E7%9A%84"><span class="toc-text">SHA 函数是无记忆性、无过程性的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SHA-%E5%87%BD%E6%95%B0%E7%9A%84%E8%BE%93%E5%85%A5%E5%80%BC%E6%98%AF%E4%B8%8D%E9%87%8D%E8%A6%81%E7%9A%84"><span class="toc-text">SHA 函数的输入值是不重要的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%BE%E5%BA%A6%E6%98%AF%E5%85%A8%E5%AE%87%E5%AE%99%E7%BB%9F%E4%B8%80%E7%9A%84"><span class="toc-text">难度是全宇宙统一的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A6%81%E5%81%9A%E7%9F%BF%E5%B7%A5%E4%B9%9F%E7%AE%80%E5%8D%95%EF%BC%8C%E7%AE%97%E4%B8%8B-SHA-%E5%B0%B1%E8%A1%8C"><span class="toc-text">要做矿工也简单，算下 SHA 就行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E4%B8%8E%E5%BA%A6%E4%BC%9A%E5%9C%A8%E7%BB%9F%E8%AE%A1%E7%BB%93%E6%9E%9C%E4%B8%AD%E6%8F%AD%E9%9C%B2%E5%87%BA%E6%9D%A5"><span class="toc-text">参与度会在统计结果中揭露出来</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E9%87%8F%E5%8D%B3%E6%97%B6%E9%92%9F"><span class="toc-text">工作量即时钟</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E5%90%8E%E4%B8%80%E5%9D%97%E6%8B%BC%E5%9B%BE"><span class="toc-text">最后一块拼图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%99%E5%85%B3%E5%88%86%E5%B8%83%E5%BC%8F%E5%85%B1%E8%AF%86%E4%BB%80%E4%B9%88%E4%BA%8B%EF%BC%9F"><span class="toc-text">这关分布式共识什么事？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E6%A6%82%E5%B0%B1%E6%98%AF%E8%BF%99%E4%B9%88%E5%9B%9E%E4%BA%8B%E4%BA%86"><span class="toc-text">大概就是这么回事了</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id="postTitle">工作量证明本质上是一个去中心化时钟 </h1><div class="page-author"><div class="is-flex is-flex-direction-row page-data mr-6"><img class="mr-1" src="//res.btcstudy.org/btcstudy/images/default_avatar.png" alt="Gregory Trubetskoy"><div class="page-author-info"><strong>Gregory Trubetskoy</strong><time class="has-text-grey" datetime="2021-10-16T08:49:37.000Z">2021-10-16</time></div></div><div class="is-flex"><a href="/tags/PoW"><i class="page-tag mr-1 px-1">PoW<!-- 订正图片路径--></i></a></div></div><article class="mt-4 post-content"><blockquote>
<p><em>作者：Gregory Trubetskoy</em></p>
<p><em>来源：<a target="_blank" rel="noopener" href="https://grisha.org/blog/2018/01/23/explaining-proof-of-work/">https://grisha.org/blog/2018/01/23/explaining-proof-of-work/</a></em></p>
</blockquote>
<p>这篇文章将解释 “工作量证明” 在比特币区块链上的关键作用。我们将只关注工作量证明机制最关键的一个特征、并证明其它特征（比如安全性）只是附带结果，虽然有用，但并不是最本质特征 。 </p>
<p>本文的解释基于例证一些工作量证明在区块链上运用中的有趣属性。它们往往不是那么直观，有时候甚至与我们的直觉相悖。比如说，通过工作量证明，一群人不用互相交流就能共同解决一个问题。 </p>
<p>在了解了这些有趣的属性之后，你们大概会得出一个结论：工作量证明主要是一个实现  “分布式且去中心化的时序系统”（也就是一个时钟）的机制。 </p>
<p>请注意，这篇文章讨论的并不是工作量证明的原理，而是区块链是如何利用工作量证明的。如果你还不了解工作量证明是什么，可以从<a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Proof_of_work">这篇文章</a>看起。 </p>
<h2 id="去中心化账本中的时间顺序问题"><a href="#去中心化账本中的时间顺序问题" class="headerlink" title="去中心化账本中的时间顺序问题"></a><strong>去中心化账本中的时间顺序问题</strong></h2><p>在研究解决办法之前，让我们先来仔细分析一下问题。很多介绍工作量证明的文章读起来都很晦涩，原因就在于它们试图跳过问题直接解释答案 。 </p>
<p>任何账本都显然需要有顺序。正如一个人不应该能花一笔没到账的钱一样，他也不应该能使用一笔已经转给别人的钱。区块链上的交易必须在不依靠第三方机构的情况下，清晰地排列出交易的顺序 。 </p>
<p>即便区块链不做账本，只做某种日志（因为每个节点都有同样的区块链副本），也需要为发生的事情排列出顺序。排序不同，结果显然也不同；排序不同，那就变成另一条区块链了 。 </p>
<p>但是如果交易都是由世界各地的匿名用户生成，并且没有一个中心机构来负责整理，那么我们怎么给交易排定顺序呢 ？ 举例来说，交易（或者区块）含有时间戳，但什么条件下，这些时间戳才是信得过的呢 ？ </p>
<p>时间不过是一个<a target="_blank" rel="noopener" href="http://www.preposterousuniverse.com/blog/2015/04/03/the-reality-of-time/">人造的概念</a>。包括原子钟在内，所有的报时来源， 其实都是一个 “被信任的第三方”（trusted third party） 。但最重要的是，这些第三方大多数情况下<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=-6rWqJhDv7M">都不是完全正确的</a>。因为网络延迟或者<a target="_blank" rel="noopener" href="http://www.astronomy.ohio-state.edu/~pogge/Ast162/Unit5/gps.html">相对论</a>的影响都会使它们的结果产生出入。坐在飞机上的人跟地上走的人之间会产生一个 “<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%99%82%E9%96%93%E8%86%A8%E8%84%B9">时间膨胀</a>” 现象，这种误差会随逐渐累积起来，最终使排序失真。于是，依靠时间戳来决定时间的顺序在一个去中心化且地理上分散的系统中是不可能的。 </p>
<p>我们这里说的其实并不是传统意义上的 “时间” 概念，不是说的 “年月日” 这种 。我们需要的是一个能让我们验证一个事件是否先于另一件事发生的机制。 </p>
<p>首先 ，为了使用 “之前” 和 “之后” 这样的描述，我们先得建立 “时间点” 这样一个概念 。在时间线上确立一个具体的点乍看起来似乎不可能，因为目前还没有技术能够精确到测量出一个 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Planck_time">Planck</a>（时间单位，约等于 5.391247×10^-44 秒）。但你之后会发现，比特币就是这样运作的 —— 它通过创建自己的时间概念来让确定时间线上的具体点变得可能。 </p>
<p>这个问题在 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Leslie_Lamport">Leslie Lamport</a> 于 1978 年发表的 <a target="_blank" rel="noopener" href="https://amturing.acm.org/p558-lamport.pdf">“Time, Clocks, and the Ordering of Events in a Distributed System”</a> 一文中有很详细的说明 。不过实际上 ， 除了 “正确同步的物理时钟” 之外， 这篇文章并没有提出什么彻底的解决办法。在 1982 年，Lamport 还提出了 <a target="_blank" rel="noopener" href="https://people.eecs.berkeley.edu/~luca/cs174/byzantine.pdf">“Byzantine Generals Problem”</a> （拜占庭将军问题） 。中本聪在他<a target="_blank" rel="noopener" href="http://satoshi.nakamotoinstitute.org/emails/cryptography/11/">早期的邮件</a>中解释了工作量证明如何能解决该问题。不过 ，他在<a target="_blank" rel="noopener" href="https://bitcoin.org/bitcoin.pdf">比特币白皮书</a>中写道：“想要在点对点的基础上使用一个分散式的时间戳服务器，我们需要使用工作量证明系统”。这句话表明工作量证明主要还是用来解决时间戳排序这一问题的。 </p>
<h3 id="时间排序是最根本的问题"><a href="#时间排序是最根本的问题" class="headerlink" title="时间排序是最根本的问题"></a><strong>时间排序是最根本的问题</strong></h3><p>这里必须要强调一下，在中本聪提出解决办法之前，<em>无法在分散式系统中确定事件与时间点的关联</em> 这个难题使得去中心化账本一直无法实现。区块链中也有很多其它的技术细节值得玩味，不过时序还是最基础也是最重要的一点。我们甚至可以认为， 无法完成时间排序，就不可能有区块链 。 </p>
<h2 id="简要回顾-“工作量证明”"><a href="#简要回顾-“工作量证明”" class="headerlink" title="简要回顾 “工作量证明”"></a><strong>简要回顾 “工作量证明”</strong></h2><p>简单来说 ，比特币上的工作量证明就是找到一个值， 这个值经过 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/SHA-2">SHA-2</a> 这个哈希函数运算后 （得到的哈希值） 能满足特定的条件（小于某一特定数值）。而这个要求的数值越小，可能满足条件的输入值就越少，从而找到这样一个输入值的难度就越高。 </p>
<p>这种机制之所以叫作 “工作量证明” 就是因为满足条件的数值太少了。找到这样一个数需要进行大量的尝试（也就是工作量）。 需要花费的工作量反过来暗示了需要花费的 <em>时间。</em> </p>
<p>通过改变要求，我们可以调整难度以及找到这样一个值的可能性。比特币难度的动态调整使得整个网络平均每十分钟找到一个这样的值（译者注：虽然这样的值要满足的要求是不断变化的） 。 </p>
<h3 id="区块之间无事发生"><a href="#区块之间无事发生" class="headerlink" title="区块之间无事发生"></a><strong>区块之间无事发生</strong></h3><p>一条链的状态是执行链上区块中交易的结果 。 因此每个新区块都会生成一个新状态。因为区块链的状态随着每一个新区块的生成而不断变化（译者注：而没有产生新区块时状态就不会改变），我们把生成一个区块所用的平均时间（十分钟）看作是区块链时间的最小计量单位。 </p>
<h3 id="SHA-函数是无记忆性、无过程性的"><a href="#SHA-函数是无记忆性、无过程性的" class="headerlink" title="SHA 函数是无记忆性、无过程性的"></a><strong>SHA 函数是无记忆性、无过程性的</strong></h3><p>一个安全哈希算法在统计学中被认为是<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Memorylessness">无记忆性</a>的。这一特性明显与人类的直觉相反。有关无记忆性最好的例子就是扔硬币。如果一枚硬币已经连续十次正面朝上了，这是否代表下一次更可能是反面朝上呢？ 直觉告诉我们，“是的”。但是实际上，不管之前的记录是什么样的，正面或是反面朝上的概率仍然是对半开的。 </p>
<p>这种无记忆性是工作量证明的 <em>无过程性</em> 的前提 。无过程性指的是当矿工挖矿时反复尝试不同的 <a target="_blank" rel="noopener" href="https://en.bitcoin.it/wiki/Nonce">nonce</a> 时，每一次尝试都是独立的事件。不论他们已经付出了多少努力，之后的每一次尝试找到正确结果的概率都是一样的。换句话说，每一次不成功的尝试不会让矿工们  “更接近”  正确的结果。一个已经尝试挖了一年矿的矿工并不会比一个刚开始挖矿的矿工更容易挖到下一个区块 。 </p>
<p>因此，在一个给定难度下，在给定时间内找到结果的概率  <em>只取决于所有矿工遍历可能哈希值的速度</em> ，跟过往的历史无关，跟区块数据也无关，只跟哈希率（hashrate，做哈希运算的速度）有关 。 </p>
<p>Hashrate 实际上就是一个矿工人数和挖矿设备计算哈希值速度的函数。 </p>
<p>（请注意：严格意义上说 SHA 并不是无过程性的，因为哈希值的数量是有限的。不过尽管如此，因为  256 位的整数的范围太大了，在实际上我们就认为它是无过程的。） </p>
<h3 id="SHA-函数的输入值是不重要的"><a href="#SHA-函数的输入值是不重要的" class="headerlink" title="SHA 函数的输入值是不重要的"></a><strong>SHA 函数的输入值是不重要的</strong></h3><p>比特币区块链中， 工作量证明算法的输入值就是一个区块的区块头（包含了对区块中交易数据的一些摘要信息，还有上一个区块的哈希值） 。不过就算我们只是随机地输入一些数据，找到合乎要求的哈希值的概率还是一样的。不论输入的是有效的区块头还是一些随机的字节，我们找到一个正确结果的时间还是平均十分钟。当然，如果你真的是把随机内容作为输入值，就算你找到了结果，你的区块也不会被打包到区块链上。虽然这种情况也算是工作量证明，但是是无用的。 </p>
<h3 id="难度是全宇宙统一的"><a href="#难度是全宇宙统一的" class="headerlink" title="难度是全宇宙统一的"></a><strong>难度是全宇宙统一的</strong></h3><p>你知道吗，难度是 <em>普世的</em> 。意思就是说整个宇宙中，不论在哪，难度都是一样的。于是，我们可以请火星上的矿工来帮忙挖矿。他们不需要认识地球上的矿工，甚至都不用进行沟通联络， 整个网络还是每 10 分钟挖出一个区块 。（好吧，实际上他们得先想出个办法告诉我们地球人他们挖出区块了，否则就算他们挖出来了我们也不知道。） </p>
<p>显然，远程参与的矿工们彼此之前并没有什么沟通，因为他们只是在共同尝试解决同一个数学统计问题 。他们其实都不知道彼此的存在。 </p>
<p>这个 “统一性” 属性看似神乎其神，实际上是很好理解的。我之所以说是 “统一性”，是因为这个词很好理解。不过准确来说，它指的是 “每个矿工都知道”。 </p>
<p>SHA-256 哈希函数的输入值可以是 0 到 2^256 之间的任意一个整数（因为输出值是一个 32 位的字节，也是在 0 到 2^256 之间；任何更大的数值都会跟前面的某个数值有同样的哈希值 ，或者说是多余的）。尽管这是一个特别大的数（甚至比已知宇宙中的原子数量都<a target="_blank" rel="noopener" href="https://learncryptography.com/cryptanalysis/why-is-2-256-secure">大</a>），但大家起码都知道范围，并可以从中挑选数值。 </p>
<p>如果输入值的范围、所用的函数（SHA-256）、还有难度要求是大家都知道的，那么找到一个解的概率对所有人来说都是 统一的、公平的。 </p>
<h3 id="要做矿工也简单，算下-SHA-就行"><a href="#要做矿工也简单，算下-SHA-就行" class="headerlink" title="要做矿工也简单，算下 SHA 就行"></a><strong>要做矿工也简单，算下 SHA 就行</strong></h3><p>如果问题是让你找到一个合适的哈希值，那么你需要做的只是尝试运行一次哈希函数，然后 “叮”，你就影响了全局的哈希速率（global hash rate）。因为这次尝试，你也能被看作是一名矿工，并且帮助了别人一起解决这个问题。你不需要和别人说你做了什么（除非你找到了最终的解），其他人也不需要知道。不过不管怎么样，你的尝试都影响了全局结果。一点儿也不夸张。 </p>
<p>如果你还有点将信将疑，没关系，想想这样一个类比吧 —— 寻找最大的质数。这个问题很难，而且一旦找到了一个更大的质数，那这个数就会被认定为 “已找到” 、“已知”。在数字世界中，有无限个质数。不过因为我们用的数字系统都是一样的，不论是谁试图解决这个问题，我们面对的都是同样的问题。你不需要告诉别人你决定寻找最大的质数，你只需要等你真的找到解的时候再告诉大家。如果没有人想研究这个问题，那么这个问题的解就永远不会被找到。因此，只要最终结果会被宣布，参与度（也就是寻找结果的一次次尝试）就会影响结果，即便参与的过程是完全秘密的。这么看，中本聪发明的这套机制真的太绝妙了 —— 利用了上述的逻辑，使得秘密的参与过程和没有取得成功的尝试都能影响最终的结果。 </p>
<p>值得注意的是，因为 SHA 函数是无过程性的，每一次的尝试都可以看作是参与者付出了努力后就立刻离开了网络。 因此，我们可以认为矿工们每秒钟都会无数次地进出网络。 </p>
<h3 id="参与度会在统计结果中揭露出来"><a href="#参与度会在统计结果中揭露出来" class="headerlink" title="参与度会在统计结果中揭露出来"></a><strong>参与度会在统计结果中揭露出来</strong></h3><p>神奇的秘密参与属性反过来也 成立 。全局的哈希率（global hash rate）之所以能被大家所知道，并不是因为矿工们在一个什么 “矿工注册所” 注册登记了，然后上报各自的哈希速率 ，根本不是这么回事 。 </p>
<p>哈希率能被大家知道的原因其实也很简单。想要每十分钟左右找到一个特定难度的解，这得有这么多次的尝试（大约10^21）由某人在某地完成。 </p>
<p>我们并不知道这些参与者到底是谁，他们也不需要告诉别人他们在工作。此外他们可以存在于宇宙中的任何地方。不过可以肯定的是，这些参与者（矿工）一定存在。 因为网络在持续出块，即持续地在找出符合要求的解。 </p>
<h2 id="工作量即时钟"><a href="#工作量即时钟" class="headerlink" title="工作量即时钟"></a><strong>工作量即时钟</strong></h2><p>综上即可得知工作量证明的核心：挖矿的难度要求就是一部时钟 。 你愿意的话，可以管它叫 “宇宙时钟”，它不需要去跟别人同步，而且所有人都能 “看到” 它 。 </p>
<p>这个时钟不精确也没关系。 重要的是，每个人的时钟都相同，并且链的状态可以明确地与此时钟的滴答声联系在一起。 </p>
<p>这台时钟是由数目未知的参与者集体的哈希率总和来推动运行的；这些参与者散布在这颗星球上，彼此之间毫无关联。 </p>
<h3 id="最后一块拼图"><a href="#最后一块拼图" class="headerlink" title="最后一块拼图"></a><strong>最后一块拼图</strong></h3><p>工作量证明问题的解必须是一个区块 （准确来说是一个区块头） 的哈希值。就像我们之前说的，输入值并不重要。不过如果是一个真的区块，那么这个解找出来的时候，也就是这个时钟的 “滴答” 一刻 。不是在那之前，也不是之后，就是在那一刻。我们这么确信，就是因为区块是这个机制的一部分。 </p>
<p>换个说法，如果 SHA256 函数的输入值不是区块，我们还是会有一个时钟，但是却没法把区块和时钟的滴答声联系在一起。而使用区块作为输入值就能很好地解决这个问题。 </p>
<p>值得注意的是，我们的工作量证明时钟只能给我们提供滴答声。但我们没法从滴答声中听出顺序。而 前后相接的哈希链条就是用来解决这个问题的（译者注：因为区块头中包含了挖矿的矿工选定作为父区块的那个区块的哈希值，因此这就形成了先后顺序）。 </p>
<h3 id="这关分布式共识什么事？"><a href="#这关分布式共识什么事？" class="headerlink" title="这关分布式共识什么事？"></a><strong>这关分布式共识什么事？</strong></h3><p>共识意味着一致同意。所有参与者都必须遵循的一条规则就是，时钟会有滴答声。其外，所有人都能听到滴答声，并且知道与每个滴答声相关联的数据。而这，正如中本聪在一封邮件中提过的，实际上解决了 拜占庭将军问题。 </p>
<p>还有另外一个共识是专门用来处理一种特殊情况的 —— 两声连续的滴答声与互相冲突的区块相关联。这种冲突只有等待下一声滴答的出现才能解决。当下一个与滴答声相关联的区块出现时，它会接在前面冲突的两个区块中的一个后面。而这就会使得另一个区块变成 “孤块”。一条链到底会如何发展，是一个概率问题，但或多或少也能跟工作量证明时钟有关。 </p>
<h3 id="大概就是这么回事了"><a href="#大概就是这么回事了" class="headerlink" title="大概就是这么回事了"></a><strong>大概就是这么回事了</strong></h3><p>以上就是工作量证明对区块链的作用 。矿工们并不是通过买什么 “彩票” 来赢取打包一个区块的权利，也不是什么把电能转换成一种有价值的东西，这些说法都走远了 。 </p>
<p>彩票这一说法无非是用来吸引更多的矿工来参与到挖矿中，它本身并不是区块链运行的机制。有人也许会说区块的哈希值形成了链条，不过这也跟工作量证明没什么关系 ，它只是用密码学来强化对区块顺序的记录而已 。哈希链条还确保之前的滴答声越来越不可改变，变得越来越安全。 </p>
<p>工作量证明机制也增强了区块的不可改变性。这也顺带使得隔离见证（ Segregated Witness ）变得可行，不过其实通过保留签名（witness）也可以实现。所以这一作用只是次要的。 </p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h2><p>比特币区块链的工作量证明实际上就是一个分布式的、去中心化的时钟。 </p>
<p>如果你理解了这个解释，那么你应该对工作量证明和<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Proof-of-stake">权益证明</a>间的区别有了更清楚的认知。显然，两者本质上是不同的：权益证明是（用随机性来分发的）权力，而工作量证明是一个时钟。 </p>
<p>在讨论区块链时，我们说 “工作量证明” 其实不太贴切。这个词是从 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Hashcash">Hashcash</a> 项目中传下来的 ；在该项目中，它是用来证明工作量的。而在区块链上它则主要用于获得可校验的时间顺序 。当一个人看到一个哈希值满足难度条件，他&#x2F;她知道 产生这个哈希值一定花去了一些时间 。而这段时间就是由 “工作量” 造成的。不过这个哈希值之所以有意义，就是因为它证明了它的产生是经过了一段时间的。 </p>
<p>工作量证明主要跟时间有关，而不是跟工作量有关；这个事实也指出了，可能还有其他的统计问题会更消耗时间但只需要更少的能量。这一事实也意味着比特币的 hashrate（哈希速率）实际上是过多的。我们前面提到的比特币时钟其实只需要一部分的 hashrate 也能运行自如。不过奖励机制的存在刺激了能量的消耗。 </p>
<p>找出一个只需更少工作量又能享受更快滴答频率的方法十分困难，如果你找到了，请一定告知我！ </p>
<p>此外，我想特别感谢 <a target="_blank" rel="noopener" href="https://galton.uchicago.edu/">UChicago Statistics</a> 的 <a target="_blank" rel="noopener" href="http://sashat.me/">Sasha Trubetskoy</a> 对本文的修订和建议。 </p>
<p>（完）</p>
</article></div></div></main><script src="/js/post.js?v=1673690025634"></script><script src="/js/highlight.min.js?v=1673690025634"></script><script>var containerEl = document.querySelector('.post-container');
var postFontSize = localStorage.getItem('post-font-size') || '16';
var inputEl = document.querySelector('#size-change-input');
var inputEl2 = document.querySelector('#size-change-input2');
inputEl.value = postFontSize;
inputEl2.value = postFontSize;
containerEl.style.fontSize = postFontSize + 'px';
$(function(){
  function setSizeChangeInputValue(size) {
    $('.post-container').css('font-size', size + 'px');
    localStorage.setItem('post-font-size', size);
    $('#size-change-input').val(size);
    $('#size-change-input2').val(size);
  }
  $('#size-change-input').on('input propertychange', function(e) {
    const size = e.target.value;
    setSizeChangeInputValue(size);
  });
  $('#size-change-input2').on('input propertychange', function(e) {
    const size = e.target.value;
    setSizeChangeInputValue(size);
  });
});
</script><script>hljs.initHighlightingOnLoad();</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com/btcstudy">Twitter</a><!-- Github--><!-- Ins--><!-- RSS--><a title="rss" target="_blank" rel="noopener nofollow" href="/atom.xml">rss</a><!-- 知乎--><!-- 领英--><!-- 脸书--><!-- Telegram--><a title="telegram" target="_blank" rel="noopener nofollow" href="//t.me/btcstudyorg">Telegram</a></section></footer><script async src="/js/buttons.js?v=1673690025634"></script><script async src="/js/index.js?v=1673690025634"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-JVCJ9XXG1Z');</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306";
  hm.async = true;
  hm.defer = true;
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
  </script></body></html>