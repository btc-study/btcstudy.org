extends widget/base
block append head
  link(rel='stylesheet', href= url_for('/style/post.css'))
  link(rel='stylesheet', href= url_for('/style/themes/highlight-theme-light.css'))
  script(src= url_for("/js/highlight.pack.js"))
block topic
    div#postTopic.is-full-height.hidden
        - var title = truncate( page.title, {length: 65, omission: '..'} ) || ''
        p.is-full-height.is-flex-shrink-0.is-flex.is-align-items-center.is-justify-content-center= title
        //- p.is-full-height.is-flex-shrink-0.is-flex.is-align-items-center.is-justify-content-center= __('click_back_to_the_top')

block content
    - var tocContent = toc(page.content, {list_number: false})

    main.container.is-max-widescreen.content.section.post-page.pt-4
        .columns.is-flex-desktop.is-justify-content-center
            .column.is-3.silde-bar.is-hidden-mobile(class= tocContent.length < 1 && 'is-hidden')!= tocContent
            .column.is-9
                //- header.my-4
                //-     if page.tags && page.tags.length > 0
                //-         each tag in page.tags.toArray()
                //-             a(href= url_for(`/tags/${tag.name}`))
                //-                 i.tag.post-item-tag= tag.name
                h1.mt-0.mb-2.is-family-serif#postTitle= page.title
                if page.date && page.author
                    div.is-flex.is-flex-direction-row
                        div.is-flex.is-flex-direction-row.page-data.mr-6
                            img.mr-1(src= page.avatar || url_for("/images/default_avatar.png") alt= page.author)
                            div.is-flex.is-flex-direction-column
                                strong= page.author
                                time.has-text-grey(datetime=page.date.toJSON())= date(page.date, date_format)
                        div.is-flex
                            if page.tags && page.tags.length > 0
                                each tag in page.tags.toArray()
                                    a(href= url_for(`/tags/${tag.name}`))
                                        i.page-tag.mr-1.px-1= tag.name.replace(/-/g, ' ')
                //- if page.date
                //-     time.has-text-grey(datetime=page.date.toJSON())= date(page.date, date_format)
                article.mt-4.post-content!= page.content
                //- section.jump-container.is-flex.is-justify-content-space-between.my-6
                //-     // em is empty placeholder
                //-     if page.prev
                //-         - var preContent= `${ __('prev') }: ${ page.prev.title }`
                //-         a.button.is-default(href= url_for(page.prev.path) title= page.prev.title)
                //-             i.iconfont.icon-prev.mr-2.has-text-grey
                //-             span.has-text-weight-semibold= preContent
                //-     else
                //-         em
                //-     if page.next
                //-         - var nextContent= `${ __('next') }: ${ page.next.title }`
                //-         a.button.is-default(href= url_for(page.next.path) title= page.next.title)
                //-             span.has-text-weight-semibold= nextContent
                //-             i.iconfont.icon-next.ml-2.has-text-grey
                //- if theme.comment_utteranc && theme.comment_utteranc.enable
                //-     article.mt-6.comment-container
                //-         script(
                //-             async
                //-             repo= theme.comment_utteranc.repo
                //-             src= "https://utteranc.es/client.js"
                //-             label= theme.comment_utteranc.label
                //-             issue-term= theme.comment_utteranc.issue_term || "pathname"
                //-             theme= theme.comment_utteranc.theme || "preferred-color-scheme"
                //-         )
block script
    script(src= url_for("/js/post.js"))
