---
title: '闪电网络的自主保管模式走得通'
author: 'Stephen DeLoeme'
date: '2025/11/28 11:00:18'
cover: ''
excerpt: '移动端闪电节点是比特币的未来'
categories:
- 闪电网络
tags:
- 分级钱包
---


> *作者：Stephen DeLoeme*
> 
> *来源：<https://www.voltage.cloud/blog/lightning-self-custody-works>*



闪电网络是比特币的终极扩容方案。在不到 10 年的时间里，它就从一个小小的实验，长成了一个准备好企业应用的支付解决方案，支持了 25% 的 CashApp 的比特币交易。

但是，虽然闪电网络的企业采用日渐增长，人们有时候还是会说：“闪电网络的自主保管模式走不通。” 而且，我们怎么能抱怨他们这么说呢？在各种大会和播客上，你总是会听到有人说，闪电网络更像一种 “胶水”，把其它比特币协议 “粘合” 起来，但是 “闪电网络不是给用户准备的，它只是一种基础设施。”

虽然说这是对的 ——  闪电网络确实能够帮助将不同的比特币协议和公司粘合起来 —— 但是，闪电网络也不止于此。我要说，闪电网络不只是大玩家之间的结算层。闪电网络的自主保管模式，对终端用户也是行得通的。

但在我解释其中的 *理由* 之前，我想先澄清一些 *走不通* 的做法。

## 每家有一个节点？

这曾是在开始于 2020 年下半年的牛市中出现的口号。那时候，闪电网络技术终于到达了一个非常成熟的状态，人们都对 “[Umbrel](https://umbrel.com/)” 和 “[Start 9](https://start9.com/)” 这样的项目非常感兴趣。简单来说，它们是小体积的计算机，你可以在家里运行。这些计算机可以常驻闪电节点（以及其它东西）。

看到一波又一波人摩拳擦掌地在自己家里运行这些设备，包括那些一般来说不会接触最前沿科技的人，确实鼓舞人心。但是，几年过去了，兴奋之情也开始消退了。

现实是，在家里运行一个服务器，并不适合所有人。虽然有这个选项，对于有兴趣自主保管的人来说，是好的，但我并不认为，闪电网络会走这条路来扩大到足以服务全球。**从我个人经验来看，我发现许多人都在这一时期形成了一种错误的印象：闪电网络要求用户在自己家里运行服务器**。（编者注：加粗为编者所加。）

但实际上，闪电节点可以 *有许多不同的形式*。

## 每个手机一个节点！

我们必须拓宽对 “运行一个闪电节点” 的理解。

对于一些人来说，当他们听到 “运行一个节点” 的时候，他们脑海里出现的画面就是业余爱好者们将 Umbrel 操作系统刷入一个树莓派电脑。但闪电节点可能是许多东西：

![img](../images/lightning-self-custody-works-why-mobile-nodes-are-the-future-of-bitcoin/927de_99b5fb83.png)

- 你的客厅里的一个树莓派 —— 适合业余爱好者
- “[Voltage](https://www.voltage.cloud/)” 云平台上的一个节点 —— 适合企业
- 你的手机里的一个 app —— 适合终端用户

就这么简单 —— 你可以在你的手机上运行一个闪电节点。

“但是，它不是会消耗很多系统资源吗？” 其实，这取决于你想要怎么使用一个闪电节点。如果你在做生意，你需要企业级的支持，那么你最好还是选择 Voltage 这样的服务解决方案，这样你就可以给你的服务器配备大量的专用资源，从而可以应对大量的支付。

另一方面，假设你只是一个普通用户，只是偶尔想用比特币收取支付；在这种具体的用途中，有一些办法可以帮助你的闪电节点 “瘦身”：

- 切断点对点网络的 gossip 通信，从一个受信任的数据来源处同步（闪电网络的图谱）—— 这可能是在移动设备上运行的节点的可以接受的取舍
- 限制通道数量 —— 这里的用途是支付，而不是路由（转发支付），所以一条来自某个闪电网络服务商（LSP）的健康通道就够了
- 不参与路由 —— 因为这个节点的目的是收取之神，所以你不需要关于路由支付，也就是说，你不需要担心数据库的存储负担

最终，你会在手机上得到一种轻量得多的闪电节点。它 *只有* 用户收取和发送支付所必需的功能。

## 我们之前不是已经试过了吗？

虽然我花了一些时间来梳理走向 “每台手机一个节点” 的分析，但它不是个新想法。它是由 “Breez” 和 “Phoenix” 这样的移动端钱包项目首创的，并且已经被 “Mutiny wallet”、“Bilxt” 和新版本的 “Zeus” 采用了。

有这么多项目成功做到了这一点，我们就可以推翻 “这做不到” 的结论。这是 *完全可以做到的*，而且也已经被实现许多次了。

但只要我们诚实一些，就会承认还有一些毛糙的地方：

### 闪电发票很奇怪

闪电发票不是一种符合直觉的使用方式。对于现在的绝大部分金融科技 app 来说，我们都预期能够通过邮件地址、手机号码、用户名来识别收款方，然后发送支付。但是，目前的绝大多数闪电网络应用的默认体验都是 “发票”，它只能使用一次，而且有过期时间。

### 离线支付是不可少的

即使是最厉害的闪电钱包，也受困于没有离线支付。问题是这样的：当我把手机放在裤兜里的时候，它就会休眠；一旦进入休眠，闪电节点就会断网；在闪电节点断网的时候，它就收不到支付。

这对于自主保管的闪电钱包的用户体验来说，是个大问题。使用现在的金融科技 app 的时候，我们都期待可以全天随时收取支付，不论我有没有打开这个 app，不论手机是唤醒状态还是休眠状态。在我看来，没有离线支付，严重玷污了闪电网络的形象。这种局限性感觉很傻，也不符合我们听到 “神奇的互联网货币” 时的期待。稍等，我们会在后文讨论一些解决方案。

### 通道很烦人

虽然大部分最好的闪电网络移动端钱包都找到了办法来抽象掉 “通道” 的概念（或者说隐藏技术细节），它依然会在一切奇怪的罕见情形中出现。

比如说，我听到过这样一个故事：一个用户频繁通过自己的移动端闪电钱包来收款。他收得太多了，事实上，LSP 已经在不断给他创建新的通道了。虽然通道对用户隐藏了起来，但还是会造成一种尴尬的局面：这人的资金被分散在多条通道里，所以更难在一笔支付中花费所有资金。

即使用户只有一条通道，“通道保证金” 这样的概念，还是会给用户一种印象：他们没法花费自己在闪电网络中的所有资金。如果你的余额很多，你可能永远不会碰到这个问题。但一个新入门的用户可能只有很少的余额，所以他们更有可能遇到这种尴尬情形。

### LSP 在哪里？

LSP 也不容易。如果你还不了解这个东西，我给你介绍一下：它基本上就是一种给其它闪电节点提供入账流动性（收款额度）的服务。LSP 背后的想法是：可以通过赚取路由费、或是直接预收一次性手续费的办法，来激励人们向需要收款额度的用户开启通道。

我认为，一个强大的 LSP 生态，对于闪电网络的繁荣是必要的。就像许多其它技术和理念一样，我认为 LSP 受困于 “[技术成熟度曲线](https://en.wikipedia.org/wiki/Gartner_hype_cycle)”。有一段时间我们看到了 LSP 的数量急剧增多，但现在许多都已经离开了美国或者完全关停了。

为什么会这样呢？每个 LSP 的原因都不同。对于一些来说，可能要归因于监管缺乏清晰度。但对大部分来说，可能只是因为他们没有赚到足够多的钱。资金是有机会成本的。虽然大量活动都已经转移到了闪电网络，但毕竟还是很初级。对于一些人来说，闪电网络钱包可能是必不可少的日常工具，但对许多人来说，还只是一个有趣的实验。

举个例子，假设 100 个人从应用商店下载了一个闪电钱包。某个 LSP 向他们每人开设了 1 条通道（总共 100 条）。那么这个 LSP 预期能从路由费中获得多少收入呢？还是有许多不确定性。一部分用户可能会不断收取和发送支付，也就是给 LSP 带来稳定的收入。但是，还有一些用户，下载了钱包就当作一个实验，放在那里。他们只是在试用不同的钱包。因此，他们很少真的使用闪电支付，建立的闪电通道也不活跃，而这些资金可以放在别的地方，产生更大的收益。

## 但所有这些事情都有解法

我们在现有的 “每个手机都有一个节点” 选项中找出了这么多问题，为什么还要坚持这种方法？因为将自主保管带给即时支付，是值得的。这些问题 *实际上都有解决方案*。要将这些解决方案化为现实，有很长的路。但是，就像比特币自己一样，这些解决方案是开源的，也是在公开环境中打造出来的。

### 一种可以重复使用的支付身份标识符

去年（2024 年），BOLT12 被正式合并到了闪电网络规范中。自那以来，我们已经看到许多项目采用了这种新的协议规范。那么 BOL12 给了我们什么呢？“要约（offers）”，是对传统的闪电网络发票的一种替代方案。

BOLT11 发票只能安全地使用一次，BOLT12 要约则可以安全地无限重复使用。

它听起来很简单，但它 *非常强大*。它消除了你在每次收取支付时都要生成一张发票（如果它过期，还得重新生成）的繁琐需要。它为提供用户预期的所有体验铺平了道路。

当然，BOLT12 offer 看起来也很奇怪：

```
lno1zrxq8pjw7qjlm68mtp7e3yvxee4y5xrgjh
hyf2fxhlphpckrvevh50u0qtx73q79y9dt5ug5
d7tk7qs90klazggchdtppd90cae522cu3rpj7q
szg0mtgk7qhrrvm2pvqnhtl25nd7gl38gnc4n9
re0v2y4kkumtl4esqve77ean3258rvhlywwte0
eyhm4qzy2833r7xdcz67r4nv4pm4ghsheg6j37
wscjrwc8eufxf2fgqecvkm9lqd7wehq27m2tgp
zymmpun8t9yeweyd6mq74pz207sa53hcmkrtkv
2qqs9fwd9svuvz80x0uz4pqp6ugy4u
```

那就要用到 “BIP-353” 了。它让用户可以创建看起来像是电子邮件地址的身份标识符，但是，它却能够用来查找比特币支付信息。所以你也不必使用上面这样的 offer，可以直接分享这样的东西：

```
₿stephen@twelve.cash
```

BIP-353 用户名系统是分布式的，给予全球的 DNS 系统。它帮助了去中心化，因为没有单点故障（比如让某个互联网服务器来提供所有的支付身份信息）。而且，BIP-353 使用了 “DNSSEC”，所以闪电节点可以用密码学来验证，DNS 记录上的支付信息是无法篡改的！

### 异步支付

在不远的将来，移动端的闪电钱包也将能够在断网时接受支付！这是怎么做到的呢？这跟叫做 “异步支付” 的项目有关。

异步支付的过程要求移动端闪电节点与其 LSP 形成一些配合。本质上是，当你的节点离线的时候，一个 LSP 可以暂时扣住给你的支付。当你回到线上的时候，这个 LSP 会知道你的节点上线了，然后完成支付。这是以免信任的方式完成的，即使你没有在线，LSP 也偷不走你的钱。

（译者注：作者此处的描述太粗糙了。实际上，好的方法是要求支付者和接收者两方的 LSP 相互配合：在支付者发起支付之前，支付者的 LSP 询问接收者的 LSP 该接收者是否在线，如不在线则暂时扣住支付；当接收者回到线上时，其 LSP 向支付者的 LSP 报告，然后完成支付。）

近期，多项代码合并请求以及合并到了 “LDK（[Lightning Dev Kit](https://lightningdevkit.org/)）” 中，为异步支付铺平了道路。因为它还在活跃开发中，我无法断定什么时候会准备好。但对我来说，这似乎不远了。然后，我们需要说服 LSP 们采用这个规范。一旦我们有一两个 LSP 使用这种技术，我们就可以在闪电网络上实现好用的异步支付。

### 放松对 LSP 的资本要求

显然，没有任何一种魔法，可以离开强大的 LSP 生态而成功。那么我们如何激励这个我们想看到的世界？

我认为，解决方案的一个主要的方面是，不要夸大。虽然我认为在运行闪电网络基础设施上有绝佳的机会，但这也是一个长期游戏。随着我们开发出好的产品、为使用闪电网络的用户解决真实的问题，那就会有更多活动在闪电网络上发生。活动数量增加，LSP 赚到钱的机会也会增加。

但是，这里依然有我们前面提到的 “机会成本” 问题。也就是说，锁定在闪电通道中的流动性，如果没有得到利用，就不如用在别的地方，也许能获得更大的收益。

### 通道拼接

“通道拼接” 是一种强大的工具，可以用来放松对 LSP 的资本要求。简单来说，通道拼接让我们可以在创建一条闪电通道之后改变其容量。你需要更多收款额度？简单，可以拼接更多资金到我们的闪电通道中，从而给你更多的收款额度。如果你的通道不活跃了，也没问题，我可以将我的资金从通道中挪出来、部署到别的地方。

通道拼接给了 LSP 为一个移动端闪电节点保持一条通道的能力，无需再开设多条通道。这也给了他们更有效率的办法来重新分配资金。

拼接对于出于起步阶段的闪电支付企业非常关键。企业可以将资本从不需要的地方释放出来、部署到最需要它的地方。

### 消除通道保证金要求

最近，另一种方向的发展是 “option_zero_reserve”。简而言之，这个选项让两个闪电通道合作伙伴可以不设通道保证金。虽然在敌意环境中，通道保证金是件好事，但它会阻碍用户体验。通过使用零保证金选项，我们可以让用户选择花掉他们的全部余额。这也意味着整个通道的余额可以用于路由支付，这对于LSP来说也是一种更有效的资金分配。

### 分级钱包（Graduated wallets）

另一种让闪电网络上的资金更加高效的办法是开发分级钱包软件。简单来说，在这种钱包中，用户一开始的余额会放在托管服务里面，当然也可以用在信任最小化的协议中。举个例子，小额的资金可以使用 “[Ark 协议](https://ark-protocol.org/)”，也可以使用托管供应商。随着用户的余额增加，他们的自主保管的动力也增加。一旦他们的余额达到某个门槛，LSP 就会跟他们开启一条闪电通道，让所有的资金都进入自主保管模式。

这能帮到资金效率吗？首先，分级钱包模型可以帮助 LSP 避免向那些只是在尝试应用程序的用户开放 “无生产力的” 闪电通道。例如，有人想给酒保 5000 聪的比特币小费，前提是他们下载一个闪电钱包。虽然我们希望酒保欣赏比特币并想要使用它，但这是没有保证的。

我们真的希望开启一条闪电通道、让某人能保管自己的 5000 聪、然后让它在那里吃灰、直到下一个牛市到来吗？这并不是资金最有效率的使用方式。在分级钱包模式中，我们先用别的技术来保管这 5000 聪；当这个酒保的存款达到某个门槛时，TA 才会获得一条闪电通道。

分级钱包有助于提高资本效率的另一种方式是，用户的余额可以抵消创建通道的资金要求。比如说，假设一个 LSP 开设了一条通道，容量为 50 0000 聪，这意味着他们必须为每一个他们希望服务的客户都准备 50 万聪。但是，在分级钱包中，他们只需要提供 40 万聪就够了。因为用户开设通道的门槛就是 10 万聪。

但是情况会更好：如果考虑到并不是每个用户都会达到假设的阈值，那么这意味着 LSP 需要打开的通道总体上更少。假设给定的闪电钱包和 LSP 有 100 个用户。他们的默认通道大小是 50 万聪，他们的自我托管阈值是 10 万聪，实际达到自我托管阈值的用户数量是 25% 。在分级模式下，他们开设的通道数量减少了 75%，每条通道所需的资金减少了 20% 。这比没有分级钱包节省了 80% 的资金。

**这其中不会有诈吗？**

当然，在达到那个阈值之前，分级钱包模型并不是完全的自我保管，这是事实。但是想想看区块确认的手续费。即使我可以单方面关闭闪电通道，如果我在该通道里的余额非常低，那么我会因为区块确认手续费而亏损，也即关闭通道也是不经济的。

又比如，有人通过 Nostr 协议收到 21 聪的打赏。这个数量远远低于粉尘限额，无论如何都不会在区块链内领取。

所以，当我们考虑自我托管时，重要的是记住，对于非常小的金额，这在技术上是不可行的。考虑到这些细节，我们可以将目光投向改善 “严肃用户” 的自主保管 —— 换句话说，那些真正使用闪电产品发送和接收真实付款的人，而不是玩玩而已的人。

## 结论

自主保管的闪电钱包不仅是可能的 —— 对于那些想用它来构建的人来说，它已经准备好了。这是一个艰难的过程 —— 它需要大量的规范、代码、PR 和非常老土的开源协作。其结果是一种非常成熟的技术，可以供企业采用。

建立一个人们可以即时支付并完全自主保管资金的世界是一个美好的未来。企业在闪电网络上建立产品和服务的机会是巨大的。

闪电来了，这是一个比以往任何时候都更好的时机。你会抓住这个机会吗？

（完）