---
title: '何为 “双向注资的闪电通道”？'
author: 'Che Kohler'
date: '2023/10/31 12:00:34'
cover: ''
excerpt: '在创建一条支付通道时，参与的双方可以同时为之提供资金'
categories:
- 闪电网络
tags:
- 双向注资
---


> *作者：Che Kohler*
> 
> *来源：<https://thebitcoinmanual.com/articles/what-is-a-dual-funded-lightning-channel/>*



以分层的方式给比特币扩容，建立了一系列新的运行环境以及彼此之间的桥梁，也带来了一系列需要解决的问题。[闪电网络](https://thebitcoinmanual.com/blockchain/lightning-chain/)是这些二层解决方案中最受欢迎的，它为网络的参与者提供了即时的结算，因此非常适合日常的支付、游戏以及内容变现，等等。

使用非托管的[闪电钱包](https://thebitcoinmanual.com/security/lightning-wallet/)有其局限性，因为你需要线在比特币主链上签名一笔交易、锁定一些比特币，从而建立一条闪电通道，然后才能使用闪电网络。这笔创建通道的交易就跟常见的比特币交易一样，需要等待区块链确认，也要支付手续费。

重要的是，在你如此建立一条通道之后，你得到的是一个不平衡的通道 —— 只有你为这条通道提供了资金（你的通道对手并没有），因此只有你在通道中拥有余额，你的对手并没有，因此，你无法用这条通道来接收支付；你只有先支付给别人，然后才能接收支付。在我创建我的第一条闪电通道时，我发现建立通道和平衡通道都是我必须自己处理的事，这让我有点失望。

现在，这个痛点有办法解决了：双向注资通道。

## 什么是 “双向注资通道”？

“双向注资” 意味着在创建一条支付通道时，参与的双方可以同时为之提供资金。这个操作的底层协议称为 “版本 2 的通道建立协议”，也可以用于协商创建单向注资的通道。当然，它的出发点是为双向注资提供支持。

这对闪电网络用户来说是一个有用的选择，因为，到目前为之，还只有单向注资的通道 —— 只有发起通道创建操作的一方才能为注资交易添加资金。双向注资让管理、创建和关闭闪电通道都变得更加高效，不论从手续费、创建难度和流动性管理来说，都是如此。

## 双向注资通道有什么好处？

在双向注资通道实现以前，用户连接到闪电网络的方式是开启一条（单向注资的）通道。这种方法的问题在于，在一开始你得到的总是一条不平衡的通道。

不平衡，指的是只有一方在通道中拥有资金。这对用户来说是很恼人的 —— 如果只有对方有资金，自己就不能使用这条通道来支付（而需要等对方使用这条通道发起支付）；如果只有自己有资金，那就无法使用这条通道来接收支付。

### 减少开始接收支付的时延

双向注资让建立通道的双方都在一开始就拥有余额，因此，双方都可以立即发起支付和接收支付。

对于消费者而言，单向注资通道没什么问题，只要开启了，TA 立即就可以花费自己的钱，享受到闪电网络的速度、效率和隐私性。但如果你想要接收资金，那么一条心的单向注资通道对你来说就毫无用处。比如想要通过闪电网络来接收支付的商家，你得先花掉一部分钱，然后才能获得相等数量的收款额度。

（译者注：在当前，这个获取 “入账流动性（收款额度）” 的问题是通过潜水艇互换来解决的，即将闪电通道内的资金置换成链上资金；由于支付了闪电通道中的余额，自然就获得了收款额度。还有一种解决方案是租赁通道，即要求某个节点向自身开启一个达到一定额度的通道、且通道需要持续一定事件。）

双向注资通道就是这个问题的解决方案之一。

### 提供更多选择

双向注资并不需要双方都提供相等数量的比特币。想要接收支付的商家可以只贡献少量的资金，就建立通道并获得入账流动性。

### 更便宜的自主保管体验

双向注资也可以减少向闪电通道添加流动性的成本。开启双向注资通道所需的链上手续费也较少（译者注：不是与一条单向注资通道相比，而是与在单向注资条件下获得平衡的通道相比）。因此，向闪电网络部署流动性也会变得更便宜、更高效，这可能会提高整个网络的流动性。

## 寻找双向注资的通道伙伴

现在，双向注资可用了，但其效用还依赖于找到愿意双向注资的伙伴。为了解决这个问题，愿意双向注资的参与者可以通过自己的节点找到这样的伙伴。一种[新的节点 announcement 提议](https://lists.linuxfoundation.org/pipermail/lightning-dev/2018-November/001532.html)可以帮助收款额度的买方和卖方在去中心化的环境中发现彼此。

此外，未来可能还会出现双向注资的市场，而且 [Lapps](https://thebitcoinmanual.com/apps/) 和[支持闪电网络的交易所](https://thebitcoinmanual.com/buying-btc/lightning/)可能会跟用户形成双向注资的通道。

## 双向注资的隐私风险

双向注资也不是没有取舍的，因为它需要双方都向对方揭晓一个自己的 UTXO，就像别的某些协议（比如 [coinjoin](https://thebitcoinmanual.com/articles/what-is-a-bitcoin-coinjoin/) 和 payjoin）一样。这可能是一个潜在的攻击向量。恶意行动者可以监控这些双向通道，或者为了知道谁拥有哪个 UTXO 而故意参与通道创建协商。

双向注资协议也可以用来开启单向注资通道，因此可以用来帮助匿名性。协议也允许参与者沟通节点的性能，并为多种通道参数找出双方都能接受的数值。

## 第一条双向注资通道是什么时候建立的？

世界上第一条双向注资的闪电通道是在比特币主网的 681753 号区块处开启的。Blockstream 使用自己的 c-lightning 实现开启了这条通道，并在一篇[博客](https://medium.com/blockstream/c-lightning-opens-first-dual-funded-mainnet-lightning-channel-ada6b32a527c)中宣布了这件事。

（完）