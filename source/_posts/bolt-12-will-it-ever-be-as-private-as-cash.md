---
title: 'BOLT 12 是沉睡的巨人：隐私篇'
author: 'LN Capital'
date: '2022/12/08 12:22:54'
cover: ''
excerpt: '它能够提供媲美现金的隐私性吗？'
categories:
- 闪电网络
tags:
- 闪电网络
- BOLT12
---


> *作者：LN Capital*
> 
> *来源：<https://twitter.com/ln_capital/status/1594408238539218956>*



闪电网络将统治世界。但是，它能够提供媲美现金的隐私性吗？让我们从隐私性的角度来看 BOLT 12 这个沉睡的巨人。

为防你还不知道 BOLT 12 是什么，我来简单介绍一下。BOLT 是 “Basis of Lightning Technology（闪电网络技术基础）”的缩写。BOLT 就像是针对闪电网络提出的 BIP。BOLT 12 可以通过 [@blockstream](https://twitter.com/Blockstream) 的 [@core_LN](https://twitter.com/Core_LN) 获取，[@acinq](https://twitter.com/acinq) 和 [@lightningdevkit](https://twitter.com/lightningdevkit) 两个团队也正在实现。

如果你还没有看过 BOLT 12 的第一篇，可以点击该链接：https://twitter.com/LN_Capital/status/1589321548133203968 （[中文译本](https://www.btcstudy.org/2022/11/13/bolt-12-is-a-sleeping-giant/)）

## 当前的闪电网络规范（BOLT 11）存在哪些隐私问题？

1. 任何公开发布的 BOLT 11 发票都可以被解码。解码后的发票包含关于接收方的敏感信息，包括：
	- 公钥和节点别名
	- IP 地址和位置（仅限于非洋葱网络）
	- 公开通道的容量和节点余额
2. 在 BOLT 11 上退款并不私密。退款接收方必须泄露私人信息才能接收退款。这导致了不可接受的折中。用 [@rusty_twit](https://twitter.com/rusty_twit) 的话来说，“你是想要拿回自己的钱还是保持匿名？”
3. 支付通道导致链上 UTXO 曝光。在闪电网络上开启支付通道需要完成一笔 2/2 多签交易。目前，闪电网络支付通道开启交易看起来与普通比特币交易不同。这会将你的链上交易历史与闪电网络关联起来，让你容易遭受去匿名化攻击。

（译者注：人们之所以能发现一个 UTXO 跟某条闪电通道之间的关联，有多方面的原因。详见这篇文章：《[闪电网络隐私性：从局限到超越](https://www.btcstudy.org/2022/09/29/lightning-privacy-from-zero-to-hero/)》）

## BOLT 12 是如何解决这些隐私性问题的？

主要通过三种方式：盲路径、付款方证明、Schnorr 签名

### 盲路径

盲路径可以让用户在不知道接收方的情况下通过网络发送代币。盲路径交易的最后几跳是加密的，因此只有前一跳才知道下一跳的目的地。

发送方只知道交易是否到达了目的地，不知道目的地和付款路线。对于闪电网络用户而言，这极大地提高了隐私性，因为用户无需为了收款而泄露自己的敏感信息。

你可能会想，“这听起来很复杂。存在任何折中吗？”闪电网络上的盲路径不会牺牲速度。但是，它们在付款失败时返回的信息较少（保证接收方的匿名性），使得了解付款失败的原因变得更加困难。

盲路径不是解决隐私性问题的灵丹妙药。它们仍无法抵御计时攻击（timing attacks），但无疑是朝着正确的方向迈出了一步。

### 付款方证明

每个 BOLT 12 offer 都包含一个“付款方密钥”。这个密钥可以用来证明你创建了一个发票。这使得退款变得更加容易，因为商家可以验证顾客的退款请求是否有效。

由于 BOLT 12 offer 实际上是默克尔树，你可以证明自己在**没有**泄露个人敏感信息的情况下完成了付款。

与盲路径结合后，BOLT 12 offer 可以保证退款的隐私性，提供比 BOLT 11 更优质的用户体验。

### Schnorr 签名

BOLT 12 规范从头到尾都使用了 Taproot Schnorr 签名。这意味着在闪电网络上开启支付通道的交易（2/2 多签交易）看起来与普通的比特币交易完全相同。Schnorr 签名斩断了链上比特币和闪电网络之间的关联。

但是，Taproot 和 Schnorr 只解决了问题的一部分。（节点间的）通道开启交易不会泄露隐私，但是（节点对网络的）通道公告会。这与闪电网络的 gossip 架构的运作方式有关。Gossip 2.0 正在开发中，我之后会另写一篇文章介绍。

## 太长不看

BOLT 11 存在三大缺陷：在收款方隐私保护上有所欠缺，无法保证退款的隐私性，并且会将链上比特币与闪电网络相关联。

BOLT 12 利用盲路径、付款方证明和 Taproot Schnorr 签名减轻了隐私性问题。闪电网络的隐私保护仍需改进，但 BOLT 12 是个很好的开始。

（完）