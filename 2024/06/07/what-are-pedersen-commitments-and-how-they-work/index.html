<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><title>什么是 “Pedersen 承诺”？</title><meta name=keywords content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name=description content=比特币思想的中文集结地><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1"><link rel=icon href=/favicon.ico><link rel=stylesheet href="/style/common/bulma.css?v=1682773100887"><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href="/style/common/iconfont.css?v=1682773100887"><link rel=stylesheet href="/style/base.css?v=1682773100887"><link rel=stylesheet href="/style/common/helper.css?v=1682773100887"><link rel=stylesheet href="/style/themes/animation.css?v=1682773100887"><script>function ready(){var e=document.querySelector(".body-container"),t=localStorage.getItem("theme")||"light";["light","dark"].includes(t)||(t="light",localStorage.setItem("theme","light")),e.classList.remove("appearance-auto"),e.classList.add("appearance-"+t),quickInitialTheme()}function quickInitialTheme(){var e=localStorage.getItem("theme")||"light",t=document.querySelector(".logo-light"),o=document.querySelector(".logo-dark"),d=document.querySelector("#mobile-header-logo > .logo-light"),l=document.querySelector("#mobile-header-logo > .logo-dark"),a=document.getElementById("theme-btn"),i=document.querySelector(".slide-theme-light"),c=document.querySelector(".slide-theme-dark");document.body.classList.add(e),("dark"===e?(t.classList.add("hidden"),o.classList.remove("hidden"),d.classList.add("hidden"),l.classList.remove("hidden"),a.classList.remove("icon-icon_dark"),a.classList.add("icon-icon_light"),i):c).classList.remove("hidden")}document.addEventListener("DOMContentLoaded",ready)</script><script src="/js/common.js?v=1682773100887"></script><script src=/js/libs/zepto.min.js></script><link rel=stylesheet href="/style/post.css?v=1682773100887"><link rel=stylesheet href="/style/themes/highlight.css?v=1682773100887"><meta name=generator content="Hexo 6.3.0"><link rel=alternate href=/atom.xml title="BTC Study" type=application/atom+xml></head><body class="is-flex is-flex-direction-column" onload=initialTheme()><div class=clip></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id=header><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href=/ ><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id=header-menu><a class="is-inline-block header-activity mr-4" href=/ >首页</a><a class="is-inline-block mr-4" href=/archives>全站目录</a><a class="is-inline-block mr-4" href=/tags>标签</a><a class="is-inline-block mr-4" href=/maps>地图</a><a class="is-inline-block mr-4" href=/tools>工具</a><a class="is-inline-block mr-4" target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input type=range min=12 max=32 step=2></div></div></div><i class="iconfont icon-icon_dark mr-1" id=theme-btn></i><div class=search-wrap><input class=pl-3 id=search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search" id=search-input-btn></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopic><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">什么是 “Pedersen 承诺”？</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn2></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input2 type=range min=12 max=32 step=2></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id=mobile-header><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id=mobile-header-logo><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopicMobile><p class=is-full-height>什么是 “Pedersen 承诺”？</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class=mobile-search-wrap><div class=search-input><input class=pl-3 id=mobile-search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class=mobile-search-input-btn>搜 索</button></div></div></header><div class=mobile-slide-menu><a class=header-activity href=/ >首页</a><a href=/archives>全站目录</a><a href=/tags>标签</a><a href=/maps>地图</a><a href=/tools>工具</a><a target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class=slide-menu-fontsize><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1682773100887"></script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%8A%A8%E6%9C%BA><span class=toc-text>动机</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86><span class=toc-text>前置知识</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%BC%A0%E7%BB%9F%E7%9A%84%E6%89%BF%E8%AF%BA%E6%96%B9%E6%A1%88><span class=toc-text>传统的承诺方案</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%9C%AF%E8%AF%AD%E6%80%BB%E7%BB%93><span class=toc-text>术语总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#Pedersen-%E6%89%BF%E8%AF%BA><span class=toc-text>Pedersen 承诺</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E8%83%BD%E8%AE%A9%E6%89%BF%E8%AF%BA%E8%80%85%E7%9F%A5%E9%81%93-Q-%E7%9A%84%E7%A6%BB%E6%95%A3%E5%AF%B9%E6%95%B0><span class=toc-text>为什么不能让承诺者知道 [Q] 的离散对数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#Pedersen-%E6%89%BF%E8%AF%BA%E6%9C%89%E7%94%A8%E5%9C%A8%E5%93%AA%EF%BC%9F><span class=toc-text>Pedersen 承诺有用在哪？</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%90%8C%E6%80%81%E5%8F%AF%E5%8A%A0><span class=toc-text>同态可加</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#Pedersen-%E5%90%91%E9%87%8F%E6%89%BF%E8%AF%BA><span class=toc-text>Pedersen 向量承诺</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E9%80%8F%E6%98%8E%E5%9C%B0%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E7%82%B9><span class=toc-text>透明地生成随机点</span></a></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id=postTitle>什么是 “Pedersen 承诺”？</h1><div class=page-author><div class="is-flex is-flex-direction-row page-data mr-6"><img class=mr-1 src=/images/default_avatar.png alt=RareSkills><div class=page-author-info><strong>RareSkills</strong><time class=has-text-grey datetime=2024-06-07T03:14:14.000Z>2024-06-07</time></div></div><div class=is-flex><a href=/tags/%E5%AF%86%E7%A0%81%E5%AD%A6><i class="page-tag mr-1 px-1">密码学</i></a></div></div><article class="mt-4 post-content"><blockquote><p><em>作者：RareSkills</em></p><p><em>来源：<a target=_blank rel=noopener href=https://www.rareskills.io/post/pedersen-commitment>https://www.rareskills.io/post/pedersen-commitment</a></em></p></blockquote><p>“Pedersen 承诺” 让我们可以使用一个椭圆曲线点来表示任意大的向量，同时可以选择隐藏关于这个向量的任何信息。它给了我们一个重要的元件，让我们可以证明用这个点来编码的向量，又不必暴露这个向量本身。</p><h2 id=动机><a href=#动机 class=headerlink title=动机></a>动机</h2><p>在讨论 Bulletproot 零知识证明技术的时候，人们常常这样说：“我们有两个向量，它们的内积（inner product）是 c。” 似乎这很普通，但实际上，你可以用这个机制来证明非常复杂的陈述（claim）。我们后面展开说。</p><p>但为了让这样的证明系统可以工作，这些向量就不能只有证明者知道 —— 不然证明者就可以随意改变它们。它们必须是真实世界中的数学实体。一般来说，证明者肯定不想直接把这两个向量交给验证者，但依然需要 “传递一些东西” 给验证者，表示自己已经选定了一对向量，不能再改变了。</p><p>这就是我们需要 Pedersen 承诺的地方。</p><h2 id=前置知识><a href=#前置知识 class=headerlink title=前置知识></a>前置知识</h2><p>我们假设读者已经熟悉了椭圆曲线点加法和点乘法，以及 “曲线上的一个点” 意味着什么。如果你还不了解，请参考我们的《<a target=_blank rel=noopener href=https://www.rareskills.io/zk-book>零知识证明之书</a>》的前面四章。</p><p>至于记号，我们用 <code>[A]</code> 来表示一个椭圆曲线（EC）点，用 <code>a</code> 表示一个<a target=_blank rel=noopener href=https://www.rareskills.io/post/rings-and-fields>有限域</a>内的元素，而 <code>a[A]</code> 表示这个有限域元素 <code>a</code> 与椭圆曲线点 <code>[A]</code> 的点乘法。而表达式 <code>[A] + [B]</code> 表示这两个点的<a target=_blank rel=noopener href=https://www.rareskills.io/post/elliptic-curve-addition>点加法</a>。</p><h2 id=传统的承诺方案><a href=#传统的承诺方案 class=headerlink title=传统的承诺方案></a>传统的承诺方案</h2><p>在设计智能合约中的承诺揭晓函数时，我们通常使用这样的形式：</p><pre><code>commit = hash(value, salt)
</code></pre><p>其中的 “salt（盐）” 是一个随机数值，用来阻止攻击者的暴力搜索猜测。比如说，如果我们是在承诺投出的一票，由于票的可选项是有限的，那么我们的票到底投给了谁，就可以通过尝试所有的选项、检查哈希值匹配来发现。（而加了盐，这样的暴力搜索就行不通了。）</p><p>盐在这种场景中的用法，有一个学术名词，叫做 “<strong>盲化</strong>（blinding）因子”。因为它是随机的，攻击者就仿佛失明了，猜不出被承诺的数值（上面式子中的 “value”）到底是什么。</p><p>因为攻击者无法通过 “诺言” 猜测出其背后的数值，我们就说这种承诺方案<strong>有藏匿效果</strong>。</p><p>而揭晓数值的阶段，承诺者揭晓数值和盐（在文献中，它们叫做 “<strong>契机</strong>（opening）”），另一方（或者智能合约）可以验证它们跟原本的承诺相匹配。如果在同一承诺方案中不可能用另一对 <code>(value, salt)</code> 来获得相同的诺言，我们就说这种方案<strong>有绑定效果</strong> —— 承诺者一旦揭晓诺言，就不可能再改变被承诺的数值（也即两者就绑定了）。</p><h3 id=术语总结><a href=#术语总结 class=headerlink title=术语总结></a>术语总结</h3><ul><li>有<strong>藏匿</strong>效果的承诺方案不允许敌手知晓承诺者选择的数值。这通常是通过加入一个攻击者无法猜测的随机数来实现的。</li><li><strong>盲化</strong>因子则是让被承诺的数值无法通过暴力搜索得出的随机数。在一些我们并不在乎零知识性（而只在乎简洁性）的场景中，可能不使用盲化因子。</li><li><strong>契机</strong>则是计算出诺言的数值（被承诺的数值和盐）。</li><li>有<strong>绑定</strong>效果的承诺方案不允许承诺者使用不相同的契机计算出相同的诺言。也就是说，他们不应能够找出两对 <code>(value, salt)</code>，计算得出相同的诺言（在这里是哈希值）。</li></ul><h2 id=Pedersen-承诺><a href=#Pedersen-承诺 class=headerlink title="Pedersen 承诺"></a>Pedersen 承诺</h2><p>Pedersen 承诺方案的模式没有什么不同，只不过，它用的是椭圆曲线群，而不是密码学哈希函数。</p><p>在 “椭圆曲线上离散对数难解” 假设下，给定椭圆曲线点 <code>[U]</code> 和 <code>[G]</code>，我们无法计算出能让 <code>[U] = u[G]</code> 的 <code>u</code> 。</p><p>用 Python 语言的代码来说，就是：</p><pre><code class=python>from py_ecc.bn128 import G1, multiply

u = 569723450 # chosen randomly
U = multiply(G1, u)

print(U, &quot;cannot compute the discrete log of U&quot;)
</code></pre><p>我们说，<code>u</code> 是 <code>[U]</code> 的离散对数。即使我们并不能计算出 <code>u</code>，也依然管它叫 <code>[U]</code> 的离散对数，因为我们知道它存在。所有的（密码学）椭圆曲线点都有一个离散对数，即使我们无法计算出它。</p><p>在这个意义上，椭圆曲线点乘法就像一种哈希函数。它们是有绑定效果的，只要我们只允许在曲线阶数内的契机。</p><p>不过，虽然它有绑定效果，我们无法通过点反转出其离散对数，如果 <code>u</code> 的取值范围很小，我们就会遇到（跟上述投票案例）完全一样的问题。敌手可以通过遍历所有可能的 <code>x</code>、计算 <code>x[G]</code> 来猜测我们的 <code>x</code> 。</p><p>我们可以用下列方式实现 “Pedersen 式隐匿”：</p><pre><code>commitment = v[G] + s[Q]
</code></pre><p>这里的 <code>v</code> 就是我们要承诺的数值，而 <code>s</code> 是盐（盲化因子）；<code>Q</code> 是另一个椭圆曲线点，承诺者不知道其离散对数。</p><p>我们要强调的是，虽然它们的离散对数都是未知的，<code>[G]</code> 和 <code>[Q]</code> 都是公开的，验证者和承诺者都知晓。</p><h3 id=为什么不能让承诺者知道-Q-的离散对数><a href=#为什么不能让承诺者知道-Q-的离散对数 class=headerlink title="为什么不能让承诺者知道 [Q] 的离散对数"></a>为什么不能让承诺者知道 <code>[Q]</code> 的离散对数</h3><p>假设承诺者知道 <code>[Q]</code> 背后的离散对数 <code>[Q] = d[G]</code> 。这会让承诺者可以找出两个拥有相同诺言的契机。原理如下。</p><pre><code>[C] = v[G] + s[Q]
    = 10[G] + 15[Q]
    = 10[G] + 15[dG]
    
[C′] = 11[G] + (15d−1)[G] 

[C] = [C′]
</code></pre><p>读者可以手动为 <code>d</code> 代入任意数字，看看它是怎么工作的。</p><p><strong>承诺者不能知道他们所用的椭圆曲线点的离散对数关系。</strong></p><p>保证这一点的一个办法是，让验证者来为承诺者提供这个椭圆曲线点。不过，更简单的办法是，以随机且透明的办法选出一个椭圆曲线点，例如，伪随机地选出椭圆曲线点。给定一个随机的椭圆曲线点，我们就不知道其离散对数。</p><p>举个例子，我们可以从生成元（<code>[G]</code>）开始，哈希其 x 坐标值和 y 坐标值，然后喂入一个伪随机但确定的函数，用来寻找下一个点。</p><h2 id=Pedersen-承诺有用在哪？><a href=#Pedersen-承诺有用在哪？ class=headerlink title="Pedersen 承诺有用在哪？"></a>Pedersen 承诺有用在哪？</h2><p>看起来 Pedersen 承诺只是使用另一种哈希函数的常规承诺方案，它有用在哪儿？</p><p>这个方案有许多好处。</p><h3 id=同态可加><a href=#同态可加 class=headerlink title=同态可加></a>同态可加</h3><p>给定一个生成元 <code>[G]</code>，我们可以将两个承诺加在一起：<code>a[G] + b[G] = (a + b)[G]</code> 。即使我们再加入随机盲化隐私，我们依然可以制作出有效的契机：</p><p>$$C_1 &#x3D; a[G] + s_1[Q]$$</p><p>$$C_2 &#x3D; b[G] + s_2[Q] $$</p><p>$$C_3 &#x3D; C_1 + C_2 $$</p><p>$$承诺揭晓 (a, b, s_1 + s_2) $$</p><p>$$验证者检查 C_3 ?&#x3D; a[G] + b[G] + (s_1 + s_2)[Q]$$</p><p>常规的密码学哈希函数（比如 SHA256）是做不到这样的。</p><p>（在 Pedersen 承诺中）<code>b[G]</code> 和 <code>s[Q]</code> 在相加时不会彼此 “冲突”。</p><p>你看下面这个等式成立吗？</p><pre><code>(a[G]+b[H]) + (c[G]+d[H]) = (a+c)[G] + (c+d)[H]
</code></pre><p>（这里的 <code>[G]</code> 和 <code>[H]</code> 都是未知离散对数的两个椭圆曲线点）。</p><p>你可以把椭圆曲线点理解成正交维度（orthogonal dimensions）上的一种线性组合（linear combination）的基（basis）。</p><p>当存在有限域元素 $a_1, a_2, b_1, b_2$，以及椭圆曲线点 <code>[G]</code> 和 <code>[H]</code>，且 <code>[G]</code> 不等于 <code>[H]</code> 、$a_1 \ne a_2$、$b_1 \ne b_2$，即使 $a_1[G] + b_1[H] &#x3D; a_2[G] + b_2[H]$，依然不可能绕过离散对数难题而解出 $(a_1, a_2, b_1, b_2)$ 。</p><p>而且，当我们的椭圆曲线群的阶数足够大的时候，靠运气找出这样的匹配，更是渺茫。</p><p>换句话说，假设两个人计算各自的承诺 <code>[C] = a[G] + b[H]</code> 和 <code>[C&#39;] = a&#39;[G] + b&#39;[H]</code>，且 $a \ne a’$ 且 $b \ne b’$。只要 <code>[G]</code> 和 <code>[H]</code> 的离散对数未知，<code>[C]</code> 就不太可能等于 <code>[C&#39;]</code> 。</p><p><strong>Pedersen 承诺是 zk 友好的</strong></p><p>为椭圆曲线上的加法和乘法制作电路相对容易，因为唯一要求是常规的算术运算；但常规的哈希函数却要用到比特位移（bitshifting）和异或运算（XOR），需要栋梁的约束才能编码成零知识证明的电路。</p><p><strong>我们可以将任意多的点编码成一个点</strong></p><p>我们使用 <code>[G]</code> 和 <code>[Q]</code> 的例子也可以认为是一个不设盲化因子的 2 维的向量承诺。但我们也可以加入任意多的椭圆曲线点 $[G_1, G_2,…, G_n]$，承诺任意多个标量。</p><h3 id=Pedersen-向量承诺><a href=#Pedersen-向量承诺 class=headerlink title="Pedersen 向量承诺"></a>Pedersen 向量承诺</h3><p>我们把上述方案再推进一步，从而承诺一组数值，而不是一个数值和一个盲化因子。</p><p><strong>向量承诺方案</strong></p><p>假设我们有一组随机的椭圆曲线点（$[G_1, G_2,…, G_n]$）（它们的离散对数我们全都不知道，那么我们可以这样做：</p><p>$$[C] &#x3D; v_1[G_1] + v_2[G_2] + … + v_n[G_n] + r[Q]$$</p><p>这让我们可以用一个诺言 <code>[C]</code> 承诺许多个数值，并用 <code>r</code> 来藏匿。</p><p>因为承诺者并不知道任何一个生成元背后的离散对数，所以他们将无法知道 <code>[C]</code> 的离散对数。因此，这个方案有绑定效果：他们只能用 $[v_1, v_2,…, v_n]$ 来产生诺言 <code>[C]</code>，无法用另一组向量做到。</p><p><strong>向量承诺可以聚合</strong></p><p>我么可以把两个 Pedersen 向量承诺相加，得到一个对两个向量的诺言。承诺者依然可以用原本的向量来揭晓。这里有一个重要的实现细节，就是原本的两个向量承诺必须使用两组不同的椭圆曲线点来生成。</p><p>$$[C_1] &#x3D; v_1[G_1] + v_2[G_2] + … + v_n[G_n] + r[Q] $$</p><p>$$[C_2] &#x3D; w_1[H_1] + w_2[H_2] + … + w_n[H_n] + s[Q] $$</p><p>$$[C_3] &#x3D; [C_1] + [C_2] $$</p><p>这里，<code>r[Q]</code> 和 <code>s[Q]</code> 是盲化因子。即时承诺者没有承诺向量，整个诺言看起来依然像是一个随机的点。</p><p>承诺者后面可以揭晓原本的向量 $[v_1, v_2,…, v_n]$ 和 $[w_1, w_2,…, w_n]$，以及盲化因子 <code>r + s</code>。这也是有绑定效果的，无法用另一组向量和盲化因子产生相同的诺言。</p><p>我们给一组向量使用 $[G_1, G_2,…, G_n]$、给另一组使用 $[H_1, H_2,…, H_n]$ 不暗示着这些 <code>[G_i]</code> 生成元和 <code>[H_i]</code> 生成元内部有什么特殊关系。所有这些点都需要伪随机地选出来。它们仅仅只是记号上的重合，便于我们直接说 “这些椭圆曲线点向量与这组有限域元素向量搭配，那些椭圆曲线点向量与那些有限域元素向量搭配”。</p><p>我们可以承诺的向量的数量是没有内在上限的。</p><p><strong>考考读者</strong>：如果我们给两个承诺使用相同的生成元 $[G_1, G_2,…, G_n]$，然后再相加，承诺者如何为 $[C_3]$ 揭晓两组不同的向量？举个例子，使用另一组椭圆曲线点 $[H_1, H_2,…, H_n]$ 是不是可以避免这一点？</p><p><strong>考考读者</strong>：如果承诺者在揭晓时调换被承诺的值的位置，会发生什么事？</p><p>举个例子，他承诺的是：</p><p>$$[C_1] &#x3D; v_1[G_1] + v_2[G_2] + … + v_n[G_n] + r[Q]$$</p><p>然而公开的契机是：</p><p>$$[v_2, v_1, v_3, v4,…，v_n]$$</p><p>也就是说，承诺者调换了前面两个元素的位置，但其它东西一切不变。假设向量 $[G_1, G_2,…, G_n]$ 是不可调换的。</p><h2 id=透明地生成随机点><a href=#透明地生成随机点 class=headerlink title=透明地生成随机点></a>透明地生成随机点</h2><p>我们如何能生成这些随机的椭圆曲线点？一种显然的解决方案是使用一个受信任的启动设置，但这并不是必要的。承诺者可以通过透明地随机选出一些我们不知道其离散对数的点。</p><p>他们可以先选择生成元 <code>[G]</code>，混合一个公开选出的随机数，然后哈希这个结果（需要对 field_modulus 取模），从而获得另一个数值。如果这个结果作为 x 值能够落在椭圆曲线上，那么就使用它作为下一个生成元，再次哈希它的 (x, y) 坐标值。相反，如果它作为 x 值，在椭圆曲线上没有对应点，那我们就递增 x 值，直到它有对应的椭圆曲线点。因为并不是由承诺者来生成这些点的，他们也不可能知道这些点的离散对数。这种算法的实现细节交给读者当作练习。</p><p>在任何情况下，都不应该通过乘法来生成一个点，因为这将导致我们知道其离散对数。你需要通过一个哈希函数来伪随机地得出一个 x 值，然后看看它是否落在椭圆曲线上。</p><p>从生成元 <code>[G]</code> 开始也是可以的（众所周知，其离散对数是 1），然后生成其它点。</p><p><strong>留给读者的练习</strong>：假设我们用点 <code>[G1]</code> 和 <code>[G2]</code> 承诺了一个 2 维向量。<code>[G1]</code> 的离散对数已知，但 <code>[G2]</code> 的离散对数未知。（我们暂时忽略盲化因子）。承诺者能够使用另一个 2 维向量来揭晓这个承诺吗？为什么呢？</p><p>（完）</p></article></div></div></main><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.8/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script>MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],processEscapes:!0,skipTags:["script","noscript","style","textarea","pre","code"]}}),MathJax.Hub.Queue(function(){for(var a=MathJax.Hub.getAllJax(),e=0;e<a.length;e+=1)a[e].SourceElement().parentNode.className+=" has-jax"})</script><script src="/js/post.js?v=1682773100887"></script><script src="/js/highlight.min.js?v=1682773100887"></script><script>var containerEl=document.querySelector(".post-container"),postFontSize=localStorage.getItem("post-font-size")||"16",inputEl=document.querySelector("#size-change-input"),inputEl2=document.querySelector("#size-change-input2");inputEl.value=postFontSize,inputEl2.value=postFontSize,containerEl.style.fontSize=postFontSize+"px",$(function(){function e(t){$(".post-container").css("font-size",t+"px"),localStorage.setItem("post-font-size",t),$("#size-change-input").val(t),$("#size-change-input2").val(t)}$("#size-change-input").on("input propertychange",function(t){e(t.target.value)}),$("#size-change-input2").on("input propertychange",function(t){e(t.target.value)})})</script><script>hljs.initHighlightingOnLoad()</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class=sns-container><a title=nostr target=_blank rel="noopener nofollow" href=https://iris.to/npub1g2qs0ca5kpwlrcfug2em4jelmh65clk3yccwjxrs6hvdpd9qj80q022j4m>Nostr</a><a title=rss target=_blank rel="noopener nofollow" href=/atom.xml>rss</a><a title=telegram target=_blank rel="noopener nofollow" href=//t.me/btcstudyorg>Telegram</a></section></footer><script async src="/js/buttons.js?v=1682773100887"></script><script async src="/js/index.js?v=1682773100887"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JVCJ9XXG1Z")</script><script>var _hmt=_hmt||[];(()=>{var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306",e.async=!0,e.defer=!0,document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)})()</script></body></html>