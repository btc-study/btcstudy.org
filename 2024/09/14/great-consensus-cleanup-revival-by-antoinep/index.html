<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><title>重访 “共识清理” 提议</title><meta name=keywords content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name=description content=比特币思想的中文集结地><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1"><link rel=icon href=/favicon.ico><link rel=stylesheet href="/style/common/bulma.css?v=1682773100887"><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href="/style/common/iconfont.css?v=1682773100887"><link rel=stylesheet href="/style/base.css?v=1682773100887"><link rel=stylesheet href="/style/common/helper.css?v=1682773100887"><link rel=stylesheet href="/style/themes/animation.css?v=1682773100887"><script>function ready(){var e=document.querySelector(".body-container"),t=localStorage.getItem("theme")||"light";["light","dark"].includes(t)||(t="light",localStorage.setItem("theme","light")),e.classList.remove("appearance-auto"),e.classList.add("appearance-"+t),quickInitialTheme()}function quickInitialTheme(){var e=localStorage.getItem("theme")||"light",t=document.querySelector(".logo-light"),o=document.querySelector(".logo-dark"),d=document.querySelector("#mobile-header-logo > .logo-light"),l=document.querySelector("#mobile-header-logo > .logo-dark"),a=document.getElementById("theme-btn"),i=document.querySelector(".slide-theme-light"),c=document.querySelector(".slide-theme-dark");document.body.classList.add(e),("dark"===e?(t.classList.add("hidden"),o.classList.remove("hidden"),d.classList.add("hidden"),l.classList.remove("hidden"),a.classList.remove("icon-icon_dark"),a.classList.add("icon-icon_light"),i):c).classList.remove("hidden")}document.addEventListener("DOMContentLoaded",ready)</script><script src="/js/common.js?v=1682773100887"></script><script src=/js/libs/zepto.min.js></script><link rel=stylesheet href="/style/post.css?v=1682773100887"><link rel=stylesheet href="/style/themes/highlight.css?v=1682773100887"><meta name=generator content="Hexo 6.3.0"><link rel=alternate href=/atom.xml title="BTC Study" type=application/atom+xml></head><body class="is-flex is-flex-direction-column" onload=initialTheme()><div class=clip></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id=header><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href=/ ><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id=header-menu><a class="is-inline-block header-activity mr-4" href=/ >首页</a><a class="is-inline-block mr-4" href=/archives>全站目录</a><a class="is-inline-block mr-4" href=/tags>标签</a><a class="is-inline-block mr-4" href=/maps>地图</a><a class="is-inline-block mr-4" href=/tools>工具</a><a class="is-inline-block mr-4" target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input type=range min=12 max=32 step=2></div></div></div><i class="iconfont icon-icon_dark mr-1" id=theme-btn></i><div class=search-wrap><input class=pl-3 id=search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search" id=search-input-btn></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopic><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">重访 “共识清理” 提议</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn2></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input2 type=range min=12 max=32 step=2></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id=mobile-header><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id=mobile-header-logo><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopicMobile><p class=is-full-height>重访 “共识清理” 提议</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class=mobile-search-wrap><div class=search-input><input class=pl-3 id=mobile-search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class=mobile-search-input-btn>搜 索</button></div></div></header><div class=mobile-slide-menu><a class=header-activity href=/ >首页</a><a href=/archives>全站目录</a><a href=/tags>标签</a><a href=/maps>地图</a><a href=/tools>工具</a><a target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class=slide-menu-fontsize><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1682773100887"></script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%97%B6%E9%97%B4%E6%89%AD%E6%9B%B2%E6%BC%8F%E6%B4%9E><span class=toc-text>时间扭曲漏洞</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AE%83%E6%9C%89%E5%A4%9A%E7%B3%9F%E7%B3%95%EF%BC%9F><span class=toc-text>它有多糟糕？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%88%91%E4%BB%AC%E5%BA%94%E8%AF%A5%E4%BF%AE%E5%A4%8D%E5%AE%83%E5%90%97%EF%BC%9F><span class=toc-text>我们应该修复它吗？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%88%91%E4%BB%AC%E8%83%BD%E5%A4%9F%E5%BE%97%E5%87%BA%E4%B8%80%E4%B8%AA%E6%9B%B4%E5%A5%BD%E7%9A%84%E4%BF%AE%E5%A4%8D%E6%8E%AA%E6%96%BD%E5%90%97%EF%BC%9F><span class=toc-text>我们能够得出一个更好的修复措施吗？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%9C%80%E5%B7%AE%E6%83%85%E5%BD%A2%E4%B8%8B%E7%9A%84%E5%8C%BA%E5%9D%97%E9%AA%8C%E8%AF%81%E6%97%B6%E9%97%B4><span class=toc-text>最差情形下的区块验证时间</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%9C%89%E5%A4%9A%E7%B3%9F%E7%B3%95%EF%BC%9F><span class=toc-text>有多糟糕？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%8F%90%E8%AE%AE%E5%AF%B9%E6%9C%80%E5%B7%AE%E6%83%85%E5%BD%A2%E6%9C%89%E5%A4%9A%E5%A4%A7%E6%8F%90%E5%8D%87%EF%BC%9F%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E5%BE%97%E5%87%BA%E6%9B%B4%E6%9C%89%E6%95%88%E7%9A%84%E7%BC%93%E8%A7%A3%E6%8E%AA%E6%96%BD%E5%90%97%EF%BC%9F><span class=toc-text>提议对最差情形有多大提升？我们可以得出更有效的缓解措施吗？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%BD%BF%E7%94%A8-64-%E5%AD%97%E8%8A%82%E4%BA%A4%E6%98%93%E7%9A%84%E9%BB%98%E5%85%8B%E5%B0%94%E6%A0%91%E6%94%BB%E5%87%BB><span class=toc-text>使用 64 字节交易的默克尔树攻击</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%9C%89%E5%A4%9A%E4%B9%88%E7%B3%9F%E7%B3%95%EF%BC%9F><span class=toc-text>有多么糟糕？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%88%91%E4%BB%AC%E8%83%BD%E5%BE%97%E5%87%BA%E6%9B%B4%E5%A5%BD%E7%9A%84%E4%BF%AE%E5%A4%8D%E6%8E%AA%E6%96%BD%E5%90%97%EF%BC%9F><span class=toc-text>我们能得出更好的修复措施吗？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%84%BF%E6%9C%9B%E6%B8%85%E5%8D%95><span class=toc-text>愿望清单</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#BIP30-%E9%AA%8C%E8%AF%81><span class=toc-text>BIP30 验证</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%BD%A0%E6%9C%80-%E2%80%9C%E5%96%9C%E6%AC%A2%E2%80%9D-%E7%9A%84-bug%EF%BC%81><span class=toc-text>你最 “喜欢” 的 bug！</span></a></li></ol></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id=postTitle>重访 “共识清理” 提议</h1><div class=page-author><div class="is-flex is-flex-direction-row page-data mr-6"><img class=mr-1 src=/images/default_avatar.png alt="Antoine Poinsot"><div class=page-author-info><strong>Antoine Poinsot</strong><time class=has-text-grey datetime=2024-09-14T04:15:01.000Z>2024-09-14</time></div></div><div class=is-flex><a href=/tags/Consensus-Cleanup><i class="page-tag mr-1 px-1">Consensus Cleanup</i></a></div></div><article class="mt-4 post-content"><blockquote><p><em>作者：Antoine Poinsot</em></p><p><em>来源：<a target=_blank rel=noopener href=https://delvingbitcoin.org/t/great-consensus-cleanup-revival/710>https://delvingbitcoin.org/t/great-consensus-cleanup-revival/710</a></em></p></blockquote><p>最近我一直在回顾 Matt Corallo 的 “<a target=_blank rel=noopener href=https://github.com/TheBlueMatt/bips/blob/7f9670b643b7c943a0cc6d2197d3eabe661050c2/bip-XXXX.mediawiki>共识清理</a>” 提议。我的兴趣是弄清楚：</p><ul><li>该提议想解决的那些 bug 有多严重；</li><li>被提议的修复措施，对最差情形的改善有多少；</li><li>多了 5 年的经验之后，我们是否能做得更好；（译者注：Matt 的提议是在 2019 年提出的。）</li><li>还有没有别的东西，是值得解决的。</li></ul><p><strong>长话短说</strong>：我认为那些 bug 很糟糕。最差情形下的区块验证时间令人担忧。我也认为，修复时间扭曲漏洞比人们通常认为的要重要得多。最后，我认为，我们可以包含一项修复，以避免在区块高度 198 3702 后执行 BIP30 验证；还有一项对传统交易形式（legacy transactions，指的是隔离见证以前的交易形式）体积上限的额外限制，可以为区块验证时间提供有用的安全边际。</p><p>我希望用这篇文章激发对共识清理提议希望解决的协议 bug 的讨论。我希望收集对每一项拟议的缓解措施的评论和意见，以及对更多修复措施的潜在建议。关于区块验证时间的部分有大幅删减：我会公开分享一些数字，但关于制作破环性区块的策略的细节，我只会跟 Bitcoin Core 的常年贡献者以及少数比特币协议开发者分享。</p><h2 id=时间扭曲漏洞><a href=#时间扭曲漏洞 class=headerlink title=时间扭曲漏洞></a>时间扭曲漏洞</h2><p>时间扭曲漏洞利用了难度调整周期不会重叠的特点。矿工通过将一个目标调整周期的最后一个区块的时间戳尽可能往前拨（也就是现在的 2 个小时之后），同时将所有其它区块的时间戳尽可能往后拨，就可以利用这一特点，人为降低难度。这个 <a target=_blank rel=noopener href=https://bitcoin.stackexchange.com/a/75834/101498>stackexchange 的答案</a>有更详尽的解释。</p><h3 id=它有多糟糕？><a href=#它有多糟糕？ class=headerlink title=它有多糟糕？></a>它有多糟糕？</h3><p>考虑它到底如何让情形恶化，以及它具体带来了什么，是有趣的事情。不管怎么说，矿工们总是可以按住时间戳，不让它推进，即使不利用时间扭曲漏洞。但如果不将一个难度调整周期的第一个区块的时间戳设定得比上一周期最后一个区块还要早，利用难度调整机制就必然会带来挖矿难度的增加。反之，将一个周期的第一个区块的时间戳设得比上一周期最后一个区块要早，攻击者就可以在利用低难度（本局成果）的同时进一步降低难度。</p><p>实际上，攻击者可以在开始这种攻击的一个多月时间里，就对网络造成致命伤害。从时间点 <code>t</code> 、周期 <code>N</code> 开始发动攻击，到周期 <code>N+1</code> 的末尾，攻击者就已经可以让难度降低一半。这又让他们可以在一周内挖出周期 <code>N+2</code> 的所有区块，进一步将难度降低 2.5 倍，等等。在少于 40 天的时间里，攻击者就可以让难度降至 1，从而一下子可以挖出几百万个区块。除了拿走剩余所有的区块补贴，这还会摧毁所有依赖于时间锁的 L2 协议的安全性，并让 DoS 攻击界面恶化（比如，可以跟 UTxO 集的膨胀相结合）。</p><p>这里忽略了 MTP（过往时间中值），因为它充其量只是攻击者的一个小麻烦。不过，这也提出了一个问题：尽管这样的攻击以控制大部分挖矿算力为前提，小体量的算力是否可以尝试伺机利用它来牟利？比如，将一个调整周期的最后一个区块的时间戳尽可能向前拨，而将所有其它区块的时间戳（在 MTP 规则允许的范围内）尽可能向后拨。技术上来说，这对矿工来说没有（显著）的代价，而 <em>可能</em> 会给他们（以及其它矿工）稍微多一点点区块奖励（以牺牲未来的矿工为代价）。事实证明，使用这样的策略，对于任何小的挖矿算力来说，边际收益都是微不足道的，所以我们可以合理预计，矿工不会尝试相机而动地利用时间扭曲漏洞。</p><h3 id=我们应该修复它吗？><a href=#我们应该修复它吗？ class=headerlink title=我们应该修复它吗？></a>我们应该修复它吗？</h3><p>一些人主张，矿工们不会有意搬起石头砸自己的脚。也就是说，他们不会杀死自己要挖的链。相反，他们可能会达成一种均衡，仅仅将出块的速度提高 X% 。关于矿工有能力让可用的区块空间增加而不需要改变节点间的共识规则会带来的政治影响，我交给读者自行评判。但我们要指出的是，如果一个矿工的卡特尔（联盟）可以通过利用时间扭曲漏洞来降低难度，即使只是轻微降低，也可以在几周时间内就让网络持续处在崩溃的边缘。</p><p>另一个常见的主张是，这并不紧急，因为攻击很明显，而且要花费很长时间。我非常怀疑需要用户在身处的共识规则之外协调并决定某一高度的某个区块的有效性的论证。此外，要协调和更改比特币的共识规则，一个月并不算长。而且，如前所述，还不确定能不能形成这样做的广泛共识。用户喜欢更低的手续费，矿工喜欢更多的补贴。给定当前对挖矿算力的控制分布以及指数降低的区块补贴，认为可能会形成一个尝试利用时间扭曲漏洞的卡特尔并非无稽之谈。</p><p>最后，还有人认为这不紧急，因为攻击需要大部分挖矿算力的参与。我认为这太过轻敌。理由时间扭曲漏洞极大地增加了 51% 攻击可以造成的伤害。原本 51% 攻击 “只能” 暂时地审查交易。但用了时间扭曲攻击，可以摧毁整个网络。</p><h3 id=我们能够得出一个更好的修复措施吗？><a href=#我们能够得出一个更好的修复措施吗？ class=headerlink title=我们能够得出一个更好的修复措施吗？></a>我们能够得出一个更好的修复措施吗？</h3><p>也许不能。被提议的修复措施是直截了当的：让难度调整周期重叠。Matt 提出的变更是最简单也最显著的：用上一周期最后一个区块的时间戳来约束本周期第一个区块的时间戳。</p><h2 id=最差情形下的区块验证时间><a href=#最差情形下的区块验证时间 class=headerlink title=最差情形下的区块验证时间></a>最差情形下的区块验证时间</h2><p>众所周知，恶意制作的非隔离见证交易可以是极难验证的。更长的区块验证时间可以让矿工攻击者获得不公平的优势，妨碍区块在网络中的传播（及其一致性），甚至对依赖于区块可得性的软件造成有害的后果。为此，共识清理提议加入了对传统脚本用法的几个额外限制。</p><h3 id=有多糟糕？><a href=#有多糟糕？ class=headerlink title=有多糟糕？></a>有多糟糕？</h3><p>很糟糕。最差情况下，我可以得出一个在我的最新笔记本电脑的 16 核 CPU 上占满 CPU、花费 3 分钟才能验证的区块；在树莓派 4 上，要花 1.5 小时。出于明显的理由，我在这里删减了这样的区块的细节，以及多种创建类似难以验证的区块的方法。我会用一种半私密的附件帖子跟其他协议开发者分享，用的是 Delving 的私密工作坊特性。如果你认为自己也应知晓，但我忘了把你加进去，请联系我。</p><p><a target=_blank rel=noopener href=https://delvingbitcoin.org/t/worst-block-validation-time-inquiry/711/3#redacted-block-1-1><em>删减 #1</em></a></p><h3 id=提议对最差情形有多大提升？我们可以得出更有效的缓解措施吗？><a href=#提议对最差情形有多大提升？我们可以得出更有效的缓解措施吗？ class=headerlink title=提议对最差情形有多大提升？我们可以得出更有效的缓解措施吗？></a>提议对最差情形有多大提升？我们可以得出更有效的缓解措施吗？</h3><p>共识清理提议所提议的缓解措施会让我制作出的区块无效。而在新的限制之下，最糟的区块在我的笔记本电脑上只要 5 秒钟就验证完成了。我认为我们可以进一步引入对传统交易体积的限制，以求稳妥。</p><p>关于被提议的缓解措施，也有人担心 “没收” 问题（原本有效的脚本变得花不出去了）。我认为，这些担忧是合理的，也可以解决：仅对某个区块高度之后创建的脚本应用新的规则。</p><p><a target=_blank rel=noopener href=https://delvingbitcoin.org/t/worst-block-validation-time-inquiry/711/3#redacted-block-2-1><em>删减 #2</em></a></p><h2 id=使用-64-字节交易的默克尔树攻击><a href=#使用-64-字节交易的默克尔树攻击 class=headerlink title="使用 64 字节交易的默克尔树攻击"></a>使用 64 字节交易的默克尔树攻击</h2><p>根据比特币区块中默克尔根的计算方式，（已知）剩余有两种攻击。两种都跟拼接两个 32 字节的哈希值相关，要求该拼接后的字符串能够成功反序列化为比特币交易。（可能最著名的）一种是欺骗一个轻节点接受一笔并没有被某个区块确认的交易：让一笔体积为 64 字节的交易得到区块确认（因此被默克尔树承诺），但其后面的 32 字节却对应于一个支付给受害者、但没有得到区块确认的交易的 txid。另一种是欺骗一个节点，让其将一个有效的区块永远禁止：找出一行树节点，可以全部反序列化为（无效的）64 字节的交易。更多细节请看 Suhas Daftuar 撰写的<a target=_blank rel=noopener href=https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2019-February/016697.html>这篇文章</a>。</p><p>共识清理提议将体积小于等于 64 字节的交易判为无效交易，可以同时修复这两个问题。</p><h3 id=有多么糟糕？><a href=#有多么糟糕？ class=headerlink title=有多么糟糕？></a>有多么糟糕？</h3><p>针对轻节点（或任何接受默克尔证据的东西，比如侧链）的攻击都要求在 61 到（大约）75 比特区间内的暴力搜索，具体取决于专门用于攻击的比特币的数额。这是昂贵的，而且有简单的缓解措施。比如，通过请求对 coinbase 交易的默克尔证据来检查默克尔树的深度，这会告诉你该区块包含了多少交易。</p><p>也就是说，这种攻击<a target=_blank rel=noopener href=https://bitslog.com/2018/06/09/leaf-node-weakness-in-bitcoin-merkle-tree-design/ >估计要花费 100 万美元的成本</a>，在 “最新的比特币挖矿 ASIC 算力到达 14TH&#x2F;s” 的时候。现在，<a target=_blank rel=noopener href=https://whatsminer-microbt.com/product/whatsminer-m63s/ >似乎</a> ASIC 的算力已经上升到 400TH&#x2F;s 了。此外，这种攻击可以给交易伪造任意数量的确认。而成本只是挖出一个假的区块来欺骗一个 SPV 客户端，现在高了一点（80 比特）。</p><p>愚弄比特币节点的攻击在 Bitcoin Core 中已经得到了缓解，办法是不缓存没有上下文的区块检查（<code>CheckBlock()</code>）。创建有效的交易是不现实的：第一笔必须是 coinbase 交易，需要暴力搜索 224 比特。</p><p>因为默克尔根在区块中的计算方式，64 字节的交易是比特币中的一个核心漏洞。虽然因它而起的（已知的）两种攻击都可以被缓解，但如果能避免这个走火风险，同时在 Bitcoin Core 中缓存无上下文的区块检查，那会是好事。</p><h3 id=我们能得出更好的修复措施吗？><a href=#我们能得出更好的修复措施吗？ class=headerlink title=我们能得出更好的修复措施吗？></a>我们能得出更好的修复措施吗？</h3><p>64 字节的没法是 “安全的”，因为在一笔交易中，64 字节不足以安置一个带有锁定脚本（不是任何人都可以花费、也不会永久锁定）的输出。它们没有已知的用途，而且已经被全网当成非标准交易长达 5 年了。给定它们会带来的漏洞以及它的无用，将它们判为无效交易是非常合理的。</p><p>然而，该 BIP 提议将小于 64 字节的交易也判为无效交易。虽然它们是没有（或者不怎么有用）的，这样的交易是无害的。我一直认为，一种交易类型无用，不足以让我们通过软分叉将它们判为无效。</p><p><a target=_blank rel=noopener href=https://github.com/bitcoin-inquisition/bitcoin/pull/24>AJ 在他给 Bitcoin-inquisition 的 PR</a> 中也让（确切的）64 字节长的交易无效。</p><h2 id=愿望清单><a href=#愿望清单 class=headerlink title=愿望清单></a>愿望清单</h2><h3 id=BIP30-验证><a href=#BIP30-验证 class=headerlink title="BIP30 验证"></a>BIP30 验证</h3><p>BIP34 暂时可以避免对每一个区块连接运行相对昂贵的 BIP30 检查。从区块高度 198 3702 开始，就不能只依赖于 BIP34 了。如果要提议一种软分叉来解决长期存在的协议 bug，那么让每一笔 coinbase 交易从此绝对独一无二，就最好了。</p><p>一种简单的解决办法是让 coinbase 交易的 <code>nLockTime</code> 设置成创建它的区块高度。但是，有一种办法更迂回，可能对矿工来说更容易部署：在所有 coinbase 交易中强制要求 witness 承诺（来自 Greg Sanders）。我还没有确定这条规则会不会有例外，但如果一个前隔离见证 coinbase 交易，其输出恰好推送了以 32 个 <code>0x00</code> 字节开头的见证承诺头，我会非常惊讶。</p><h3 id=你最-“喜欢”-的-bug！><a href=#你最-“喜欢”-的-bug！ class=headerlink title="你最 “喜欢” 的 bug！"></a>你最 “喜欢” 的 bug！</h3><p>在这个阶段，我希望收集尽可能多的清理建议，确保如果这样的软分叉被摆上台面，我们已经尽可能细致地分析了所有我们可以加入的修复措施。</p><p>当然，建议应该有合理性。例如，“禁止 ordinals” 是一个无趣的提议，而且我很怀疑有多少人会参与。此外，让我们集中在长期的、没有争议的 bug 上。例如，“一个花费长于 30 分钟来验证的区块意味着糟糕情形”、“被打破的默克尔树计算会带来走火风险”，以及 “让 coinbase 交易 <em>真正</em> 独一无二”，似乎是完全没有争议的。而另一方面，虽然 “让我们降低区块体积限制” 可能有合理的理由，但对我来说，有争议得多。</p><p>举个例子，这里有两种你无法说服我值得提议的东西：</p><ul><li>要求隔离见证 v0 交易也具备标准的 SIGHASH 类型字节。</li><li>限制脚本公钥的体积上限，以减少最差情形下 UTXO 集的增长。</li></ul></article></div></div></main><script src="/js/post.js?v=1682773100887"></script><script src="/js/highlight.min.js?v=1682773100887"></script><script>var containerEl=document.querySelector(".post-container"),postFontSize=localStorage.getItem("post-font-size")||"16",inputEl=document.querySelector("#size-change-input"),inputEl2=document.querySelector("#size-change-input2");inputEl.value=postFontSize,inputEl2.value=postFontSize,containerEl.style.fontSize=postFontSize+"px",$(function(){function e(t){$(".post-container").css("font-size",t+"px"),localStorage.setItem("post-font-size",t),$("#size-change-input").val(t),$("#size-change-input2").val(t)}$("#size-change-input").on("input propertychange",function(t){e(t.target.value)}),$("#size-change-input2").on("input propertychange",function(t){e(t.target.value)})})</script><script>hljs.initHighlightingOnLoad()</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class=sns-container><a title=nostr target=_blank rel="noopener nofollow" href=https://iris.to/npub1g2qs0ca5kpwlrcfug2em4jelmh65clk3yccwjxrs6hvdpd9qj80q022j4m>Nostr</a><a title=rss target=_blank rel="noopener nofollow" href=/atom.xml>rss</a><a title=telegram target=_blank rel="noopener nofollow" href=//t.me/btcstudyorg>Telegram</a></section></footer><script async src="/js/buttons.js?v=1682773100887"></script><script async src="/js/index.js?v=1682773100887"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JVCJ9XXG1Z")</script><script>var _hmt=_hmt||[];(()=>{var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306",e.async=!0,e.defer=!0,document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)})()</script></body></html>