<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><title>MEV 与可编程的货币</title><meta name=keywords content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name=description content=比特币思想的中文集结地><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1"><link rel=icon href=/favicon.ico><link rel=stylesheet href="/style/common/bulma.css?v=1682773100887"><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href="/style/common/iconfont.css?v=1682773100887"><link rel=stylesheet href="/style/base.css?v=1682773100887"><link rel=stylesheet href="/style/common/helper.css?v=1682773100887"><link rel=stylesheet href="/style/themes/animation.css?v=1682773100887"><script>function ready(){var e=document.querySelector(".body-container"),t=localStorage.getItem("theme")||"light";["light","dark"].includes(t)||(t="light",localStorage.setItem("theme","light")),e.classList.remove("appearance-auto"),e.classList.add("appearance-"+t),quickInitialTheme()}function quickInitialTheme(){var e=localStorage.getItem("theme")||"light",t=document.querySelector(".logo-light"),o=document.querySelector(".logo-dark"),d=document.querySelector("#mobile-header-logo > .logo-light"),l=document.querySelector("#mobile-header-logo > .logo-dark"),a=document.getElementById("theme-btn"),i=document.querySelector(".slide-theme-light"),c=document.querySelector(".slide-theme-dark");document.body.classList.add(e),("dark"===e?(t.classList.add("hidden"),o.classList.remove("hidden"),d.classList.add("hidden"),l.classList.remove("hidden"),a.classList.remove("icon-icon_dark"),a.classList.add("icon-icon_light"),i):c).classList.remove("hidden")}document.addEventListener("DOMContentLoaded",ready)</script><script src="/js/common.js?v=1682773100887"></script><script src=/js/libs/zepto.min.js></script><link rel=stylesheet href="/style/post.css?v=1682773100887"><link rel=stylesheet href="/style/themes/highlight.css?v=1682773100887"><meta name=generator content="Hexo 6.3.0"><link rel=alternate href=/atom.xml title="BTC Study" type=application/atom+xml></head><body class="is-flex is-flex-direction-column" onload=initialTheme()><div class=clip></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id=header><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href=/ ><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id=header-menu><a class="is-inline-block header-activity mr-4" href=/ >首页</a><a class="is-inline-block mr-4" href=/archives>全站目录</a><a class="is-inline-block mr-4" href=/tags>标签</a><a class="is-inline-block mr-4" href=/maps>地图</a><a class="is-inline-block mr-4" href=/mempool>mempool</a><a class="is-inline-block mr-4" target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input type=range min=12 max=32 step=2></div></div></div><i class="iconfont icon-icon_dark mr-1" id=theme-btn></i><div class=search-wrap><input class=pl-3 id=search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search" id=search-input-btn></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopic><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">MEV 与可编程的货币</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn2></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input2 type=range min=12 max=32 step=2></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id=mobile-header><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id=mobile-header-logo><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopicMobile><p class=is-full-height>MEV 与可编程的货币</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class=mobile-search-wrap><div class=search-input><input class=pl-3 id=mobile-search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class=mobile-search-input-btn>搜 索</button></div></div></header><div class=mobile-slide-menu><a class=header-activity href=/ >首页</a><a href=/archives>全站目录</a><a href=/tags>标签</a><a href=/maps>地图</a><a href=/mempool>mempool</a><a target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class=slide-menu-fontsize><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1682773100887"></script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%BB%80%E4%B9%88%E6%98%AF-%E2%80%9CMEV%E2%80%9D%EF%BC%9F><span class=toc-text>什么是 “MEV”？</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E4%BB%AC%E6%83%B3%E8%A6%81%E5%8F%AF%E7%BC%96%E7%A8%8B%E7%9A%84%E8%B4%A7%E5%B8%81%EF%BC%9F><span class=toc-text>为什么我们想要可编程的货币？</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%9D%8F%E7%9A%84%EF%BC%9A%EF%BC%881%EF%BC%89%E9%80%8F%E6%98%8E%E7%9A%84%E4%BA%A4%E6%98%93%E6%B1%A0><span class=toc-text>坏的：（1）透明的交易池</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%9D%8F%E7%9A%84%EF%BC%9A%EF%BC%882%EF%BC%89-%E9%80%8F%E6%98%8E%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6><span class=toc-text>坏的：（2） 透明的智能合约</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%B8%91%E9%99%8B%E7%9A%84%EF%BC%883%EF%BC%89%EF%BC%9A%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E8%A1%A8%E8%BE%BE%E8%83%BD%E5%8A%9B><span class=toc-text>丑陋的（3）：智能合约表达能力</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%A5%BD%E7%9A%84%EF%BC%9A%E5%8F%AF%E7%BC%96%E7%A8%8B%E8%B4%A7%E5%B8%81%E7%9A%84%E5%8F%96%E8%88%8D><span class=toc-text>好的：可编程货币的取舍</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%EF%BC%881%EF%BC%89%E9%93%BE%E4%B8%8B%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%80%E7%A7%8D%E6%96%B0%E7%BB%93%E6%9E%84%EF%BC%9AANYPREVOUT><span class=toc-text>（1）链下合约的一种新结构：ANYPREVOUT</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%EF%BC%882%EF%BC%89%E9%99%90%E5%88%B6%E6%9D%A1%E6%AC%BE%EF%BC%9ACAT-CSFS-%E5%92%8C-CTV><span class=toc-text>（2）限制条款：CAT + CSFS 和 CTV</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%EF%BC%883%EF%BC%89%E5%85%A8%E9%9D%A2%E8%A1%A8%E8%BE%BE%E8%83%BD%E5%8A%9B%EF%BC%9ASimplicity><span class=toc-text>（3）全面表达能力：Simplicity</span></a></li></ol></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id=postTitle>MEV 与可编程的货币</h1><div class=page-author><div class="is-flex is-flex-direction-row page-data mr-6"><img class=mr-1 src=/images/default_avatar.png alt="Kiara Bickers"><div class=page-author-info><strong>Kiara Bickers</strong><time class=has-text-grey datetime=2024-11-01T04:30:17.000Z>2024-11-01</time></div></div><div class=is-flex><a href=/tags/Simplicity><i class="page-tag mr-1 px-1">Simplicity</i></a><a href=/tags/MEVil><i class="page-tag mr-1 px-1">MEVil</i></a></div></div><article class="mt-4 post-content"><blockquote><p><em>作者：Kiara Bickers</em></p><p><em>来源：<a target=_blank rel=noopener href=https://blog.blockstream.com/miner-extractable-value-mev-and-programmable-money-the-good-the-bad-and-the-ugly/ >https://blog.blockstream.com/miner-extractable-value-mev-and-programmable-money-the-good-the-bad-and-the-ugly/</a></em></p></blockquote><p>比特币内核的安全模式依赖于这种基本的博弈理论 —— 矿工会拿着自己的电子镐子、无情地追逐利润；并且，正是这种追逐让网络安全。标准的挖矿作业需要生产区块来赚取区块奖励和交易手续费，但你是否想象过矿工可能有别的办法来从区块链中抽取价值？区块链上是否有别的获利机会，是矿工可以凭借自身的优势地位来利用的？</p><h2 id=什么是-“MEV”？><a href=#什么是-“MEV”？ class=headerlink title="什么是 “MEV”？"></a>什么是 “MEV”？</h2><p><em>在<a target=_blank rel=noopener href="https://glossary.blockstream.com/proof-of-work/?ref=blog.blockstream.com">工作量证明</a>系统中，“矿工可抽取价值（Miner Extractable Value，MEV）” 指的是矿工可以通过在自己挖掘的区块中排序、排除、重组和替换交易来获得的收益。不过，因为以太坊升级到了 “以太坊 2.0”，将网络迁移到了 “权益证明（proof-of-stake）” 系统，MEV 的概念就得到了一个新的名字，现在在权益证明系统中，指的是 “最大可抽取价值”。在这个语境下，取代了矿工的区块的提议者（block proposer）—— “见证者” —— 有机会抽取这些价值。</em></p><p>在这些网络中，矿工（或者以太坊 2.0 中见证者）在以区块形式确认交易时有特殊的角色。他们的位置，让他们可以抢在其他用户前面，并且让他们可以决定区块链上的交易的 <em>最终</em> 排序。在区块内，交易一般来说是根据从高到低的手续费来排序的，但总是有那么一些时候，矿工可以通过策略性地改变交易排序来获得 <em>额外</em> 的利润。</p><p>你可能会问，这有什么坏处呢，只是矿工赚取了额外的一点利润而已？仅在一部分矿工装备了更高级的分析能力和更强大的计算能力、可以比其他人更高效地定位和利用 MEV 利润机会时，问题才会浮现。</p><p>这些机会不会永远唾手可得，但是，通过分析区块链可以获得的收益越大，装备了机器人的研究团队就越有动力去做这样的分析。长此以往，矿工盈利能力的差异会在网络中创造出中心化的趋势。最终侵蚀区块链的核心原则：去中心化。</p><p>这正是比特币的开发者社区思考如何在比特币上释放更强的表达能力时希望避免的事情。</p><h2 id=为什么我们想要可编程的货币？><a href=#为什么我们想要可编程的货币？ class=headerlink title=为什么我们想要可编程的货币？></a>为什么我们想要可编程的货币？</h2><p>以往，比特币一直以相对简单的智能合约来运作。但是，哪怕是处理稍微复杂一点的交易，这种模式也会束手束脚。Bitcoin Script 只能验证身份鉴证数据，并没有能力为交易施加速率限制，也不能定义资金的最终目的地，因为 Bitcoin Script 不能访问交易数据。</p><p>另一个某种程度上独立的问题是，开发和编写比特币智能合约对于没有完全掌握其安全要求的用户来说会很难。一个提议中的特性，叫作 “保险柜（vault）”，致力于通过引入带有时间锁条件的交易来解决这一痛点。本质上，保险柜可以作为一种紧急的 “逃生舱”，让用户可以在私钥被盗时复原资金。但这样的特性，仅在我们的编程语言拥有更强的表达能力时才能实现。</p><p>以太坊协议就因为其高度灵活的脚本编程能力而知名，但也明显受困于 MEV 。绝大部分用户一般假设比特币没有 MEV，即与以太坊截然相反：以太坊被视作狂野的边疆。但真是这样的吗？</p><p>更有表达力的智能合约是否一定带来更多 MEV 场景？</p><p>已知有多种因素催生了 MEV：（1） 透明的交易池；（2）透明的智能合约；（3）智能合约的表达能力。每一个因素都给 MEV 打开了新的窗口；我们会逐一辨析。</p><h2 id=坏的：（1）透明的交易池><a href=#坏的：（1）透明的交易池 class=headerlink title=坏的：（1）透明的交易池></a>坏的：（1）透明的交易池</h2><p>与比特币网络的 “<a target=_blank rel=noopener href="https://glossary.blockstream.com/mempool/?ref=blog.blockstream.com">交易池</a>” 一样，绝大部分区块链的交易池是完全透明、开放、可见的，每个人都能看到哪些交易在等待区块确认。比特币区块一般来说要花 10 分钟才能挖出，理论上，矿工有同等的时间来抢跑（front-run，抢在其他用户前面）。</p><p>但在现实中，比特币区块链没有 MEV 的源头，因为：（1）比特币交易足够简单，矿工之间不会有巨大的分析能力差异；（2 ）比特币交易一般来说不会执行多种资产的交易，比如资产互换和可以被抢跑的开放式交易。</p><p>以太坊则相反，其区块链上的公开去中心化交易所（DEX）可以执行一些最复杂的多资产交易。一般来说，以太坊的出块时间是 15 秒钟，但在交易池流量高涨的时候，要让交易立即得到确认所需的 gas 费用（以太坊类型的系统中的交易手续费）可以轻松超过 100 美元。结果是，低手续费的交易的等待时间会以分钟甚至小时为单位。这就给了这些邪恶的抢跑活动很长的时间窗口，又因为以太坊上的各种 layer-2 token 包含了巨大的价值，这样的活动已经变得非常普遍。</p><blockquote><p>译者注：在本文中，关于 “token”，作者一直使用同一种表述 “layer-2 token”，这个词应该更倾向于我们所说的 “链上 token 协议” 的意思，而非 “代表 layer-2 项目价值的 token” 的意思（在以太坊等平台，这样的 “layer-2 项目” 很多）。</p></blockquote><blockquote><p>译者注：作者在这里的论证是没什么道理的。交易池透明或不透明，并不决定是否会出现 MEV 机会，只是决定这些机会向哪些人开放。设想一种完全不透明的交易池（比如一种侧链的交易池），也完全可以想象其中存在 MEV 机会，但只有能够看见交易池的区块打包者才能看见并利用这样的机会。</p></blockquote><h2 id=坏的：（2）-透明的智能合约><a href=#坏的：（2）-透明的智能合约 class=headerlink title="坏的：（2） 透明的智能合约"></a>坏的：（2） 透明的智能合约</h2><p>比特币的 “智能合约” 是得自 <a target=_blank rel=noopener href="https://glossary.blockstream.com/bitcoin-script/?ref=blog.blockstream.com">Bitcoin Script</a> 的简单锁定和解锁机制。交易的细节（价值、发送者、接收者），在区块链上都是公开可见的。虽然从隐私的角度看，这种完全透明很不理想，但这也是比特币能让网络的所有参与者都验证区块链的完整状态的原因之一。任何观察者都能分析这些合约细节，可能让特定的 MEV 策略有机可乘。</p><p>但比特币的脚本编程语言，是有意设计得非常局限的，主要关注发送和接收资金的基本功能，以及用签名或者哈希锁来验证交易。这种简单天生限制了 MEV 的施展空间，让这样的机会相对（其它区块链）来说更加少见。</p><p>像以太坊、Solana 和 Cardano 这样的平台，都有完全透明的智能合约，但它们与比特币不同的是，它们都有非常复杂、富有表达能力的脚本编程语言。它们的 “图灵完备” 的系统在理论上可以执行几乎任何计算任务，包括：自执行的合约、通过断言机集成真实世界的信息、去中心化应用（dApp）、token、DEX 中的资产互换，还有自动化做市商（AMM）。它们加在一起，给 MEV 带来了肥沃的土壤。基于零知识证据的方案，例如 <a target=_blank rel=noopener href="https://starkware.co/starkex/?ref=blog.blockstream.com">STARKex</a>，理论上可以避免部分问题，但需要付出额外的复杂性。</p><h2 id=丑陋的（3）：智能合约表达能力><a href=#丑陋的（3）：智能合约表达能力 class=headerlink title=丑陋的（3）：智能合约表达能力></a>丑陋的（3）：智能合约表达能力</h2><p>在某些区块链上，MEV 机会是如此丰裕，以至于一些 “MEV 交易公司” 的月利润高达 “<a target=_blank rel=noopener href="https://www.forbes.com/sites/jeffkauflin/2022/10/11/the-secretive-world-of-mev-where-crypto-bots-scalp-investors-for-big-profits/?sh=784dfa372d8d&ref=blog.blockstream.com">五六位数</a>”。这个趋势是如此显著，以至于出现了公开的数据网站，专门扫描以太坊和 <a target=_blank rel=noopener href="https://explorer.jito.wtf/?ref=blog.blockstream.com">Solana</a> 区块链上的获益机会。他们的盈利能力来自于执行全套 MEV 策略：抢跑、尾随、三明治攻击（结合抢跑交易和尾随交易，将受害者的交易夹在中间）、token 套利，以及清算，等等。每一种策略都利用了不同的原理。</p><p>在 layer-1 和 layer-2 上都可以用的部分 MEV 策略：</p><ol><li>广义的抢跑：机器人扫描交易池中的可以获利的交易，然后在原交易前抢先执行一笔交易，获得收益。</li><li>三明治攻击：攻击者在一笔大额交易的前面和后面各安排一笔交易，通过操纵资产价格来获得收益。这种策略利用了大额交易所导致的可预测的价格变动。</li></ol><p>仅对 layer-2 token 和智能合约有用的特定策略：</p><ol><li>在不同 DEX 之间套利：机器人利用同一资产在不同 DEX 之间的价格差异来获利，即低买高卖。</li><li>尾随 DeFi 自适应价格曲线（Bonding Curve）：MEV 机器人通过尾随在自适应价格曲线上的大额交易之后成交而获利；在自适应曲线上，大额交易会对价格产生可预测的影响；MEV 机器人可以在价格上涨趋势中买入，在有利可图时卖出。</li><li>DeFi 清算：MEV 机器人瞄准 DeFi 借贷协议中的机会：在这些借贷协议中，担保品的价值如果低于某个门槛，他人就可以用更低的价格免到这些被清算的担保品。</li></ol><p>合约的复杂性还显著催生了与 MEV 相关的难题。</p><ol><li>重入攻击：这种攻击利用了智能合约账户的逻辑漏洞，让攻击者可以在调用智能合约账户的一个函数完成之后重复调用，从而多次取出资金。在 MEV 语境下，有经验的攻击者可以从中获得巨量收益，尤其是在那些保管了大量资金的合约中。</li><li>互联的合约与全局状态（Global State）：在以太坊这样的平台中，智能合约账户是可以互动的，因此一笔交易就可以触发多个合约账户之间的连锁反应。这种互联特性让复杂的 MEV 策略成为可能：发到一个合约账户的一笔交易可能影响另一个合约、带来了获益机会的连锁反应。</li></ol><p>这里，部分问题在于，由 token 以及建立在这些 token 之上的 dApp 的总价值可能会超过区块链在 layer-1 上的原生资产的价值，从而减少出块者仅仅基于手续费来挑选和确认交易的激励。</p><p>让事情变得更糟糕的是，许多这样的机会并不严格属于出块者。其他拥有 MEV 扫描机器人的参与者也可以竞争同一个机会，导致网络拥堵、gas 费用飙升。这种情形给网络和用户带来了负外部性 —— 所有人都受到更高的交易手续费的影响，因为区块链变得更加低效、用起来更贵。DeFi 中的 MEV 机会极为普遍，以至于用户已经几乎接受了它、把它当成了对所有人的一种隐形税收。</p><p>那么，这些 MEV 机会是高表达能力的智能合约的天然副产品吗，还是说，有别的路径可以走向完全可编程的货币的梦想呢？</p><p>除了远离高表达能力的智能合约和 layer-2 token 协议，用户还可以通过使用支持 “<a target=_blank rel=noopener href="https://glossary.blockstream.com/confidential-transactions/?ref=blog.blockstream.com">机密交易</a>” 的协议（比如 Liquid）来避免部分风险；这种技术会隐藏交易的细节。但与这些拥有更高表现力编程语言的平台不同，比特币还缺乏实现我们所期待的可编程货币的能力。</p><h2 id=好的：可编程货币的取舍><a href=#好的：可编程货币的取舍 class=headerlink title=好的：可编程货币的取舍></a>好的：可编程货币的取舍</h2><p>在考虑比特币上的智能合约的进化时，我们拥有的选择有：（1）将复杂性放到链下；（2）谨慎地集成狭窄的、或者说局限的 “限制条款（covenant）” 功能；或者（3）拥抱最大表达能力路线。我们再逐一辨析。</p><h3 id=（1）链下合约的一种新结构：ANYPREVOUT><a href=#（1）链下合约的一种新结构：ANYPREVOUT class=headerlink title=（1）链下合约的一种新结构：ANYPREVOUT></a>（1）链下合约的一种新结构：ANYPREVOUT</h3><p>链下的解决方案，比如闪电网络，旨在强化比特币的可扩展性和功能性，而避免加重主链的负担，保持链上交易快捷且便宜。这些目标听起来都很好。</p><p>SIGHASH_ANYPREVOUT（APO）是一项关于新型公钥的提议，这种公钥让对交易的某些调整可以在签名后发生（而不使签名作废）。这一提议简化了更新交易的方式，让交易可以更容易地索引前序 UTXO，让闪电网络通道可以更快、更便宜、更安全，也更直接（尤其在解决通道参与者分歧的时候）。</p><p>说到底，APO 是一种新的 sighash 标签。每一笔比特币交易都必须有一个数字签名来证明其合法性。而在创建签名的时候，你会使用 “sighash 标签” 来说明自己签名的是交易的哪些部分。有了 APO，发送者可以只签名交易的所有输出，而不签名交易的输入，从而只固定交易的输出，但不固定资金来自哪笔前序交易。</p><p>APO 带来了 <a target=_blank rel=noopener href=https://blog.blockstream.com/en-eltoo-next-lightning/ >Eltoo</a>，它让用户可以在链下交换预先签名的交易（译者注：具体来说，它实际上是让用户不必保留对手以往签过名的交易，只需保留最新一笔）。不过，因为 APO 让交易可以重新排序，它可能会意外带来 MEV。只要你允许一个签名绑定到一个交易图，那么你就有能力切换交易。输入是可以切换的，只要新的输入依然跟签名兼容。</p><h3 id=（2）限制条款：CAT-CSFS-和-CTV><a href=#（2）限制条款：CAT-CSFS-和-CTV class=headerlink title="（2）限制条款：CAT + CSFS 和 CTV"></a>（2）限制条款：CAT + CSFS 和 CTV</h3><p>限制条款让用户可以控制资金转移到哪里去，可以为交易中的资金施加取款速率约束或设置特定的目的地。有两种类型的限制条款：递归的、非递归的。</p><ol><li>递归的限制条款让资金可以回到同一类型的限制条款的约束下。</li><li>非递归的限制条款限制了这种控制能力，要求预先完整定义资金的未来转移路径。</li></ol><p><a target=_blank rel=noopener href=https://blog.blockstream.com/cat-and-schnorr-tricks-i/ >CAT + CSFS</a> 是一种限制条款提议，让脚本可以构造（或者说定义）未来一笔交易的特定部分。CHECKSIGFROMSTACK（CSFS）会验证对一个数据的签名，而 OP_CAT 可以构造这样的数据。通过使用 CSFS 来要求签名与 OP_CAT 动态构造出的数据相匹配，我们可以定义这些 UTXO 在未来可以如何花费，并创造出一种递归限制条款（虽然有些笨拙）。</p><p>OP_CHECKTEMPLATEVERIFY（CTV）则是一种创建非递归的限制条款的方法。它不会定义和验证一笔交易的特定部分，只是约束资金可以如何花费。它定义的是下一笔交易必须符合的 “模板”。</p><p>递归限制条款的一个风险在于，它可能会带来一种情形：资金必须服从一组规则，并且困在一个循环中不断重复、不得逃脱。另一个风险在于，因为限制条款是透明的，也是自执行的，可能会在比特币上打开一些已经在其它链上看到过的 MEV 机会。</p><p>那么好消息是什么呢？</p><p>好消息是，这些提议都会带来新的表达能力！</p><p>那么，我们可以得到的表达能力极限在哪里？</p><h3 id=（3）全面表达能力：Simplicity><a href=#（3）全面表达能力：Simplicity class=headerlink title=（3）全面表达能力：Simplicity></a>（3）全面表达能力：Simplicity</h3><p><a target=_blank rel=noopener href=https://blog.blockstream.com/simplicity-language/ >Simplicity</a> 是一种基于区块链的编程语言，它跟其它脚本编程语言都不同，它是非常底层的。它不是建立在 Bitcoin Script 之上的一种语言，也不是 Bitcoin Script 中的一种新的操作码，而是 Bitcoin Script 的一种替代。理论上，Simplicity 内部可以实现所有的限制条款提议，并实现密码朋克们希望可编程货币拥有的许多其它合约，但其负外部性会比以太坊更少。</p><p>视频：<a target=_blank rel=noopener href=https://youtu.be/n4iLNNF3sU0>https://youtu.be/n4iLNNF3sU0</a></p><p>Simplicity 保持了比特币的自包含交易（self-contained transactions）的设计哲学，即，程序不能访问交易之外的任何信息。从最强表达能力和安全性的设计目的触发，Simplicity 支持形式化验证和静态分析，给了用户更加可靠的智能合约。</p><table><thead><tr><th></th><th>Simplicity（Simfony）</th><th>CAT + CSFS</th><th>CTV</th><th>以太坊</th><th>Solana</th><th>Cardano</th></tr></thead><tbody><tr><td>模式</td><td>UTXO</td><td>UTXO</td><td>UTXO</td><td>账户</td><td>账户</td><td>EUTXO</td></tr><tr><td>图灵完备性</td><td>否</td><td>否</td><td>否</td><td>是</td><td>是</td><td>是</td></tr><tr><td>支持递归合约</td><td>是</td><td>是</td><td>否</td><td>是</td><td>是</td><td>是</td></tr><tr><td>允许静态分析</td><td>是</td><td>部分</td><td>部分</td><td>否</td><td>否</td><td>部分</td></tr><tr><td>允许形式化验证</td><td>是</td><td>否</td><td>否</td><td>否</td><td>否</td><td>是</td></tr></tbody></table><p>Bitcoin Script 的限制条款提议，虽然比 Simplicity 更加简单，但也缺乏在 Script 中处理手续费估计的表达能力，因为比特币缺乏算术函数。Bitcoin Script 没有乘法和除法，也没有条件或堆栈操作操作码；为给定的一个合约（或者限制条款）估计合理的手续费也非常困难。用户最终会得到意大利面条一样的代码，其中 80% 的逻辑都用来推测合理的手续费是多少。这会让这些限制条款合约非常复杂并且难以分析。</p><p>以太坊虚拟机有循环构造，让 gas 用量的静态分析非常困难。但在 Script 和 Simplicity 中，你只需统计有多少操作码，或者说递归地把每一个函数的代价加起来，就可以了。因为 Simplicity 有一个形式化模型，你可以形式化分析程序的行为。但在 Script 中，这是做不到的，虽然你可以静态分析资源的用量。</p><p>Simplicity 将给用户提供最大程度的表达能力，以及其它有价值的特性，比如静态分析和形式化验证。用户会被鼓励（而非限制）开发抵抗 MEV 的智能合约。此外，不同合约的结合可能会带来 MEV，即使它们中的每一个自身都不会。这代表了一种根本的取舍。</p><p>视频：<a target=_blank rel=noopener href=https://youtu.be/rv1YNI-0BXk>https://youtu.be/rv1YNI-0BXk</a></p><p>增强比特币的智能合约功能的想法无疑前景光明，而且令人兴奋。但重要的是知道，所有这些提议都会带来一定程度的 MEV 风险 —— 虽然不至于到其它区块链的那个程度。在我们思考如何为比特币加入更多可编程特性时，我们要回答这些问题：</p><ul><li>我们能够开发出没有 MEV 风险的协议吗，还是说这是一个无法企及的理想呢？</li><li>给定许多提议的内在的 MEV 风险，何种程度是可以接受的？</li><li>最后，最简单、但能带来最大表达能力的提议是哪一个？</li></ul><p>每一项提议都会有自己的优点和缺点。但是，不论我们采取什么方向，我们的分析都应该最先考虑安全性、支持去中心化的原则。</p><p><em>注：本文最初发表于 <a target=_blank rel=noopener href="https://bitcoinmagazine.com/technical/miner-extractable-value-mev-and-programmable-money-the-good-the-bad-and-the-ugly?ref=blog.blockstream.com">Bitcoin Magazine</a>。</em></p><p>（完）</p></article></div></div></main><script src="/js/post.js?v=1682773100887"></script><script src="/js/highlight.min.js?v=1682773100887"></script><script>var containerEl=document.querySelector(".post-container"),postFontSize=localStorage.getItem("post-font-size")||"16",inputEl=document.querySelector("#size-change-input"),inputEl2=document.querySelector("#size-change-input2");inputEl.value=postFontSize,inputEl2.value=postFontSize,containerEl.style.fontSize=postFontSize+"px",$(function(){function e(t){$(".post-container").css("font-size",t+"px"),localStorage.setItem("post-font-size",t),$("#size-change-input").val(t),$("#size-change-input2").val(t)}$("#size-change-input").on("input propertychange",function(t){e(t.target.value)}),$("#size-change-input2").on("input propertychange",function(t){e(t.target.value)})})</script><script>hljs.initHighlightingOnLoad()</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class=sns-container><a title=nostr target=_blank rel="noopener nofollow" href=https://iris.to/npub1g2qs0ca5kpwlrcfug2em4jelmh65clk3yccwjxrs6hvdpd9qj80q022j4m>Nostr</a><a title=rss target=_blank rel="noopener nofollow" href=/atom.xml>rss</a><a title=telegram target=_blank rel="noopener nofollow" href=//t.me/btcstudyorg>Telegram</a></section></footer><script async src="/js/buttons.js?v=1682773100887"></script><script async src="/js/index.js?v=1682773100887"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JVCJ9XXG1Z")</script><script>var _hmt=_hmt||[];(()=>{var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306",e.async=!0,e.defer=!0,document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)})()</script></body></html>