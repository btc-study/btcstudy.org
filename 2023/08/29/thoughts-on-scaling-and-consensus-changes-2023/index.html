<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><title>对可扩展性和共识变更的思考</title><meta name=keywords content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name=description content=比特币思想的中文集结地><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1"><link rel=icon href=/favicon.ico><link rel=stylesheet href="/style/common/bulma.css?v=1682773100887"><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href="/style/common/iconfont.css?v=1682773100887"><link rel=stylesheet href="/style/base.css?v=1682773100887"><link rel=stylesheet href="/style/common/helper.css?v=1682773100887"><link rel=stylesheet href="/style/themes/animation.css?v=1682773100887"><script>function ready(){var e=document.querySelector(".body-container"),t=localStorage.getItem("theme")||"light";["light","dark"].includes(t)||(t="light",localStorage.setItem("theme","light")),e.classList.remove("appearance-auto"),e.classList.add("appearance-"+t),quickInitialTheme()}function quickInitialTheme(){var e=localStorage.getItem("theme")||"light",t=document.querySelector(".logo-light"),o=document.querySelector(".logo-dark"),d=document.querySelector("#mobile-header-logo > .logo-light"),l=document.querySelector("#mobile-header-logo > .logo-dark"),a=document.getElementById("theme-btn"),i=document.querySelector(".slide-theme-light"),c=document.querySelector(".slide-theme-dark");document.body.classList.add(e),("dark"===e?(t.classList.add("hidden"),o.classList.remove("hidden"),d.classList.add("hidden"),l.classList.remove("hidden"),a.classList.remove("icon-icon_dark"),a.classList.add("icon-icon_light"),i):c).classList.remove("hidden")}document.addEventListener("DOMContentLoaded",ready)</script><script src="/js/common.js?v=1682773100887"></script><script src=/js/libs/zepto.min.js></script><link rel=stylesheet href="/style/post.css?v=1682773100887"><link rel=stylesheet href="/style/themes/highlight.css?v=1682773100887"><meta name=generator content="Hexo 6.3.0"><link rel=alternate href=/atom.xml title="BTC Study" type=application/atom+xml></head><body class="is-flex is-flex-direction-column" onload=initialTheme()><div class=clip></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id=header><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href=/ ><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id=header-menu><a class="is-inline-block header-activity mr-4" href=/ >首页</a><a class="is-inline-block mr-4" href=/archives>全站目录</a><a class="is-inline-block mr-4" href=/tags>标签</a><a class="is-inline-block mr-4" href=/maps>地图</a><a class="is-inline-block mr-4" href=/mempool>mempool</a><a class="is-inline-block mr-4" target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input type=range min=12 max=32 step=2></div></div></div><i class="iconfont icon-icon_dark mr-1" id=theme-btn></i><div class=search-wrap><input class=pl-3 id=search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search" id=search-input-btn></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopic><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">对可扩展性和共识变更的思考</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn2></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input2 type=range min=12 max=32 step=2></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id=mobile-header><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id=mobile-header-logo><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopicMobile><p class=is-full-height>对可扩展性和共识变更的思考</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class=mobile-search-wrap><div class=search-input><input class=pl-3 id=mobile-search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class=mobile-search-input-btn>搜 索</button></div></div></header><div class=mobile-slide-menu><a class=header-activity href=/ >首页</a><a href=/archives>全站目录</a><a href=/tags>标签</a><a href=/maps>地图</a><a href=/mempool>mempool</a><a target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class=slide-menu-fontsize><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1682773100887"></script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E9%93%BE%E4%B8%8B%E5%AE%9E%E4%BD%93%EF%BC%9F><span class=toc-text>链下实体？</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#Layer-1%EF%BC%9A%E4%B8%8D%E4%BE%BF%E5%88%A9><span class=toc-text>Layer 1：不便利</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%88%91%E4%BB%AC%E5%A6%82%E4%BD%95%E6%89%A9%E5%B1%95%EF%BC%9F><span class=toc-text>我们如何扩展？</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%8A%91%E9%83%81%E9%A9%BF%E7%AB%99><span class=toc-text>抑郁驿站</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%B8%BA%E9%80%80%E5%87%BA%E8%80%8C%E8%AE%BE%E8%AE%A1><span class=toc-text>为退出而设计</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E9%98%B2%E7%88%86%E4%BF%9D%E7%AE%A1%E6%A8%A1%E5%BC%8F><span class=toc-text>防爆保管模式</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%85%B6%E5%AE%83%E9%97%AE%E9%A2%98><span class=toc-text>其它问题</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E7%BB%93%E8%AE%BA><span class=toc-text>结论</span></a></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id=postTitle>对可扩展性和共识变更的思考</h1><div class=page-author><div class="is-flex is-flex-direction-row page-data mr-6"><img class=mr-1 src=/images/default_avatar.png alt=jamesob><div class=page-author-info><strong>jamesob</strong><time class=has-text-grey datetime=2023-08-29T07:36:32.000Z>2023-08-29</time></div></div><div class=is-flex><a href=/tags/covenant><i class="page-tag mr-1 px-1">covenant</i></a></div></div><article class="mt-4 post-content"><blockquote><p><em>作者：jamesob</em></p><p><em>来源：<a target=_blank rel=noopener href=https://delvingbitcoin.org/t/thoughts-on-scaling-and-consensus-changes-2023/32>https://delvingbitcoin.org/t/thoughts-on-scaling-and-consensus-changes-2023/32</a></em></p></blockquote><p>今年 6 月，AJ 发表了一篇<a target=_blank rel=noopener href=https://www.erisian.com.au/wordpress/2023/06/21/putting-the-b-in-btc>关于扩展的博客文章</a>，没有得到许多阅读。我在此就草率地转述一下这篇文章 —— 你应该全文阅读 —— 我要指出，他假设了我们可以扩展到 <strong>10 亿用户</strong> <strong>每周做 1 笔交易</strong>的交易处理量（这是支票账户的处理量，也是我个人的目标），办法是拥有 50000 个一定程度上受信任（kinda-sorted-trusted）的链下实体，由这些实体来承担绝大部分的交易处理量。</p><p>在这里，我要讨论为什么我认为这是现实的，以及，对可能的共识变更，它是否预示了什么。</p><h2 id=链下实体？><a href=#链下实体？ class=headerlink title=链下实体？></a>链下实体？</h2><p>如果你想说得格外通俗，你可以直接说 “比特币银行”。我的例子有：</p><ol><li>一种传统的、联盟化的侧链，比如 Liquid，<ul><li>你将自己的币交给一些第三方来保管，但相应地，你可以得到表达能力更强的脚本编程功能，或者机密资产，或者更快的区块确认速度，以及上述三者在某一些组合。</li><li>Drivechain 也有点像这个，但币的进入（“锚定”）和退出（“脱锚”）是由比特币矿工来处理的。</li></ul></li><li>某种类型的 Chaumian ecash 银行，比如 fedimint 和 cashu，<ul><li>你将自己的币交给某个联盟（甚至是个体运营者），然后获得隐私性好处。</li></ul></li><li>或是一些尚未被发现的设计，并不需要信任某些第三方会如约归还属于你的资金（即 “脱锚”），相反，你可以依赖于通过智能合约（即，比特币脚本）实现的强制措施，以及，在用户层面，需要一些名为 “<em>时间敏感性</em>” 的魔法香料。<ul><li>比如，<a target=_blank rel=noopener href=https://coinpool.dev/ >coinpool</a>，或者 <a target=_blank rel=noopener href=https://www.arkpill.me/ >Ark</a> 这个方向上的某种东西（Ark 自身现在也还只是一个模糊的方向）。</li><li>你可以认为，它就像闪电通道的泛化，从 2 方变成了 n 方。可能在每一次支付时都需要所有成员的交互，但圣杯就是某一些设计，可以只需要部分成员参与生成链下活动，而不需要每个人都签名，虽然这到底有没有可能还属开放问题。</li><li>从本文的角度看，甚至可以是某种 <a target=_blank rel=noopener href=https://github.com/john-light/validity-rollups/blob/fecc3433d8e95ab40263db8c2941794e0115d2d5/validity_rollups_on_bitcoin.md>ZKP rollup</a> —— 不管怎么说，“欺诈证明（fraud proof）” 跟 “惩罚交易” 看起来基本上是一样的。（<strong>修订：John Light 指出，ZKP rollup 所依赖的 “有效性证明” 并不需要欺诈证明，也不需要活性。</strong>）</li><li>我们将把这些都简称为 “coinpool”。</li></ul></li></ol><p>还有其它选择，比如 <a target=_blank rel=noopener href=https://github.com/RubenSomsen/spacechains>spacechain</a>，但我不会在这里介绍其细节。</p><p>最后一个选项，也即设想中的 coinpool，似乎显然是更受欢迎的，因为它不依赖于一个受信任的第三方。但它还只是一种设想；而且，即使它可以变成现实了，（就像我们在闪电网络中看到的那样），依然需要一些运营技巧，才能维护一个可用的、能够理解一种 layer 2 协议的节点，保证其可以验证新的活动并且不被女巫攻击，等等。</p><p>即使相对懂行的人，也并不一定能运行这样需要实时联网、一旦下线就有可能丢钱的设施。这是一种全职的工作，可能需要多人配合。</p><h2 id=Layer-1：不便利><a href=#Layer-1：不便利 class=headerlink title="Layer 1：不便利"></a>Layer 1：不便利</h2><p>回到正题，在我们设想的扩展场景中，每一个用户都在 3 个或 4 个这样的 准-受信任的&#x2F;时间敏感型 链下服务处存放了价值，这些服务或多或少就像社区银行。这些 “银行” 可能会以支付通道（或者原子化可互换性）形成网络，这样他们就能处理跨银行的流动性操作，就像电汇一样，即，我想给你支付，但我们在用不同的比特币银行，那么一些实体就可以通过一个闪电网关协助某种类型的批量结算。</p><p>在这里，需要大声强调的未言明的部分是，到了 10 亿人想要使用比特币的时候，主链交互会变得非常贵。注意，我说的是 “非常贵”，但不是 “贵到完全不能用”，因为如果用户真的失去了保管 layer 1 实体资产的能力，那比特币就只是用起来摩擦更小的黄金：一个完全基于簿记的市场会产生、比特币所有的好处都会消失，就像 AJ 在自己的文章中说的那样（<a target=_blank rel=noopener href=https://www.erisian.com.au/wordpress/2023/06/21/putting-the-b-in-btc>再放一次链接</a>）。</p><p>还要注意，让这些链下构造规矩工作的部分原因是：他们的用户在一定程度上可以跟 layer 1 互动 —— 这是一种威慑。即使在某种 “免信任的” coinpool 中，<em>获得 layer 1 确认的能力也是让它规矩工作的关键</em>。所以，如果 L1 真的变成对绝大部分人都过于昂贵，coinpool 这样的设计也将不能用。也许在一些较贫穷的用户中，在 layer 1 上显现的活动是以小组为单位发生的，这样可以在一群用户中分摊手续费。</p><p>这些银行有保持运行（不卷款跑路）的激励，是因为（1）他们可以收手续费；（2？）他们可能受到所在地法律的管辖。但还有一个可取之处在于，比特币的本性，使得每个客户都可以成为一个审计师。</p><p>那么，我们先简单假设，在 layer1 上发布一笔交易可能要花费几百元：要是你的 “银行” 出了问题、你需要逃到 layer1 上，这还是可以负担得起的，但并不是所有人每天都可以负担的代价，也显然不是你每个月（甚至每年）都要做一次的事。</p><h2 id=我们如何扩展？><a href=#我们如何扩展？ class=headerlink title=我们如何扩展？></a>我们如何扩展？</h2><p>我认为，这大概就是比特币能扩展到十亿人的样子：50000 个相互连接的 “银行”，（理想情况下）每个银行都管理着大体上均匀分布的比特币，而每个人都以环绕式结构（hub-and-spoke）使用着少数几个银行。</p><p>有没有别的办法？我们没法直接提高区块体积。在一个验证节点所组成的网络上分布着等量的支票活动，这没法让你保持去中心化。</p><p>我确实不认为一般人也能运行一个闪电节点（有方向的流动性和在线时间都很烦人），而 Phoenix 这种带有准受信任的 LSP 的模式，就其本身来说也是一种友好的女巫攻击，也依然要求每个人都有有一个 UTXO，这没法扩展到十亿人。假设一个 UTXO 是 41 字节，十亿人意味着 380 GB 的 UTXO 既大小。这会让实时验证变得非常困难，虽然我不了解这个领域，但值得做一些实验。<a target=_blank rel=noopener href=https://bitcoinops.org/en/topics/utreexo/ >Utreexo</a> 也可以在一定程度上提供帮助，甚至可能是解决这个问题的先决条件。</p><p>这种 50000 “银行” 妥协了 layer1 所有权对吗？是的。但整个世界每个人都拥有一个 UTXO —— 除非有什么当前还无法预见的魔法，那我当然支持！—— 是不可能的。至少在比特币的技术背景下，我们可以拥有很好的审计和保管工具，以保证欺诈可以很容易监测到，让盗窃变成基本不可能。</p><h2 id=抑郁驿站><a href=#抑郁驿站 class=headerlink title=抑郁驿站></a>抑郁驿站</h2><p>在阅读这篇文章的草稿时，我的妻子读到这里就有点灰心了。她问了一个令人骇然的问题，大意是：“要是每个人最终都只能跟侧链交互，不能跟真正的比特币交易，那是不是所有事情都失败了呢？每次你经手的东西都只是一些 token，不是真正的比特币。”</p><p>我认为这是一种令人不舒服的真相（uncomfortable realization），我也不喜欢它。我希望结局不是这样的，我希望我们能找出一些很棒的密码学构造，解决去中心化可验证性与交易量之间的矛盾，但我不认为我们应该假定这样的东西会出现。</p><p>即使真的走向 “50000 银行”，我认为这是说起来不好听而已。在打败现有金融王朝的同时，我们依然获得了一种无法通胀的基础层货币。有些银行可能会尝试一些小动作，但比特币原生的软件工具会将信任细化为更小的梯度，并且会保证这些小动作更容易被抓到（储备证明？），而且在特定情况下（相对于传统系统）几乎无法欺诈（DLC 去除了经纪人？联合保管？链上可观察性？）。</p><p>所以，假设你也愿意接受这些大致的想法，这种架构目标可以给我们一些从短期到长期的比特币开发的启示。</p><h2 id=为退出而设计><a href=#为退出而设计 class=headerlink title=为退出而设计></a>为退出而设计</h2><p>因为我们可能会看到少数几种占主导的二层（“银行”）设计出现，我们必须考虑相关的故障情形。在审核这篇文章时，<a target=_blank rel=noopener href=https://twitter.com/rot13maxi>Rijndael</a> 称此为 “惊群问题（the thundering herd）”。（译者注：<a target=_blank rel=noopener href=https://en.wikipedia.org/wiki/Thundering_herd_problem>Wiki - Thundering haed problem</a>）</p><p>以去年发生的 <a target=_blank rel=noopener href=https://github.com/btcsuite/btcd/issues/1906>lnd fiasco 事件</a>为例，它可能导致大量使用 lnd 节点的通道群起关闭。一旦少数可用的 L2 设计走向大众，大规模退出事件发生的概率也随之增加，所以，这似乎是一个需要计划的关键应用场景。</p><p>因为 layer 1 的空间是稀缺的，我们需要能够将所有的退出交易都打包到一定事件范围内的区块中。实现这一点的办法似乎将 “退出” 与 “实际申领资金”（即创建新的 UTXO）的操作解耦，这样我们就可以协助尽可能多的参与者及时退出。这或多或少就是一种 “拥塞控制”，这个想法基本上是由 <a target=_blank rel=noopener href=https://rubin.io/ >Jeremy Rubin</a> 在 CTV 开发的途中提出来的。</p><p>将资金锁定到一条（或者一组）预先指定的路径上以备后续申领，这应该做得尽可能短小，这样在灾难发生的时候，我们就可以安置尽可能多的退出交易。</p><p>在这样的场景中，我认为，你不可能获得比裸脚本 <code>&lt;32 byte hash&gt; OP_CHECKTEMPLATEVERIFY</code> 更小的东西了。</p><p>值得指出的是，一个 P2TR 的脚本公钥（<code>OP_1 &lt;32 byte pubkey&gt;</code>）的体积与此完全相同，但后面实际花费这个输出时，就会有 17 vB 的开销（<code>(34vB (controlblock) + 33vB (CTV script)) / 4</code>）。如果区块里面都是 2 个输入 1 个输出的 CTV 展开操作，大概 10% 的空间都会花在这上面。</p><p>当然，这种开销的负担（比例）会随着你增加输入和输出的数量而减少，所以，为多个用户 “批量处理” 展开操作无法从裸脚本 CTV 中获得很多的好处（相比于 P2TR 的脚本路径）。但当前，最常见的应用场景是闪电通道的关闭：1 个输入 2 个输出。</p><p>有一些更加灵活的方案跟 CTV 竞争，比如 <code>OP_TX</code>&#x2F;<code>OP_TXHASH</code>，还有其它，但从危机引发大量用户从 L2 退出的角度看，灵活性并不是我们所需要的 —— 明智地使用 layer 1 空间才是。所以，无论 <code>OP_TX</code> 等等是否对别的东西有好处（我还不知道有这样的应用场景？），我认为 CTV 就是我们所需要的，因为在区块空间可能很珍贵的时候，它是明确退出链上合约的最精简的方法。</p><p>根据一些基本的分析，使用 CTV 的花费压缩（拥塞控制）特性，你可以在危机时刻向一个区块<a target=_blank rel=noopener href=https://github.com/jamesob/verystable/blob/18a57207fe4fc106c4befaffc1784b012afc696c/examples/txn_size.py>多塞入 33% 的闪电通道退出交易</a>：</p><pre><code>src/verystable (init 18a5720) % python examples/txn_size.py
CTV txn: 128vB
non-CTV txn: 171vB
CTV txns per block: 31250
non-CTV txns per block: 23391
more per block with CTV: 33.6%
</code></pre><h2 id=防爆保管模式><a href=#防爆保管模式 class=headerlink title=防爆保管模式></a>防爆保管模式</h2><p>我想起的另一个观察是，如果将有大约 50000 个实体，每个都管理着大量的比特币，他们中的许多可能会使用联盟签名器来管理，那就需要一种相对直接的保管模式，让我们非常确定盗窃和丢失是不太可能的。</p><p>应该不会让你们感到意外，我认为，<a target=_blank rel=noopener href=https://github.com/jamesob/bips/blob/e2ff23b3f07215450e75779f7f944d24660a9d47/bip-0345.mediawiki><code>OP_VAULT</code></a> 中的功能就是一个重要部分，因为它启用了 “响应式安全”。如 Jameson Lopp <a target=_blank rel=noopener href=https://blog.keys.casa/why-bitcoin-needs-covenants/ >所说</a>：</p><blockquote><p>使用正确的工具，在密钥失盗中恢复时，我们可以 <em>守株待兔</em> 而不是只能 <em>主动出击</em>。</p><p>保险柜合约可以创建一种新的博弈情景。类似于你可以运行瞭望塔，等待尝试欺诈你的闪电通道对手送上门来，你也可以使用瞭望塔来确定没有人攻破了你的比特币保险柜。如果你发现有人已经攻破它了，将资金清扫到安全的地方是非常简单的，甚至可以自动化！</p><p>我真诚地相信，每个比特币的自主保管用户、每个钱包开发者，都梦寐以求用户友好的保险柜功能。可以 “追回” 因为安全架构被攻破而失盗的资金，意味着比特币人晚上可以更加安心地入睡，因为他们知道自己可以犯错，不会因为一次疏漏而遭受灾难性的损失。</p></blockquote><p>我认为，可以在链上强制执行的保险柜，可能是成功扩展保管手段、允许出现大量协同式管理的比特币资金池的必要部分。而且 <code>OP_VAULT</code> 似乎是链空间利用效率最高的方式。你也许可以使用，比如说 <a target=_blank rel=noopener href=https://merkle.fun/ >MATT</a> 来模拟 <code>OP_VAULT</code> 的行为。但我认为，关于 CTV 和拥塞控制的部分已经告诉了我们，常用的操作应该做得尽可能高效（类似于 <a target=_blank rel=noopener href=https://www.baeldung.com/cs/risc-vs-cisc>CISC</a>）。</p><p>显然，还有许多因素需要考虑，例如，</p><ul><li>谁来管理一个瞭望塔，他们可以知道多少信息？</li><li>灾后复原应该如何设置？高度安全&#x2F;不便于使用 的密钥、社交恢复？还是两者的某种带有时延的组合？</li></ul><p>我很确定还有其它因素。但我不认为，依靠主动式安全可以让那 50000 家心安理得地以自动化方式控制大量资金。即使你可以制作出 HSM 的标准阵列，供应链攻击（包括硬件的和软件的）似乎都非常容易。</p><h2 id=其它问题><a href=#其它问题 class=headerlink title=其它问题></a>其它问题</h2><p>当然，很多东西我都没有提到。有些东西与限制条款无关，但却与时间敏感型 L2 的运作紧密相关，比如良好的 mempool&#x2F;手续费 管理对策。没有这个东西，闪电网络就会失败。还有一些让比特币能够抗审查的东西，比如 BIP324。</p><p>也应该有人来研究“最小可用的 coinpool”，并弄清楚我们是否需要 taproot 和 CTV 以外的元件。这会是很有价值的信息。</p><h2 id=结论><a href=#结论 class=headerlink title=结论></a>结论</h2><p>这篇文章已经够长了，我可能会以此为基础，撰写后续的文章，或者使用这个视角来回应其他人的文章。</p><p>我认为，除非有什么魔法发明（这我并不指望），我们最终让比特币可以处理支票账户那么大体量的办法，就是使用大约 50000 个实体，通过管理资金池来协助支付流。这些实体将相互形成网络（可能使用闪电网络），并会提供成梯度的信任。来自可以撤退到 L1 的威慑以及竞争对手的 “渗透压”，将让这些东西规矩工作，即使可以肯定这路上会有一些颠簸。</p><p>如 <a target=_blank rel=noopener href="https://bitcointalk.org/index.php?topic=2500.msg34211#msg34211">Hal 在 2010 年</a>所说的：</p><blockquote><p>实际上，很有理由会存在以比特币为储备的银行，他们将发行自己的电子现金通货，并保证可用这些通货赎回比特币。比特币自身无法扩展到让世界上的每一笔金融交易都被广播给每一个人、打包到区块链上。需要一个比比特币更轻而且效率更高的二层支付系统。类似地，让比特币交易得到确认的时间，对于中大型交易来说也是不现实的。</p><p>以比特币为储备的银行将解决这些问题。他们可以像货币国家化之前的银行那样做。不同的银行会提供不同的服务，一些更激进，一些更保守。一些会是部分储备的，但也会有 100% 比特币储备的。利率将各不相同。其中一些银行的现金将比另一些银行的更值钱。</p><p>George Selgin 已经详细阐述了银行业自由竞争的理论，而且他主张，这样的系统会是稳定的、抗通胀而且能够自我调节的。</p><p>我认为，这就是比特币的最终命运，成为一种可作为银行储备货币的 “高能货币”。大多数比特币交易会在银行间发生，也即结算净 流入&#x2F;流出。个人之间的比特币交易将很少见 …… 就像今天用比特币来买东西的交易一样。</p></blockquote><p>重要的是，要为他们构建能够支撑他们的层级、给他们提供能够安全和高效开展工作的工具，并且，开发的方式应该让用户有能力审计以及自由迁移。</p><p>加上我错过的许多其它东西，这意味着</p><ul><li>让必要时候退出到 L1 的操作尽可能紧凑和快捷（以应对可能会连锁发生的故障），以及</li><li>让日常的保管操作安全和简单。</li></ul><p>（完）</p></article></div></div></main><script src="/js/post.js?v=1682773100887"></script><script src="/js/highlight.min.js?v=1682773100887"></script><script>var containerEl=document.querySelector(".post-container"),postFontSize=localStorage.getItem("post-font-size")||"16",inputEl=document.querySelector("#size-change-input"),inputEl2=document.querySelector("#size-change-input2");inputEl.value=postFontSize,inputEl2.value=postFontSize,containerEl.style.fontSize=postFontSize+"px",$(function(){function e(t){$(".post-container").css("font-size",t+"px"),localStorage.setItem("post-font-size",t),$("#size-change-input").val(t),$("#size-change-input2").val(t)}$("#size-change-input").on("input propertychange",function(t){e(t.target.value)}),$("#size-change-input2").on("input propertychange",function(t){e(t.target.value)})})</script><script>hljs.initHighlightingOnLoad()</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class=sns-container><a title=nostr target=_blank rel="noopener nofollow" href=https://iris.to/npub1g2qs0ca5kpwlrcfug2em4jelmh65clk3yccwjxrs6hvdpd9qj80q022j4m>Nostr</a><a title=rss target=_blank rel="noopener nofollow" href=/atom.xml>rss</a><a title=telegram target=_blank rel="noopener nofollow" href=//t.me/btcstudyorg>Telegram</a></section></footer><script async src="/js/buttons.js?v=1682773100887"></script><script async src="/js/index.js?v=1682773100887"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JVCJ9XXG1Z")</script><script>var _hmt=_hmt||[];(()=>{var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306",e.async=!0,e.defer=!0,document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)})()</script></body></html>