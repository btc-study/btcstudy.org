<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><title>使用 Core Lightning 客户端运行闪电节点</title><meta name=keywords content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name=description content=比特币思想的中文集结地><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1"><link rel=icon href=/favicon.ico><link rel=stylesheet href="/style/common/bulma.css?v=1682773100887"><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href="/style/common/iconfont.css?v=1682773100887"><link rel=stylesheet href="/style/base.css?v=1682773100887"><link rel=stylesheet href="/style/common/helper.css?v=1682773100887"><link rel=stylesheet href="/style/themes/animation.css?v=1682773100887"><script>function ready(){var e=document.querySelector(".body-container"),t=localStorage.getItem("theme")||"light";["light","dark"].includes(t)||(t="light",localStorage.setItem("theme","light")),e.classList.remove("appearance-auto"),e.classList.add("appearance-"+t),quickInitialTheme()}function quickInitialTheme(){var e=localStorage.getItem("theme")||"light",t=document.querySelector(".logo-light"),o=document.querySelector(".logo-dark"),d=document.querySelector("#mobile-header-logo > .logo-light"),l=document.querySelector("#mobile-header-logo > .logo-dark"),a=document.getElementById("theme-btn"),i=document.querySelector(".slide-theme-light"),c=document.querySelector(".slide-theme-dark");document.body.classList.add(e),("dark"===e?(t.classList.add("hidden"),o.classList.remove("hidden"),d.classList.add("hidden"),l.classList.remove("hidden"),a.classList.remove("icon-icon_dark"),a.classList.add("icon-icon_light"),i):c).classList.remove("hidden")}document.addEventListener("DOMContentLoaded",ready)</script><script src="/js/common.js?v=1682773100887"></script><script src=/js/libs/zepto.min.js></script><link rel=stylesheet href="/style/post.css?v=1682773100887"><link rel=stylesheet href="/style/themes/highlight.css?v=1682773100887"><meta name=generator content="Hexo 6.3.0"><link rel=alternate href=/atom.xml title="BTC Study" type=application/atom+xml></head><body class="is-flex is-flex-direction-column" onload=initialTheme()><div class=clip></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id=header><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href=/ ><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id=header-menu><a class="is-inline-block header-activity mr-4" href=/ >首页</a><a class="is-inline-block mr-4" href=/archives>全站目录</a><a class="is-inline-block mr-4" href=/tags>标签</a><a class="is-inline-block mr-4" href=/maps>地图</a><a class="is-inline-block mr-4" href=/mempool>mempool</a><a class="is-inline-block mr-4" target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input type=range min=12 max=32 step=2></div></div></div><i class="iconfont icon-icon_dark mr-1" id=theme-btn></i><div class=search-wrap><input class=pl-3 id=search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search" id=search-input-btn></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopic><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">使用 Core Lightning 客户端运行闪电节点</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn2></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input2 type=range min=12 max=32 step=2></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id=mobile-header><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id=mobile-header-logo><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopicMobile><p class=is-full-height>使用 Core Lightning 客户端运行闪电节点</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class=mobile-search-wrap><div class=search-input><input class=pl-3 id=mobile-search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class=mobile-search-input-btn>搜 索</button></div></div></header><div class=mobile-slide-menu><a class=header-activity href=/ >首页</a><a href=/archives>全站目录</a><a href=/tags>标签</a><a href=/maps>地图</a><a href=/mempool>mempool</a><a target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class=slide-menu-fontsize><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1682773100887"></script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E9%97%AA%E7%94%B5%E8%8A%82%E7%82%B9%E7%9A%84%E5%8A%9F%E8%83%BD><span class=toc-text>闪电节点的功能</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E8%BF%90%E8%A1%8C%E5%85%A8%E6%97%B6%E5%9C%A8%E7%BA%BF%E7%9A%84%E4%B8%AA%E4%BA%BA%E8%8A%82%E7%82%B9%EF%BC%9F><span class=toc-text>为什么要运行全时在线的个人节点？</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E9%97%AA%E7%94%B5%E7%BD%91%E7%BB%9C%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%9F><span class=toc-text>如何选择闪电网络客户端？</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E8%BF%90%E8%A1%8C%E4%B8%AA%E4%BA%BA%E8%8A%82%E7%82%B9%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9F><span class=toc-text>运行个人节点最简单的方法？</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E8%83%8C%E6%99%AF%E5%8F%8A%E6%96%B9%E6%B3%95><span class=toc-text>背景及方法</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%AE%89%E8%A3%85%E5%8F%8A%E8%BF%90%E8%A1%8C-Core-Lightning><span class=toc-text>安装及运行 Core Lightning</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AE%89%E8%A3%85-Core-Lightning><span class=toc-text>安装 Core Lightning</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E9%85%8D%E7%BD%AE-lightningd><span class=toc-text>配置 lightningd</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E9%85%8D%E7%BD%AE-lightning-cli><span class=toc-text>配置 lightning-cli</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%AE%89%E8%A3%85%E5%8F%8A%E8%BF%90%E8%A1%8C-RTL><span class=toc-text>安装及运行 RTL</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AE%89%E8%A3%85-Node-js><span class=toc-text>安装 Node.js</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE-CI-REST><span class=toc-text>安装及配置 CI-REST</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE-RTL><span class=toc-text>安装及配置 RTL</span></a></li></ol></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id=postTitle>使用 Core Lightning 客户端运行闪电节点</h1><div class=page-author><div class="is-flex is-flex-direction-row page-data mr-6"><img class=mr-1 src=/images/default_avatar.png alt=Anony><div class=page-author-info><strong>Anony</strong><time class=has-text-grey datetime=2023-09-08T09:57:45.000Z>2023-09-08</time></div></div><div class=is-flex><a href=/tags/%E5%AE%9E%E8%B7%B5><i class="page-tag mr-1 px-1">实践</i></a></div></div><article class="mt-4 post-content"><blockquote><p><em>作者：Anony</em></p></blockquote><p>本文总结了笔者安装 <a target=_blank rel=noopener href=https://github.com/ElementsProject/lightning>Core Lightning 客户端</a>并为之配置一种前端管理界面 <a target=_blank rel=noopener href=https://github.com/Ride-The-Lightning/RTL>RTL</a> 的经验，希望能为尝试自己动手运行全天候在线节点的读者提供一些帮助。</p><h2 id=闪电节点的功能><a href=#闪电节点的功能 class=headerlink title=闪电节点的功能></a>闪电节点的功能</h2><p>可用于跟其它节点开通可以几乎无限次相互支付的闪电通道，以及转发闪电网络上发生的其它人的支付。</p><p>在一条闪电通道内发生的支付，只需要得到参与这条通道的双方的确认，无需被其他人知晓，也无需得到区块链的确认，因此，它具备极快的支付速度。</p><p>而后者则意味着，当某人要给另一个人支付时，他们不一定需要有直接相连的通道，只要支付方能够找出一条由闪电通道前后相接、触达接收方的路径，并且路径上的通道的既定方向都有足够多的余额，就能够像接力赛跑一样，将支付转发过去。</p><p>因此，对使用者来说，闪电网络是一种开销很低、非常实用的支付工具；而闪电节点就是用户使用闪电网络的工具（用来自动化执行对用户有意义的安全操作）。</p><h2 id=为什么要运行全时在线的个人节点？><a href=#为什么要运行全时在线的个人节点？ class=headerlink title=为什么要运行全时在线的个人节点？></a>为什么要运行全时在线的个人节点？</h2><p>需要首先指出的是：如果你只想作为一名普通的闪电网络用户，偶尔享受它带来的便利，你并不需要运行一个全天候在线的个人节点。移动端的自主保管钱包（比如：<a target=_blank rel=noopener href=https://phoenix.acinq.co/ >Phoenix</a>、<a target=_blank rel=noopener href=https://breez.technology/ >Breez</a>）实际上也是完整的闪电节点，只不过因为移动端的电池限制，它不会全天候在线。但闪电通道的时间锁限制，也意味着它并不需要全时在线，只要你定期（比如每两周一次）打开闪电钱包同步一下比特币网络，你的资金依然是安全的。</p><p>那么，运行自己的闪电节点有什么好处呢？</p><ol><li>可以为闪电网络贡献流动性（帮助转发支付），并在转发过程中得到一些手续费。但手续费收入非常小，不必期待可以从中获得很多收入。</li><li>可以获得更好的隐私性。在使用移动端钱包时，你的对等节点很容易知晓你的收款情形（因为你并不全天在线，因此通过你们的通道的支付不太可能是转发给别人的）。一种很好的处理方式是，运行一个全时在线的节点（并开设多个通道），然后用你的移动端钱包远程控制它，或者与之建立支付通道，这就使得为你转发支付的中间节点无法断定支付的最终目的地。</li><li>全时在线意味着你有最充足的时间响应通道对手的欺诈行为，因此其安全性也是最好的。</li></ol><h2 id=如何选择闪电网络客户端？><a href=#如何选择闪电网络客户端？ class=headerlink title=如何选择闪电网络客户端？></a>如何选择闪电网络客户端？</h2><p>当前主流的闪电网络客户端有：<a target=_blank rel=noopener href=https://github.com/lightningnetwork/lnd>LND</a>、<a target=_blank rel=noopener href=https://github.com/ACINQ/eclair>Eclair</a> 和 <a target=_blank rel=noopener href=https://github.com/ElementsProject/lightning>Core Lightning</a>，它们是使用不同的编程语言编写的，设计上的重点也有所不同。</p><p>目前，市场占有率最高的是 LND 客户端，这得益于它的编程语言（Go 语言，非常容易为不同的硬件平台和操作系统编译出能够运行的软件），以及简明易懂的说明书。</p><p>但在功能上，Core Lightning 更加强大，而且性能更好。它采用了完全模块化的实现，并且带有一个插件系统，允许第三方的插件使用闪电节点中的核心数据。</p><p>具体对比可以看看<a href=https://www.btcstudy.org/2023/03/27/what-are-the-differences-between-lnd-and-cln/#%E6%94%AF%E4%BB%98-%E2%80%94%E2%80%94-%E9%9A%90%E7%A7%81%E5%92%8C%E5%8F%AF%E9%9D%A0%E6%80%A7>这篇文章</a>。</p><h2 id=运行个人节点最简单的方法？><a href=#运行个人节点最简单的方法？ class=headerlink title=运行个人节点最简单的方法？></a>运行个人节点最简单的方法？</h2><p>毫无疑问，使用开箱即用的软件套件是最好的。比如，<a target=_blank rel=noopener href=https://umbrel.com/ >Umbrel</a> 和 <a target=_blank rel=noopener href=https://raspibolt.org/ >RaspiBolt</a> 都为树莓派电脑提供了专门的操作系统，这样的操作系统可以一键安装比特币客户端和闪电网络客户端，对不了解技术的用户最为友好。Umbrel 和 <a target=_blank rel=noopener href=https://raspiblitz.org/ >RaspiBlitz</a> 都支持一键安装 Core Lightning 客户端。</p><blockquote><p>注：为什么要提到 “树莓派电脑” 呢？这是因为，出于节点全天运行以及数据敏感的特性，使用单独的一台设备来运行节点（而非运行在 工作电脑&#x2F;家庭电脑 上）是更好的选择。而在可选的设备中，树莓派电脑有可能是最便宜的。一个成本说明可见<a target=_blank rel=noopener href=https://github.com/btc-study/OP_QUESTION/discussions/5>这个帖子</a>。</p></blockquote><p>下文将介绍不使用这样的套件、自己手动安装的流程。</p><blockquote><p><strong>2024 年 6 月 18 日更新</strong>：</p><p>以下安装及运行技巧适合绝大部分基于 Linux 的系统（如 Ubuntu，Debian）。</p><p>从便利及稳定性的角度看，树莓派 4&#x2F;Raspberry OS 已经不是最优的选择。</p></blockquote><h2 id=背景及方法><a href=#背景及方法 class=headerlink title=背景及方法></a>背景及方法</h2><p>笔者将使用命令行工具，在自己的树莓派 4 电脑上安装 Core Lightning 客户端，并使用 RTL（Ride The Lightning）作为控制这个节点的前端。</p><p>硬件：</p><ul><li>树莓派 4 （ 8 G 内存版）</li></ul><p>操作系统：</p><ul><li>Raspberry OS（32-bit）</li></ul><p>软件：</p><ul><li>Bitcoin Core（安装方法可见<a href=https://www.btcstudy.org/2021/11/08/how-to-run-a-bitcoin-full-node-and-lightning-node-on-a-raspberry-pi/ >这个教程</a>；本文假设已安装好 Bitcoin Core 并完成同步；）</li><li>Core Lightning</li><li>RTL</li></ul><h2 id=安装及运行-Core-Lightning><a href=#安装及运行-Core-Lightning class=headerlink title="安装及运行 Core Lightning"></a>安装及运行 Core Lightning</h2><h3 id=安装-Core-Lightning><a href=#安装-Core-Lightning class=headerlink title="安装 Core Lightning"></a>安装 Core Lightning</h3><p>Core Lightning 的说明书的 <a href=https://www.btcstudy.org/2021/11/08/how-to-run-a-bitcoin-full-node-and-lightning-node-on-a-raspberry-pi/ >Installation</a> 部分列举了为各种软硬件平台编译出能够运行的二进制文件的方法。虽然说明书指出可以为树莓派交叉编译（即在其他平台上编译出树莓派电脑能够运行的二进制文件），但笔者已成功在树莓派上按照 Ubuntu 系统的编译流程成功编译并运行。</p><p>需要用命令行运行如下安装步骤：</p><ol><li><p>安装依赖</p><pre><code>sudo apt-get update
sudo apt-get install -y \
  autoconf automake build-essential git libtool libsqlite3-dev \
  python3 python3-pip net-tools zlib1g-dev libsodium-dev gettext
pip3 install --upgrade pip
pip3 install --user poetry
</code></pre><p>复制所有命令后在命令行窗口内粘贴，它会自动运行每一行，只有最后一行需要手动按回车键确认。</p></li><li><p>复制 Core Lightning 的源代码并检查版本：</p><pre><code>git clone https://github.com/ElementsProject/lightning.git
cd lightning
git checkout v22.11.1
</code></pre><p>第一行命令会从 Github.com 复制 Core Lightning 的源代码，它会形成一个名为 lightning 的文件夹。第二行会移动到这个文件夹中。第三行的作用是检查代码的版本。</p><p>如果你的设备连接 Github.com 有问题，你需要想想其他办法。比如在能够访问 Github.com 的设备上<a target=_blank rel=noopener href=https://github.com/ElementsProject/lightning>下载 Core Lightning 代码库的压缩包</a>，然后传输到树莓派 4 电脑上。也可以尝试搜索 Github 镜像。</p></li><li><p>编译二进制文件：</p><pre><code>pip3 install --upgrade pip
pip3 install mako
pip3 install -r plugins/clnrest/requirements.txt
./configure
make
sudo make install
</code></pre><p>这里值得注意的是：（1）笔者没能成功运行第三条命令（带有 “requirements.txt” 的那条），但并不妨碍后续的成功编译。这条命令的意思是根据这个 <code>.txt</code> 文档的内容安装依赖，但所安装的都是 python 语言的库，并不是 C 语言（Core Lightning 的编程语言）的库。</p><p>（2）在这个过程中，笔者遇到的最常导致过程中断的问题是执行文件的 <code>权限不够</code>，解决方法是先运行：<code>chmod +x &lt;目录&gt;/*</code>，表示给某个目录下的所有文件添加执行权限；然后继续执行被中断的命令。</p><blockquote><p><strong>2024 年 6 月 18 日更新</strong>：</p><p>上述第三条命令实际上是为插件 clnrest 安装依赖的 python 软件。clnrest 的功能是为 lightingd 暴露一个 REST 接口，缺失这个功能不会影响 lightningd 的正常运行。</p><p>不过，下文所介绍的 RTL 软件从 v0.15.0 开始转向使用 clnrest 所提供的接口，因此，如果你希望使用新版本的 RTL 软件，就需要保证 clnrest 正常运行，也即需要保证上述第三行命令成功运行。同时，CLN 也需要使用 v23.11 之后的版本。</p><p>如果你无法成功运行 clnrest，请按照本教程，使用较旧版本的 RTL 软件。</p></blockquote></li></ol><p>完成了上述所有步骤之后，Core Lightning 就安装好了。尝试运行：</p><pre><code>lightningd --network=bitcoin --log-level=debug
</code></pre><blockquote><p><strong>2024 年 5 月 7 日更新</strong>：</p><p>此处 <code>log-level</code> 标签的作用是指定日志的详尽程度，一共分为：io、debug、info、unusual、broken 五个等级，详尽程度依次递减。<code>debug</code> 较为详尽，并不适合日常运行；日常运行可以使用 <code>info</code> 模式。</p></blockquote><p>你会在屏幕上看到程序打印出许多信息，表示一个闪电节点已经启动。请确保你的 Bitcoin Core（<code>bitcoind</code>）在运行，否则这条命令可能失败。</p><p>接下来，我们要尝试配置 Core Lightning 的两个部分：<code>lightningd</code>（Core Lightning 闪电节点后台）以及 <code>lighting-cli</code>（Core Lightning 闪电节点命令行控制工具）。</p><h3 id=配置-lightningd><a href=#配置-lightningd class=headerlink title="配置 lightningd"></a>配置 lightningd</h3><p>我们要使用配置文件 <code>.conf</code> 来指引我们的 Core Lightning 程序，比如它将运行在哪个网络上、要记录哪些日志信息。</p><p>你可以自己建立一个配置文件，也可以使用存储在默认位置（<code>&lt;你的用户名&gt;/.lightning</code>）的配置文件（名为 <code>config</code>）。</p><p>Core Lightning 的说明书表明有<a target=_blank rel=noopener href=https://docs.corelightning.org/docs/configuration>许多选项</a>是可以配置的，但在这里，我们选择尽可能少用配置。例如：</p><pre><code>network=bitcoin

bitcoin-rpcuser=&lt;你在 bitcoin core 的配置文件中指明的 rpc 用户名&gt;
bitcoin-rpcpassword=&lt;你在 bitcoin core 的配置文件中指明的 rpc 口令&gt;

lightning-dir=&lt;你用来存储闪电节点资料的位置&gt; # 默认为 `&lt;你的用户名&gt;/.lightning`

log-level=info #可选
</code></pre><p>第一行告诉 lightningd，它将运行在比特币主网上。而后续两行跟 rpc 相关的信息，则是告诉它， 为了跟 Bitcoin Core 通信，它要使用什么样的用户名和口令；这两行必须与 Bitcoin Core 配置文件中的一致，否则它就无法使用 Bitcoin Core 了。<code>lightning-dir</code> 以及 <code>log-level</code> 都是可选项。</p><p>其余配置选项可见上述说明书。</p><blockquote><p><strong>2024 年 5 月 7 日更新</strong>：</p><p>可在配置文件中用专门的一行 <code>daemon</code> 表示使用后台模式运行，同时使用专门一行 <code>log-file=&lt;日志存储位置&gt;</code> 来指定日志应当输出到哪里。如此就可以避免在命令行窗口中打印日志（这会造成内存负担），也不会因为命令行窗口关闭而导致节点停止运行。日志的详见程度参见上一节。</p></blockquote><p>在配置文件内写入配置内容后，尝试运行 lightningd。如果你的配置文件就放在默认位置，那么你只需：</p><pre><code>lightningd
</code></pre><p>而如果你的配置文件有专门的位置，则需要：</p><pre><code>lightningd --conf=&lt;你的配置文件的位置&gt;
</code></pre><blockquote><p>出于便利，我们可以设置一下快捷方式：</p><pre><code>sudo nano ~/.bashrc
</code></pre><p>在最底部添加一行：</p><pre><code>alias lightningd=&#39;lightningd --conf=&lt;你的配置文件的位置&gt;&#39;
</code></pre><p>保存并退出后，运行以下命令：</p><pre><code>source ~/.bashrc
</code></pre></blockquote><p>确保 lightningd 正常运行之后，我们配置 lightning-cli。</p><h3 id=配置-lightning-cli><a href=#配置-lightning-cli class=headerlink title="配置 lightning-cli"></a>配置 lightning-cli</h3><p>实际上，配置 lightning-cli 的目的只是为了让它能正常跟 lightningd 通信，从而我们能够使用它来控制自己的闪电节点。因此，如果你在上一步的配置中没有改变配置 <code>lightning-dir</code>（闪电节点资料的存储位置）的话，<strong>你就不需要额外的配置</strong>。</p><p>而如果你改变了 <code>lightning-dir</code>，则你必须在运行 lightning-cli 时带上这个参数，才能控制 lightningd，例如：</p><pre><code>lightning-cli --lightning-dir=&lt;你为 lightningd 配置的存储位置&gt; listfunds
</code></pre><p>出于便利，我们可以像上一步中那样，将 <code>alias lightning-cli=&#39;lightning-cli --lightning-dir=&lt;你为 lightningd 配置的存储位置&gt;&#39;</code>加到 <code>.bashrc</code> 文件中，从而免去复杂的输入，直接使用。</p><p>更多的 lightning-cli 命令，可见<a target=_blank rel=noopener href=https://github.com/ElementsProject/lightning#using-the-json-rpc-interface>此处</a>。</p><p>综上，我们已经安装好了 Core Lightning，并可以运行其后台程序 lightningd 了，还可以用 lightning-cli 来控制这个闪电节点。</p><p>在运行 lightningd 的时候，使用 lightning-cli 的命令来检查它是否能正常工作，例如：</p><pre><code>lightning-cli listfunds
</code></pre><h2 id=安装及运行-RTL><a href=#安装及运行-RTL class=headerlink title="安装及运行 RTL"></a>安装及运行 RTL</h2><p>如上所述，我们可以用 lightning-cli 来控制 lightningd，包括但不限于接收链上资金、开启通道、发起闪电支付，等等。但是，它毕竟不是一个特别清晰的界面，操作起来也不够方便。于是，我们使用 RTL 来充当我们管理自己的 Core Lightning 闪电节点的前端。</p><p>为了使用 RTL，我们要在设备上安装两个软件：<a target=_blank rel=noopener href=https://github.com/Ride-The-Lightning/c-lightning-REST>Cl-REST</a> 和 <a target=_blank rel=noopener href=https://github.com/Ride-The-Lightning/RTL>RTL</a>。它们的作用和通信架构可见下图：</p><p><img src=/images/run-lightning-node-with-core-lightning-implement/RTL-CLN-Arch-2.png alt=RTL-CLN-Arch-2></p><blockquote><p><strong>2024 年 5 月 7 日更新</strong>：</p><p>如上所述，RTL 自 v0.15.0 开始，已经转向使用 clnrest 插件与 lightningd 通信（clnrest 就替代了上图中的 CL-REST）。因此，本指南所介绍的技能只适用于 v0.15.0 以前的 RTL 版本。新模式的介绍及安装步骤可见<a target=_blank rel=noopener href=https://github.com/Ride-The-Lightning/RTL/blob/master/.github/docs/Core_lightning_setup.md>这个页面</a>。</p><p>概要来说，相比下述指南，有差异的的地方在于，用户需要：（1）安装 clnrest 所依赖的 python 软件，确保 clnrest 正确运行（可通过 lightingd 的运行日志来检查，如 clnrest 不能正确运行，日志会表示出来；（2）配置 clnrest 的运行参数（例如所监听的网络端口）（与下述 CL-REST 部分原理相似，只是细节不同）；（3）配置 RTL 使用 CLN 所提供的新的身份验证工具，叫做 rune（代替下文所述的 macaroon 文件）。</p></blockquote><h3 id=安装-Node-js><a href=#安装-Node-js class=headerlink title="安装 Node.js"></a>安装 Node.js</h3><p>Cl-REST 和 RTL 都要求我们先在设备上安装 Node.js 运行时环境。虽然这两个软件的代码库的超链接都指向了 <a target=_blank rel=noopener href=https://nodejs.org/en/download/releases>Node.js 的正式网站</a>，但实际上，它们并不要求我们安装最新版本的 Node.js 。而且，有一种特别简单的方法可以在树莓派上安装 Node.js 。</p><p>用命令行运行如下命令：</p><pre><code>sudo apt update
sudo apt install nodejs build-essential -y
nodejs --version
</code></pre><p>最后一行将告诉你，你所安装的 nodejs 的版本。</p><h3 id=安装及配置-CI-REST><a href=#安装及配置-CI-REST class=headerlink title="安装及配置 CI-REST"></a>安装及配置 CI-REST</h3><p>运行如下命令：</p><pre><code>git clone https://github.com/saubyk/c-lightning-REST
cd c-lightning-REST
npm install
</code></pre><p>第一行是从 Github.com 下载 Cl-REST 的源代码，并将它们放到一个名为 <code>c-lightning-REST</code> 的文件夹中。第二行是移动到这个文件夹。第三步是使用 npm（nodejs 软件包管理）来安装这套软件。</p><p>安装完成之后，我们要配置 Cl-REST，实际上，就是通过配置文件来告诉它，要如何跟 lightningd 通信。</p><p>在 <code>c-lightning-REST</code> 文件夹内，有一个名为 <code>sample-cl-rest-config.json</code> 的文件，提供了其配置选项的模板，形式如下：</p><pre><code class=json>&#123;
    &quot;PORT&quot;: 3001,
    &quot;DOCPORT&quot;: 4001,
    &quot;PROTOCOL&quot;: &quot;https&quot;,
    &quot;EXECMODE&quot;: &quot;production&quot;,
    &quot;RPCCOMMANDS&quot;: [&quot;*&quot;],
    &quot;DOMAIN&quot;: &quot;localhost&quot;,
    &quot;BIND&quot;: &quot;::&quot;
&#125;
</code></pre><p>这里的各个参数的意思，在 Cl-REST 的 Github 库的<a target=_blank rel=noopener href=https://github.com/Ride-The-Lightning/c-lightning-REST#configuration-parameters>介绍文件</a>中有述。</p><p>假如你在配置 lightningd 时没有改变过 <code>lightning-dir</code>，那么你可以直接使用这个模板文件；但如果你改变了，则需要增加一行：</p><pre><code>&quot;LNRPCPATH&quot;: &quot;&lt;你所定义的 lightning-dir&gt;/bitcoin&quot;,
</code></pre><p>要把它放在括号内，单独成一行，并跟其它行使用相同的缩进。总之就是保持相同的形式。</p><p>使用如下命令来编辑 <code>sample-cl-rest-config.json</code> 文件：</p><pre><code>nano sample-cl-rest-config.json
</code></pre><p>编辑完成后，使用 <code>ctrl + o</code>（写入功能），将文件保存为 <code>cl-rest-config.json</code>。</p><p>保存成功后，使用命令行来运行 Cl-REST，这会让软件开始跟 lightningd 通信，并成为一个 API 服务端：</p><pre><code>node cl-rest.js
</code></pre><p>屏幕上会有信息告诉你它已经开始运行了。必须保持它的运行，才能使用 RTL 。</p><p>就剩最后一步了！</p><h3 id=安装及配置-RTL><a href=#安装及配置-RTL class=headerlink title="安装及配置 RTL"></a>安装及配置 RTL</h3><p>老样子，我们从 Github.com 拉取软件的代码，并使用 npm 来安装它：</p><pre><code>git clone https://github.com/Ride-The-Lightning/RTL.git
cd RTL
npm install --omit=dev
</code></pre><p>同样地，在 RTL 文件夹内，也有一个 <code>Sample-RTL-Config.json</code>，是 RTL 的配置选项的模板，是这样的：</p><pre><code>&#123;
  &quot;multiPass&quot;: &lt;password required for accessing RTL&gt;,
  &quot;port&quot;: &quot;3000&quot;,
  &quot;defaultNodeIndex&quot;: 1,
  &quot;dbDirectoryPath&quot;: &quot;&lt;Complete path of the folder where rtl&#39;s database file should be saved&gt;&quot;,
  &quot;SSO&quot;: &#123;
    &quot;rtlSSO&quot;: 0,
    &quot;rtlCookiePath&quot;: &quot;&quot;,
    &quot;logoutRedirectLink&quot;: &quot;&quot;
  &#125;,
  &quot;nodes&quot;: [
    &#123;
      &quot;index&quot;: 1,
      &quot;lnNode&quot;: &quot;Core Lightning Testnet # 1&quot;,
      &quot;lnImplementation&quot;: &quot;CLN&quot;,
      &quot;Authentication&quot;: &#123;
        &quot;macaroonPath&quot;: &quot;&lt;Modify to include the path of the folder with access.macaroon&gt;&quot;,
        &quot;configPath&quot;: &quot;&lt;Optional - Config file path for core lightning&gt;&quot;
      &#125;,
      &quot;Settings&quot;: &#123;
        &quot;userPersona&quot;: &quot;OPERATOR&quot;,
        &quot;themeMode&quot;: &quot;DAY&quot;,
        &quot;themeColor&quot;: &quot;PURPLE&quot;,
        &quot;bitcoindConfigPath&quot;: &quot;&quot;,
        &quot;logLevel&quot;: &quot;INFO&quot;,
        &quot;fiatConversion&quot;: false,
        &quot;unannouncedChannels&quot;: false,
        &quot;lnServerUrl&quot;: &quot;https://&lt;cl-rest api server ip address&gt;:3001&quot;
      &#125;
    &#125;
  ]
&#125;
</code></pre><p>这里面重要的有几行：</p><ul><li><code>lnImplementation</code>，值应为 <code>CLN</code>。这是为了告诉 RTL，节点软件是 Core Lightning</li><li><code>macaroonPath</code>，由 Cl-REST 生成的 macaroon 文件的存储位置。假设 RTL 和 Cl-REST 运行在同一个设备上，那么值应该是 <code>&lt;Cl-REST 的软件位置&gt;/certs</code>。<ul><li>使用了这一行之后，下面的 <code>cofigPath</code> 的值可以留空，避免冲突。</li></ul></li><li><code>lnServerUrl</code>，Cl-REST 服务端的网络端口。端口号（引号后的部分）可以在 Cl-REST 的配置文件中找到。假设 RTL 和 Cl-REST 运行在同一个设备上，并且没有在 Cl-REST 配置时改动过端口号（<code>&quot;PORT&quot;</code>）那么值应该是 <code>https://127.0.0.1:3001</code>。</li><li><code>dbDirectoryPath</code>，存放 RTL 数据的位置。</li><li><code>multiPass</code>，访问 RTL 的口令。当 RTL 成功运行后，你可以在浏览器访问本地的一个网络端口来使用 RTL，届时就要输入这个口令。</li></ul><p>修改之后，将完成的配置保存为 <code>RTL</code> 文件夹下的 <code>RTL-Config.json</code> 文件。</p><p>然后，你就可以在命令行启动 RTL 了！在 RTL 文件夹内使用命令：</p><pre><code>node rtl
</code></pre><p>屏幕输出的信息将告诉你，你要访问哪个网络位置来使用 RTL，一般来说，是 <code>http://localhost:3000</code>。在你的浏览器地址栏里输入这个地址试试吧！</p><p>你将看到这样的一个界面：</p><p><img src=/../images/run-lightning-node-with-core-lightning-implement/RTL-CLN-Dashboard.png alt=RTL-CLN-Dashboard></p><p>它将告诉你，你的 Core Lightning 闪电节点的信息，例如：你有多少条通道、有多少链上资金、你的通道容量，应有尽有！从此，你可以使用清爽的图形界面来控制自己的节点了！</p><p>（完）</p></article></div></div></main><script src="/js/post.js?v=1682773100887"></script><script src="/js/highlight.min.js?v=1682773100887"></script><script>var containerEl=document.querySelector(".post-container"),postFontSize=localStorage.getItem("post-font-size")||"16",inputEl=document.querySelector("#size-change-input"),inputEl2=document.querySelector("#size-change-input2");inputEl.value=postFontSize,inputEl2.value=postFontSize,containerEl.style.fontSize=postFontSize+"px",$(function(){function e(t){$(".post-container").css("font-size",t+"px"),localStorage.setItem("post-font-size",t),$("#size-change-input").val(t),$("#size-change-input2").val(t)}$("#size-change-input").on("input propertychange",function(t){e(t.target.value)}),$("#size-change-input2").on("input propertychange",function(t){e(t.target.value)})})</script><script>hljs.initHighlightingOnLoad()</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class=sns-container><a title=nostr target=_blank rel="noopener nofollow" href=https://iris.to/npub1g2qs0ca5kpwlrcfug2em4jelmh65clk3yccwjxrs6hvdpd9qj80q022j4m>Nostr</a><a title=rss target=_blank rel="noopener nofollow" href=/atom.xml>rss</a><a title=telegram target=_blank rel="noopener nofollow" href=//t.me/btcstudyorg>Telegram</a></section></footer><script async src="/js/buttons.js?v=1682773100887"></script><script async src="/js/index.js?v=1682773100887"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JVCJ9XXG1Z")</script><script>var _hmt=_hmt||[];(()=>{var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306",e.async=!0,e.defer=!0,document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)})()</script></body></html>