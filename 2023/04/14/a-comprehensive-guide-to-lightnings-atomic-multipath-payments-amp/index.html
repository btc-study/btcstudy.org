<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><title>原子化多路径付款（AMP）完全解说</title><meta name=keywords content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name=description content=比特币思想的中文集结地><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1"><link rel=icon href=/favicon.ico><link rel=stylesheet href="/style/common/bulma.css?v=1682773100887"><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href="/style/common/iconfont.css?v=1682773100887"><link rel=stylesheet href="/style/base.css?v=1682773100887"><link rel=stylesheet href="/style/common/helper.css?v=1682773100887"><link rel=stylesheet href="/style/themes/animation.css?v=1682773100887"><script>function ready(){var e=document.querySelector(".body-container"),t=localStorage.getItem("theme")||"light";["light","dark"].includes(t)||(t="light",localStorage.setItem("theme","light")),e.classList.remove("appearance-auto"),e.classList.add("appearance-"+t),quickInitialTheme()}function quickInitialTheme(){var e=localStorage.getItem("theme")||"light",t=document.querySelector(".logo-light"),o=document.querySelector(".logo-dark"),d=document.querySelector("#mobile-header-logo > .logo-light"),l=document.querySelector("#mobile-header-logo > .logo-dark"),a=document.getElementById("theme-btn"),i=document.querySelector(".slide-theme-light"),c=document.querySelector(".slide-theme-dark");document.body.classList.add(e),("dark"===e?(t.classList.add("hidden"),o.classList.remove("hidden"),d.classList.add("hidden"),l.classList.remove("hidden"),a.classList.remove("icon-icon_dark"),a.classList.add("icon-icon_light"),i):c).classList.remove("hidden")}document.addEventListener("DOMContentLoaded",ready)</script><script src="/js/common.js?v=1682773100887"></script><script src=/js/libs/zepto.min.js></script><link rel=stylesheet href="/style/post.css?v=1682773100887"><link rel=stylesheet href="/style/themes/highlight.css?v=1682773100887"><meta name=generator content="Hexo 6.3.0"><link rel=alternate href=/atom.xml title="BTC Study" type=application/atom+xml></head><body class="is-flex is-flex-direction-column" onload=initialTheme()><div class=clip></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id=header><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href=/ ><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id=header-menu><a class="is-inline-block header-activity mr-4" href=/ >首页</a><a class="is-inline-block mr-4" href=/archives>全站目录</a><a class="is-inline-block mr-4" href=/tags>标签</a><a class="is-inline-block mr-4" href=/maps>地图</a><a class="is-inline-block mr-4" href=/tools>工具</a><a class="is-inline-block mr-4" target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input type=range min=12 max=32 step=2></div></div></div><i class="iconfont icon-icon_dark mr-1" id=theme-btn></i><div class=search-wrap><input class=pl-3 id=search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search" id=search-input-btn></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopic><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">原子化多路径付款（AMP）完全解说</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn2></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input2 type=range min=12 max=32 step=2></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id=mobile-header><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id=mobile-header-logo><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopicMobile><p class=is-full-height>原子化多路径付款（AMP）完全解说</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class=mobile-search-wrap><div class=search-input><input class=pl-3 id=mobile-search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class=mobile-search-input-btn>搜 索</button></div></div></header><div class=mobile-slide-menu><a class=header-activity href=/ >首页</a><a href=/archives>全站目录</a><a href=/tags>标签</a><a href=/maps>地图</a><a href=/tools>工具</a><a target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class=slide-menu-fontsize><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1682773100887"></script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%BB%8B%E7%BB%8D><span class=toc-text>介绍</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%BD%95%E4%B8%BA%E5%8E%9F%E5%AD%90%E5%8C%96%E5%A4%9A%E8%B7%AF%E5%BE%84%E6%94%AF%E4%BB%98%EF%BC%9F><span class=toc-text>何为原子化多路径支付？</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%88%91%E4%BB%AC%E4%B8%BA%E4%BD%95%E9%9C%80%E8%A6%81%E5%A4%9A%E8%B7%AF%E5%BE%84%E4%BB%98%E6%AC%BE%EF%BC%9F><span class=toc-text>我们为何需要多路径付款？</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%8E%9F%E5%AD%90%E5%8C%96%E5%A4%9A%E8%B7%AF%E5%BE%84%E4%BB%98%E6%AC%BE%E6%98%AF%E5%A6%82%E4%BD%95%E8%BF%90%E4%BD%9C%E7%9A%84><span class=toc-text>原子化多路径付款是如何运作的</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%8E%9F%E5%AD%90%E5%8C%96%E5%A4%9A%E8%B7%AF%E5%BE%84%E4%BB%98%E6%AC%BE-vs-%E5%8F%91%E7%A5%A8><span class=toc-text>原子化多路径付款 vs 发票</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%8E%9F%E5%AD%90%E5%8C%96%E5%A4%9A%E8%B7%AF%E5%BE%84%E4%BB%98%E6%AC%BE-vs-Keysend><span class=toc-text>原子化多路径付款 vs Keysend</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%8E%9F%E5%AD%90%E5%8C%96%E5%A4%9A%E8%B7%AF%E5%BE%84%E4%BB%98%E6%AC%BE-vs-Offer><span class=toc-text>原子化多路径付款 vs Offer</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%9C%A8%E4%BD%A0%E7%9A%84%E9%97%AA%E7%94%B5%E7%BD%91%E7%BB%9C%E8%8A%82%E7%82%B9%E4%B8%8A%E5%88%9B%E5%BB%BA-AMP><span class=toc-text>在你的闪电网络节点上创建 AMP</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E7%BB%93%E8%AE%BA><span class=toc-text>结论</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB><span class=toc-text>推荐阅读</span></a></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id=postTitle>原子化多路径付款（AMP）完全解说</h1><div class=page-author><div class="is-flex is-flex-direction-row page-data mr-6"><img class=mr-1 src=/images/default_avatar.png alt="Tobi Ojuolape"><div class=page-author-info><strong>Tobi Ojuolape</strong><time class=has-text-grey datetime=2023-04-14T07:15:29.000Z>2023-04-14</time></div></div><div class=is-flex><a href=/tags/%E9%97%AA%E7%94%B5%E7%BD%91%E7%BB%9C><i class="page-tag mr-1 px-1">闪电网络</i></a></div></div><article class="mt-4 post-content"><blockquote><p><em>作者：Tobi Ojuolape</em></p><p><em>来源：<a target=_blank rel=noopener href=https://tobiojuolape.hashnode.dev/a-comprehensive-guide-to-lightnings-atomic-multipath-payments-amp>https://tobiojuolape.hashnode.dev/a-comprehensive-guide-to-lightnings-atomic-multipath-payments-amp</a></em></p></blockquote><h2 id=介绍><a href=#介绍 class=headerlink title=介绍></a>介绍</h2><p>闪电网络能够在比特币上实现即时小额付款（微付款），因为传统比特币交易通常需要较长的确认时间，其交易费对于小额付款来说也并不划算。专注于微付款是人们采用闪电网络的关键因素，因为它解锁了很多以往实现不了的应用场景。</p><p>有了闪电网络，我们就可以用比特币买咖啡、买礼品、付话费，甚至捐款。数百万人可以即时完成链下闪电网络付款，无需与链上比特币交互。</p><p>虽然闪电网络之前的应用场景都聚焦于微付款，但现如今新的改进措施都是为了增强闪电网络在大额比特币付款方面的可靠性和适用性。在本文中，我们将探索原子化多路径支付（Atomic Multipath Payment, AMP）的概念，以及如何使用它们在闪电网络上实现快捷可靠的大额比特币付款。</p><h2 id=何为原子化多路径支付？><a href=#何为原子化多路径支付？ class=headerlink title=何为原子化多路径支付？></a>何为原子化多路径支付？</h2><p>原子化多路径支付（AMP）是由 Ind 0.13.0 beta 版实现的新型闪电网络付款，可以将单笔付款拆分成多笔较小的付款，然后同时经由不同的支付通道发送。</p><p>在 AMP 的帮助下，一笔付款可以被拆分成一系列较小的付款部分。每个付款部分都会被分配唯一的付款哈希，就像是由付款方生成的单个原像的一个碎片。接着，这些付款部分会经由不同的支付通道发送出去，每个都有对应的哈希时间锁合约（HTLC）。如此一来，收款方只需证明自己知道每个 HTLC 的原像，即可将各个付款部分重组成一笔付款。</p><p>在闪电网络中，多路径付款（MPP）并非新概念。但是，原子化多路径付款有别于 MPP，因为它遵循原子化性原则，即，“<em>要么所有付款都成功结算，要么所有付款都结算失败</em>”。MPP 对所有付款部分都使用同一个付款哈希，这使得关联单个路由变得非常容易，而且可能会出现只有部分付款结算成功的情况。相比之下，AMP 只有全部结算和全不结算之分。</p><p>由于原子化多路径付款是端到端升级，只有付款方和收款方需要了解此付款类型，因此在此新功能能够广泛使用之前无需升级闪电网络。</p><h2 id=我们为何需要多路径付款？><a href=#我们为何需要多路径付款？ class=headerlink title=我们为何需要多路径付款？></a>我们为何需要多路径付款？</h2><p>路由一笔闪电网络付款时，路由节点能否协助付款方将闪电网络付款转移至收款方取决于以下因素：</p><ol><li><strong>通道容量</strong>：指通过用来创建闪电网络通道的充值交易存入 2&#x2F;2 多签的 satoshi 总量，代表通道内持有的最大价值。gossip 协议会公布通道容量让节点知道。路由节点的支付通道必须拥有足够的容量来传递付款额。如果一笔付款的额度超过所在通道的容量，则路由节点无法路由付款。（即使你将 1 BTC 充值到你的闪电网络节点，开通了 10 条容量为 0.1 BTC 的支付通道，你也无法路由超过 0.1 BTC 的付款，除非借助于 AMP 的力量。）</li><li><strong>余额</strong>：指通道一方持有的可以发送给另一方的 satoshi 数量。节点 A 的余额的子集能够沿 A→B 方向发送至节点 B。节点 B 的余额的子集能够沿相反方向 A←B 发送至节点 A。</li><li><strong>流动性</strong>：指能够经由通道沿一个方向发送的可用（子集）余额。节点 A 的流动性等于节点 A 的余额减去通道储备金和节点 A 承诺的所有未决 HTLC。路由节点的支付通道内必须有充足的资金才能实现付款。如果节点的资金不足，则无法传递付款。</li><li><strong>费用政策</strong>：路由节点能够制定自己的费用政策，并基于费用选择要路由的付款。如果付款方提供的费用太低，或路由节点的收费太高，路由节点可能会选择不提供路由服务。</li><li><strong>网络拓扑结构</strong>：闪电网络的拓扑结构会影响路由节点传递付款的能力。如果付款方和收款方之间的最短路径包含连接不良或流动性不足的节点，付款就会失败。</li><li><strong>正常运行时间与可靠性</strong>：路由节点必须在线，且能够用来传递付款。如果节点掉线或出现连接问题，可能无法传递付款。</li></ol><p>在上述 6 大因素中，闪电网络通道的<strong>流动性和容量</strong>对于大额付款路由来说仍是最主要的阻碍。这是因为闪电网络中支付通道的容量是有限的，取决于通道内锁定的比特币数量。如果一笔付款超出了支付通道的容量，则无法得到处理。在原子化多路径付款的帮助下，此付款能够被拆分成多笔较小的付款，分别由不同的支付通道路由。这样一来，付款不再受单条支付通道容量的限制，从而提高闪了电网络的总体效率。</p><h2 id=原子化多路径付款是如何运作的><a href=#原子化多路径付款是如何运作的 class=headerlink title=原子化多路径付款是如何运作的></a>原子化多路径付款是如何运作的</h2><p>AMP 支持将付款拆分后经由闪电网络中的不同路径发送。</p><p>以下例子反映了 AMP 运作原理：</p><ol><li>Alice 想要通过闪电网络发送 1 BTC 给 Bob。</li><li>鉴于找到一条容量高达 1 BTC 的支付通道难度较大，Alice 的钱包可以将此付款拆分成 10 笔 0.1 BTC 的付款。每个付款部分都有唯一的付款哈希，就像是 1 BTC 付款的原像的一个碎片。</li><li>每个付款部分连同各自的付款哈希都由通往 Bob 的钱包的不同路径传递。</li><li>如果有一条路径无法完成付款，则所有付款都不会成功。（译者注：怀疑是将多个付款部分的原像相互捆绑，使得任一部分支付未送达都不可能揭晓其它部分的原像。在 AMP 中，付款哈希值及其原像都是由支付方生成的；从这个角度上来说，它其实跟 Keysend 更像。）</li><li>收到付款的所有部分后，Bob 会将付款哈希进行匹配，并重组成单个付款哈希，认领 Alice 的 1 BTC 付款。</li></ol><p>接下来，我会将原子化多路径付款与其它已有的和即将广泛实现的闪电网络功能进行详细的对比分析。</p><h2 id=原子化多路径付款-vs-发票><a href=#原子化多路径付款-vs-发票 class=headerlink title="原子化多路径付款 vs 发票"></a>原子化多路径付款 vs 发票</h2><p>Bolt 11 闪电网络发票是闪电网络上最简单的收付款方式。发票是付款请求，包含应付款额、收款方的公钥和付款哈希等信息。然后，付款方可以使用上述信息创建一条支付通道，将付款发送给收款方。如果你想了解更多关于闪电网络发票的内容，请阅读<a target=_blank rel=noopener href=https://tobiojuolape.hashnode.dev/bolt-11-vs-bolt-12-whats-new-in-lightning>这篇文章</a>。</p><p>AMP 的功能比起发票更加强大，因为它们支持在闪电网络上处理更大额的付款，从而增强闪电网络的可扩展性，带来更多应用场景。AMP 也能增强隐私性和安全性，因为付款经由多条支付通道传递，能够降低第三方跟踪和不完全结算的风险。相较之下，闪电网络发票无法被用来执行大额付款，因为它们经常为路由节点的流动性和容量所限。此外，AMP 发票可以重复使用，而且支持订阅和捐款场景，而闪电网络发票只能使用一次。</p><table><thead><tr><th>特征</th><th>原子化多路径付款(AMP)</th><th>BOLT 11 发票</th></tr></thead><tbody><tr><td>用途</td><td>将单笔大额付款拆分成多笔较小的付款</td><td>要求付款方付款</td></tr><tr><td>路由</td><td>付款被拆分后经由多条支付通道路由</td><td>付款经由单条支付通道路由</td></tr><tr><td>要求</td><td>收款方必须支持 AMP 才能接收付款</td><td>收款方必须为付款方生成发票</td></tr><tr><td>付款额</td><td>可用于超出单条支付通道容量和流动性的大额付款</td><td>通常只能用于一次性小额付款</td></tr><tr><td>安全性</td><td>提供更高的隐私性和安全性，降低非完全结算和第三方追踪的风险</td><td>简单安全的付款请求方式</td></tr><tr><td>复杂性</td><td>可能会增加路由付款的复杂性，提高出现错误和延迟的可能性</td><td>生成发票很简单</td></tr><tr><td>应用场景</td><td>适于大额付款和经常性付款，可增强隐私性和安全性</td><td>适合想要在闪电网络上接收付款的商家和个人</td></tr><tr><td>原像</td><td>由付款方生成，但是只有当所有付款部分完成结算后，收款方才知晓</td><td>由收款方生成</td></tr></tbody></table><h2 id=原子化多路径付款-vs-Keysend><a href=#原子化多路径付款-vs-Keysend class=headerlink title="原子化多路径付款 vs Keysend"></a>原子化多路径付款 vs Keysend</h2><p>Keysend 是 bLIP（比特币与闪电网络改进协议）功能，无需发票即可通过闪电网络发送一次性小额付款。这赋予了 Keysend 简单性和易用性，因为 Keysend 能够让付款方不再依赖收款方提供发票。但是，Keysend 需要收款方与付款方共享一次密钥，之后付款方就可以随时向收款方支付任意金额。付款方选择付款哈希的哈希原像，并使用收款方的公钥加密，确保只有收款方能够解密付款哈希并拿到付款。</p><p>AMP 专为超出单条通道容量的大额付款设计。通过将付款拆分成多个部分，AMP 可以让用户通过多条支付通道路由付款，让原本不可能完成的大额交易成为可能。另外，为每个付款部分生成单独的付款哈希提高了安全性和隐私性，降低非完全结算和第三方追踪的风险。</p><p>相比之下，Keysend专为一次性小额付款设计，无需发票即可将付款直接发送至收款方节点。由于简单易用，Keysend非常适用于给小费、捐款等微付款场景，因为为这类场景生成发票既无必要，也不切实际。</p><table><thead><tr><th>特征</th><th>原子化多路径付款(AMP)</th><th>Keysend</th></tr></thead><tbody><tr><td>用途</td><td>将单笔大额付款拆分成多笔较小的付款</td><td>无需发票即可发送一次性小额付款</td></tr><tr><td>路由</td><td>付款被拆分后经由多条支付通道路由</td><td>付款经由洋葱路由直接发送给收款方</td></tr><tr><td>付款额</td><td>可用于超出单条支付通道容量和流动性的大额付款</td><td>通常用于小额付款</td></tr><tr><td>发票&#x2F;收据</td><td>支持使用静态发票作为付款收据</td><td>完全无需使用发票</td></tr><tr><td>应用场景</td><td>用于大额付款和经常性付款，可增强隐私性和安全性</td><td>用于微付款和不适用发票的场景</td></tr><tr><td>原像</td><td>由付款方生成，但是只有当所有付款部分完成结算后，收款方才知晓</td><td>由付款方生成并知晓</td></tr></tbody></table><h2 id=原子化多路径付款-vs-Offer><a href=#原子化多路径付款-vs-Offer class=headerlink title="原子化多路径付款 vs Offer"></a>原子化多路径付款 vs Offer</h2><p>Offer 是相对较新的闪电网络功能，支持用户创建可反复使用的发票，让订阅之类的经常性付款变得更容易执行。通过让用户创建可多次使用的发票，Offer 可简化发票开具流程，减少出错和漏付的风险。</p><p>Offer 和原子化多路径付款都是非常强大的功能，能够以独特的方式增强闪电网络的能力。Offer 与 AMP 之间的主要区别在于 AMP 更适用于大额付款，因为它支持多路径付款。</p><table><thead><tr><th>特征</th><th>原子化多路径付款(AMP)</th><th>Offers</th></tr></thead><tbody><tr><td>用途</td><td>适用于需要通过多条支付通道路由的大额付款</td><td>适用于单个发票可以多次使用的经常性交易</td></tr><tr><td>复杂性</td><td>AMP 路由会更加复杂一些，而且会带来额外的延迟和潜在的路由错误</td><td>Offers 相对更简单易用</td></tr><tr><td>应用场景</td><td>适用于需要多通道路由的高额低频交易</td><td>适用于订阅、经常性付款和小额交易</td></tr><tr><td>缺点</td><td>路由会变得更加复杂，可能会带来额外的延迟，不适用于小额交易</td><td>不适用于超过通道容量的大额交易，隐私性较弱，经常性付款出错风险较高</td></tr><tr><td>原像</td><td>由付款方生成，但是只有当所有付款部分完成结算后，收款方才知晓</td><td>可用于接收付款和请求付款，可由收款方或付款方生成</td></tr></tbody></table><h2 id=在你的闪电网络节点上创建-AMP><a href=#在你的闪电网络节点上创建-AMP class=headerlink title="在你的闪电网络节点上创建 AMP"></a>在你的闪电网络节点上创建 AMP</h2><p>如果你想要接收 AMP，将你的 lnd 软件升级到最新版本之后，在启动节点之前，需要先在你的 <code>lnd.conf</code> 文件里设置</p><pre><code>accept-amp=1
</code></pre><p>接下来，你就可以调用下方命令向其它启用了 AMP 的节点付款：</p><pre><code>lncli sendpayment --amt &lt;amount in satoshis&gt; --dest &lt;recipient’s public key&gt; --amp
</code></pre><h2 id=结论><a href=#结论 class=headerlink title=结论></a>结论</h2><p>随着越来越多人开始使用闪电网络完成日常付款，人们对闪电网络的某些局限性愈发重视，其中之一就是它不适用于大额付款。有了 AMP，我们就可以打破这一限制，帮助闪电网络解锁更多强大的新型应用场景，使之应用于原本被认为只适合链上比特币交易的大额付款。</p><h2 id=推荐阅读><a href=#推荐阅读 class=headerlink title=推荐阅读></a>推荐阅读</h2><ul><li><p>原子化多路径付款：<a target=_blank rel=noopener href=https://docs.lightning.engineering/lightning-network-tools/lnd/amp>https://docs.lightning.engineering/lightning-network-tools/lnd/amp</a></p></li><li><p>精通闪电网络：<a target=_blank rel=noopener href=https://github.com/lnbook/lnbook>github.com&#x2F;lnbook&#x2F;lnbook</a></p></li><li><p>闪电网络 bLIP：<a target=_blank rel=noopener href=https://github.com/lightning/blips/blob/master/blip-0003.md>github.com&#x2F;lightning&#x2F;blips&#x2F;blob&#x2F;master&#x2F;blip..</a></p></li><li><p>Offer：<a target=_blank rel=noopener href=https://github.com/lightning/bolts/pull/798>github.com&#x2F;lightning&#x2F;bolts&#x2F;pull&#x2F;798</a></p></li></ul><p>（完）</p></article></div></div></main><script src="/js/post.js?v=1682773100887"></script><script src="/js/highlight.min.js?v=1682773100887"></script><script>var containerEl=document.querySelector(".post-container"),postFontSize=localStorage.getItem("post-font-size")||"16",inputEl=document.querySelector("#size-change-input"),inputEl2=document.querySelector("#size-change-input2");inputEl.value=postFontSize,inputEl2.value=postFontSize,containerEl.style.fontSize=postFontSize+"px",$(function(){function e(t){$(".post-container").css("font-size",t+"px"),localStorage.setItem("post-font-size",t),$("#size-change-input").val(t),$("#size-change-input2").val(t)}$("#size-change-input").on("input propertychange",function(t){e(t.target.value)}),$("#size-change-input2").on("input propertychange",function(t){e(t.target.value)})})</script><script>hljs.initHighlightingOnLoad()</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class=sns-container><a title=nostr target=_blank rel="noopener nofollow" href=https://iris.to/npub1g2qs0ca5kpwlrcfug2em4jelmh65clk3yccwjxrs6hvdpd9qj80q022j4m>Nostr</a><a title=rss target=_blank rel="noopener nofollow" href=/atom.xml>rss</a><a title=telegram target=_blank rel="noopener nofollow" href=//t.me/btcstudyorg>Telegram</a></section></footer><script async src="/js/buttons.js?v=1682773100887"></script><script async src="/js/index.js?v=1682773100887"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JVCJ9XXG1Z")</script><script>var _hmt=_hmt||[];(()=>{var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306",e.async=!0,e.defer=!0,document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)})()</script></body></html>