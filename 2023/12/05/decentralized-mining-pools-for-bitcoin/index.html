<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><title>比特币的去中心化矿池的诸元素</title><meta name=keywords content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name=description content=比特币思想的中文集结地><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1"><link rel=icon href=/favicon.ico><link rel=stylesheet href="/style/common/bulma.css?v=1682773100887"><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href="/style/common/iconfont.css?v=1682773100887"><link rel=stylesheet href="/style/base.css?v=1682773100887"><link rel=stylesheet href="/style/common/helper.css?v=1682773100887"><link rel=stylesheet href="/style/themes/animation.css?v=1682773100887"><script>function ready(){var e=document.querySelector(".body-container"),t=localStorage.getItem("theme")||"light";["light","dark"].includes(t)||(t="light",localStorage.setItem("theme","light")),e.classList.remove("appearance-auto"),e.classList.add("appearance-"+t),quickInitialTheme()}function quickInitialTheme(){var e=localStorage.getItem("theme")||"light",t=document.querySelector(".logo-light"),o=document.querySelector(".logo-dark"),d=document.querySelector("#mobile-header-logo > .logo-light"),l=document.querySelector("#mobile-header-logo > .logo-dark"),a=document.getElementById("theme-btn"),i=document.querySelector(".slide-theme-light"),c=document.querySelector(".slide-theme-dark");document.body.classList.add(e),("dark"===e?(t.classList.add("hidden"),o.classList.remove("hidden"),d.classList.add("hidden"),l.classList.remove("hidden"),a.classList.remove("icon-icon_dark"),a.classList.add("icon-icon_light"),i):c).classList.remove("hidden")}document.addEventListener("DOMContentLoaded",ready)</script><script src="/js/common.js?v=1682773100887"></script><script src=/js/libs/zepto.min.js></script><link rel=stylesheet href="/style/post.css?v=1682773100887"><link rel=stylesheet href="/style/themes/highlight.css?v=1682773100887"><meta name=generator content="Hexo 6.3.0"><link rel=alternate href=/atom.xml title="BTC Study" type=application/atom+xml></head><body class="is-flex is-flex-direction-column" onload=initialTheme()><div class=clip></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id=header><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href=/ ><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id=header-menu><a class="is-inline-block header-activity mr-4" href=/ >首页</a><a class="is-inline-block mr-4" href=/archives>全站目录</a><a class="is-inline-block mr-4" href=/tags>标签</a><a class="is-inline-block mr-4" href=/maps>地图</a><a class="is-inline-block mr-4" href=/mempool>mempool</a><a class="is-inline-block mr-4" target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input type=range min=12 max=32 step=2></div></div></div><i class="iconfont icon-icon_dark mr-1" id=theme-btn></i><div class=search-wrap><input class=pl-3 id=search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search" id=search-input-btn></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopic><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">比特币的去中心化矿池的诸元素</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn2></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input2 type=range min=12 max=32 step=2></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id=mobile-header><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id=mobile-header-logo><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopicMobile><p class=is-full-height>比特币的去中心化矿池的诸元素</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class=mobile-search-wrap><div class=search-input><input class=pl-3 id=mobile-search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class=mobile-search-input-btn>搜 索</button></div></div></header><div class=mobile-slide-menu><a class=header-activity href=/ >首页</a><a href=/archives>全站目录</a><a href=/tags>标签</a><a href=/maps>地图</a><a href=/mempool>mempool</a><a target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class=slide-menu-fontsize><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1682773100887"></script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%AF%94%E7%89%B9%E5%B8%81%E7%9A%84%E5%8E%BB%E4%B8%AD%E5%BF%83%E5%8C%96%E7%9F%BF%E6%B1%A0><span class=toc-text>比特币的去中心化矿池</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%BC%B1%E5%8C%BA%E5%9D%97><span class=toc-text>弱区块</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%85%B1%E8%AF%86%E6%9C%BA%E5%88%B6><span class=toc-text>共识机制</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%94%AF%E4%BB%98%E6%89%BF%E8%AF%BA><span class=toc-text>支付承诺</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%9C%AA%E8%8A%B1%E8%B4%B9%E7%9A%84%E7%9F%BF%E5%B7%A5%E6%94%AF%E4%BB%98%E8%BE%93%E5%87%BA%EF%BC%88UHPO%EF%BC%89%E6%9C%BA%E5%88%B6><span class=toc-text>未花费的矿工支付输出（UHPO）机制</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%B1%A0%E4%BA%A4%E6%98%93%E5%92%8C%E8%A1%8D%E7%94%9F%E5%93%81%E5%B7%A5%E5%85%B7><span class=toc-text>池交易和衍生品工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%94%AF%E4%BB%98%E6%8E%88%E6%9D%83><span class=toc-text>支付授权</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#Schnorr-%E9%97%A8%E9%99%90%E7%AD%BE%E5%90%8D><span class=toc-text>Schnorr 门限签名</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%BA%A4%E6%98%93%E6%8C%91%E9%80%89><span class=toc-text>交易挑选</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%9C%AA%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98%E5%92%8C%E6%9C%AA%E6%9D%A5%E7%9A%84%E6%96%B9%E5%90%91><span class=toc-text>未解决的问题和未来的方向</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E9%99%90%E5%88%B6%E6%9D%A1%E6%AC%BE><span class=toc-text>限制条款</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%AD%90%E7%9F%BF%E6%B1%A0><span class=toc-text>子矿池</span></a></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id=postTitle>比特币的去中心化矿池的诸元素</h1><div class=page-author><div class="is-flex is-flex-direction-row page-data mr-6"><img class=mr-1 src=/images/default_avatar.png alt="Bob McElrath"><div class=page-author-info><strong>Bob McElrath</strong><time class=has-text-grey datetime=2023-12-05T07:35:33.000Z>2023-12-05</time></div></div><div class=is-flex><a href=/tags/%E7%9F%BF%E6%B1%A0><i class="page-tag mr-1 px-1">矿池</i></a></div></div><article class="mt-4 post-content"><blockquote><p><em>作者：Bob McElrath</em></p><p><em>来源：<a target=_blank rel=noopener href=https://github.com/mcelrath/braidcoin/blob/master/general_considerations.md>https://github.com/mcelrath/braidcoin/blob/master/general_considerations.md</a></em></p></blockquote><p>我写这篇文章是为了帮助组织和厘清围绕比特币 “去中心化矿池” 的一些想法、它成立的前提条件，以及一些尚未解决的问题 —— 若要完整地定义一种去中心化矿池，就必须解决这些问题。</p><h2 id=比特币的去中心化矿池><a href=#比特币的去中心化矿池 class=headerlink title=比特币的去中心化矿池></a>比特币的去中心化矿池</h2><p>一个去中心化矿池由下列部分组成：</p><ol><li>一种 “弱区块” 以及难度目标机制；</li><li>一种共识机制，用于收集和统计矿工的挖矿分数（share）</li><li>一种支付承诺，要求一定数量的参与者参与签名以给挖矿分数支付</li><li>一种签名程序，以签名支付承诺，使得矿池参与者得到合理的支付</li><li>一种交易选择机制，用于构建有效的比特币矿池</li></ol><p><a target=_blank rel=noopener href=https://github.com/stratum-mining/sv2-spec>StratumV2</a> 项目所提供的优化还包括给挖矿设备的加密通信。这些问题很重要，大部分都是从矿池自身分析出来的，所以我们不会讨论诸如加密通信的部分，但假设任意去中心化矿池都会使用 StratumV2 的通信机制。</p><h2 id=弱区块><a href=#弱区块 class=headerlink title=弱区块></a>弱区块</h2><p>一个 <em>share</em> （挖矿分数；矿池份额）就是一个 “弱区块”，它是一个标准的比特币区块，只是没有达到比特币的目标难度 $T$，但达到了小一些的难度目标 $t$。 <em>矿池</em> 指定了这个参数 $t$，每当一个矿工发现了一个 “弱区块” 时，就跟矿池通信（矿池就给 TA 记一个 share）。</p><p>Share 自身是一个不记名的凭证，证明做了一定次数的 SHA256 运算；它也必须带有一个结构，以指明它 “属于” 哪一个矿池。在中心化矿池中，矿池自身会分发 “工作单元”（比特币区块头），是跟由该矿池创建的某个区块相对应的，而且交易的选择也由这个（中心化的）矿池完成了。</p><p>而在去中心化矿池中，share 自身必须有额外的结构，以向矿池内的其他矿工表明这个 Share 属于这个矿池；而且，如果它真的满足了比特币的难度目标，这个 Share 将包含承诺，使得池内的所有 <em>其他</em> 矿工都根据该矿池的去中心化共识机制所实现的 share 计数得到支付。</p><p>没有承诺额外的元数据、证明自身所属的 Share（或者区块）必须在 share 计算中排除出去，那些矿工不是 “自己人”。换句话说，提交一个随机的 SHA256 区块头到一个矿池，不能被统计为一个 Share，除非（假定它是一个比特币区块）它在给这个矿池支付的同时会让所有其它 shares 得到支付。</p><p>举个例子，考虑一种去中心化矿池的 “share” 是这样的：</p><pre><code>Version | Previous Block Hash | Merkle Root | Timestamp | Difficulty Target | Nonce
Coinbase Transaction | Merkle Sibling | Merkle Sibling | ...
Pool Metadata
</code></pre><p>在这里，第二行的 <code>Merkle Sibling</code> 是交易默克尔树中的额外节点，是验证特定的 <code>Coinbase 交易</code> 被包含在 <code>默克尔根</code> 中所必需的。我们假设 <code>Coinbase 交易</code> 会承诺矿池的共识机制所要求的任何额外数据，比如在一个 <code>OP_RETURN</code> 输出中。</p><p><code>Coinbase</code> 交易是一笔标准的交易，但没有输入，而且应该具有下列输出：</p><pre><code>OutPoint(Value:0, scriptPubKey OP_RETURN &lt;Pool Commitment&gt;)
OutPoint(Value:&lt;block reward&gt;, scriptPubKey &lt;P2TR pool_pubkey&gt;)
</code></pre><p><code>&lt;block reward&gt;</code>（区块奖励）是本区块的所有手续费加上本次减半周期内的区块奖励，而 <code>pool pubkey</code> 则是一个由矿池（内成员）集体控制的地址，搭配共识机制，使得它只能按照其 share 统计方法，给池内所有的矿工支付。</p><p><code>&lt;Pool Commitment&gt;</code> 是 <code>Pool Metadata</code> 的哈希值，而 <code>Pool Metadata</code> 承诺了这个矿池的运行所需的任意额外数据。至少，它必须包含弱区块的难度目标 $t$（或者至少要能从这段元数据中计算出来）。这个 share 的验证要求这个比特币区块头的 PoW 小于难度目标 $t$。</p><p><code>&lt;Pool Commitment&gt;</code> 中还可以加入：</p><ol><li>可以用在合作式签名支付承诺的的矿工们的公钥</li><li>跟这个矿工进行加密通信所需的密钥</li><li>身份信息，比如 IP 地址、TOR 地址，或其它路由信息，允许其它矿工在协议外跟这个矿工联络</li><li>这个 share 的父区块（在 braidpool 中是 bead），或者其它由共识指定的数据，如果使用了一些别的共识机制的话。</li><li>用在多轮门限签名仪式中的临时共识数据</li></ol><p>最后，我们要指出，有一种提议<a target=_blank rel=noopener href=https://utxos.org/uses/miningpools/ >使用限制条款（CTV）来形成挖矿协同</a>，但并不使用弱区块，也不以比比特币区块更密的频次对哈希率采样，而且不能减少收益方差。因此，从实用的意义上来说，它不是一个 “矿池”，而且我们不会进一步考虑这种设计。虽然限制条款对一个去中心化矿池可能是有用的，我们会在 “支付承诺” 一节中讨论。</p><h2 id=共识机制><a href=#共识机制 class=headerlink title=共识机制></a>共识机制</h2><p>在一个中心化的矿池中，作为中心的矿池运营者会收到所有的 shares，并执行统计。虽然这种统计是容易的事，但去中心化矿池的用意正在于，我们不希望需要信赖某个实体来正确统计，也不希望给任何一个实体能够盗窃矿池中所有资金的权力、不公平地发放支付的权力。</p><p>因此，所有矿工都需要从所有其他矿工处接收 shares。每一个 share 都必须是一个比特币区块（假定他能满足比特币的难度目标），而且必须承诺矿池的元数据（如上所述）。</p><p>给定一个时段的 shares 集合，我们必须对这些 shares 运行一个共识机制，使得矿池的所有成员都同意这些是有效的 shares、应该根据矿池的支付机制得到支付。</p><p>这种共识机制必须有一个特点：比比特币的共识运行更 <em>快</em>，从而可以在比特币出块间隔中尽可能多地收集有效的 share。这是因为矿池的首要目标就是 <em>削减矿工的收益方差</em>。<a target=_blank rel=noopener href=https://en.bitcoin.it/wiki/P2Pool>P2Pool</a> 通过使用一种标准的区块链、出块时间为 30 秒来实现这一点；而 <a target=_blank rel=noopener href=https://github.com/SChernykh/p2pool>Monero p2pool</a> 通过 10 秒的出块时间来实现。</p><p>比特币已经催生了大量关于共识算法的研究，在此，可以考虑的包括 <a target=_blank rel=noopener href=https://eprint.iacr.org/2013/881>GHOST 协议</a>、<a target=_blank rel=noopener href=https://eprint.iacr.org/2016/199>异步 PBFT</a>、<a target=_blank rel=noopener href=https://arxiv.org/abs/1906.08936>Avalanche</a> 这样的 “取样” 算法（以及被 <a target=_blank rel=noopener href=https://arxiv.org/abs/1704.02397>DFinity</a> 采用的取样算法），以及<a target=_blank rel=noopener href=https://eprint.iacr.org/2018/104>基于 DAG</a> 的算法。（这不是一个大全，只是举了一些有代表性的例子）</p><p>所有共识算法的一个共同特征是，达成共识的速度受制于全局的网络延迟。无论选择哪一种共识算法，都必须让所有参与者都看到所有数据进入当前状态，并且能够同意这就是正确的最新状态。调查开发上述算法的网络可知，他们最快达成共识的速度大概是 1 秒。因此，不同算法的确切 “达成共识的时间” 会以 O(1) 的常数变化，所有算法都是大概 1 秒。这比比特币区块的出现速度快了 600 倍，结果是规模是 1&#x2F;600 的小矿工也可以贡献算力，而且相比于单干挖矿（solo mining），收益方差可以缩小 600 倍。</p><p>虽然 600 倍的收益方差削减是一个有价值的目标，但这个提升还不足以使得只有一台矿机的矿工加入。因此，还必须寻找另一种方案，让小于一定哈希率的矿工也能加入。我们在 “子矿池” 一节提出了一些想法。</p><p>从我们的角度看，共识算法的一个显然选项是一种复用比特币的工作量证明的 DAG 算法，以贯彻比特币自身的精神 —— 也就是说，链的顶端是由得到工作量加权后最重的顶端决定的，而 DAG 内部的冲突则用工作量加权来解决。注意，这跟只在恒定难度下工作的 “最长链规则” 相同，但我们假设 DAG 不会有固定的难度，所以必须正确地结合难度。解决方案是识别从创世区块到链顶端的最重线性路径，并沿着这条路径加总难度。</p><p>最后，我们还要警告，在考虑容纳小矿工的机制时，不能违反比特币的 “无过程性（progress-free）” 特征。也就是说，在 DAG 中，不应该能够从更小的矿工的一个子集中加总工作量、然后得到一个更高工作量的区块。</p><h2 id=支付承诺><a href=#支付承诺 class=headerlink title=支付承诺></a>支付承诺</h2><p>支付承诺是比特币区块中的 coinbase 输出，包含了来自区块奖励和本区块内手续费的所有资金。这个支付必须承诺在这个区块挖出时候计算出来的 share 支付结构。换句话来说，它必须表示和承诺这个去中心化矿池的 share 统计的共识。</p><h3 id=未花费的矿工支付输出（UHPO）机制><a href=#未花费的矿工支付输出（UHPO）机制 class=headerlink title=未花费的矿工支付输出（UHPO）机制></a>未花费的矿工支付输出（UHPO）机制</h3><p>关于支付承诺，我们提出一种新的、简单的 share 记录统计方法。假定共识机制是一种类似于比特币的基于 UTXO 的区块链。而共识机制的 “UTXO” 集就是给所有 share 的支付输出的集合，而支付的数额是由已经记录的 share 和共识机制的规则决定的。</p><p>我们将这种支付的集合称为 “未花费的矿工支付输出（Unspent Hasher Payment Output）集” ，也就是这个去中心化矿池的 “UTXO 集”，并且 UHPO 集的计算和管理就是这个去中心化矿池的首要目标。</p><p>UHPO 集可以简单表示成一笔交易：将该矿池挖出的所有未花费的 coinbase 交易作为输入、给每一个矿工分配一个输出，并且数额由其 share 贡献（由共识机制的规则确定）决定。</p><p>在 p2pool 中，这个 UHPO 集被放在每个区块的 coinbase 交易中，产生对矿工的大量极小额度的支付。传统矿池的一个优势在于，可以在多个区块中 <em>聚合</em> 这些支付，从而减少每个矿工 “取款” 的次数。去中心化矿池也应该能做到同样的事。如果没有做到的话（像 p2pool），携带大量小额输出的 coinbase 交易（体积很大）就会跟支付手续费的交易争夺区块空间。</p><p>在 coinbase 输出中放置对 UHPO 集的承诺，就是一种让所有矿工能在出块之后、去中心化矿池宕机或者出错时得到正确支付的机制。为此，UHPO 集的交易必须是正确构造、完全签名并且有效的、可以广播的比特币交易。见 “支付授权” 一节，了解关于 签名&#x2F;授权 UHPO 交易的考虑。</p><p>我们不希望真的要广播这笔 UHPO 集交易，除非矿池出故障。就像闪电网络这样的乐观协议，我们希望保留这些交易、不让它上链，然后在比特币协议之外的协议中更新它。每挖出一个新区块，我们就会更新 UHPO 集交易，以计入自矿池上次出块以来的任何新的 share。</p><p>此外，一个去中心化矿池还应该指出矿工 “取款”。形式可以是一种特殊的消息或者交易，发送到矿池（然后得到矿池内的共识的认可），以从 UHPO 集交易中 <em>移除</em> 一个矿工的输出，并创建一笔新的单独的比特币交易来给这个矿工支付、完成授权，然后广播到比特币网络中。</p><h3 id=池交易和衍生品工具><a href=#池交易和衍生品工具 class=headerlink title=池交易和衍生品工具></a>池交易和衍生品工具</h3><p>如果这个去中心化矿池支持自身的交易，一个人可以 “发送 Share” 给另一方。这种操作是将一方在 UHPO 集交易中的地址换成另一方的。这样一来，还未支付的份额就可以交给一个交易所、做市商或者 OTC 柜台，换成即时支付（比如通过闪电网络）或者换成一种衍生品合约。</p><p>转移 shares 可以构造一种衍生品合约的道理在于，它实质上是对 <em>哈希率</em> 的一种度量，而且尚未得到比特币的结算。虽然给定矿池当前挖出的比特币的数量，我们可以随时计算 UHPO 集，并转化成比特币输出，但在请求结算之前，这个矿池还能挖出多少区块、这些区块能收获多少手续费，都是不确定的。</p><p>可以创建一种私人合约，一方使用现货比特币，向另一方 <em>购买未来的 shares</em> 。这是一种 <em>期货</em> 合约，矿工的对手方得到是矿池的 “运气” 风险以及手续费波动风险。</p><p>为了形成哈希率衍生品，必须能够跨越难度调整窗口 $d_1$ 和 $d_2$ 转移 shares。在一个难度调整窗口中，单个 Share 的价值是 $BTC_1$ ，但在另一个窗口中，可能是 $BTC_2$ 。如果你可以计算这个微分<br>$$<br>d(hashrate)&#x2F;d(BTC) &#x3D; (d_1 - d_2)&#x2F;(BTC_1 - BTC_2)<br>$$<br>那么期权和期货这样的衍生品工具就可以通过私人合约构造出来，不同难度调整周期内的 shares 被交给衍生品合约的对手，以换取 BTC，可能会带有时间限制。我们不再进一步描述如何做到这些，只是指出让去中心化矿池支持私人衍生品工具的充分条件：</p><ol><li>可以将 share 发送给另一个人</li><li>可以在充分定义好的时间、计入难度调整的影响（比如在难度调整之后、考虑上一个难度周期的影响）将 share 结算成 BTC</li><li>可以跨越两个难度调整窗口交易 share</li></ol><p>把一个去中心化矿池转变成一个带有订单簿的完整 DeFi 市场可能很诱人。我们要提出警告，矿工可抽取价值（Miner Extractable Value, MEV）是一个严重的问题，它破坏了公平以及人们对系统的信心，此处也应该避免。我们可以考虑的操作仅有：（a）发送 share 给另一方；以及（b）请求给 shares 支付 BTC。</p><p>最后，我们还要指出，一个 “Share” 的价值在经历难度调整事件之后，天然就固定下来了。在一个为期两周的难度调整周期中，每一次 SHA256D 运算的价值（以 BTC 计）都是固定的，但具体值多少，是未知的，要等到下一次难度调整周期来临时才知道。因此，难度调整的时间是自动广播上一个周期的 UHPO 树、结算上一个周期的 shares 的天然时机。</p><h2 id=支付授权><a href=#支付授权 class=headerlink title=支付授权></a>支付授权</h2><p>在 “支付承诺” 部分，我们描述了一种简单的机制来表示 shares 和由实时对 shares 运行的 “共识机制” 决定的 share 支付额。然而，比特币无法模拟矿池的共识机制的逻辑，而且我们必须找出一种更简单的办法，向比特币表示 share 支付额的共识，使得 coinbase 输出无法以其它方式花费，只能以矿池的共识决定的方式花费。</p><p>可能最直接的授权 share 支付和签名 coinbase 输出的办法就是使用一个大规模的门限多签名机制。签名者的集合包括任何运行着矿池的共识机制、可以获得所有数据、看得到共识机制的链顶端的参与者。我们假设在弱区块的元数据中，参与者们会包含一个公钥，是他们用来合作式签名支付授权的公钥。</p><p>最符合逻辑的授权 coinbase 花费的签名者集合是成功挖出比特币区块的矿工的集合。我们希望避免让单个矿工可以单方面控制一个 coinbase、有能力偷走资金而不给其他矿工支付。因此，签名者至少要有 4 个人，这是使用拜占庭共识文献的 $(3f + 1)$ 规则实现的。这意味着，在矿池的启动阶段，头 4 个区块的收益必须直接、立即支付给矿工，因为他们还不足以签名一个多签名输出，而且我们甚至不知道他们的公钥，也无法构造一个比特币（P2TR、P2SH，等等）输出地址和脚本公钥。</p><p>在挖出前面 4 个区块之后，我们假设曾经挖出过区块的 66% + 1 个矿工比如签名 coinbase 输出，才能给 UHPO 集支付。</p><p>这可能是在去中心化矿池的开发中最大的未解问题 —— 如何协调这么多的矿工。如果我们假设每个难度周期都会支付一次收益，这就是 2016 个区块，最多会有 1345 个签名者必须合作以形成一个门限多签名构造。这是非常大的数字，基本上远远超过了可用的签名算法，比如 <a target=_blank rel=noopener href=https://eprint.iacr.org/2020/852>FROST</a>、<a target=_blank rel=noopener href=https://eprint.iacr.org/2022/550>ROAST</a>、<a target=_blank rel=noopener href=https://eprint.iacr.org/2017/552>MP-ECDSA</a> 以及 <a target=_blank rel=noopener href=https://eprint.iacr.org/2022/374>Lindell 门限 Schnorr</a> 算法的能力。</p><p>下面我们会讨论 Schnorr 门限签名算法的更多细节，但这可能不是唯一的先承诺然后授权 coinbase 交易给 UHPO 集支付的方法。我们鼓励读者寻找其它的解决方案。我们可以发现，所有签名算法的一个非常大的缺点是它们无法容忍故障。</p><h2 id=Schnorr-门限签名><a href=#Schnorr-门限签名 class=headerlink title="Schnorr 门限签名"></a>Schnorr 门限签名</h2><p>我们阅读了大量关于 Schnorr 门限签名算法的文献。</p><p>它们基本上都需要一个分布式密钥生成（DKG）阶段，使用 <a target=_blank rel=noopener href=https://link.springer.com/chapter/10.1007/3-540-46766-1_9>Pedersen’s DKG</a> 的一个标准，常常声称搭配 Feldman 提出的多项式承诺可以实现一种 “可验证的私钥分割（<a target=_blank rel=noopener href=https://ieeexplore.ieee.org/document/4568297>Verifiable Secret Sharing</a>, VSS）”。许多论文都提出了这种想法的变体，每一种都针对性优化通信的轮次、对通信环境的假设（例如是否存在广播信道）以及安全性证据。</p><p>一个门限签名构造的每一个参与者都在 DKG 阶段贡献熵，形式是创建一个私钥并将其公钥分享给所有其他参与者。这样一来，一个共有公钥就可以使用来自所有参与者的熵输入创建出来，从而没有任何人知道这个公钥背后的私钥，但在 DKG 阶段结束的时候，每个参与者都持有一个碎片私钥，只有 n 个碎片中的任意 t 个，才能用拉格朗日插值法创建完整的私钥。</p><p>此后，这些碎片私钥会用来计算签名。参与者们不会直接重构出玩完整的私钥（这会给完成重构的参与者单方面花费资金的权力），而是每个人都用自己的碎片私钥计算签名，然后对这些签名的集合运行拉格朗日插值法。</p><p>无论 ECDSA 签名还是 Schnorr，都要求所有签名成员在签名之前同意使用同一个 nonce 值 $k$ 来计算签名；这个值也会得到签名的承诺。一般来说，这要求运行额外的一轮 DKG 以计算 $k$ ，从而每个人都只拥有它的一个秘密碎片。</p><h2 id=交易挑选><a href=#交易挑选 class=headerlink title=交易挑选></a>交易挑选</h2><p><a target=_blank rel=noopener href=https://github.com/stratum-mining/sv2-spec>Stratum V2</a> 就致力于一种模式，让矿工可以自己构造区块、挑选交易。这是对 Stratum V1 的提升，因为 V1 是由（中心化的）矿池来挑选交易和构造区块的。</p><p>这里的风险在于，中心化的矿池要么可能在政府机构的授意下审查有效的交易，要么可能出于协议外的支付、为某些交易提高优先级，都会牺牲整个系统的 “抗审查” 特性。</p><p>在 “弱区块” 一节，我们没有指明如何挑选交易。这是一个可以分析的问题，而在去中心化矿池中，我们也假设单体矿工可以构造区块，而且矿池不会对参与者矿工挖出的区块的内容有进一步的限制。实际上，对于不满足比特币难度门槛的弱区块，为了 share 的更快验证，最好完全省去交易集。这产生了一个问题：矿工可以构造带有无效交易的区块。但这很容易发现（一旦这样做的矿工挖出一个区块），然后 TA 的 shares 就会作废。</p><p>一种同时使用一个去中心化矿池和 Stratum V2 的交易选择机制应该很容易插入由去中心化矿池所要求的区块结构（如 “弱区块” 章节所述），只要 Stratum V2 不限制所需的 coinbase 交易和元数据结构。</p><p>我们的想法是，单纯允许矿工进行交易选择是不够的，因为中心化矿池可以很容易扣住支付，迫使矿工按照矿池指定的规则来选择交易。保留比特币的抗审查特性需要去中心化支付的完整解决方案。</p><h2 id=未解决的问题和未来的方向><a href=#未解决的问题和未来的方向 class=headerlink title=未解决的问题和未来的方向></a>未解决的问题和未来的方向</h2><p>这里最大的未解问题就是支付授权。虽然 <a target=_blank rel=noopener href=https://eprint.iacr.org/2022/550>ROAST</a> 这样的开箱即用的算法已经有了，但它需要固定签名者集合，而且无法容忍在 nonce 生成和签名任一环节中的错误（当然也无法容忍两者环节都出错）。必须选出阈值数量的参与者，而且在密钥生成和签名阶段必须 <em>全都</em> 保持在线。任意一个参与者出错，就必须在已有的签名者中选出一个子集，然后重复整个流程。确实有一种方法（<a target=_blank rel=noopener href=https://link.springer.com/chapter/10.1007/978-3-031-08896-4_4>由 Joshi 等人提出</a>），可以让最终的签名聚合成为异步的（假定 nonce 生成已经成功），但启动阶段依旧无法容忍错误。</p><p>ECDSA 和 Schnorr 签名都需要 nonce 值，这是一个巨大的缺点，因为它需要额外的一轮密钥生成，要让每一个人都在线，而 BLS 签名这样的系统就不需要。</p><p>在实践中，如果没有新的算法出现、仅是由现有的 Schnorr 门限签名（需要 DKG 和私钥分割）的话，就必须在签名者数量上取得一个平衡：签名者太多，支付就可能无法在合理时间内完成；签名者太少，系统又不安全，coinbase 可能会被一小群签名者偷走。</p><p>一种可以考虑的方法是对签名者集合进行次级采样，并有时候从子集中聚合签名。这样一来，签名将拥有不同的 nonce，因而无法直接聚合，但这跟在一笔交易或者一个区块内聚合不同签名是同一个问题，而 “<a target=_blank rel=noopener href=https://github.com/ElementsProject/cross-input-aggregation>跨输入的密钥聚合（CISA）</a>” 这样的技术也许可以用在这里，而且也许在这个方向上说明了为之安排一次软分叉是值得的。</p><h2 id=限制条款><a href=#限制条款 class=headerlink title=限制条款></a>限制条款</h2><p>你可能会想到，UHPO 集交易可以转化成一种树结构，而 “限制条款（covenants）”可以在后续交易中强制保持这样的树结构。这是人们在限制条款相关的软分叉提议中人们常常提到的事，在这种结构中，一方可以取出自己的资金而不会强迫他人也在同时取款。</p><p>因为一个去中心化的矿池是一个在线的系统，似乎运用交互式方法、为一次取款发起一笔新的交易更为合理，而直接广播树的一部分则不那么合理。如果树的一部分被广播出去了，那必须让每一个矿工知晓，并更新 share 支付记录。</p><p>我们的看法是，要让整个 UHPO 集交易广播的唯一理由就是矿池出故障或者宕机了，不然就只是增加链上的数据负担，没有任何好处。</p><h2 id=子矿池><a href=#子矿池 class=headerlink title=子矿池></a>子矿池</h2><p>因为一个共识系统达成共识的速度不可能比全局的时延更快，所以 share 体积上的提升最多就是 1000 倍。为了支持更小的矿工，我们可以考虑 “链接” 去中心化矿池以创建一个子矿池。</p><p>子矿池的 UHPO 集交易的输入不是 coinbase UTXO，而是父矿池的 UHPO 集中的一条 UHPO。因为子矿池跟父矿池使用独立的共识机制，这两个去中心化矿池可以允许 1000000 分之一规模的小矿工参与。理论上，一个矿池可以动态地创建和关闭子矿池、在子矿池之间移动矿工。主矿池依赖于自己可以观察到的哈希率，让所有矿工趋向一个恒定的方差。</p><p>（完）</p></article></div></div></main><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.8/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script>MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],processEscapes:!0,skipTags:["script","noscript","style","textarea","pre","code"]}}),MathJax.Hub.Queue(function(){for(var a=MathJax.Hub.getAllJax(),e=0;e<a.length;e+=1)a[e].SourceElement().parentNode.className+=" has-jax"})</script><script src="/js/post.js?v=1682773100887"></script><script src="/js/highlight.min.js?v=1682773100887"></script><script>var containerEl=document.querySelector(".post-container"),postFontSize=localStorage.getItem("post-font-size")||"16",inputEl=document.querySelector("#size-change-input"),inputEl2=document.querySelector("#size-change-input2");inputEl.value=postFontSize,inputEl2.value=postFontSize,containerEl.style.fontSize=postFontSize+"px",$(function(){function e(t){$(".post-container").css("font-size",t+"px"),localStorage.setItem("post-font-size",t),$("#size-change-input").val(t),$("#size-change-input2").val(t)}$("#size-change-input").on("input propertychange",function(t){e(t.target.value)}),$("#size-change-input2").on("input propertychange",function(t){e(t.target.value)})})</script><script>hljs.initHighlightingOnLoad()</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class=sns-container><a title=nostr target=_blank rel="noopener nofollow" href=https://iris.to/npub1g2qs0ca5kpwlrcfug2em4jelmh65clk3yccwjxrs6hvdpd9qj80q022j4m>Nostr</a><a title=rss target=_blank rel="noopener nofollow" href=/atom.xml>rss</a><a title=telegram target=_blank rel="noopener nofollow" href=//t.me/btcstudyorg>Telegram</a></section></footer><script async src="/js/buttons.js?v=1682773100887"></script><script async src="/js/index.js?v=1682773100887"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JVCJ9XXG1Z")</script><script>var _hmt=_hmt||[];(()=>{var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306",e.async=!0,e.defer=!0,document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)})()</script></body></html>