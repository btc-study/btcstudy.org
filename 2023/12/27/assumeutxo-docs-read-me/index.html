<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><title>AssumeUTXO 项目简介</title><meta name=keywords content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name=description content=比特币思想的中文集结地><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1"><link rel=icon href=/favicon.ico><link rel=stylesheet href="/style/common/bulma.css?v=1682773100887"><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href="/style/common/iconfont.css?v=1682773100887"><link rel=stylesheet href="/style/base.css?v=1682773100887"><link rel=stylesheet href="/style/common/helper.css?v=1682773100887"><link rel=stylesheet href="/style/themes/animation.css?v=1682773100887"><script>function ready(){var e=document.querySelector(".body-container"),t=localStorage.getItem("theme")||"light";["light","dark"].includes(t)||(t="light",localStorage.setItem("theme","light")),e.classList.remove("appearance-auto"),e.classList.add("appearance-"+t),quickInitialTheme()}function quickInitialTheme(){var e=localStorage.getItem("theme")||"light",t=document.querySelector(".logo-light"),o=document.querySelector(".logo-dark"),d=document.querySelector("#mobile-header-logo > .logo-light"),l=document.querySelector("#mobile-header-logo > .logo-dark"),a=document.getElementById("theme-btn"),i=document.querySelector(".slide-theme-light"),c=document.querySelector(".slide-theme-dark");document.body.classList.add(e),("dark"===e?(t.classList.add("hidden"),o.classList.remove("hidden"),d.classList.add("hidden"),l.classList.remove("hidden"),a.classList.remove("icon-icon_dark"),a.classList.add("icon-icon_light"),i):c).classList.remove("hidden")}document.addEventListener("DOMContentLoaded",ready)</script><script src="/js/common.js?v=1682773100887"></script><script src=/js/libs/zepto.min.js></script><link rel=stylesheet href="/style/post.css?v=1682773100887"><link rel=stylesheet href="/style/themes/highlight.css?v=1682773100887"><meta name=generator content="Hexo 6.3.0"><link rel=alternate href=/atom.xml title="BTC Study" type=application/atom+xml></head><body class="is-flex is-flex-direction-column" onload=initialTheme()><div class=clip></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id=header><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href=/ ><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id=header-menu><a class="is-inline-block header-activity mr-4" href=/ >首页</a><a class="is-inline-block mr-4" href=/archives>全站目录</a><a class="is-inline-block mr-4" href=/tags>标签</a><a class="is-inline-block mr-4" href=/maps>地图</a><a class="is-inline-block mr-4" href=/mempool>mempool</a><a class="is-inline-block mr-4" target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input type=range min=12 max=32 step=2></div></div></div><i class="iconfont icon-icon_dark mr-1" id=theme-btn></i><div class=search-wrap><input class=pl-3 id=search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search" id=search-input-btn></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopic><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">AssumeUTXO 项目简介</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn2></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input2 type=range min=12 max=32 step=2></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id=mobile-header><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id=mobile-header-logo><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopicMobile><p class=is-full-height>AssumeUTXO 项目简介</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class=mobile-search-wrap><div class=search-input><input class=pl-3 id=mobile-search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class=mobile-search-input-btn>搜 索</button></div></div></header><div class=mobile-slide-menu><a class=header-activity href=/ >首页</a><a href=/archives>全站目录</a><a href=/tags>标签</a><a href=/maps>地图</a><a href=/mempool>mempool</a><a target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class=slide-menu-fontsize><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1682773100887"></script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%91%98%E8%A6%81><span class=toc-text>摘要</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87><span class=toc-text>设计目标</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%AE%A1%E5%88%92><span class=toc-text>计划</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86><span class=toc-text>基本原理</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%BB%80%E4%B9%88%E6%98%AF-UTXO-%E5%BF%AB%E7%85%A7%EF%BC%9F><span class=toc-text>什么是 UTXO 快照？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%BB%80%E4%B9%88%E6%98%AF-assumeutxo%EF%BC%9F><span class=toc-text>什么是 assumeutxo？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E9%82%A3%E4%B9%88%EF%BC%8C%E5%AE%83%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%E5%91%A2%EF%BC%9F><span class=toc-text>那么，它有什么用呢？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%BF%AB%E7%85%A7%E5%8A%A0%E8%BD%BD%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%9F><span class=toc-text>快照加载是怎么实现的？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%AE%89%E5%85%A8%E6%80%A7><span class=toc-text>安全性</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%BC%95%E5%85%A5-assumeutxo-%E6%98%AF%E5%90%A6%E6%94%B9%E5%8F%98%E4%BA%86%E5%AE%89%E5%85%A8%E6%A8%A1%E5%9E%8B%EF%BC%9F><span class=toc-text>引入 assumeutxo 是否改变了安全模型？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%BD%86%E6%98%AF%EF%BC%8C%E4%BB%A3%E7%A0%81%E4%B8%AD%E7%9A%84%E8%BF%99%E4%B8%AA%E5%93%88%E5%B8%8C%E5%80%BC%E5%81%87%E8%AE%BE%E4%BA%86%E6%9F%90%E4%B8%80%E4%B8%AA%E9%93%BE%E7%8A%B6%E6%80%81%E7%9A%84%E6%9C%89%E6%95%88%E6%80%A7%EF%BC%8C%E5%B2%82%E4%B8%8D%E5%B0%B1%E5%83%8F%E5%BC%80%E5%8F%91%E8%80%85%E5%9C%A8%E5%86%B3%E5%AE%9A-%E2%80%9C%E6%AD%A3%E7%A1%AE%E7%9A%84%E9%93%BE%E2%80%9D-%E6%98%AF%E5%93%AA%E4%B8%80%E6%9D%A1%EF%BC%9F><span class=toc-text>但是，代码中的这个哈希值假设了某一个链状态的有效性，岂不就像开发者在决定 “正确的链” 是哪一条？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%A5%BD%E7%9A%84%EF%BC%8C%E9%82%A3%E4%B9%88%EF%BC%8C%E4%B9%9F%E8%AE%B8%E5%9C%A8%E7%90%86%E8%AE%BA%E4%B8%8A%E5%AD%98%E5%9C%A8%E6%9F%90%E7%A7%8D%E7%AD%89%E4%BB%B7%EF%BC%8C%E4%BD%86-assumeutxo%EF%BC%88%E4%B8%8E-assumevalid-%E7%9B%B8%E6%AF%94%EF%BC%89%E6%9C%89%E4%BB%BB%E4%BD%95-%E5%AE%9E%E9%99%85%E4%B8%8A-%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7%E5%B7%AE%E5%BC%82%E5%90%97%EF%BC%9F><span class=toc-text>好的，那么，也许在理论上存在某种等价，但 assumeutxo（与 assumevalid 相比）有任何 实际上 的安全性差异吗？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%BF%99%E5%90%AC%E8%B5%B7%E6%9D%A5%E9%9D%9E%E5%B8%B8%E7%B3%9F%E7%B3%95-%E2%80%94%E2%80%94-%E6%89%80%E4%BB%A5%E6%94%BB%E5%87%BB%E8%80%85%E6%89%80%E9%9C%80%E7%9A%84%E4%B8%8D%E8%BF%87%E6%98%AF%E8%AE%A9%E4%B8%80%E4%B8%AA%E7%94%A8%E6%88%B7%E6%8E%A5%E5%8F%97%E4%B8%80%E4%B8%AA%E5%9D%8F%E7%9A%84-assumeutxo-%E6%95%B0%E5%80%BC%EF%BC%8C%E7%84%B6%E5%90%8E%E7%BB%99-TA-%E6%8F%90%E4%BE%9B%E4%B8%80%E4%B8%AA%E6%B1%A1%E6%9F%93%E8%BF%87%E7%9A%84%E5%BF%AB%E7%85%A7%E5%B0%B1%E5%A5%BD%E4%BA%86%EF%BC%9F><span class=toc-text>这听起来非常糟糕 —— 所以攻击者所需的不过是让一个用户接受一个坏的 assumeutxo 数值，然后给 TA 提供一个污染过的快照就好了？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%90%AC%E8%B5%B7%E6%9D%A5%E8%BF%99%E6%98%AF%E8%A6%81%E4%B8%BB%E5%BC%A0%E5%9C%A8%E6%9F%90%E4%B8%AA%E5%9C%B0%E6%96%B9%EF%BC%88%E6%AF%94%E5%A6%82%E8%AF%B4%E5%8C%BA%E5%9D%97%E5%A4%B4%EF%BC%89%E5%8C%85%E5%90%AB%E4%B8%80%E4%B8%AA%E5%AF%B9-assumeutxo-%E6%95%B0%E5%80%BC%E7%9A%84%E6%89%BF%E8%AF%BA%EF%BC%8C%E4%BB%8E%E8%80%8C%E8%AE%A9%E5%85%B1%E8%AF%86%E5%8F%AF%E4%BB%A5%E4%BF%9D%E8%AF%81%E5%AE%83%E3%80%82%E6%88%91%E4%BB%AC%E5%BA%94%E8%AF%A5%E8%BF%99%E4%B9%88%E5%81%9A%E5%90%97%EF%BC%9F><span class=toc-text>听起来这是要主张在某个地方（比如说区块头）包含一个对 assumeutxo 数值的承诺，从而让共识可以保证它。我们应该这么做吗？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AF%B9%E5%AF%BC%E5%85%A5%E7%9A%84%E5%BF%AB%E7%85%A7%EF%BC%8C%E9%99%A4%E4%BA%86%E6%AF%94%E8%BE%83%E5%AE%83%E7%9A%84%E5%93%88%E5%B8%8C%E5%80%BC%E4%B8%8E-assumeutxo-%E6%95%B0%E5%80%BC%EF%BC%8C%E6%88%91%E4%BB%AC%E8%BF%98%E4%BC%9A%E8%BF%90%E8%A1%8C%E5%88%AB%E7%9A%84%E9%AA%8C%E8%AF%81%E5%90%97%EF%BC%9F><span class=toc-text>对导入的快照，除了比较它的哈希值与 assumeutxo 数值，我们还会运行别的验证吗？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E8%B5%84%E6%BA%90%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5><span class=toc-text>资源使用情况</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%88%91%E4%BB%AC%E7%94%A8%E5%9C%A8%E5%90%8E%E5%8F%B0-IBD-%E4%B8%AD%E7%9A%84%E9%A2%9D%E5%A4%96-chainstate%EF%BC%8C%E4%B8%8D%E4%BC%9A%E5%8D%A0%E7%94%A8%E9%A2%9D%E5%A4%96%E7%9A%84%E7%A1%AC%E7%9B%98%E7%A9%BA%E9%97%B4%E5%92%8C%E5%86%85%E5%AD%98%E5%90%97%EF%BC%88%E5%AE%83%E4%BC%9A%E4%BD%BF%E7%94%A8%E5%8D%95%E7%8B%AC%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E7%BC%93%E5%AD%98%EF%BC%89%EF%BC%9F><span class=toc-text>我们用在后台 IBD 中的额外 chainstate，不会占用额外的硬盘空间和内存吗（它会使用单独的数据库和缓存）？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%88%91%E4%BB%AC%E8%BF%98%E5%BA%94%E8%AF%A5%E8%BF%90%E8%A1%8C%E5%90%8E%E5%8F%B0%E9%AA%8C%E8%AF%81%E5%90%8C%E6%AD%A5%E5%90%97%EF%BC%9F%E5%A6%82%E6%9E%9C%E6%88%91%E4%BB%AC%E6%8E%A5%E5%8F%97%E4%BA%86-assumeutxo-%E7%9A%84%E5%AE%89%E7%84%B6%E6%A8%A1%E5%BC%8F%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%98%E8%A6%81%E6%89%A7%E8%A1%8C%E5%90%8E%E5%8F%B0-IBD%EF%BC%9FIBD-%E4%B8%8D%E6%98%AF%E4%B8%80%E4%B8%AA%E9%95%BF%E6%9C%9F%E7%9A%84%E6%89%A9%E5%B1%95%E9%97%AE%E9%A2%98%E5%90%97%EF%BC%9F%E9%81%93%E7%90%86%E5%9C%A8%E5%93%AA%EF%BC%9F><span class=toc-text>我们还应该运行后台验证同步吗？如果我们接受了 assumeutxo 的安然模式，为什么还要执行后台 IBD？IBD 不是一个长期的扩展问题吗？道理在哪？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%94%A8%E6%88%B7%E5%92%8C%E5%AE%A1%E6%A0%B8%E8%80%85%E8%AF%A5%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E5%9C%B0%E9%AA%8C%E8%AF%81%E7%BB%99%E5%AE%9A%E4%B8%80%E4%B8%AA-UTXO-%E9%9B%86%E7%9A%84%E5%93%88%E5%B8%8C%E5%80%BC%EF%BC%9F><span class=toc-text>用户和审核者该如何高效地验证给定一个 UTXO 集的哈希值？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%BF%AB%E7%85%A7%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E5%88%86%E5%8F%91><span class=toc-text>快照的存储与分发</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%BF%AB%E7%85%A7%E5%A6%82%E4%BD%95%E5%88%86%E5%8F%91%EF%BC%9F><span class=toc-text>快照如何分发？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%BF%99%E5%90%AC%E8%B5%B7%E6%9D%A5%E5%BE%88%E6%A3%92%EF%BC%8C%E4%B9%9F%E7%AE%80%E5%8D%95%EF%BC%8C%E4%BD%86%E6%88%91%E6%89%93%E8%B5%8C%E6%9F%90%E4%B8%AA%E5%9C%B0%E6%96%B9%E8%BF%98%E6%9C%89%E9%97%AE%E9%A2%98%E3%80%82><span class=toc-text>这听起来很棒，也简单，但我打赌某个地方还有问题。</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%B8%80%E4%B8%AA%E8%8A%82%E7%82%B9%E8%A6%81%E5%AD%98%E5%82%A8%E5%A4%9A%E5%B0%91%E5%A5%97%E5%BF%AB%E7%85%A7%EF%BC%9F><span class=toc-text>一个节点要存储多少套快照？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AF%B9%E4%BA%8E%E5%88%9A%E5%88%9A%E5%8F%91%E5%B8%83%E7%9A%84%E6%96%B0%E7%9A%84-assumeutxo-%E5%80%BC%EF%BC%8C%E7%9B%B8%E5%BA%94%E7%9A%84%E5%BF%AB%E7%85%A7%E5%A6%82%E4%BD%95%E8%8E%B7%E5%BE%97%EF%BC%9F><span class=toc-text>对于刚刚发布的新的 assumeutxo 值，相应的快照如何获得？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%85%B6%E5%AE%83%E6%96%B9%E6%B3%95><span class=toc-text>其它方法</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%BD%BF%E7%94%A8-UTXO-%E5%BF%AB%E7%85%A7%E5%B0%B1%E5%BF%85%E9%A1%BB%E5%AD%98%E5%82%A8%E5%92%8C%E5%8F%91%E9%80%81%E8%BF%99%E4%BA%9B%E5%BF%AB%E7%85%A7%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E8%AE%A9-Bitcoin-%E7%9B%B4%E6%8E%A5%E4%BB%A5-SPV-%E6%A8%A1%E5%BC%8F%EF%BC%88%E4%BE%8B%E5%A6%82%E4%BD%BF%E7%94%A8-BIP-157%EF%BC%89%EF%BC%8C%E7%84%B6%E5%90%8E%E5%9C%A8%E5%90%8E%E5%8F%B0-IBD-%E5%91%A2%EF%BC%9F><span class=toc-text>使用 UTXO 快照就必须存储和发送这些快照，为什么不让 Bitcoin 直接以 SPV 模式（例如使用 BIP 157），然后在后台 IBD 呢？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E9%82%A3%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E4%BD%BF%E7%94%A8%E4%B8%80%E4%BA%9B%E4%B8%8D%E8%A6%81%E6%B1%82%E6%94%B9%E5%8F%98-Bitcoin-Core-%E4%BB%A3%E7%A0%81%E7%9A%84%E6%96%B9%E5%BC%8F%E5%91%A2%EF%BC%9F%E6%AF%94%E5%A6%82%E8%AF%B4%EF%BC%8C%E8%AE%A9%E6%9F%90%E4%BA%BA%E6%8F%90%E4%BE%9B-PGP-%E7%AD%BE%E5%90%8D%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86%EF%BC%8C%E7%84%B6%E5%90%8E%E4%BD%A0%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%EF%BC%88%E6%AF%94%E5%A6%82%E8%AF%B4%EF%BC%89btcpayserver-%E7%9A%84-FastSync-%E6%9D%A5%E4%B8%8B%E8%BD%BD%EF%BC%9F><span class=toc-text>那为什么不使用一些不要求改变 Bitcoin Core 代码的方式呢？比如说，让某人提供 PGP 签名的数据集，然后你可以通过（比如说）btcpayserver 的 FastSync 来下载？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E8%AE%A1%E5%88%92-1><span class=toc-text>计划</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%A5%BD%E7%9A%84%EF%BC%8Cassumeutxo-%E5%90%AC%E8%B5%B7%E6%9D%A5%E5%BE%88%E6%A3%92%E3%80%82%E6%80%8E%E4%B9%88%E9%83%A8%E7%BD%B2%E5%91%A2%EF%BC%9F><span class=toc-text>好的，assumeutxo 听起来很棒。怎么部署呢？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%A6%82%E6%9E%9C%E6%88%91%E6%83%B3%E5%B8%AE%E5%BF%99%EF%BC%8C%E6%8E%A5%E4%B8%8B%E6%9D%A5%E6%88%91%E5%BA%94%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88%EF%BC%9F><span class=toc-text>如果我想帮忙，接下来我应该做什么？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#assumeutxo-%E5%A6%82%E4%BD%95%E8%B7%9F%E7%B4%AF%E5%8A%A0%E5%99%A8%E3%80%81UHS-%E4%BB%A5%E5%8F%8A-utreexo-%E4%B8%80%E8%B5%B7%E5%B7%A5%E4%BD%9C%EF%BC%88%E5%A6%82%E6%9E%9C%E5%AE%83%E4%BB%AC%E4%BC%9A%E5%88%B0%E6%9D%A5%E7%9A%84%E8%AF%9D%EF%BC%89%EF%BC%9F><span class=toc-text>assumeutxo 如何跟累加器、UHS 以及 utreexo 一起工作（如果它们会到来的话）？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%AE%9E%E7%8E%B0%E9%97%AE%E9%A2%98><span class=toc-text>实现问题</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%BA%94%E8%AF%A5%E5%A6%82%E4%BD%95%E5%9C%A8-%E5%81%87%E5%AE%9A%E6%9C%89%E6%95%88%E7%9A%84%E7%8A%B6%E6%80%81-%E5%92%8C-%E5%90%8E%E5%8F%B0%E7%8A%B6%E6%80%81-%E7%9A%84%E9%AA%8C%E8%AF%81%E4%B9%8B%E9%97%B4%E5%88%86%E9%85%8D%E5%86%85%E5%AD%98%EF%BC%88-dbcache%EF%BC%89%E5%91%A2%EF%BC%9F><span class=toc-text>应该如何在 假定有效的状态 和 后台状态 的验证之间分配内存（-dbcache）呢？</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%B8%BA%E4%BB%80%E4%B9%88%E7%94%A8%E9%80%9A%E8%BF%87-RPC-%E6%9D%A5%E5%8A%A0%E8%BD%BD%E5%BF%AB%E7%85%A7%EF%BC%9F%E4%B8%8D%E5%BA%94%E8%AF%A5%E6%98%AF%E4%B8%80%E6%9D%A1%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4%E5%90%97%EF%BC%9F><span class=toc-text>为什么用通过 RPC 来加载快照？不应该是一条启动命令吗？</span></a></li></ol></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id=postTitle>AssumeUTXO 项目简介</h1><div class=page-author><div class="is-flex is-flex-direction-row page-data mr-6"><img class=mr-1 src=/images/default_avatar.png alt=jamesob><div class=page-author-info><strong>jamesob</strong><time class=has-text-grey datetime=2023-12-27T09:37:49.000Z>2023-12-27</time></div></div><div class=is-flex><a href=/tags/AssumeUTXO><i class="page-tag mr-1 px-1">AssumeUTXO</i></a></div></div><article class="mt-4 post-content"><blockquote><p><em>作者：jamesob</em></p><p><em>来源：<a target=_blank rel=noopener href=https://github.com/jamesob/assumeutxo-docs/tree/2019-04-proposal/proposal>https://github.com/jamesob/assumeutxo-docs/tree/2019-04-proposal/proposal</a></em></p><p><em>本文档撰写于 2019 年 4 月。</em></p></blockquote><blockquote><p><a target=_blank rel=noopener href=https://github.com/bitcoin/bitcoin/issues/27596>Bitcoin Core #27596</a> 完成了 <a target=_blank rel=noopener href=https://bitcoinops.org/en/topics/assumeutxo/ >assumeutxo</a> 项目的第一阶段，包括了同时使用一个假定有效（assumedvalid）的链状态快照和在后台进行完整验证同步所必需的所有余下变更。它通过 RPC（<code>loadtxoutset</code>）使 UTXO 快照可加载，并在链参数（chainparams）中添加了 <code>assumeutxo</code> 参数。</p><p>尽管该功能集在<a target=_blank rel=noopener href=https://github.com/bitcoin/bitcoin/issues/28553>激活</a>前在主链上都不可用，但这个合并标志着到达了多年努力的顶点。该项目<a target=_blank rel=noopener href='https://btctranscripts.com/bitcoin-core-dev-tech/2018-03/2018-03-07-priorities/#:~:text="Assume UTXO"'>在 2018 年提出</a>并<a target=_blank rel=noopener href=https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2019-April/016825.html>在 2019 年正式确定</a>，将显著改善首次接入网络的新的全节点的用户体验。后续合并包括 <a target=_blank rel=noopener href=https://github.com/bitcoin/bitcoin/issues/28590>Bitcoin Core #28590</a>、<a target=_blank rel=noopener href=https://github.com/bitcoin/bitcoin/issues/28562>#28562</a>和<a target=_blank rel=noopener href=https://github.com/bitcoin/bitcoin/issues/28589>#28589</a>。</p><p>—— <a target=_blank rel=noopener href=https://bitcoinops.org/zh/newsletters/2023/10/11/#bitcoin-core-27596>Optech Newsletter #272</a></p></blockquote><h2 id=摘要><a href=#摘要 class=headerlink title=摘要></a>摘要</h2><p>本文为 <code>assumeutxo</code> 提议了一种实现和部署计划。AssumeUTXO 使用序列化的 UTXO 集，以持续地减少冷启动一个可用的比特币节点所需的时间，同时保证安全性上的变更是可以接受的。</p><h3 id=设计目标><a href=#设计目标 class=headerlink title=设计目标></a>设计目标</h3><ol><li>为非业余的用户运行全验证节点提供一条现实的大道，</li><li>避免显著增加存储负担，并且</li><li>不在安全性上作出重大让步。</li></ol><h3 id=计划><a href=#计划 class=headerlink title=计划></a>计划</h3><p>这个特性可以分成两步（或者三步）来部署：</p><ol><li>可以创建 UTXO 快照（约 3.2 GB）并通过 RPC 来加载，以取代常规的初始化区块下载（IBD）流程。<ul><li>UTXO 快照将通过 bitcoind 以外的方法来获得。（译者注：“bitcoind” 即 “Bitcoin Core” 程序的后台进程。）</li><li>一个硬编码的 <code>assumeutxo</code> 哈希值将确定哪个快照被认为是有效的。</li><li>快照的异步验证将在加载好之后，在后台运行。这个阶段包含了绝大部分（甚至是全部）需要对现有的验证代码作的变更。（见<a target=_blank rel=noopener href=https://github.com/bitcoin/bitcoin/pull/15606>这个 PR</a>）</li></ul></li><li>快照可以通过 bitcoid 来生成、存储和传输。<ul><li>为了缓解关于 DoS 和存储消耗上的顾虑，节点将存储跨越三个快照（一个当前快照，两个历史快照）的 FEC（前向纠错编码）分割的数据块的子集，预计存储负担约为 1.2 GB。</li><li>冷启动的节点（在启用 assumeutxo 的时候）会从多个对等节点处获得这些数据块，重新组装成一个快照，然后加载。</li><li>硬编码的 assumeutxo 数值将从一个内容哈希值转变成一个默克尔根值，该根值承诺一个特定快照的数据块集合。</li><li>我们可能会考虑为本地节点存储添加一个滚动的 UTXO 集哈希值，从而更快地访问预期的 UTXO 集的哈希值，而且可能可能会使用这个数值来形成 assumeutxo 承诺。</li></ul></li><li>（在遥远的未来）可以考虑在共识中添加给定高度的 UTXO 集哈希值的承诺。这个快照以及后台的验证程序可能会被复用，在我们迁移到对 UTXO 集的更加紧凑的表示形式（比如 <a target=_blank rel=noopener href="https://www.youtube.com/watch?v=edRun-6ubCc">utreexo</a>、<a target=_blank rel=noopener href=https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-May/015967.html>UHS</a> 或者<a target=_blank rel=noopener href=https://eprint.iacr.org/2018/1188>累加器</a>）的时候。</li></ol><p>如果有什么部分难以理解，请继续阅读以了解更多的细节。</p><p>现在，你可以帮助审核这个提议以及代码草稿。</p><p><strong>资源</strong></p><ul><li>Github issue：<a target=_blank rel=noopener href=https://github.com/bitcoin/bitcoin/issues/15605>bitcoin&#x2F;bitcoin#15605</a></li><li>阶段 1 的实现草稿：<a target=_blank rel=noopener href=https://github.com/bitcoin/bitcoin/pull/15606>bitcoin&#x2F;bitcoin#15606</a></li></ul><p><strong>已经熟悉这些想法了？</strong></p><p>如果你一直在跟踪相关的讨论、已经理解了 <code>assumeutxo</code> 的基本原理，你可以直接跳到下文的 “安全性” 章节。</p><p><strong>致谢</strong></p><p>我希望对帮助这个提议的人们表示感谢，虽然他们不应该为我在这份文档以及相关的代码中可能犯的任何愚蠢的错误负责。他们是：</p><p>Suhas Daftuar、Pieter Wuille、Greg Maxwell、Matt Corallo、Alex Morcos、Dave Harding、AJ Towns、Sjors Provoost、Marco Falke、Russ Yanofsky，以及 Jim Posen。</p><h2 id=基本原理><a href=#基本原理 class=headerlink title=基本原理></a>基本原理</h2><h3 id=什么是-UTXO-快照？><a href=#什么是-UTXO-快照？ class=headerlink title="什么是 UTXO 快照？"></a>什么是 UTXO 快照？</h3><p>“UTXO 快照” 是在区块链的某个特定高度上的 “未花费的交易输出（UTXO）” 集合的一个序列化版本。这些序列化的 UTXO 会被打包并带上一些元数据，例如：</p><ul><li>本快照所包含的 UTXO 的总数量</li><li>本快照所浓缩的最新区块的区块头（其 “基础”），</li></ul><p>等等。你可以在 <a target=_blank rel=noopener href=https://github.com/jamesob/bitcoin/blob/utxo-dumpload-compressed/src/validation.h#L827-L881>assumeutxo pull request</a> 中看到完整的数据结构（形式可能会变化）。</p><h3 id=什么是-assumeutxo？><a href=#什么是-assumeutxo？ class=headerlink title="什么是 assumeutxo？"></a>什么是 <code>assumeutxo</code>？</h3><p>它是嵌入软代码中的一片数据，承诺了一个序列化的 UTXO 集的哈希值，这个 UTXO 集被认为是在特定区块高度下形成的真实集合。这个承诺的最终形式还有待讨论，因为生成它要耗费大量的计算，而且它的结构也会影响我们如何存储序列化 UTXO 集合以及在对等节点间传输它。但当前来看，它就是使用现有的 <a target=_blank rel=noopener href=https://github.com/bitcoin/bitcoin/blob/91a25d1e711bfc0617027eee18b9777ff368d6b9/src/rpc/blockchain.cpp#L944-L981><code>GetUTXOStats()</code> 功能</a>所生成的 UTXO 集内容的一个基于 SHA-256 的哈希值。</p><h3 id=那么，它有什么用呢？><a href=#那么，它有什么用呢？ class=headerlink title=那么，它有什么用呢？></a>那么，它有什么用呢？</h3><p>我们可以使用 UTXO 快照以及 <code>assumeutxo</code> 承诺，从而极大地减少冷启动一个可用的比特币节点所需的时间，并且其安全模式是可以接受的。</p><p>当前，初始化区块下载程序所需花费的时间会随着区块链历史的增加而线性增加。不管在哪里，一个新安装的 bitcoind 总要花费至少 4 个小时甚至几天来走完流程，具体时间取决于你的硬件和网络带宽。这个过程会劝退想要运行全节点的用户，促使他们转向安全模式更差的客户端。</p><h3 id=快照加载是怎么实现的？><a href=#快照加载是怎么实现的？ class=headerlink title=快照加载是怎么实现的？></a>快照加载是怎么实现的？</h3><p>在加载一个快照的时候，这个快照会解序列化、变成一个完整的链状态（chainsate）数据结构，该数据结构包含了对区块链（<code>chainActive</code>）的一种表示以及 UTXO 集（既存放在硬盘中，也缓存在内存中）。加载快照所得的 chainstate 会跟加载快照之前的原 chainstate 同时存在。在接受一个被加载的快照之前，必须先从对等节点网络中检索得到一条区块头链，并且该区块头链应该包含该快照所压缩的最新区块（其 “基础”）的区块哈希值。</p><p>加载好快照之后，快照 chainstate 会执行初始化区块下载，从快照状态开始，一直下载的网络的链顶端。然后，系统将允许操作，就像 IBD 已经完成了一样，并且这个假定有效的快照 chainstate 会被视为 <code>chainActive</code>&#x2F;<code>pcoinsTip</code>&#x2F;等等。</p><p>在快照 chainstate 追上网络的链顶端之后，原来的 chainstate 会在后台恢复因为加载快照而中断的区块初始化下载。这个 “后台验证” 流程跟激活的（快照）chainstate 是异步的，所以系统可以如常服务（比如，运行钱包操作）。这个后台验证的目的是检索所有的区块文件并完全验证整条链，直到快照的起点（即其 “基础” 高度）。</p><p>在后台验证完成之前，我们会拒绝加载任何 <code>bestblock</code> 标记低于快照基础高度的钱包，因为我们没有执行重新扫描所需的区块数据。</p><p>一旦后台验证完成，我们就可以丢弃原先的 chainstate，因为快照 chainstate 已经被证明是完全有效的了。如果因为某些原因，后台验证产生了一个 UTXO 集哈希值，跟快照所声称的不同，我们会给出明确的警告并使程序停止运行。</p><h2 id=安全性><a href=#安全性 class=headerlink title=安全性></a>安全性</h2><h3 id=引入-assumeutxo-是否改变了安全模型？><a href=#引入-assumeutxo-是否改变了安全模型？ class=headerlink title="引入 assumeutxo 是否改变了安全模型？"></a>引入 <code>assumeutxo</code> 是否改变了安全模型？</h3><p>如果我们讨论的是用户是否需要在辨别什么是 有效的&#x2F;无效的 比特币状态时信任某一些开发者（及其程度），那么：不，使用 assumeutxo 并不会在实质上改变现在比特币 “信任开发者” 的程度。</p><p>现在，比特币软件也带有硬编码的 assumevalid 数值。这个数值定义了，如果你在区块头链上看到了某个区块，那么该区块以前的区块的签名检查就可以全都跳过，作为一种性能优化措施。</p><blockquote><p>使用 “assumevalid” 模式，你假设平等审核你所用软件的人可以运行一个全节点、验证所有区块直至（包括）某一个区块。并不需要进一步信任（假设）平等审核你所用软件的人懂得这个软件的编程语言、懂得共识规则；实质上，可以说需要的信任更少了，因为 <em>没有人</em> 完全懂得 C++ 这样的复杂语言，而且 <em>没有人</em> 可能懂得公式规则的每一种可能的细微差异 —— 然而，几乎每个懂技术的人都可以使用 <code>-noassumevalid</code> 启动一个节点，并等待几个小时，然后检查 <code>bitcoin-cli getblock $assume_valid_hash</code> 所返回的 <code>&quot;confirmations(确认次数)&quot;</code> 字段不为 <code>-1</code>。</p><p><em>David Harding</em></p></blockquote><p>Assumeutxo 的想法也是类似的，而且会以一种更严格的方式来指定（不能通过 CLI 来指定）。硬编码的 assumeutxo 数值将以跟 assumevalid 数值完全相同的方式得到提议和审核（通过 pull request），而且会在提议和合并之间留出足够长的时间，从而让任何感兴趣的人可以自己重新生成相同的数值（即验证）。</p><h3 id=但是，代码中的这个哈希值假设了某一个链状态的有效性，岂不就像开发者在决定-“正确的链”-是哪一条？><a href=#但是，代码中的这个哈希值假设了某一个链状态的有效性，岂不就像开发者在决定-“正确的链”-是哪一条？ class=headerlink title="但是，代码中的这个哈希值假设了某一个链状态的有效性，岂不就像开发者在决定 “正确的链” 是哪一条？"></a>但是，代码中的这个哈希值假设了某一个链状态的有效性，岂不就像开发者在决定 “正确的链” 是哪一条？</h3><p>这个数值跟开发者所提议的其它任何代码变更没有区别；实际上，在另一个更加模糊的代码部分中偷藏某种实现了扭曲的有效性的反向逻辑，会容易得多，比如， <code>CCoinsViewDB</code> 可以修改成在某些特殊条件下总是承认一笔钱的存在性，或者网络也可以修改成仅跟特定的对等节点沟通。</p><p>assumevalid&#x2F;assumeutxo 数值的无遮掩特性，实际上让用户的参与更加直接，因为如何审核这种优化是显而易见的。</p><p>同样值得指出的是，存在 assumevalid&#x2F;utxo 数值并不阻止其它链被认为有效，它只是说 “软件以前验证过 <em>这一条链</em>”。</p><h3 id=好的，那么，也许在理论上存在某种等价，但-assumeutxo（与-assumevalid-相比）有任何-实际上-的安全性差异吗？><a href=#好的，那么，也许在理论上存在某种等价，但-assumeutxo（与-assumevalid-相比）有任何-实际上-的安全性差异吗？ class=headerlink title="好的，那么，也许在理论上存在某种等价，但 assumeutxo（与 assumevalid 相比）有任何 实际上 的安全性差异吗？"></a>好的，那么，也许在理论上存在某种等价，但 assumeutxo（与 assumevalid 相比）有任何 <em>实际上</em> 的安全性差异吗？</h3><p>是的，两者有一个实践上的安全性差异。当前，如果我想要欺骗别人，让他们认为我拥有某一笔钱（而诚实的网络会看穿我），我需要这样所：</p><ul><li>让他们启动带有坏的 <code>-assumevalid=</code> 参数的 bitcoind，</li><li>将他们的节点跟诚实的网络隔开，从而阻止他们看到具备最多工作量证明的区块头链，然后</li><li>构造一条具备有效 PoW 的链（兼容现有的<a target=_blank rel=noopener href=https://github.com/bitcoin/bitcoin/blob/91a25d1e711bfc0617027eee18b9777ff368d6b9/src/chainparams.cpp#L146-L160>检查点</a>），并且在最后一个检查点之后的某个区块中，将一笔资金分配给我</li></ul><p>这显然要付出许多精力，因为攻击者需要生产一条具备有效 PoW 的区块链。</p><p>然而，在 assumeutxo 中，只要我让用户接受一个恶意的 <code>assumeutxo</code> 成熟数值，大部分工作就完成了。修改和序列化错误的 UTXO 快照是非常简单的 —— 并不需要工作量证明。</p><h3 id=这听起来非常糟糕-——-所以攻击者所需的不过是让一个用户接受一个坏的-assumeutxo-数值，然后给-TA-提供一个污染过的快照就好了？><a href=#这听起来非常糟糕-——-所以攻击者所需的不过是让一个用户接受一个坏的-assumeutxo-数值，然后给-TA-提供一个污染过的快照就好了？ class=headerlink title="这听起来非常糟糕 —— 所以攻击者所需的不过是让一个用户接受一个坏的 assumeutxo 数值，然后给 TA 提供一个污染过的快照就好了？"></a>这听起来非常糟糕 —— 所以攻击者所需的不过是让一个用户接受一个坏的 assumeutxo 数值，然后给 TA 提供一个污染过的快照就好了？</h3><p>没错，确实如此。</p><p>因此，assumeutxo 数值需要嵌进源代码中，并且我们不会开发一种通过运用命令行来指定 <code>assumeutxo</code> 数值的机制了；这在实践中的风险太高了。如果用户希望指定另一个数值（不推荐这样做），他们可以修改源代码然后重新编译。</p><h3 id=听起来这是要主张在某个地方（比如说区块头）包含一个对-assumeutxo-数值的承诺，从而让共识可以保证它。我们应该这么做吗？><a href=#听起来这是要主张在某个地方（比如说区块头）包含一个对-assumeutxo-数值的承诺，从而让共识可以保证它。我们应该这么做吗？ class=headerlink title="听起来这是要主张在某个地方（比如说区块头）包含一个对 assumeutxo 数值的承诺，从而让共识可以保证它。我们应该这么做吗？"></a>听起来这是要主张在某个地方（比如说区块头）包含一个对 assumeutxo 数值的承诺，从而让共识可以保证它。我们应该这么做吗？</h3><p>也许未来可以这么做，但不是现在。在我们获得使用 UTXO 快照的实际经验之前，我们不知道正确的承诺结构是什么样的。改变共识是一个非常昂贵的过程，而且除非我们绝对确定希望承诺它，不然就不该尝试。</p><p>沿着这条路一直走下去，也许我们会在共识关键的地方引入这样的承诺，但目前，我们应该将 assumeutxo 设计成不需要这样的假设也是安全的。</p><h3 id=对导入的快照，除了比较它的哈希值与-assumeutxo-数值，我们还会运行别的验证吗？><a href=#对导入的快照，除了比较它的哈希值与-assumeutxo-数值，我们还会运行别的验证吗？ class=headerlink title="对导入的快照，除了比较它的哈希值与 assumeutxo 数值，我们还会运行别的验证吗？"></a>对导入的快照，除了比较它的哈希值与 <code>assumeutxo</code> 数值，我们还会运行别的验证吗？</h3><p>是的。在 UTXO 快照加载完成、同步到网络的链顶端之后，我们会在后台运用单独的数据结构（即一个单独的 chainstate）启动一次初始化区块下载。这个后台的 IBD 会一直下载和验证所有区块，直至被快照假设有效的最后一个区块（即该快照的 “基础”）。</p><p>一旦后台的 IBD 完成，我们就验证完了在我们加载快照时候假定有效的所有历史区块。然后，我们就可以丢弃后台验证后得到的 <code>chainstate</code> 数据了。</p><h2 id=资源使用情况><a href=#资源使用情况 class=headerlink title=资源使用情况></a>资源使用情况</h2><h3 id=我们用在后台-IBD-中的额外-chainstate，不会占用额外的硬盘空间和内存吗（它会使用单独的数据库和缓存）？><a href=#我们用在后台-IBD-中的额外-chainstate，不会占用额外的硬盘空间和内存吗（它会使用单独的数据库和缓存）？ class=headerlink title="我们用在后台 IBD 中的额外 chainstate，不会占用额外的硬盘空间和内存吗（它会使用单独的数据库和缓存）？"></a>我们用在后台 IBD 中的额外 chainstate，不会占用额外的硬盘空间和内存吗（它会使用单独的数据库和缓存）？</h3><p>没错，因为我们要维护两个完全独立的 UTXO 集，以支持后台 IBD（这会同时使用快照假定有效的链条以及快照基础高度后的链条），我们必须拥有一个额外的 <code>CCoinsView*</code> 层级。这意味着要在硬盘上临时保存一个额外的 <code>chainsate</code>（leveldb）目录，而且需要根据每个 <code>-dbcache</code> 分割内存、分配给需要放在内存内的 UTXO 缓存。</p><p>我不认为这是一个很大的问题，因为这基本上意味着（在当前来说）额外的 3.2GB 的存储空间。我们可以按照大约 80&#x2F;20 的比例给 后台 IBD 所用的 <code>CCoinsViewCache</code> vs. 假定有效的 <code>chainActive</code> 分配指定的 <code>-dbcache</code> 内存，因为较大的 dacache 仅在 IBD 期间才提供了重大的性能好处。</p><h3 id=我们还应该运行后台验证同步吗？如果我们接受了-assumeutxo-的安然模式，为什么还要执行后台-IBD？IBD-不是一个长期的扩展问题吗？道理在哪？><a href=#我们还应该运行后台验证同步吗？如果我们接受了-assumeutxo-的安然模式，为什么还要执行后台-IBD？IBD-不是一个长期的扩展问题吗？道理在哪？ class=headerlink title="我们还应该运行后台验证同步吗？如果我们接受了 assumeutxo 的安然模式，为什么还要执行后台 IBD？IBD 不是一个长期的扩展问题吗？道理在哪？"></a>我们还应该运行后台验证同步吗？如果我们接受了 assumeutxo 的安然模式，为什么还要执行后台 IBD？IBD 不是一个长期的扩展问题吗？道理在哪？</h3><p>如果我们引入 assumeutxo 和快照而不在后台运行 IBD，那么容易想象几乎每个建立节点的人都会使用 UTXO 快照（因为它比传统的 IBD 快得多）、假定某一段区块链是有效的，然后将自身作为剪枝节点（pruned node）呈现给网络。在极端情况下，这将导致缺乏节点为网络提供历史区块。这显然不是我们想要的，因此，将后台 IBD 作为默认设置似乎是有意义的。</p><p>硬件受限的用户无疑可以在剪枝模式下使用 assumeutxo 。</p><p>Assumeutxo 是一项性能优化。如果我们移除 IBD 模式、换成它，就改变了比特币的安全模型。在未来，我们可能会分割区块下载与 连接&#x2F;验证 程序，从而 assumeutxo 节点依然可以为对等节点提供区块，而无需花费计算资源来执行 IBD 式的验证。</p><h3 id=用户和审核者该如何高效地验证给定一个-UTXO-集的哈希值？><a href=#用户和审核者该如何高效地验证给定一个-UTXO-集的哈希值？ class=headerlink title="用户和审核者该如何高效地验证给定一个 UTXO 集的哈希值？"></a>用户和审核者该如何高效地验证给定一个 UTXO 集的哈希值？</h3><p>当前，计算特定高度的 UTXO 集的哈希值可以使用 <code>gettxoutsetinfo</code> RPC 命令来做到（即 <code>GetUTXOStats()</code>）。这会花掉几分钟来计算；如果你要对某一个具体的高度计算这个值，你需要调用 <code>invalidateblock</code> 来回滚到那个高度；计算完成后，你可以使用 <code>reconsiderblock</code> 快速切换回来。显然，这会打断正常的操作。</p><p>这不方便，但我们可以修改 <code>gettxoutsetinfo</code> 的行为，使之可以接受一个高度作为参数，然后至少抽象掉通过 <code>invalidateblock/reconsiderblock</code> 手动回滚和切换的过程。</p><p>未来，可以想象我们可以使用一个节点本地的<a target=_blank rel=noopener href=https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-May/014337.html>滚动 UTXO 集哈希值</a>以让特定高度的 UTXO 哈希值随时可用。但是，滚动的 UTXO 集哈希值跟 assuemeutxo 承诺方案是不兼容的，因为后者涉及到分块快照（下文有述），并且因此最终的 assumeutxo 值可能必须是 <code>(rolling_set_hash, split_snapshot_chunks_merkle_root)</code> 这样的元组。</p><h2 id=快照的存储与分发><a href=#快照的存储与分发 class=headerlink title=快照的存储与分发></a>快照的存储与分发</h2><h3 id=快照如何分发？><a href=#快照如何分发？ class=headerlink title=快照如何分发？></a>快照如何分发？</h3><p>最终，用户将通过对等节点网络来获得 UTXO 快照。但在这个状态实现之前，用户需要从其他人或者 CDN 那里说得 UTXO 快照，然后用硬编码的 assumeutxo 哈希值来验证它（见下文的 “如何分步部署？”）。</p><p>因为快照的体积是非常大的，而且因为恶意的对等节点可能会谎称自己提供的一个大文件是一个有效的快照，所以我们需要分块存储及传输。应该做到容易验证每一块。</p><p>粗糙地说，分切的一种办法是将快照平均分成 <em>n</em> 块。我们可以用每一块的哈希值构造一棵默克尔树，然后将树的根植作为嵌入源代码的 <code>assumeutxo</code> 承诺数值。每一个对等节点都会选择随机的数值对 <em>k</em> 求模（这里 k &lt;&#x3D; n），以确定自己要复杂存储哪一部分数据块。在初始化的时候，想要获得快照的对等节点将需要找出 <em>k</em> 个不同的对等节点，每一个对等节点都提供快照数据的独特一 “段”，从而获得全部 <em>n</em> 个数据块。</p><h3 id=这听起来很棒，也简单，但我打赌某个地方还有问题。><a href=#这听起来很棒，也简单，但我打赌某个地方还有问题。 class=headerlink title=这听起来很棒，也简单，但我打赌某个地方还有问题。></a>这听起来很棒，也简单，但我打赌某个地方还有问题。</h3><p>没错。这种方法的问题在于：</p><ul><li>找到能够提供所有 <em>k</em> 段数据的节点集合是不便利的，而且</li><li>这开启了一个微小的 DoS 界面 —— 为了阻止初始化，攻击者只需针对提供某一段数据的所有节点。</li></ul><p>相应的，我们可以使用<a target=_blank rel=noopener href=http://web.eecs.utk.edu/~plank/plank/classes/cs560/560/notes/Erasure/2004-ICL.pdf>纠删编码</a>，生成 <em>n+m</em> 个数据块（其中 <em>m</em> 就是额外编码的数据块的数量），并让冷启动的节点才对等节点处检索任意 <em>n + 𝛼</em> 个不同数据块；这里的 <em>𝛼</em> 的大小取决于我们所用的具体的编码方案。每一个节点都依然只存储和提供快照全部分块的子集。</p><h3 id=一个节点要存储多少套快照？><a href=#一个节点要存储多少套快照？ class=headerlink title=一个节点要存储多少套快照？></a>一个节点要存储多少套快照？</h3><p>为了保证运行旧版本软件的邻居，一个节点只存储最新的快照是不够的。具体要存储多少套可以讨论，但我认为，为两套历史快照以及最新的一套快照存储一些数据，是合理的。</p><p>对于每一套快照，每个节点都只需存储一部分数据（大概是 1&#x2F;8 左右），取决于我们为纠删编码方案选择的具体参数。</p><p>一个参考，当前的一套 UTXO 快照大概是 3.2 GB。如果我们不做任何改进、快照保持这个规模，那么预计一个节点要存储 1.2GB（&#x3D; 1&#x2F;8 * 3 套快照 * 3.2GB&#x2F;每套快照）的快照数据（假定需要 8 个对等节点来使用快照冷启动，并且每个节点都存储 3 套快照）。</p><h3 id=对于刚刚发布的新的-assumeutxo-值，相应的快照如何获得？><a href=#对于刚刚发布的新的-assumeutxo-值，相应的快照如何获得？ class=headerlink title="对于刚刚发布的新的 assumeutxo 值，相应的快照如何获得？"></a>对于刚刚发布的新的 assumeutxo 值，相应的快照如何获得？</h3><p>好问题，我还没有想得很清楚。可以假设，我们可以（比如说）让代码每 6 个月生成一套快照。为了能在运行时生成快照而不影响正常过的操作（比如新区块的响应），我们可能必须重构 “从状态到磁盘” 的刷新，使之变成异步的。</p><p>Sjors 指出，我们可以基于区块高度，周期性地生成快照，这可能会派上传输给对等节点以外的用场：</p><blockquote><p>如果按固定的区块间隔生成，这些快照可以【马上】派上用场，即便（其承诺）还没有进入新发行的软件。它可以用于本地备份，从区块以及 chainstate 的数据中恢复。每个节点都可以用简单的 text 文件来存储哈希值。对于剪枝节点来说，重新编制索引可以通过回顾快照来实现，而不必再一路回溯到创世区块。类似地，这在一个节点需要撤销剪枝以扫描旧钱包的使用也是有用的。</p></blockquote><h2 id=其它方法><a href=#其它方法 class=headerlink title=其它方法></a>其它方法</h2><h3 id=使用-UTXO-快照就必须存储和发送这些快照，为什么不让-Bitcoin-直接以-SPV-模式（例如使用-BIP-157），然后在后台-IBD-呢？><a href=#使用-UTXO-快照就必须存储和发送这些快照，为什么不让-Bitcoin-直接以-SPV-模式（例如使用-BIP-157），然后在后台-IBD-呢？ class=headerlink title="使用 UTXO 快照就必须存储和发送这些快照，为什么不让 Bitcoin 直接以 SPV 模式（例如使用 BIP 157），然后在后台 IBD 呢？"></a>使用 UTXO 快照就必须存储和发送这些快照，为什么不让 Bitcoin 直接以 SPV 模式（例如使用 <a target=_blank rel=noopener href=https://github.com/bitcoin/bips/blob/master/bip-0157.mediawiki>BIP 157</a>），然后在后台 IBD 呢？</h3><p>这是一个吸引人的想法，但在实践中有一些缺点。</p><p>首先，实现 assumeutxo 方法比起在 Bitcoin Core 中开发一个 SPV 模式，所需的代码要少得多。当前，Bitcoin Core 并没有任何作为 SPV 客户端的代码，而且许多子系统也都假设了一个 chainstate 的持久存在（即一个 <code>CChain</code> 区块链对象以及对 UTXO 集的视图）。</p><p>也许有些让人意外，但 assumeutxo 方法让我们可以复用大量 Bitcoin Core 中已经存在的代码。它的实现相当于一系列的重构（即使没有 assumeutxo，本来也是要做的，会让编写测试变得更加容易），再加上少量新的小块逻辑，以处理在初始化和网络通信期间多个 chainstate 并存的问题。</p><p>需要使用大量的新代码（比如 <a target=_blank rel=noopener href=http://web.eecs.utk.edu/~plank/plank/classes/cs560/560/notes/Erasure/2004-ICL.pdf>Reed-Solomon 纠删编码</a>）来分割快照以存储和对等传输，但这类代码可以容易地放在系统的外围，而构筑 SPV 模式的代码则必须对软件的 “核心” 作不计其数的修改。</p><p>更多新代码就意味着更大的工程量和审核工作，而且最终会有更多风险。而且，使用 SPV 模式，也意味着在完整的链被下载和验证之前，节点无法对新进入的区块作全面的验证。</p><h3 id=那为什么不使用一些不要求改变-Bitcoin-Core-代码的方式呢？比如说，让某人提供-PGP-签名的数据集，然后你可以通过（比如说）btcpayserver-的-FastSync-来下载？><a href=#那为什么不使用一些不要求改变-Bitcoin-Core-代码的方式呢？比如说，让某人提供-PGP-签名的数据集，然后你可以通过（比如说）btcpayserver-的-FastSync-来下载？ class=headerlink title="那为什么不使用一些不要求改变 Bitcoin Core 代码的方式呢？比如说，让某人提供 PGP 签名的数据集，然后你可以通过（比如说）btcpayserver 的 FastSync 来下载？"></a>那为什么不使用一些不要求改变 Bitcoin Core 代码的方式呢？比如说，让某人提供 PGP 签名的数据集，然后你可以通过（比如说）btcpayserver 的 <a target=_blank rel=noopener href=https://github.com/btcpayserver/btcpayserver-docker/tree/master/contrib/FastSync>FastSync</a> 来下载？</h3><p>通过 Bitcoin Core 软件以外的方式来分发这类数据在实践中有一系列的缺点。如果个人和团体被鼓励下载一定程度上未经软件本身验证的 chainstate 数据，会引入许多安全风险。用户将不仅需要信任 bitcoind，还需要信任数据的提供方。除了软件本身以外，这些数据的提供方也需要挑剔。</p><p>此外，现有的方案，比如 FastSync，使用 PGP 来见证他们所提供的数据的有效性。这个签名常常被忽略，而且说服用户可靠地验证它们不是个容易的事。</p><p>Assumeutxo 或者类似方案的用户应该是 <em>默认安全的</em>，而且最终来说，用户不应该需要采取额外的步骤，才能从这样的优化中收益（同时保持安全性）。</p><h2 id=计划-1><a href=#计划-1 class=headerlink title=计划></a>计划</h2><h3 id=好的，assumeutxo-听起来很棒。怎么部署呢？><a href=#好的，assumeutxo-听起来很棒。怎么部署呢？ class=headerlink title="好的，assumeutxo 听起来很棒。怎么部署呢？"></a>好的，assumeutxo 听起来很棒。怎么部署呢？</h3><ol><li>实现让多个 chainstate 能够同时使用所必需的变更。（<a target=_blank rel=noopener href=https://github.com/bitcoin/bitcoin/pull/15606>见 PR</a>）</li><li>通过 <code>dumptxoutset</code> 和 <code>loadtxoutset</code> 实现 UTXO 快照的创建和使用，以及一个硬编码的 <code>assumeutxo</code> 哈希值。（<a target=_blank rel=noopener href=https://github.com/bitcoin/bitcoin/pull/15606>见 PR</a>）</li><li>留出实践，让精通技术的终端用户可以通过 RPC 手动测试快照的用法。</li><li>研究高效的快照存储和分发方案。</li><li>实现并部署最终确定的 P2P 快照分发机制。</li><li>等待。</li><li>考虑支持 UTXO 集哈希值的共识变更是否有意义。</li></ol><h3 id=如果我想帮忙，接下来我应该做什么？><a href=#如果我想帮忙，接下来我应该做什么？ class=headerlink title=如果我想帮忙，接下来我应该做什么？></a>如果我想帮忙，接下来我应该做什么？</h3><p>在<a target=_blank rel=noopener href=https://github.com/bitcoin/bitcoin/pull/15606>这里</a>审核代码。因为变更的规模较大，一部分代码可能会被分割，大家会感谢你的投入。</p><h3 id=assumeutxo-如何跟累加器、UHS-以及-utreexo-一起工作（如果它们会到来的话）？><a href=#assumeutxo-如何跟累加器、UHS-以及-utreexo-一起工作（如果它们会到来的话）？ class=headerlink title="assumeutxo 如何跟累加器、UHS 以及 utreexo 一起工作（如果它们会到来的话）？"></a>assumeutxo 如何跟<a target=_blank rel=noopener href=https://eprint.iacr.org/2018/1188>累加器</a>、<a target=_blank rel=noopener href=https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-May/015967.html>UHS</a> 以及 <a target=_blank rel=noopener href="https://www.youtube.com/watch?v=edRun-6ubCc">utreexo</a> 一起工作（如果它们会到来的话）？</h3><p>如果其它更节约空间的 UTXO 集表示方式可用，它们会跟 assumeutxo 相得益彰。容易想象 assumeutxo 的值变成 utreexo 森林的默克尔根值，或者一个累加器数值。UTXO 快照将缩减成几千字节，而不是几 GB。后台 IBD 也依然会很有用，因为我们将依然希望在后台执行完全验证。</p><h2 id=实现问题><a href=#实现问题 class=headerlink title=实现问题></a>实现问题</h2><h3 id=应该如何在-假定有效的状态-和-后台状态-的验证之间分配内存（-dbcache）呢？><a href=#应该如何在-假定有效的状态-和-后台状态-的验证之间分配内存（-dbcache）呢？ class=headerlink title="应该如何在 假定有效的状态 和 后台状态 的验证之间分配内存（-dbcache）呢？"></a>应该如何在 假定有效的状态 和 后台状态 的验证之间分配内存（<code>-dbcache</code>）呢？</h3><p>来自 Sjors：</p><blockquote><p>我认为，应该分配绝大部分内存给快照状态，使之追上链顶端。因为快照可能代表的是 6 个月以前的链状态。一旦追上，就刷新并分配绝大部分内存给后台验证（从创世区块同步到快照基础区块）。如果节点在此期间重启，那就同步区块头，如果落后超过 24 小时，那就再次分配大部分资源以追上链顶端，否则分配大部分资源以追上快照基础区块。</p><p>在最初的版本中，至少我们需要确保两个 UTXO 集对内存的用量不超过 <code>-dbcache + -maxpool</code>。</p></blockquote><p>此时，实现草稿会在后台验证与顶端追赶之间按 <a target=_blank rel=noopener href=https://github.com/bitcoin/bitcoin/pull/15606/commits/83f13a754372579cd13a45a2052fd4e42ed24632#diff-c865a8939105e6350a50af02766291b7R1476>70&#x2F;30</a> 的比例分配内存。</p><h3 id=为什么用通过-RPC-来加载快照？不应该是一条启动命令吗？><a href=#为什么用通过-RPC-来加载快照？不应该是一条启动命令吗？ class=headerlink title="为什么用通过 RPC 来加载快照？不应该是一条启动命令吗？"></a>为什么用通过 RPC 来加载快照？不应该是一条启动命令吗？</h3><p>将快照加载作为启动参数，的确可以简化许多东西（比如链状态数据结构的管理），但如果我们最终要走向可以通过 P2P 网络来传输快照，我们就需要准备好让快照能在启动之后加载的逻辑。我认为，我们应该在将这个特性作为默认配置之前确保充分测试，因此，<code>loadtxoutset</code> 似乎是在 RPC 阶段应该使用的方法。</p><p>（完）</p></article></div></div></main><script src="/js/post.js?v=1682773100887"></script><script src="/js/highlight.min.js?v=1682773100887"></script><script>var containerEl=document.querySelector(".post-container"),postFontSize=localStorage.getItem("post-font-size")||"16",inputEl=document.querySelector("#size-change-input"),inputEl2=document.querySelector("#size-change-input2");inputEl.value=postFontSize,inputEl2.value=postFontSize,containerEl.style.fontSize=postFontSize+"px",$(function(){function e(t){$(".post-container").css("font-size",t+"px"),localStorage.setItem("post-font-size",t),$("#size-change-input").val(t),$("#size-change-input2").val(t)}$("#size-change-input").on("input propertychange",function(t){e(t.target.value)}),$("#size-change-input2").on("input propertychange",function(t){e(t.target.value)})})</script><script>hljs.initHighlightingOnLoad()</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class=sns-container><a title=nostr target=_blank rel="noopener nofollow" href=https://iris.to/npub1g2qs0ca5kpwlrcfug2em4jelmh65clk3yccwjxrs6hvdpd9qj80q022j4m>Nostr</a><a title=rss target=_blank rel="noopener nofollow" href=/atom.xml>rss</a><a title=telegram target=_blank rel="noopener nofollow" href=//t.me/btcstudyorg>Telegram</a></section></footer><script async src="/js/buttons.js?v=1682773100887"></script><script async src="/js/index.js?v=1682773100887"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JVCJ9XXG1Z")</script><script>var _hmt=_hmt||[];(()=>{var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306",e.async=!0,e.defer=!0,document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)})()</script></body></html>