<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><title>在 Bitcoin Core 中复原一个 Miniscript 钱包</title><meta name=keywords content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name=description content=比特币思想的中文集结地><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1"><link rel=icon href=/favicon.ico><link rel=stylesheet href="/style/common/bulma.css?v=1682773100887"><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href="/style/common/iconfont.css?v=1682773100887"><link rel=stylesheet href="/style/base.css?v=1682773100887"><link rel=stylesheet href="/style/common/helper.css?v=1682773100887"><link rel=stylesheet href="/style/themes/animation.css?v=1682773100887"><script>function ready(){var e=document.querySelector(".body-container"),t=localStorage.getItem("theme")||"light";["light","dark"].includes(t)||(t="light",localStorage.setItem("theme","light")),e.classList.remove("appearance-auto"),e.classList.add("appearance-"+t),quickInitialTheme()}function quickInitialTheme(){var e=localStorage.getItem("theme")||"light",t=document.querySelector(".logo-light"),o=document.querySelector(".logo-dark"),d=document.querySelector("#mobile-header-logo > .logo-light"),l=document.querySelector("#mobile-header-logo > .logo-dark"),a=document.getElementById("theme-btn"),i=document.querySelector(".slide-theme-light"),c=document.querySelector(".slide-theme-dark");document.body.classList.add(e),("dark"===e?(t.classList.add("hidden"),o.classList.remove("hidden"),d.classList.add("hidden"),l.classList.remove("hidden"),a.classList.remove("icon-icon_dark"),a.classList.add("icon-icon_light"),i):c).classList.remove("hidden")}document.addEventListener("DOMContentLoaded",ready)</script><script src="/js/common.js?v=1682773100887"></script><script src=/js/libs/zepto.min.js></script><link rel=stylesheet href="/style/post.css?v=1682773100887"><link rel=stylesheet href="/style/themes/highlight.css?v=1682773100887"><meta name=generator content="Hexo 6.3.0"><link rel=alternate href=/atom.xml title="BTC Study" type=application/atom+xml></head><body class="is-flex is-flex-direction-column" onload=initialTheme()><div class=clip></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id=header><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href=/ ><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id=header-menu><a class="is-inline-block header-activity mr-4" href=/ >首页</a><a class="is-inline-block mr-4" href=/archives>全站目录</a><a class="is-inline-block mr-4" href=/tags>标签</a><a class="is-inline-block mr-4" href=/maps>地图</a><a class="is-inline-block mr-4" href=/tools>工具</a><a class="is-inline-block mr-4" target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input type=range min=12 max=32 step=2></div></div></div><i class="iconfont icon-icon_dark mr-1" id=theme-btn></i><div class=search-wrap><input class=pl-3 id=search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search" id=search-input-btn></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopic><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">在 Bitcoin Core 中复原一个 Miniscript 钱包</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn2></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input2 type=range min=12 max=32 step=2></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id=mobile-header><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id=mobile-header-logo><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopicMobile><p class=is-full-height>在 Bitcoin Core 中复原一个 Miniscript 钱包</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class=mobile-search-wrap><div class=search-input><input class=pl-3 id=mobile-search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class=mobile-search-input-btn>搜 索</button></div></div></header><div class=mobile-slide-menu><a class=header-activity href=/ >首页</a><a href=/archives>全站目录</a><a href=/tags>标签</a><a href=/maps>地图</a><a href=/tools>工具</a><a target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class=slide-menu-fontsize><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1682773100887"></script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%A6%82%E8%BF%B0%EF%BC%9A%E4%B8%A4%E7%A7%8D%E5%A4%8D%E5%8E%9F%E6%96%B9%E6%B3%95><span class=toc-text>概述：两种复原方法</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%BD%A0%E9%9C%80%E8%A6%81%E4%BB%80%E4%B9%88><span class=toc-text>你需要什么</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%AD%A5%E9%AA%A4-1%EF%BC%9A%E5%AE%89%E8%A3%85-Bitcoin-Core-%E5%B9%B6%E5%90%8C%E6%AD%A5%E6%AF%94%E7%89%B9%E5%B8%81%E5%8C%BA%E5%9D%97%E9%93%BE><span class=toc-text>步骤 1：安装 Bitcoin Core 并同步比特币区块链</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%AD%A5%E9%AA%A4-2%EF%BC%9A%EF%BC%88%E4%BB%85%E9%99%90%E7%A7%8D%E5%AD%90%E8%AF%8D%E5%A4%8D%E5%8E%9F%E6%96%B9%E6%B3%95%EF%BC%89%E8%8E%B7%E5%BE%97%E7%A7%81%E9%92%A5><span class=toc-text>步骤 2：（仅限种子词复原方法）获得私钥</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#A-%E5%AE%9A%E4%BD%8D%E4%BD%A0%E7%9A%84%E6%B4%BE%E7%94%9F%E8%B7%AF%E5%BE%84><span class=toc-text>A. 定位你的派生路径</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#B-%E8%8E%B7%E5%BE%97%E5%AF%86%E9%92%A5%E6%9D%90%E6%96%99><span class=toc-text>B. 获得密钥材料</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#C-%E6%B4%BE%E7%94%9F%E5%87%BA%E9%92%B1%E5%8C%85%E5%85%B7%E4%BD%93%E4%BD%BF%E7%94%A8%E7%9A%84%E7%A7%81%E9%92%A5><span class=toc-text>C. 派生出钱包具体使用的私钥</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%AD%A5%E9%AA%A4-3%EF%BC%9A%E5%AE%A1%E6%A0%B8%E5%8F%8A%E5%87%86%E5%A4%87%E4%BD%A0%E7%9A%84%E9%92%B1%E5%8C%85%E6%8F%8F%E8%BF%B0%E7%AC%A6><span class=toc-text>步骤 3：审核及准备你的钱包描述符</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%A4%84%E7%90%86%E9%92%B1%E5%8C%85%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F><span class=toc-text>处理钱包配置文件格式</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%AF%BC%E5%85%A5%E7%9A%84%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C><span class=toc-text>导入的准备工作</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%85%B3%E4%BA%8E%E6%A3%80%E9%AA%8C%E5%92%8C%E7%9A%84%E9%87%8D%E8%A6%81%E6%8F%90%E9%86%92%EF%BC%88%E4%BB%85%E9%99%90%E7%A7%8D%E5%AD%90%E8%AF%8D%E5%A4%8D%E5%8E%9F%E6%B3%95%EF%BC%89><span class=toc-text>关于检验和的重要提醒（仅限种子词复原法）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%AD%A5%E9%AA%A4-4%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%92%8C%E5%AF%BC%E5%85%A5%E9%92%B1%E5%8C%85><span class=toc-text>步骤 4：创建和导入钱包</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%AD%A5%E9%AA%A4-5%EF%BC%9A%E5%88%9B%E5%BB%BA%E3%80%81%E7%AD%BE%E5%90%8D%E5%92%8C%E5%B9%BF%E6%92%AD%E4%B8%80%E7%AC%94%E4%BA%A4%E6%98%93><span class=toc-text>步骤 5：创建、签名和广播一笔交易</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA-PSBT%EF%BC%88%E5%BE%85%E7%AD%BE%E5%90%8D%E7%9A%84%E6%AF%94%E7%89%B9%E5%B8%81%E4%BA%A4%E6%98%93%EF%BC%89><span class=toc-text>创建一个 PSBT（待签名的比特币交易）</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%8F%AF%E9%80%89%EF%BC%9A%E4%BB%8E%E4%B8%80%E4%B8%AA%E5%B8%A6%E6%9C%89%E6%97%B6%E9%97%B4%E9%94%81%E7%9A%84%E8%8A%B1%E8%B4%B9%E8%B7%AF%E5%BE%84%E8%8A%B1%E8%B4%B9><span class=toc-text>可选：从一个带有时间锁的花费路径花费</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E7%AD%BE%E5%90%8D-PSBT><span class=toc-text>签名 PSBT</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%95%B2%E5%AE%9A%E4%BA%A4%E6%98%93%E5%B9%B6%E5%B9%BF%E6%92%AD><span class=toc-text>敲定交易并广播</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%AD%A5%E9%AA%A4-6%EF%BC%9A%E6%B8%85%E7%90%86><span class=toc-text>步骤 6：清理</span></a></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id=postTitle>在 Bitcoin Core 中复原一个 Miniscript 钱包</h1><div class=page-author><div class="is-flex is-flex-direction-row page-data mr-6"><img class=mr-1 src=/images/default_avatar.png alt=Nunchuk><div class=page-author-info><strong>Nunchuk</strong><time class=has-text-grey datetime=2025-11-18T03:59:26.000Z>2025-11-18</time></div></div><div class=is-flex><a href=/tags/%E6%8F%8F%E8%BF%B0%E7%AC%A6><i class="page-tag mr-1 px-1">描述符</i></a><a href=/tags/Miniscript><i class="page-tag mr-1 px-1">Miniscript</i></a></div></div><article class="mt-4 post-content"><blockquote><p><em>作者：Nunchuk</em></p><p><em>来源：<a target=_blank rel=noopener href=https://nunchuk.io/blog/miniscript-wallet-recovery>https://nunchuk.io/blog/miniscript-wallet-recovery</a></em></p></blockquote><p><img src=/images/recover-a-miniscript-wallet-with-bitcoin-core-by-nunchuk/Miniscript_recovery_header_30317936a1.webp alt=Miniscript_recovery_header_30317936a1></p><p><code>Nunchuk</code> 软件钱包建立在公开的标准和可以互操作的数据格式上，这意味着，你使用 <code>Nunchuk</code> 软件建立的钱包总是可以在其它开源的比特币工具上复原出来，也包括在 <a target=_blank rel=noopener href=https://bitcoincore.org/ >Bitcoin Core</a> 软件上。本指南解释了如何在 <code>Bitcoin Core</code> 中（使用它的 “描述符” 和 “ PSBT ” 特性）复原和花费一个 Miniscript 钱包（译者注：指在建立过程中使用了 Miniscript 编程语言的钱包；在创建完成后，这样的钱包的描述符将带有 Miniscript 代码）。</p><p>Bitcoin Core 从 V24 开始就添加了基础的 Miniscript 支持，允许复原在 <code>Nunchuk</code> 中建立的高级钱包策略，比如多签名和时间锁脚本。V29 以及更高的版本提升了 Miniscript 处理和描述符钱包，所以，本指南更推荐使用 V29 以及更高版本。</p><h2 id=概述：两种复原方法><a href=#概述：两种复原方法 class=headerlink title=概述：两种复原方法></a>概述：两种复原方法</h2><p>取决于你选择如何签名自己的交易，这里有两种复原方法：</p><ol><li><p><strong>基于硬件签名器的复原（推荐）</strong>：使用你的硬件签名器来复原和安全签名交易。私钥绝不离开你的设备。</p></li><li><p><strong>基于种子词的复原（仅使用软件）</strong>：在 Bitcoin Core 中直接使用你的钱包种子词或者密钥备份。这需要获得你的钱包中的密钥的 <code>xprv</code>（拓展私钥）、用它替换掉你的钱包描述符中对应密钥的 <code>xpub</code>（拓展公钥）字符。出于安全性，<strong>请仅在断网和空气隔离（air-gapped）的设备上操作</strong>。</p><blockquote><p>编者注：此处的 “空气隔离” 应指与无任何与联网设备的连接，不论有线或无线。</p><p>“拓展公钥” 和 “拓展私钥” 并不是指的某一个 公钥&#x2F;私钥，它是一种格式，用于描述一棵 BIP32 层级式确定性派生密钥树上的一个密钥。拓展 公钥&#x2F;私钥 包含了这个 公钥&#x2F;私钥 的许多信息，比如，它是如何派生出来的（派生路径）、它从哪里派生而来（根源密钥指纹），以及如何用它派生子密钥。</p></blockquote></li></ol><h2 id=你需要什么><a href=#你需要什么 class=headerlink title=你需要什么></a>你需要什么</h2><ul><li>你的钱包的种子词或者硬件签名器（注意，你的钱包可能用到了多个密钥，因此，需要的这些密钥材料可能不止一套）。请确保你的硬件签名器支持 Miniscript 。</li><li>你在 <code>Nunchuk</code> 中获得的钱包配置文件（“ BSMS ” 格式的文件或者描述符文本）</li><li><code>Bitcoin Core</code> 24.0 以上的版本（推荐 29.0 以上的版本）</li><li>（仅为硬件签名器复原方法所需）<code>HWI</code>（硬件钱包接口）：要求允许 <code>Bitcoin Core</code> 与硬件签名器通信。详见《<a target=_blank rel=noopener href=https://hwi.readthedocs.io/en/latest/usage/installation.html>HWI 安装指南</a>》。</li><li>（仅为种子词复原方法所需）一个 “BIP-39 转主密钥” 转换器（比如 <a target=_blank rel=noopener href=https://github.com/iancoleman/bip39/releases>Ian Coleman 的 BIP39 工具</a>），务必仅在断网环境下使用。</li></ul><p><strong>要求总结</strong></p><table><thead><tr><th><strong>钱包类型</strong></th><th><strong>需要的材料</strong></th></tr></thead><tbody><tr><td>单签名钱包</td><td>一个种子词或者签名器</td></tr><tr><td>多签名钱包</td><td>能够满足钱包阈值要求数量的 种子词&#x2F;签名器（比如，若要复原 2-of-3 多签名钱包，任意两个不同密钥的 种子词&#x2F;签名器 就可满足要求）</td></tr><tr><td>Miniscript</td><td>满足 Miniscript 花费要求数量的 种子词&#x2F;签名器</td></tr></tbody></table><h2 id=步骤-1：安装-Bitcoin-Core-并同步比特币区块链><a href=#步骤-1：安装-Bitcoin-Core-并同步比特币区块链 class=headerlink title="步骤 1：安装 Bitcoin Core 并同步比特币区块链"></a>步骤 1：安装 <code>Bitcoin Core</code> 并同步比特币区块链</h2><p>先安装 <code>Bitcoin Core</code> 并确保你的节点已经完全同步了区块链，然后才能继续。</p><pre><code>bitcoind -daemon
</code></pre><blockquote><p>编者注：此为安装好 <code>Bitcoin Core</code> 之后，在命令行环境中启动 <code>Bitcoin Core</code> 并要求后台运行的命令。在 Windows 系统中，可通过 <code>Terminal</code>（终端）进入这样的命令行环境；但是，较老版本的 <code>Bitcoin Core</code> 在 Windows 系统中可能无法后台运行，为此，可直接输入以下命令，按下回车执行：</p><pre><code>bitcoind
</code></pre><p>如果你不习惯命令行环境，也可以运行 <code>Bitcoin Core</code> 的图形界面。在图形界面中，也可以使用 “控制台” 菜单来输入指南中提到的命令（无需前面的 <code>bitcoin-cli</code>）。</p></blockquote><p>用以下命令检查同步状态：</p><pre><code>bitcoin-cli getblockchaininfo
</code></pre><blockquote><p>编者注：如果以非后台模式运行，这意味着你需要打开一个新的命令行环境窗口来输入以上命令。</p></blockquote><p>等待出现 <code>&quot;initialblockdownload&quot;: false</code> 这样的字样（表示同步完成）。</p><h2 id=步骤-2：（仅限种子词复原方法）获得私钥><a href=#步骤-2：（仅限种子词复原方法）获得私钥 class=headerlink title="步骤 2：（仅限种子词复原方法）获得私钥"></a>步骤 2：（仅限种子词复原方法）获得私钥</h2><p>如果你准备使用硬件签名器复原方法（建议），请跳到 “步骤 3 ” 。</p><p>如果你要执行仅使用软件的复原方法，你必须先获得跟你的钱包有关的密钥的托管私钥（<code>xprv</code>）。这是必要的，因为 <code>Bitcoin Core</code> 的描述符钱包并不直接支持 BIP-39 种子词；它需要拓展密钥（<code>xpub</code> 或者 <code>xprv</code>）。</p><blockquote><p><strong>安全警告</strong>：本节所述的流程会导致你的私钥暴露。强烈建议在一台断网而且空气隔离的电脑上执行。绝对不要在任何联网的工具上输入你的种子词或者私钥！</p></blockquote><p>这个过程需要使用一种断网的派生工具，比如 <a target=_blank rel=noopener href=https://github.com/iancoleman/bip39/releases>Ian Coleman 的 BIP39 工具</a>。请确保你下载和使用的是离线版本。</p><h3 id=A-定位你的派生路径><a href=#A-定位你的派生路径 class=headerlink title="A. 定位你的派生路径"></a>A. 定位你的派生路径</h3><p>首先，观察你的钱包配置文件，找出你需要复原的密钥的派生路径。或者，在描述符内寻找密钥的来源信息。</p><p>例如：</p><pre><code>[a3b12f34/48h/0h/0h/2h]xpub6DT5...
</code></pre><p>这样的文字，就表明这个拓展公钥（<code>xpub</code>）是由指纹为 <code>a3b12f34</code> 的主公钥经过 <code>m/48&#39;/0&#39;/0&#39;/2&#39;</code> 的派生路径派生出来的。</p><p><em>注意，字符 <code>h</code> 或者 <code>&#39;</code> 表明它用到了 “硬化的派生路径”；Ian Coleman 的 BIP39 工具仅支持使用硬化派生路径。</em>（编者注：在 BIP-32 层级式确定性密钥派生方法中，常规派生可以仅使用父公钥来派生子公钥；但硬化派生路径则必须有父私钥的参与，才能派生硬化的子公钥）。</p><h3 id=B-获得密钥材料><a href=#B-获得密钥材料 class=headerlink title="B. 获得密钥材料"></a>B. 获得密钥材料</h3><p>这一步骤的具体操作取决于你的备份形式：</p><p><strong>标准的 BIP39 种子词</strong></p><p>如果你还持有 12 词或者 24 词的种子词，它就可以作为你的根源密钥材料。</p><p><strong>TAPSIGNER 备份</strong></p><p>“ Tapsigner ”不使用 BIP39 种子词。你必须从备份文件中抽取出根源主私钥 <code>xprv</code>。</p><ul><li>找出由 Tapsigner 提供的加密备份文件。</li><li>找出备份口令（印在 Tapsigner 卡片的背面）。</li><li>使用备份口令解密备份文件。</li><li>解密出来的数据就包含所需的 <code>xprv...</code> 字符串。</li></ul><p>要了解解密 Tapsigner 备份文件的详细指令，请看《 <a target=_blank rel=noopener href=https://nunchuk.io/start#tapsigner-backup>Tapsigner 新手指南</a>》。</p><h3 id=C-派生出钱包具体使用的私钥><a href=#C-派生出钱包具体使用的私钥 class=headerlink title="C. 派生出钱包具体使用的私钥"></a>C. 派生出钱包具体使用的私钥</h3><p>现在，使用离线的派生工具（比如前述的 Ian Coleman 的 BIP39 工具）来计算钱包具体用到的 <code>xprv</code> 子私钥。</p><ol><li>打开离线工具。</li><li>输入你的根源密钥材料：<ul><li><strong>如果你用的是种子词</strong>：在 “ BIP39 Mnemonic ” 输入框输入你的 12 词或者 24 词种子词。</li><li><strong>如果你用的 Tapsigner（根密钥 xprv）</strong>：复制你抽取出来的根密钥 xprv 字符串到 “ BIP32 Root Key ” 输入框（注意，要保证 “ BIP39 Mnemonic ” 输入框是空的。）</li></ul></li><li>移动到 “ Derivation Path ”部分，选择 BIP32 标签。</li><li>将你在 “步骤 A ” 中得到的 “派生路径”（比如 <code>m/48&#39;/0&#39;/0&#39;/2&#39;</code>）输入 “ BIP32 Derivation Path ” 输入框中。</li><li>最终，“ BIP32 Extended Private Key ”输出框会显示派生出来的 xprv ，这就是你在 “步骤 3 ” 中需要的东西。</li></ol><p><img src=/../images/recover-a-miniscript-wallet-with-bitcoin-core-by-nunchuk/large_bip39_1_92c2e64c91.png alt=large_bip39_1_92c2e64c91></p><p><img src=/../images/recover-a-miniscript-wallet-with-bitcoin-core-by-nunchuk/large_bip39_2_023af2e34b.png alt=large_bip39_2_023af2e34b></p><h2 id=步骤-3：审核及准备你的钱包描述符><a href=#步骤-3：审核及准备你的钱包描述符 class=headerlink title="步骤 3：审核及准备你的钱包描述符"></a>步骤 3：审核及准备你的钱包描述符</h2><p>打开你的 <code>Nunchuk</code> 钱包配置文件并找出你想要复原的钱包的描述符。</p><h3 id=处理钱包配置文件格式><a href=#处理钱包配置文件格式 class=headerlink title=处理钱包配置文件格式></a>处理钱包配置文件格式</h3><ul><li>如果你的配置文件是 <a target=_blank rel=noopener href=https://github.com/bitcoin/bips/blob/master/bip-0129.mediawiki>BSMS（比特币安全多签名装置）格式</a>，你将在文件的第二行找到钱包描述符（或者，如果你使用了加密模式，则是第三行）。</li><li>如果你的配置文件直接是描述符格式，那么文件的所有内容就是你的钱包描述符。</li></ul><p>对于 Miniscript 钱包，<code>Nunchuk</code> 使用了 “多路径的描述符”（以 <code>/&lt;0;1&gt;/*</code> 结尾），这也是 <code>Bitcoin Core</code> 直接支持的形式。在这种形式下，单个描述符就同时涵盖了收款地址（0）和找零地址（1）。</p><p>描述符案例：</p><pre><code>wsh(and_v(v:pkh([a3b12f34/84h/1h/0h]xpub6DT5.../&lt;0;1&gt;/*),older(1000)))#checksum
</code></pre><h3 id=导入的准备工作><a href=#导入的准备工作 class=headerlink title=导入的准备工作></a>导入的准备工作</h3><p>取决于你使用的复原方法，你要准备不同的事项：</p><ul><li><strong>基于硬件签名器的复原方法</strong>：直接使用钱包描述符，无需改动。</li><li><strong>基于种子词的复原方法</strong>：将钱包描述符中的各 <code>xpub</code>（拓展公钥）替换成你在 “步骤 2 ” 中得到的对应密钥的 <code>xprv</code>（拓展私钥）。 确保钱包来源信息（方括号中的部分，比如 <code>[a3b12f34/84h/1h/0h]</code>）保持不变。</li></ul><h3 id=关于检验和的重要提醒（仅限种子词复原法）><a href=#关于检验和的重要提醒（仅限种子词复原法） class=headerlink title=关于检验和的重要提醒（仅限种子词复原法）></a>关于检验和的重要提醒（仅限种子词复原法）</h3><p>只要你修改了描述符（例如，将 <code>xpub</code> 替换成了对应的 <code>xprv</code>），那么最初的描述符的校验码（checksum）就失效了。而在导入描述符的时候，<code>Bitcoin Core</code> 要求描述符的校验码是有效的。</p><p>使用 <code>Bitcoin Core</code> 为修改后的描述符计算新的校验码（例如）：</p><pre><code>bitcoin-cli getdescriptorinfo &quot;wsh(and_v(v:pkh([a3b12f34/84h/1h/0h]xprvA1amWrohy…/&lt;0;1&gt;/*),older(1000)))&quot;
</code></pre><p>结果是：</p><pre><code>&#123;
  &quot;descriptor&quot;: &quot;wsh...&quot;,
  &quot;checksum&quot;: &quot;#NEW_CHECKSUM&quot;,
  &quot;isrange&quot;: true,
  &quot;issolvable&quot;: true,
  &quot;hasprivatekeys&quot;: true
&#125;
</code></pre><p>输出的 <code>&quot;checksum&quot;</code> 字段就包含了新的校验码。将这个新的校验码替换到修改后的描述符中。</p><p>带有新的校验码的修改后的描述符：</p><pre><code>&quot;wsh(and_v(v:pkh([a3b12f34/84h/1h/0h]xprvA1amWrohy…/&lt;0;1&gt;/*),older(1000)))#NEW_CHECKSUM&quot;
</code></pre><h2 id=步骤-4：创建和导入钱包><a href=#步骤-4：创建和导入钱包 class=headerlink title="步骤 4：创建和导入钱包"></a>步骤 4：创建和导入钱包</h2><p>使用准备好的描述符，向 <code>Bitcoin Core</code> 创建和导入你的钱包。首先，创建一个空的、基于描述符的钱包。</p><ul><li><p>若使用基于硬件的复原方法，请创建一个 “仅观察钱包”（<code>disable_private_keys=true</code>）：</p><pre><code>bitcoin-cli createwallet &quot;my_recovered_wallet&quot; true true &quot;&quot; false true
</code></pre></li><li><p>若基于种子词，请创建一个标准钱包（<code>disable_private_keys=false</code>）</p><pre><code>bitcoin-cli createwallet &quot;my_recovered_wallet&quot; false true &quot;&quot; false true
</code></pre><blockquote><p>编者注：命令中以双引号包起来的部分 <code>&quot;my_recovered_wallet&quot;</code> 是给这个新钱包的命名，可以自由修改。</p></blockquote></li></ul><p>输出是：</p><pre><code>&#123;
  &quot;name&quot;: &quot;my_recovered_wallet&quot;,
  &quot;warning&quot;: &quot;Empty string given as passphrase, wallet will not be encrypted.\nWallet is an experimental descriptor wallet&quot;
&#125;
</code></pre><p>然后，就导入钱包描述符。因为我们使用了一个带有范围的描述符（<code>/&lt;0;1&gt;/*</code>），所以只需要导入一次就够了。</p><pre><code>bitcoin-cli -rpcwallet=my_recovered_wallet importdescriptors &quot;[&#123;\&quot;desc\&quot;:\&quot;WALLET_DESCRIPTOR_WITH_CHECKSUM\&quot;, \&quot;timestamp\&quot;:\&quot;now\&quot;, \&quot;active\&quot;:true&#125;]&quot;
</code></pre><blockquote><p>编者注：<code>&quot;WALLET_DESCRIPTOR_WITH_CHECKSUM\&quot;</code> 部分要替换成你在 “步骤 3 ” 中最终得到的描述符。</p></blockquote><p>输出：</p><pre><code>[
  &#123;
    &quot;success&quot;: true,
    &quot;warnings&quot;: [
      &quot;Not all private keys provided. Some wallet functionality may return unexpected errors&quot;
    ]
  &#125;
]
</code></pre><p><em>注：如果你导入的描述符还带有 <code>xpub</code>，比如你使用的是硬件签名器复原法，则出现 “ <code>Not all private keys provided</code> （并未提供钱包内所有密钥的私钥）” 的警告是意料之中的；但如果你导入的描述符只有 <code>xprv</code>，则应该不会出现这样的警告。</em></p><p>验证你的钱包已经正确导入，而且软件所生成的地址与你预期的一致：</p><pre><code>bitcoin-cli -rpcwallet=my_recovered_wallet listdescriptors
bitcoin-cli -rpcwallet=my_recovered_wallet getbalance
bitcoin-cli -rpcwallet=my_recovered_wallet getnewaddress
</code></pre><blockquote><p>编者注：<code>-rpcwallet=</code> 后面应使用你给钱包的命名。第一条命令是列出该钱包的描述符；第二条命令是了解该钱包的余额；第三条命令则是生成一个新的地址。</p></blockquote><h2 id=步骤-5：创建、签名和广播一笔交易><a href=#步骤-5：创建、签名和广播一笔交易 class=headerlink title="步骤 5：创建、签名和广播一笔交易"></a>步骤 5：创建、签名和广播一笔交易</h2><p>现在，你的钱包激活了，你可以创建一笔交易来花费资金了。</p><blockquote><p>编者注：在确保你的钱包已经正确导入之后，也可以通过图形界面来加载钱包和使用它，这样更加简单，也更不容易出错。</p></blockquote><h3 id=创建一个-PSBT（待签名的比特币交易）><a href=#创建一个-PSBT（待签名的比特币交易） class=headerlink title="创建一个 PSBT（待签名的比特币交易）"></a>创建一个 PSBT（待签名的比特币交易）</h3><pre><code>bitcoin-cli -rpcwallet=my_recovered_wallet walletcreatefundedpsbt &#39;[]&#39; \
&#39;&#123;&quot;bc1qdestinationaddress...&quot;:0.001&#125;&#39; 0 &#39;&#123;&quot;fee_rate&quot;:2.0&#125;&#39;
</code></pre><p>输出：</p><pre><code>&#123;
  &quot;psbt&quot;: &quot;cHNidP8BAH0CAAAAA...&quot;,
  &quot;fee&quot;: 0.00000324,
  &quot;changepos&quot;: 1
&#125;
</code></pre><p>这就创建好了可以签名的 PSBT（在 <code>&quot;psbt&quot;</code> 字段中出现的字符串就是）。</p><h3 id=可选：从一个带有时间锁的花费路径花费><a href=#可选：从一个带有时间锁的花费路径花费 class=headerlink title=可选：从一个带有时间锁的花费路径花费></a>可选：从一个带有时间锁的花费路径花费</h3><p>如果你的 Miniscript 花费策略包含了时间锁条件，比如 <code>older(n)</code> 或者 <code>after(n)</code>，在创建交易时，你必须满足这些条件。</p><p><strong>绝对时间锁 —— <code>after(n)</code>（BIP-65）</strong></p><p>绝对时间锁会阻止在某个 区块高度&#x2F;时间点 到来之前的花费动作。你必须将交易的 <code>locktime</code> 字段设置为大于等于 <code>n</code> 的数值。</p><ul><li><strong>区块</strong>：如果 <code>n &lt; 500,000,000</code> ，这个时间锁会被解释为由区块高度定义。<ul><li>例如，<code>after(840000)</code> 表明资金只能在高度 840000 及以后的区块中花费。</li></ul></li><li><strong>时间点</strong>：如果 <code>n ≥ 500,000,000</code>，这个数值会被解释为一个 Unix 时间戳。<ul><li>例如，<code>after(1893456000)</code> 表明资金只能在 2030 年 1 月 1 日之后花费。</li></ul></li></ul><p>如果要从带有绝对时间锁的路径中花费（例如，将交易的 <code>lncoktime</code> 设置为 <code>1893542400</code> —— 2023 年 1 月 2 日的 0 时 0 分 0 秒，GTM+0 时间）：</p><pre><code>bitcoin-cli -rpcwallet=my_recovered_wallet walletcreatefundedpsbt &#39;[]&#39; \
&#39;&#123;&quot;bc1qdestinationaddress...&quot;:0.001&#125;&#39; 1893542400 &#39;&#123;&quot;fee_rate&quot;:2.0&#125;&#39;
</code></pre><p>你可以这样检查区块高度：</p><pre><code>bitcoin-cli getblockcount
</code></pre><p><strong>相对时间锁 —— <code>older(n)</code>（BIP-68）</strong></p><p>相对时间锁会限制一个 UTXO 在到达特定年龄之前被花掉。所需的 <code>n</code> 必须在输入的 <code>sequence</code> 字段编码。</p><p><code>n</code> 的含义也取决于其数值大小：</p><ul><li><strong>区块</strong>：如果 <code>n &lt; 0x40000000</code>（十进制下是 <code>1073741824</code>），那就解释为区块数量。每 1 数字单位 &#x3D; 1 个区块（而一个区块的生产时间大概是 10 分钟）。<ul><li>例如，<code>older(1000)</code> 就表示，一个 UTXO 必须在其得到区块确认（生成）之后，经过 1000 个区块（大约 1 周），才能花费。</li></ul></li><li><strong>时间</strong>：如果 <code>n ≥ 0x40000000</code>，那就解释为时间长度。每 1 数字单位 &#x3D; 512 秒（大约是 8.5 分钟）。<ul><li>例如：<code>older(1073741854)</code> 意味着一个 UTXO 在其诞生的 30 个时间单位之后才能花费（30 * 512 秒 ~&#x3D; 4 小时 15 分钟）。</li></ul></li></ul><p>若要花费带有相对时间锁的路径：</p><ol><li><p>确保 UTXO 的年龄已经满足要求。</p></li><li><p>在创建 PSBT 时，在具体输入的 <code>sequence</code> 字段包含所需的 <code>n</code>。这需要手动指定输入。</p><pre><code>bitcoin-cli -rpcwallet=my_recovered_wallet walletcreatefundedpsbt \
  &#39;[&#123;&quot;txid&quot;:&quot;&lt;txid&gt;&quot;,&quot;vout&quot;:0,&quot;sequence&quot;:n&#125;]&#39; \
  &#39;&#123;&quot;bc1qdestinationaddress...&quot;:0.001&#125;&#39; 0 &#39;&#123;&quot;fee_rate&quot;:2.0&#125;&#39;
</code></pre></li></ol><p>如果你太早尝试花费，这笔交易会被网络拒绝，故障码是这样的：</p><pre><code>non-BIP68-final (code 64)
</code></pre><p><em>注：使用时间锁分支是可选的。只有你的钱包脚本（或者说你的 Miniscript 花费策略）要求的时候，才需要在创建交易时包含这些参数。</em></p><h3 id=签名-PSBT><a href=#签名-PSBT class=headerlink title="签名 PSBT"></a>签名 PSBT</h3><p>取决于你的复原方法：</p><p><strong>选项 1：使用硬件签名器签名（推荐）</strong></p><p>确保已经安装好了 <code>HWI</code> 。连接你的硬件签名器到运行 <code>Bitcoin Core</code> 的电脑。如果你的设备有 PIN 码或者口令，你可能需要先解锁设备。使用下列命令来列出所有已经连接且解锁的硬件签名器：</p><pre><code>hwi enumerate
</code></pre><p>输出：</p><pre><code>[&#123;&quot;type&quot;: &quot;coldcard&quot;, &quot;model&quot;: &quot;coldcard&quot;, &quot;label&quot;: null, &quot;path&quot;: &quot;1-4:1.3&quot;, &quot;needs_pin_sent&quot;: false, &quot;needs_passphrase_sent&quot;: false&#125;]
</code></pre><p><em>注意：<code>HWI</code> 主要支持带有 USB 连接的硬件签名器。Tapsigner 使用 NFC，所以无法连接到 <code>HWI</code> 。如果你的签名条件依赖于一个 Tapsigner ，你可以<a target=_blank rel=noopener href=https://coldcard.com/docs/master-seed/#import-from-tapsigner-to-coldcard>将 Tapsigner 的私钥导入一个 Coldcard 签名器</a>，然后使用 Coldcard 连接 HWI 来签名。</em></p><p><strong>Miniscript 登记和固件</strong></p><p>有些硬件签名器会要求先在设备中登记 Miniscript 钱包，然后才能用来签名交易。此外，你可能需要升级签名设备的固件到支持 Miniscript 的版本。看看硬件制造商的手册吧。</p><p><strong>案例：在 Coldcard (Mk4 Q) 签名器中登记一个 Miniscript 钱包</strong></p><ol><li><strong>升级固件</strong>：确保你的设备固件支持 Miniscript（<a target=_blank rel=noopener href=https://coldcard.com/downloads/edge>Coldcard 最新固件</a>）</li><li><strong>准备 MicroSD 卡</strong>：使用 FAT12 或者 FAT32 文件系统格式化一个 microSD 卡（最大支持 32 GB）。</li><li><strong>导出描述符</strong>：将最初的钱包描述符（没有任何修改的版本）保存为一个 <code>.txt</code> 文件，然后复制这个文件到 microSD 卡。</li><li><strong>导入 Coldcard</strong>：<ul><li>将 microSD 卡插入你的 Coldcard 。</li><li>在 Coldcard 中，选择 <code>Settings</code> &gt; <code>Miniscript</code> &gt; <code>Import</code> 。</li><li>选择 “ (1) to import the Miniscript wallet file from the SD Card（从 SD 卡导入 Miniscript 钱包文件）”。</li></ul></li></ol><p><strong>签名交易</strong></p><p>在已经连接电脑的设备上签名 PSBT 。将以下命令中的 <code>&lt;device_type&gt;</code>（设备类型）替换成你在上文的 <code>hwi enumerate</code> 命令中得到结果（例如 <code>coldcard</code>、<code>jade</code>、<code>ledger</code>），将 <code>&lt;psbt_string&gt;</code> 替换成你在前面步骤中生成的 PSBT 。</p><pre><code>hwi --device-type &lt;device_type&gt; signtx &lt;psbt_string&gt;
</code></pre><p>结果：</p><pre><code>&#123;
  &quot;psbt&quot;: &quot;cHNidP8BAH0CAAAAAT+...&quot;
&#125;
</code></pre><p>如果你使用的是多签名钱包，或者多密钥的 Miniscript 花费条件，你就要重复上述步骤，直到攒够签名数量：每使用一个签名器完成签名（生成一个新的 PSBT），就将这个新的 PSBT 传递给下一个签名器。</p><p><em>注意：如果你无法按顺序签名（也即，每一个签名器都独立签名原始的 PSBT，而不是经过上一个签名器签名的 PSBT ），你可以将包含不同签名的 PSBT 都收集起来，使用下列命令合并成一个最终的 PSBT</em> ：</p><pre><code>bitcoin-cli combinepsbt &#39;[&quot;psbt1&quot;,&quot;psbt2&quot;]&#39;
</code></pre><p><strong>选项 2：使用 Bitcoin Core 来签名（基于种子词的方法）</strong></p><p>如果你向 <code>Bitcoin Core</code> 直接导入了私钥（<code>xprv</code>）（将下列命令中的 <code>&lt;psbt_string&gt;</code> 替换成你在一开始创建的 PSBT）：</p><pre><code>bitcoin-cli -rpcwallet=my_recovered_wallet walletprocesspsbt &quot;&lt;psbt_string&gt;&quot;
</code></pre><p>输出：</p><pre><code>&#123;
  &quot;psbt&quot;: &quot;cHNidP8BAH0CAAAAAT+...&quot;,
  &quot;complete&quot;: true
&#125;
</code></pre><h3 id=敲定交易并广播><a href=#敲定交易并广播 class=headerlink title=敲定交易并广播></a>敲定交易并广播</h3><p>一旦你的 PSBT 到了完成阶段（<code>&quot;complete&quot;</code> 字段的数值是 <code>true</code>），你就可以敲定它并抽取出交易的十六进制形式：</p><pre><code>bitcoin-cli -rpcwallet=my_recovered_wallet finalizepsbt &quot;&lt;signed_psbt&gt;&quot;
</code></pre><p>结果：</p><pre><code>&#123;
  &quot;hex&quot;: &quot;02000000000101...&quot;,
  &quot;complete&quot;: true
&#125;
</code></pre><p>最后，广播这个十六进制形式的交易（即上面结果 <code>&quot;hex&quot;</code> 字段的数值）到网络中：</p><pre><code>bitcoin-cli sendrawtransaction &quot;&lt;raw_transaction_hex&gt;&quot;
</code></pre><p>输出（交易 ID）：</p><pre><code>b91276af8b6f5ede632aadfb87bf8a9209a43d0a030396cd0c4629a1ec92b87a
</code></pre><h2 id=步骤-6：清理><a href=#步骤-6：清理 class=headerlink title="步骤 6：清理"></a>步骤 6：清理</h2><p>在确认复原成功、钱包中的资金都已经成功转出之后，应该安全地删除你的临时钱包和文件，尤其是你使用了基于种子词的复原方法的话。</p><p>首先，在 <code>Bitcoin Core</code> 中卸载钱包：</p><pre><code>bitcoin-cli -rpcwallet=my_recovered_wallet unloadwallet
</code></pre><p>然后，你可以移除这个钱包的目录：</p><pre><code>rm -rf ~/.bitcoin/wallets/my_recovered_wallet
</code></pre><blockquote><p>编者注：上面这条命令主要用于 Linux 系统。在 Windows 系统中，你可以找出钱包文件的目录并手动删除。</p></blockquote><p>（完）</p></article></div></div></main><script src="/js/post.js?v=1682773100887"></script><script src="/js/highlight.min.js?v=1682773100887"></script><script>var containerEl=document.querySelector(".post-container"),postFontSize=localStorage.getItem("post-font-size")||"16",inputEl=document.querySelector("#size-change-input"),inputEl2=document.querySelector("#size-change-input2");inputEl.value=postFontSize,inputEl2.value=postFontSize,containerEl.style.fontSize=postFontSize+"px",$(function(){function e(t){$(".post-container").css("font-size",t+"px"),localStorage.setItem("post-font-size",t),$("#size-change-input").val(t),$("#size-change-input2").val(t)}$("#size-change-input").on("input propertychange",function(t){e(t.target.value)}),$("#size-change-input2").on("input propertychange",function(t){e(t.target.value)})})</script><script>hljs.initHighlightingOnLoad()</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class=sns-container><a title=nostr target=_blank rel="noopener nofollow" href=https://iris.to/npub1g2qs0ca5kpwlrcfug2em4jelmh65clk3yccwjxrs6hvdpd9qj80q022j4m>Nostr</a><a title=rss target=_blank rel="noopener nofollow" href=/atom.xml>rss</a><a title=telegram target=_blank rel="noopener nofollow" href=//t.me/btcstudyorg>Telegram</a></section></footer><script async src="/js/buttons.js?v=1682773100887"></script><script async src="/js/index.js?v=1682773100887"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JVCJ9XXG1Z")</script><script>var _hmt=_hmt||[];(()=>{var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306",e.async=!0,e.defer=!0,document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)})()</script></body></html>