<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><title>Bitchat，开门，我是 Cashu！</title><meta name=keywords content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name=description content=比特币思想的中文集结地><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1"><link rel=icon href=/favicon.ico><link rel=stylesheet href="/style/common/bulma.css?v=1682773100887"><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href="/style/common/iconfont.css?v=1682773100887"><link rel=stylesheet href="/style/base.css?v=1682773100887"><link rel=stylesheet href="/style/common/helper.css?v=1682773100887"><link rel=stylesheet href="/style/themes/animation.css?v=1682773100887"><script>function ready(){var e=document.querySelector(".body-container"),t=localStorage.getItem("theme")||"light";["light","dark"].includes(t)||(t="light",localStorage.setItem("theme","light")),e.classList.remove("appearance-auto"),e.classList.add("appearance-"+t),quickInitialTheme()}function quickInitialTheme(){var e=localStorage.getItem("theme")||"light",t=document.querySelector(".logo-light"),o=document.querySelector(".logo-dark"),d=document.querySelector("#mobile-header-logo > .logo-light"),l=document.querySelector("#mobile-header-logo > .logo-dark"),a=document.getElementById("theme-btn"),i=document.querySelector(".slide-theme-light"),c=document.querySelector(".slide-theme-dark");document.body.classList.add(e),("dark"===e?(t.classList.add("hidden"),o.classList.remove("hidden"),d.classList.add("hidden"),l.classList.remove("hidden"),a.classList.remove("icon-icon_dark"),a.classList.add("icon-icon_light"),i):c).classList.remove("hidden")}document.addEventListener("DOMContentLoaded",ready)</script><script src="/js/common.js?v=1682773100887"></script><script src=/js/libs/zepto.min.js></script><link rel=stylesheet href="/style/post.css?v=1682773100887"><link rel=stylesheet href="/style/themes/highlight.css?v=1682773100887"><meta name=generator content="Hexo 6.3.0"><link rel=alternate href=/atom.xml title="BTC Study" type=application/atom+xml></head><body class="is-flex is-flex-direction-column" onload=initialTheme()><div class=clip></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id=header><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href=/ ><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id=header-menu><a class="is-inline-block header-activity mr-4" href=/ >首页</a><a class="is-inline-block mr-4" href=/archives>全站目录</a><a class="is-inline-block mr-4" href=/tags>标签</a><a class="is-inline-block mr-4" href=/maps>地图</a><a class="is-inline-block mr-4" href=/tools>工具</a><a class="is-inline-block mr-4" target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input type=range min=12 max=32 step=2></div></div></div><i class="iconfont icon-icon_dark mr-1" id=theme-btn></i><div class=search-wrap><input class=pl-3 id=search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search" id=search-input-btn></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopic><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Bitchat，开门，我是 Cashu！</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn2></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input2 type=range min=12 max=32 step=2></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id=mobile-header><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id=mobile-header-logo><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopicMobile><p class=is-full-height>Bitchat，开门，我是 Cashu！</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class=mobile-search-wrap><div class=search-input><input class=pl-3 id=mobile-search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class=mobile-search-input-btn>搜 索</button></div></div></header><div class=mobile-slide-menu><a class=header-activity href=/ >首页</a><a href=/archives>全站目录</a><a href=/tags>标签</a><a href=/maps>地图</a><a href=/tools>工具</a><a target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class=slide-menu-fontsize><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1682773100887"></script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%BA%86%E8%A7%A3-Bitchat><span class=toc-text>了解 Bitchat</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%93%9D%E7%89%99%E7%BD%91%E7%8A%B6%E7%BB%84%E7%BD%91><span class=toc-text>蓝牙网状组网</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#Noise-%E5%8D%8F%E8%AE%AE><span class=toc-text>Noise 协议</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%B8%B4%E6%97%B6%E5%AF%B9%E7%AD%89%E8%8A%82%E7%82%B9-ID><span class=toc-text>临时对等节点 ID</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#Bitchat-%E6%94%AF%E6%8C%81%E5%AE%8C%E5%85%A8%E7%A6%BB%E7%BA%BF%E3%80%81%E7%A7%81%E5%AF%86%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93><span class=toc-text>Bitchat 支持完全离线、私密的数据传输</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%B8%8E-E-cash-%E7%BB%93%E5%90%88><span class=toc-text>与 E-cash 结合</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%A1%88%E4%BE%8B-1%EF%BC%9A%E6%8E%A5%E6%94%B6%E8%80%85%E7%A6%BB%E7%BA%BF%EF%BC%8C%E5%8F%91%E9%80%81%E8%80%85%E5%9C%A8%E7%BA%BF><span class=toc-text>案例 1：接收者离线，发送者在线</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%A1%88%E4%BE%8B-2%EF%BC%9A%E5%8F%91%E9%80%81%E8%80%85%E7%A6%BB%E7%BA%BF%EF%BC%8C%E6%8E%A5%E6%94%B6%E8%80%85%E5%9C%A8%E7%BA%BF><span class=toc-text>案例 2：发送者离线，接收者在线</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%BF%98%E6%9C%89%E5%85%B6%E5%AE%83%E8%80%83%E8%99%91><span class=toc-text>还有其它考虑</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E4%BD%86%E6%88%91%E5%91%A8%E5%9B%B4%E9%83%BD%E6%98%AF%E6%9C%8B%E5%8F%8B%E5%92%8C%E5%AE%B6%E4%BA%BA-%E2%80%A6%E2%80%A6-%E4%BB%96%E4%BB%AC%E4%BC%9A%E8%80%8D%E6%88%91%E5%90%97%EF%BC%9F><span class=toc-text>但我周围都是朋友和家人 …… 他们会耍我吗？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%9D%83%E8%A1%A1%E5%88%A9%E5%BC%8A%EF%BC%8C%E4%BA%AB%E5%8F%97%E5%86%92%E9%99%A9><span class=toc-text>权衡利弊，享受冒险</span></a></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id=postTitle>Bitchat，开门，我是 Cashu！</h1><div class=page-author><div class="is-flex is-flex-direction-row page-data mr-6"><img class=mr-1 src=/images/default_avatar.png alt=JANUSZ><div class=page-author-info><strong>JANUSZ</strong><time class=has-text-grey datetime=2025-09-08T01:22:16.000Z>2025-09-08</time></div></div><div class=is-flex><a href=/tags/Ecash><i class="page-tag mr-1 px-1">Ecash</i></a></div></div><article class="mt-4 post-content"><blockquote><p><em>作者：JANUSZ</em></p><p><em>来源：<a target=_blank rel=noopener href=https://insider.btcpp.dev/p/knock-knock-its-cashu-bitch>https://insider.btcpp.dev/p/knock-knock-its-cashu-bitch</a></em></p></blockquote><p><img src=/images/knock-knock-its-cashu-bitchat/bitchat-cashu.png alt=img></p><p>我相信，有些事情正在互联网上酝酿。虽然成千上万人都参与其中，<a target=_blank rel=noopener href=https://x.com/januszg_/status/1945958844594606428>我会说</a>我是最先指出来的那个。</p><p>如果你使用 Nostr 协议，或者 Bird app，你可能已经知道了：Jack Dorsey 最近发布了一个 Bitchat 应用。这款应用迅速走红，也引起了这个领域的许多开发者的关注。Cashu 协议的作者 Calle 正在开发 Bitchat 的 <a target=_blank rel=noopener href="https://github.com/permissionlesstech/bitchat-android?tab=readme-ov-file">Android 系统</a>实现，而且 …… 你可能也猜到了：</p><p>一个原生的 Ecash 钱包<a target=_blank rel=noopener href=https://x.com/callebtc/status/1945903479693705607>集成</a>到了这个 Bitchat 移动应用中。</p><p><img src=/../images/knock-knock-its-cashu-bitchat/calle-twitter.png alt=img></p><p>结合了大卫·乔姆式 E-cash 的 <a target=_blank rel=noopener href=https://github.com/permissionlesstech/bitchat/blob/main/WHITEPAPER.md>Bitchat</a> 应用，有望在移动设备上打造一种新的匿名、离线支付方式。以前需要信鸽的事情，现在可以使用 noise 协议。以前需要纸币的事情，现在可以使用大卫·乔姆式 E-cash。</p><p>我的观点是：Bitchat 和 Cashu 是有前景的匿名、离线比特币支付工具。它当然也有所牺牲，但在特定环境下，它们可以给用户提供便捷的离线价值传输方法。在危机时刻，这甚至可以成为一种救命的基础设施。</p><p>有趣的是，就在 Calle 发布公告之前的几个小时，我们团队还在讨论这种组合的功能。本文就是我们的讨论的反映。</p><h2 id=了解-Bitchat><a href=#了解-Bitchat class=headerlink title="了解 Bitchat"></a>了解 Bitchat</h2><p>Bitchat 是一款点对点的即时通讯应用，使用了蓝牙（Bluetooth）协议来跟空间上近距离的对等节点发送消息。它的技术栈可以分成三层：蓝牙网状（mesh）组网，用于消息收发；noise 协议，用于隐私通信；临时对等节点 ID，用于保证身份只暴露给你信任的人。</p><h3 id=蓝牙网状组网><a href=#蓝牙网状组网 class=headerlink title=蓝牙网状组网></a>蓝牙网状组网</h3><p>首先是蓝牙网状组网层。一个网状网络（mesh network）是一个在本地和同地（co-located）对等节点之间创建的局域网络。不同的节点（手机或带有蓝牙芯片的笔记本电脑）发现并连接彼此。一旦通过蓝牙和组网协议连接成功，他们就可以在彼此间传输数据。</p><p>在一个网状网络中，每一台手机都既是数据包的发送者，又是数据包的转发者。这意味着，一台设备可以既是一段数据的接收者，又能转发这段数据给网络中的另一个接收者。单个蓝牙设备的通讯范围是有限的，所以这种 本地-对等节点 转发特性扩大了网络中的每一个节点的通讯范围，让每个人的连接能力都超过自己的设备的连接能力。</p><p>设想一个简单的例子。Alice 需要给 200 码以外的 Charlie 发送一条消息；而 Bob 刚好在两者中间，离 Alice 和 Charlie 给自只有 100 码远。Alice、Bob 和 Charlie 都在同一个网状网络中。那么 Alice 可以通过广播模式来发送消息，而 Bob 会转发它，然后 Charlie 就能收到。一旦 Charlie 收到了数据，就能解密数据、读出内容。</p><p>至于在网络中转发的数据包的加密和解密，Bitchat 使用 noise 协议。</p><h3 id=Noise-协议><a href=#Noise-协议 class=headerlink title="Noise 协议"></a>Noise 协议</h3><p>“<a target=_blank rel=noopener href=https://noiseprotocol.org/noise.html#introduction>Noise（噪音）协议</a>” 是由加密聊天应用 Signal 的创始机构 OpenWhisper Systems 提出的，是一种在两个希望交换私密消息的对等节点之间建立加密通信的框架。</p><p>它首先是一套 “握手协议”：允许两个对等节点使用 迪菲-赫尔曼 密钥交换（Diffie-Hellman key exchange）来建立一个安全的、加密的连接，用于持续的私密通信。仅仅使用 DH 密钥交换，噪音协议就能启用端到端加密、前向保密（forward secrecy）、身份隐藏和身份验证。</p><p>Bitchat 使用一个 3 步骤的 Noise XX 握手。两个用户在彼此间建立一个安全的信道（也叫 “噪音会话”），双方后续交换的所有消息都将是私密通信。</p><p>为了建立这样的连接，其中一个对等节点初始化握手阶段，另一个对等节点响应。在成功交换 3 条消息之后，他们就能使用一个共享的加密密钥来继续私密通信。</p><p>会话的密钥会轮换，或者说 “刷新”；每 10000 条消息或者 1 小时轮换一次，以实现健壮的前向保密。</p><h3 id=临时对等节点-ID><a href=#临时对等节点-ID class=headerlink title="临时对等节点 ID"></a>临时对等节点 ID</h3><p>蓝牙让对等节点可以交换数据包；噪音握手协议让对等节点可以加密数据包中的消息；那么，怎么做到既能知道跟自己通信的人是谁、又能持续保持匿名呢？</p><p>这就要用到 “临时对等节点 ID” 了。</p><p>临时对等节点 ID 确保对等节点的 ID 会定期轮换。这意味着，在一个聊天中的用户的 ID 会经常改变（改变的间隔是随机的）。在 Bitchat 中，每 5 到 15 分钟，以及会话终止的时候，ID 就会改变。Bitchat 的会话管理<a target=_blank rel=noopener href=https://github.com/permissionlesstech/bitchat/blob/main/bitchat/Identity/SecureIdentityStateManager.swift>框架</a>保证了这些对等节点 ID 会在一段会话过期之后被妥当地丢弃。</p><p>在一次噪音握手期间，应用会将最新的临时 ID <a target=_blank rel=noopener href=https://github.com/permissionlesstech/bitchat/blob/main/bitchat/Services/NoiseEncryptionService.swift>关联</a>起来，然后将它们映射为接收者用户公钥的 SHA256 指纹。这保证了即使在一次会话过期之后，已经验证彼此关系的用户也能在对方那里获得一个长久的身份。用户也可以为已经验证了关系的对等节点节点安排社交名称。</p><p>用户可以维护与对等节点之间的安全关系，同时防止更广泛网络中的跟踪。</p><h3 id=Bitchat-支持完全离线、私密的数据传输><a href=#Bitchat-支持完全离线、私密的数据传输 class=headerlink title="Bitchat 支持完全离线、私密的数据传输"></a>Bitchat 支持完全离线、私密的数据传输</h3><p>使用蓝牙网状组网、Noise 加密信道和临时 ID，Bitchat 让用户可以连接到一个更广大的点对点网络、并在其中发送加密消息。用户不需要向网络的其他参与者揭晓自身身份，仅在已经建立的安全连接中揭晓身份。</p><p>在许许多多<a target=_blank rel=noopener href=https://github.com/permissionlesstech/bitchat/blob/main/WHITEPAPER.md#real-world-applications>场景</a>中，Bitchat 都会有用。它可以用在互联网基础设施和信号塔无法工作的地方。以及，它也可以用在更加普通的情景中 —— 比如，你在一场音乐会上，手机收不到互联网信号。</p><p>对于注重隐私的人来说，它提供了对互联网加密聊天应用的替代。蓝牙通信，意味着你不会向信号塔暴露自己的位置。</p><p>如果我们在发送比特币的时候，也能保持同样的操作安全性，那就好了 ……</p><h2 id=与-E-cash-结合><a href=#与-E-cash-结合 class=headerlink title="与 E-cash 结合"></a>与 E-cash 结合</h2><p>Calle 在昨天给 Bitchat 提出了另一种用途：在离线的时候，通过一个网状网络传输以比特币背书的 token 。</p><p>Calle 在 2022 年发明了 Cashu 协议，这是一种大卫·乔姆式 e-cash 支付协议，让用户可以使用不记名的 token 来转移资金。大卫·乔姆式支付系统依赖于 “铸币厂（mint）”，其吸收来自用户的底层资产、发行让用户可以用作支付工具的 e-cash token 。以比特币为本位的 e-cash 铸币厂持有用户存入的链上比特币（译者注：此处理解应有误。Cashu 协议中，铸币厂收取的是闪电支付，而非链上比特币支付）。铸币厂的运营者被信任会保管资金，直至 e-cash token 的持有人要求以 e-cash token 赎回资产，也即保证铸币厂所发行的不记名 token 始终有足额的储备。铸币厂也理所当然不应发行超出自身比特币储备的 e-cash token 。人们期待一个铸币厂所发行的 e-cash token 的价值会跟该铸币厂的比特币储备额相等。通过移除资金托管的顾虑，e-cash 铸币厂为建立面向朋友、家人和社区的比特币托管服务降低了进入门槛。</p><p>Cashu 协议也提供了一种离线支付特性。即使支付发送者没有互联网连接，也依然能使用 e-cash 来传输价值，办法是通过一种通道通道，将 token 发送给支付接收者；无论是蓝牙还是 NFC，都没有问题。但离线使用 e-cash 会遇到一个问题 —— 参与支付的其中一方需要上线以敲定这次交易。</p><h3 id=案例-1：接收者离线，发送者在线><a href=#案例-1：接收者离线，发送者在线 class=headerlink title="案例 1：接收者离线，发送者在线"></a>案例 1：接收者离线，发送者在线</h3><p>如果接收者没有互联网连接，那么发送者可以将 token 锁定到接收者的公钥。Cashu 的 Pay-to-Public-Key（P2PK）特性让用户可以这样做。只有接收者的私钥能够生成有效的签名，来解锁这样的 e-cash 。</p><p>我们来看看 <a target=_blank rel=noopener href=https://github.com/cashubtc/nuts/blob/main/11.md>Cashu 协议说明书</a>所提供的一个例子。当接收者离线的时候，发送者构造一笔交易，支付给离线接收者的公钥。然后，发送者将这笔交易提交给铸币厂、并将接收者的公钥作为一个秘密值嵌入。铸币厂提供一个对该秘密值的盲签名，从而让接收者成为唯一能解锁这笔资金的人。发送者将这笔交易以及铸币厂的盲签名发送给接收者；在接收者想要花掉这笔钱的时候，可以生成一个签名来解锁这笔 e-cash token 。</p><pre><code>&#123;
&quot;amount&quot;: 1,
&quot;secret&quot;: &quot;[\&quot;P2PK\&quot;,&#123;\&quot;nonce\&quot;:\&quot;859d4935c4907062a6297cf4e663e2835d90d97ecdd510745d32f6816323a41f\&quot;,\&quot;data\&quot;:\&quot;0249098aa8b9d2fbec49ff8598feb17b592b986e62319a4fa488a3dc36387157a7\&quot;,\&quot;tags\&quot;:[[\&quot;sigflag\&quot;,\&quot;SIG_INPUTS\&quot;]]&#125;]&quot;,
&quot;C&quot;: &quot;02698c4e2b5f9534cd0687d87513c759790cf829aa5739184a3e3735471fbda904&quot;,
&quot;id&quot;: &quot;009a1f293253e41e&quot;,
&quot;witness&quot;: &quot;&#123;\&quot;signatures\&quot;:[\&quot;60f3c9b766770b46caac1d27e1ae6b77c8866ebaeba0b9489fe6a15a837eaa6fcd6eaa825499c72ac342983983fd3ba3a8a41f56677cc99ffd73da68b59e1383\&quot;]&#125;&quot;
&#125;
</code></pre><p>在上面的代码片段中，我们可以看到 “amount（数额）”、“secret（秘密值）”、“C（来自铸币厂的盲签名）”、“id” 和 “witness（见证）” 字段。</p><p>“amount” 字段的数值就是被这笔交易花费的 e-cash 数额。在这个例子中是 “1”，表示 1 聪。</p><p>“secret” 则是接收者的公钥。</p><p>当发送者将交易提交给这个铸币厂的时候，这个铸币厂生成了一个盲签名，就放在证据 “C” 字段中。只有接收者才能生成一个有效签名，来解锁发送给这个公钥的资金。</p><p>在回到线上的时候，这个 e-cash token 的接收者可以对 “secret” 中的序列化数据生成一个签名，然后放在 “witness” 字段中。</p><p>在这里，接收者（因为不在线）并不知道字段 “C” 中的盲签名是不是该铸币厂的有效签名。为此，我们要利用 “<a target=_blank rel=noopener href=https://github.com/cashubtc/nuts/blob/main/12.md>DLEQ</a>（离散对数相等证据）”，为铸币厂的每一个签名生成这样的证据。这些证据让验证者能验证签名来自铸币厂的私钥，而无需上线并与铸币厂比对。这样，接收者就能确信，TA 收到的 e-cash token 是来自这个铸币厂的有效 token 。</p><p>这个案例 <em>要求</em> 发送者<strong>在线</strong>，以发送 P2PK 交易，因为铸币厂需要生成一个盲签名，跟接收者的公钥绑定。</p><h3 id=案例-2：发送者离线，接收者在线><a href=#案例-2：发送者离线，接收者在线 class=headerlink title="案例 2：发送者离线，接收者在线"></a>案例 2：发送者离线，接收者在线</h3><p><em>在翻看 Cashu 协议规范的时候我曾经犯过错误。我曾以为离线的发送者也能构造 P2PK 交易。这是错误的。以下是一个经过与 Cashu 贡献者们讨论之后修正的例子。</em></p><p>上面这个案例反过来行不行呢？能不能在发送者离线的请胯下，让铸币厂来强制执行一笔离线的转账的花费条件？</p><p>简单的回答是 “不能”。因为发送者不能离线构造定制化的证据。这意味着，如果他们离线，就不能构造一笔 P2PK 交易从而将 e-cash token 锁定到接收者的某个公钥，也不能分割 token 的面值。</p><p>但是，在离线的时候，发送者依然可以发送自己（以客户端身份持有的）token 。他们可以通过互联网之外的一条消息通道发送给接收者，让<strong>接收者</strong>负责跟铸币厂兑现。在接收者跟铸币厂兑现之后，交易就被认为完结了。</p><p>这里会引入信任。如果接收者并不立即跟铸币厂兑现收到的 e-cash token，发送者是有可能重复花费的。所以，在发送者离线的情形中，接收者应该尽可能快地联系铸币厂，以将交易敲定。</p><h3 id=还有其它考虑><a href=#还有其它考虑 class=headerlink title=还有其它考虑></a>还有其它考虑</h3><p><strong>在上面两个例子中，都需要一方在线，才能敲定支付</strong>。而且，关于离线支付，还有别的考虑：</p><ul><li>用户只能使用自己钱包当前持有的面额。要拆分面额，需要直接联系铸币厂，以创建不同面额的 e-cash token（译者注：e-cash token 就像纸币一样，是有面额的，而且面额一定是 2 的幂）。</li><li>用户不能花费刚刚离线收到的 token，要回到线上，将这些 token “熔成” 自己钱包的余额才行。</li><li>如果铸币厂也离线了，那我们必须信任他们有必要的备份，可以回到线上。</li><li>如果铸币厂离线了，对等节点之间的交易是无法敲定的。</li></ul><p>所以，使用 Bitchat 的 Cashu 是一种永久的、“可以放心离线几个月” 的解决方案吗？可能不是。但在特定的场合下，保持离线同时发送 e-cash token，对于没有或者不想要连接互联网的用户来说，是一种可行的选择。</p><p>案例 #1：我想要在音乐会上跟一个朋友买杯啤酒，但手机没有信号，因为会场聚集了一万个人。他去了另一个舞台，那里人更少，所以他有信号。那么我只需给他发送价值几千聪的 e-cash token，他可以敲定交易（因为他有网络信号）。</p><p>案例 #2：台风刚过，我家的发电机没有油了。我需要去镇上采购一些。但我到了镇上，才发现我的钱包离并没有 e-cash token …… 所以我通过 Bitchat，跟我的妻子和商家建了一个群聊，让她直接给商家发一些 e-cash token 。加油站有电（他们的发电机不会停转），所以他们能连接 WiFi 。这笔支付可以跟铸币厂敲定、变成商家的钱包的余额。</p><p>不管怎么说，这两个案例，都可以通过 Bitchat 来协调，发送者不需要互联网连接。而且，因为 bitchat 网状网络可以拓展离线参与者的通信范围，还有许许多多的场景，离线的支付发送者或接收者，可以通过 Bitchat&#x2F;Cashu 组合来交换价值。</p><h3 id=但我周围都是朋友和家人-……-他们会耍我吗？><a href=#但我周围都是朋友和家人-……-他们会耍我吗？ class=headerlink title="但我周围都是朋友和家人 …… 他们会耍我吗？"></a>但我周围都是朋友和家人 …… 他们会耍我吗？</h3><p>关于 e-cash 交易是否至少要有一方在线，我似乎有一些误解。昨天，我以为双方都可以离线。但在跟 <a target=_blank rel=noopener href=https://x.com/niftynei>niftynei</a> 和 <a target=_blank rel=noopener href=http://primal.net/p/nprofile1qqsfvst7m8feycms4zr5xr70jz6xlwcfa2jgj8hvn0wg06gzv6cz54grfrkq8>Tuma</a> 交流并且阅读了协议规范之后，我可以看出，至少一方需要连接到铸币厂，以保证交易可以敲定（如前所述）。</p><p>Bitchat 让用户可以跟自己信任的人建立安全的通信通道：朋友、客户，等等。如果你在跟你信任的人联络和做交易，你可以在双方都离线的情况下继续转账。只要 e-cash token 不会复制，理论上，双方可以完全离线地交换 token，而在重新联网后，可以毫无障碍地赎回底层资产或者熔铸成 e-cash 钱包余额。</p><p>如果嵌入 bitchat 应用的 e-cash 钱包允许在已经建立安全连接的聊天中发起 离线对离线 的支付，那会怎么样？你必须信任对方的 bitchat 应用不会保存副本或者转发 token，但确实是可行的。</p><p>在上面的台风案例中，如果商家和我都没有互联网连接，我们可以使用这种全离线模式来创建一笔交易（让我可以支付给商家）。商家等待自己有网络连接时再联系铸币厂、领取 token 。</p><p>这时候，发送者必须是诚实的、不会抢在接收者前面回到网上重复花费。而且，当前的钱包实现甚至不允许发送未熔铸的 e-cash token。但如果钱包能做到，那么上述案例就可能是对等节点在可信的公共环节中，以完全离线的方式传输价值。</p><h2 id=权衡利弊，享受冒险><a href=#权衡利弊，享受冒险 class=headerlink title=权衡利弊，享受冒险></a>权衡利弊，享受冒险</h2><p>在 Bitchat 上使用 E-cash 是一个很酷的实验。离线支付是 e-cash 的强大武器，与 Bitchat 应用协同工作是有前景的。</p><p>交易的其中一位参与者需要在线。通过 Bitchat 的组网功能，我们可以扩大离线参与者发起、接受支付的地理范围。这是一个新领域，不仅对比特币来说，也对广大的支付应用领域来说也是如此。</p><p>有一个显然的遗憾在于，e-cash 所用的不记名 token 不是原生的比特币。我们必须听从开发者的指导，一以贯之地诚实对待用户：整个协议是基于托管的。但在主链之外使用比特币 <em>总会</em> 有所牺牲。</p><p>在特定的场景中，Bitchat 和大卫·乔姆式 e-cash 可以提供临时的（可能会是关键的）支付基础设施。对于暂时没有（或者不想要）互联网（或信号塔）连接的人来说，也是一个用户体验提升。全离线模式支付将让他们能够在一个开放（但相互信任）的环境中发起链下价值转移。</p><p>Cashu 和 Bitchat 互相独立，没有依赖关系。两种解决方案都会继续得到开发并获得更多采用，不需要等待另一者的成功。</p><p>但是，事实上，可以通过 Bitchat 来发送 e-cash token，会让一个孩子好奇完全离线支付的未来。</p><p>这能怪他吗？</p><p>（完）</p></article></div></div></main><script src="/js/post.js?v=1682773100887"></script><script src="/js/highlight.min.js?v=1682773100887"></script><script>var containerEl=document.querySelector(".post-container"),postFontSize=localStorage.getItem("post-font-size")||"16",inputEl=document.querySelector("#size-change-input"),inputEl2=document.querySelector("#size-change-input2");inputEl.value=postFontSize,inputEl2.value=postFontSize,containerEl.style.fontSize=postFontSize+"px",$(function(){function e(t){$(".post-container").css("font-size",t+"px"),localStorage.setItem("post-font-size",t),$("#size-change-input").val(t),$("#size-change-input2").val(t)}$("#size-change-input").on("input propertychange",function(t){e(t.target.value)}),$("#size-change-input2").on("input propertychange",function(t){e(t.target.value)})})</script><script>hljs.initHighlightingOnLoad()</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class=sns-container><a title=nostr target=_blank rel="noopener nofollow" href=https://iris.to/npub1g2qs0ca5kpwlrcfug2em4jelmh65clk3yccwjxrs6hvdpd9qj80q022j4m>Nostr</a><a title=rss target=_blank rel="noopener nofollow" href=/atom.xml>rss</a><a title=telegram target=_blank rel="noopener nofollow" href=//t.me/btcstudyorg>Telegram</a></section></footer><script async src="/js/buttons.js?v=1682773100887"></script><script async src="/js/index.js?v=1682773100887"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JVCJ9XXG1Z")</script><script>var _hmt=_hmt||[];(()=>{var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306",e.async=!0,e.defer=!0,document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)})()</script></body></html>