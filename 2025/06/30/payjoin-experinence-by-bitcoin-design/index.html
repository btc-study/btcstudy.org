<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><title>案例研究：Payjoin 的使用体验和交互设计</title><meta name=keywords content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name=description content=比特币思想的中文集结地><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1"><link rel=icon href=/favicon.ico><link rel=stylesheet href="/style/common/bulma.css?v=1682773100887"><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href="/style/common/iconfont.css?v=1682773100887"><link rel=stylesheet href="/style/base.css?v=1682773100887"><link rel=stylesheet href="/style/common/helper.css?v=1682773100887"><link rel=stylesheet href="/style/themes/animation.css?v=1682773100887"><script>function ready(){var e=document.querySelector(".body-container"),t=localStorage.getItem("theme")||"light";["light","dark"].includes(t)||(t="light",localStorage.setItem("theme","light")),e.classList.remove("appearance-auto"),e.classList.add("appearance-"+t),quickInitialTheme()}function quickInitialTheme(){var e=localStorage.getItem("theme")||"light",t=document.querySelector(".logo-light"),o=document.querySelector(".logo-dark"),d=document.querySelector("#mobile-header-logo > .logo-light"),l=document.querySelector("#mobile-header-logo > .logo-dark"),a=document.getElementById("theme-btn"),i=document.querySelector(".slide-theme-light"),c=document.querySelector(".slide-theme-dark");document.body.classList.add(e),("dark"===e?(t.classList.add("hidden"),o.classList.remove("hidden"),d.classList.add("hidden"),l.classList.remove("hidden"),a.classList.remove("icon-icon_dark"),a.classList.add("icon-icon_light"),i):c).classList.remove("hidden")}document.addEventListener("DOMContentLoaded",ready)</script><script src="/js/common.js?v=1682773100887"></script><script src=/js/libs/zepto.min.js></script><link rel=stylesheet href="/style/post.css?v=1682773100887"><link rel=stylesheet href="/style/themes/highlight.css?v=1682773100887"><meta name=generator content="Hexo 6.3.0"><link rel=alternate href=/atom.xml title="BTC Study" type=application/atom+xml></head><body class="is-flex is-flex-direction-column" onload=initialTheme()><div class=clip></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id=header><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href=/ ><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id=header-menu><a class="is-inline-block header-activity mr-4" href=/ >首页</a><a class="is-inline-block mr-4" href=/archives>全站目录</a><a class="is-inline-block mr-4" href=/tags>标签</a><a class="is-inline-block mr-4" href=/maps>地图</a><a class="is-inline-block mr-4" href=/mempool>mempool</a><a class="is-inline-block mr-4" target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input type=range min=12 max=32 step=2></div></div></div><i class="iconfont icon-icon_dark mr-1" id=theme-btn></i><div class=search-wrap><input class=pl-3 id=search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search" id=search-input-btn></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopic><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">案例研究：Payjoin 的使用体验和交互设计</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn2></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input2 type=range min=12 max=32 step=2></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id=mobile-header><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id=mobile-header-logo><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopicMobile><p class=is-full-height>案例研究：Payjoin 的使用体验和交互设计</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class=mobile-search-wrap><div class=search-input><input class=pl-3 id=mobile-search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class=mobile-search-input-btn>搜 索</button></div></div></header><div class=mobile-slide-menu><a class=header-activity href=/ >首页</a><a href=/archives>全站目录</a><a href=/tags>标签</a><a href=/maps>地图</a><a href=/mempool>mempool</a><a target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class=slide-menu-fontsize><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1682773100887"></script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%BB%80%E4%B9%88%E6%98%AF-Payjoin%EF%BC%9F><span class=toc-text>什么是 Payjoin？</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E8%83%8C%E6%99%AF><span class=toc-text>背景</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%88%91%E4%BB%AC%E7%9A%84%E6%96%B9%E6%B3%95><span class=toc-text>我们的方法</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E7%90%86%E8%A7%A3%E7%94%A8%E6%88%B7%E4%B8%8E%E9%9C%80%E6%B1%82><span class=toc-text>理解用户与需求</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%8F%91%E9%80%81-Payjoin><span class=toc-text>发送 Payjoin</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%B0%83%E7%A0%94%EF%BC%9A%E5%88%86%E6%9E%90-BlueWallet><span class=toc-text>调研：分析 BlueWallet</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#Payjoin-%E5%8F%91%E9%80%81%E6%96%B9%E6%B5%81%E7%A8%8B><span class=toc-text>Payjoin 发送方流程</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#Payjoin-%E2%80%9C%E6%8F%A1%E6%89%8B%EF%BC%88Handshake%EF%BC%89%E2%80%9D><span class=toc-text>Payjoin “握手（Handshake）”</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#Payjoin-%E5%8F%91%E9%80%81%E6%96%B9%E6%B5%81%E7%A8%8B%E5%8E%9F%E5%9E%8B><span class=toc-text>Payjoin 发送方流程原型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%8E%A5%E6%94%B6-Payjoin><span class=toc-text>接收 Payjoin</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%B0%83%E7%A0%94%EF%BC%9A-BTCPay-%E5%95%86%E6%88%B7-%E6%8E%A5%E6%94%B6%E7%AB%AF><span class=toc-text>调研： BTCPay 商户&#x2F;接收端</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E5%BB%BA%E8%AE%AE%E7%9A%84%E6%8E%A5%E6%94%B6%E6%96%B9%E6%B5%81%E7%A8%8B><span class=toc-text>建议的接收方流程</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E8%AF%B7%E6%B1%82-Payjoin><span class=toc-text>请求 Payjoin</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#Payjoin-%E7%8A%B6%E6%80%81-%E8%AE%BE%E7%BD%AE><span class=toc-text>Payjoin 状态&#x2F;设置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%B4%9E%E8%A7%81><span class=toc-text>洞见</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%96%B0%E7%9A%84%E5%8F%AF%E8%83%BD><span class=toc-text>新的可能</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E8%B5%84%E6%BA%90><span class=toc-text>资源</span></a></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id=postTitle>案例研究：Payjoin 的使用体验和交互设计</h1><div class=page-author><div class="is-flex is-flex-direction-row page-data mr-6"><img class=mr-1 src=/images/default_avatar.png alt="Bitcoin Design"><div class=page-author-info><strong>Bitcoin Design</strong><time class=has-text-grey datetime=2025-06-30T01:46:20.000Z>2025-06-30</time></div></div><div class=is-flex><a href=/tags/PayJoin><i class="page-tag mr-1 px-1">PayJoin</i></a></div></div><article class="mt-4 post-content"><blockquote><p><em>作者：Bitcoin Design</em></p><p><em>来源：<a target=_blank rel=noopener href=https://bitcoin.design/guide/case-studies/payjoin/ >https://bitcoin.design/guide/case-studies/payjoin/</a></em></p></blockquote><p>Payjoin 指的是发送方和接收方通过协作来共同构建一笔比特币交易。作为一种强大的工具，Payjoin 交易能为用户提升隐私性、节省手续费，并整合 UTXO。但由于其交互式和同步的特性，Payjoin 也面临着一些挑战和权衡。</p><p><strong>在支付过程中，Payjoin 交易能够打破一些链上分析的<a target=_blank rel=noopener href=https://github.com/bitcoin/bips/blob/master/bip-0078.mediawiki#motivation>启发式算法</a>。然而，构建这种交易需要发送方和接收方通过一个端点进行实时协调。</strong></p><p>本案例研究将:</p><ul><li>阐明发送方和接收方各自的动机与目标。</li><li>分析交易双方的 Payjoin 用户体验（UX），并提出相应的设计方法。</li><li>提出具体的用户流程，并尽可能提供可行的设计方案。</li></ul><p>本研究的核心结论是：对于接收方而言，虽然初始设置较为繁琐，但后续每笔交易几乎无需任何额外操作。</p><p>而对于发送方来说，除了要使用支持 Payjoin 的钱包外，几乎无需额外设置。并且，根据他们的选择以及具体实现方案的成熟度，其用户体验可以做到与普通交易完全相同或几乎一致。</p><h2 id=什么是-Payjoin？><a href=#什么是-Payjoin？ class=headerlink title="什么是 Payjoin？"></a>什么是 Payjoin？</h2><p>在 Payjoin 交易中，发送方和接收方会以协作的方式，共同为这笔交易贡献输入。Payjoin 机制也被称为“Pay-to-Endpoint”（P2EP），因为整个协作过程是由接收方运行的一个网络端点（endpoint）来协调的。这个端点的地址会和支付地址、金额信息一起，通过 <a target=_blank rel=noopener href=https://bitcoinqr.dev/ >BIP-21</a> 格式的 URI 来传递。</p><p>在 Payjoin 的流程中，双方会对交易进行编辑、签名和多次传递，直到最终版本确认后才进行广播。 <a target=_blank rel=noopener href=https://github.com/bitcoin/bips/blob/master/bip-0078.mediawiki#user-content-Respecting_the_minimum_relay_fee_policy>BIP-78</a> 提案正式定义了一个包含两轮交互（或在地址共享之外，再进行一轮交互）的协议，正如下处图示。</p><p><img src=/images/payjoin-experinence-by-bitcoin-design/cess@2x.png alt=BIP78></p><h2 id=背景><a href=#背景 class=headerlink title=背景></a>背景</h2><p>本案例研究源于一项<a target=_blank rel=noopener href=https://bitcoin.design/guide/resources/design-challenges/#challenge-6-private-purchase>设计挑战</a>，目标是设计一个基于 Payjoin 的发送方支付流程。</p><p>Payjoin 对交易双方的实时协作提出了独特的挑战，我们需要一套全新的用户流程，才能健壮而优雅地实现 <a target=_blank rel=noopener href=https://github.com/bitcoin/bips/blob/master/bip-0078.mediawiki>BIP-78</a> 所启用的各项功能。</p><p>截至 2023 年初，Payjoin 尚未在比特币生态中获得广泛的采用。</p><h2 id=我们的方法><a href=#我们的方法 class=headerlink title=我们的方法></a>我们的方法</h2><p>本案例研究遵循了以下步骤：</p><ul><li>理解发送方与接收方的用户及技术要求。</li><li>调研 Payjoin 的具体实现： <a target=_blank rel=noopener href=https://bluewallet.io/ >BlueWallet</a> （发送端）和 <a target=_blank rel=noopener href=https://btcpayserver.org/ >BTCPay Server</a> （接收端）</li><li>基于以上研究，为发送方和接收方设计用户流程。</li></ul><h2 id=理解用户与需求><a href=#理解用户与需求 class=headerlink title=理解用户与需求></a>理解用户与需求</h2><p>从技术上来讲，任何在比特币链上进行交易的人都可以使用 Payjoin。本案例研究从以下两个维度对用户进行分类：</p><ol><li>机构（企业、交易所等）与个人</li><li>支付的发送方与接收方</li></ol><p><strong>接收方的目标</strong></p><ul><li>交易隐私性</li><li>节省手续费</li><li>成功交易</li></ul><p><strong>作为接收方，我希望：</strong></p><ul><li>创建一个启用 Payjoin 的支付链接并分享给发送方。</li><li>能为某个钱包、账户或用户启用 Payjoin 功能。</li><li>创建一个热钱包并将其用于 Payjoin。</li><li>为新创建的热钱包充值，使其拥有可供使用的 UTXO。</li><li>将一个已有的热钱包连接到我的 Payjoin 设置中。</li><li>补充主钱包（观察钱包）的余额。</li><li>设置地址替换，以便补充观察钱包余额或进行无关支付。</li><li>监控 Payjoin 的状态。</li><li>排查 Payjoin 流程中的错误。</li></ul><p><strong>发送方的目标</strong></p><ul><li>交易隐私性</li><li>优化手续费并控制确认时间</li><li>交易成功</li></ul><p><strong>作为发送方，我希望：</strong></p><ul><li>使用 Payjoin 进行隐私支付，打破链上启发式分析法。</li><li>支付时自行选择是否使用 Payjoin。</li><li>在交易广播前查看要支付的手续费。</li><li>控制交易的确认时间。</li><li>若 Payjoin 流程失败，能够中止交易。</li></ul><p><strong>发送方要求</strong></p><ul><li>一款支持发送 Payjoin 的应用</li><li>在 Payjoin 交易过程中全程保持在线</li></ul><p>发送方通过 Payjoin 获得隐私保护，通常需要承担更高的交易手续费。</p><p><strong>接收方要求</strong></p><ul><li>热钱包</li><li>热钱包中有资金</li><li>一款支持接收 Payjoin 的应用</li><li>一个在交易期间保持在线的端点</li></ul><p>接收方有望获得以下好处:</p><ul><li>增强交易的隐私性</li><li>整合 UTXO 集合</li><li>节省交易手续费</li></ul><h2 id=发送-Payjoin><a href=#发送-Payjoin class=headerlink title="发送 Payjoin"></a>发送 Payjoin</h2><p>对于发送方来说，参与 Payjoin 交易的流程相对简单。只需使用支持 Payjoin 的钱包，并在交易过程中保持在线即可。</p><h3 id=调研：分析-BlueWallet><a href=#调研：分析-BlueWallet class=headerlink title="调研：分析 BlueWallet"></a>调研：分析 BlueWallet</h3><p>我们分析了 BlueWallet 在 2020 年率先实现的 Payjoin 用户流程。详细内容见<a target=_blank rel=noopener href="https://docs.google.com/document/d/1_de2pkMREGpZQwOefQdH-MZNSUPazObgRK1cruiWBmo/edit#bookmark=id.jamlvi37p922">调研报告</a>.</p><p><img src=/../images/payjoin-experinence-by-bitcoin-design/payjoin-sender-process.svg alt=payjoin-sender-process></p><p>主要发现如下：</p><ul><li>在 Payjoin 的交易流程中，随着交易体积的增加，实际的手续费率会下降，可能影响预估的交易确认时间。</li><li>该流程产生的交易在移除一个输入后，其手续费率会变为一个整数，而这可能成为链上分析公司识别 Payjoin 的线索。</li></ul><h3 id=Payjoin-发送方流程><a href=#Payjoin-发送方流程 class=headerlink title="Payjoin 发送方流程"></a>Payjoin 发送方流程</h3><p>我们设计了一套新的发送方流程，试图解决上述问题。</p><p>为了创建这套流程，我们假设接收方只提供 UTXO 而不承担手续费，因为这样可以让双方的流程更简单和自动化。</p><p><strong>简而言之，我们设计的这套发送方流程要求用户选择一个手续费区间，而非具体的手续费金额（或费率），而流程的其余部分则与普通交易几乎一致。我们通过这个设计来设置 BIP-78 中规定的 3个可选参数，从而构建一个简洁而高效的 Payjoin 实现方案。</strong></p><p><img src=/../images/payjoin-experinence-by-bitcoin-design/payjoin-new-process.svg alt=payjoin-new-process></p><p>详细思路见此<a target=_blank rel=noopener href="https://docs.google.com/document/d/1IPCQsdoVBGEceUnWhOeEhi-xcNF049RG1tRAchz-Iuc/edit?usp=sharing">文档</a>.</p><p>可通过此 <a target=_blank rel=noopener href="https://www.figma.com/file/69uUDWVc8N9t5Bej8pZEsF/PayJoin-User-Flows?node-id=0:1&t=8eOBQa7JofjZ3p3z-1">Figjam 文件</a> 查看该流程。详细过程和考量见此 <a target=_blank rel=noopener href="https://www.figma.com/file/NzMvwyzP7x5jfGmwNUKRov/PayJoin-Process-Flows?node-id=336:619&t=BhGymSWCzl2Xm2oO-1">文件</a>。</p><h3 id=Payjoin-“握手（Handshake）”><a href=#Payjoin-“握手（Handshake）” class=headerlink title="Payjoin “握手（Handshake）”"></a>Payjoin “握手（Handshake）”</h3><p><strong>我们引入“Payjoin 握手”这一术语，旨在简洁地描述发送方与接收方之间自动化的往返交互过程。在此过程中，一份最初仅包含发送方输入的 PSBT，会转变为一份包含双方输入、已签名且可广播的最终交易。</strong></p><p>以上步骤对于参与交易的用户来说并不重要，也无需他们任何一方执行额外的操作。通俗地说，交易双方甚至无需察觉这一过程，只要在交易过程中保持在线即可。</p><h3 id=Payjoin-发送方流程原型><a href=#Payjoin-发送方流程原型 class=headerlink title="Payjoin 发送方流程原型"></a>Payjoin 发送方流程原型</h3><p><strong>我们的目标是让这套用户流程的体验无限接近于常规流程。对于那些必须有所区别的环节，我们会通过 UI 来指导和帮助用户。</strong></p><p><img src=/../images/payjoin-experinence-by-bitcoin-design/join-tx.png alt="A create transaction screen displaying an address, amount, a payjoin toggle enabled by default with a Proceed to Fee Estimate button."></p><p>支持 Payjoin 的钱包会展示一个默认启用该功能的界面。</p><p><img src=/../images/payjoin-experinence-by-bitcoin-design/lection.png alt="A fee range selection screen presenting 3 options with associated confirmation estimates. Help text informs the user that the fees will be finalized once the payjoin process is done."></p><p>用户会看到一个和常规界面非常相似的手续费区间选择页。</p><p><img src=/../images/payjoin-experinence-by-bitcoin-design/nsition.png alt="A transition screen shown informing the user that the payjoin process is in process."></p><p>接着，屏幕会显示一个过渡界面，提示用户 Payjoin 交易正在构建和签名中。</p><p><img src=/../images/payjoin-experinence-by-bitcoin-design/-review.png alt="A pre-sending review screen showing the finalised fee after the payjoin handshake is completed."></p><p>Payjoin “握手”完成后，进入交易广播前的最终检查界面，上面会显示最终的手续费。</p><p><img src=/../images/payjoin-experinence-by-bitcoin-design/success.png alt="A payment success screen informs the user that the Payjoin transaction has been broadcast."></p><p>最后，支付成功界面会告知用户，该 Payjoin 交易已成功广播。</p><p>每个界面的详细说明见此<a target=_blank rel=noopener href="https://docs.google.com/document/d/1laHP3TqU6zzf0ajpQfQ5qaP0wUUQXNNnoMvVrVVU7K0/edit?usp=sharing">文档</a>。设计稿见此 <a target=_blank rel=noopener href="https://www.figma.com/file/hCHA4qjxQGiX06ddnWADyW/%5Byashraj's-copy%5D-Bitcoin-Wallet-UI-Kit-%26-Design-System?node-id=4331:66395&t=uV0lFmRXrQiv2AAB-1">Figma 文件</a>。</p><h2 id=接收-Payjoin><a href=#接收-Payjoin class=headerlink title="接收 Payjoin"></a>接收 Payjoin</h2><p>基于 BIP78 协议，<a target=_blank rel=noopener href=https://bitcoin.design/guide/case-studies/payjoin/#understanding-users--requirements>接收方的门槛</a> 要远高于发送方。 发送方只需要一个兼容的移动钱包，但接收方仅靠移动钱包无法维护一个始终在线的端点。而企业和机构则面临另一种困境：虽然他们有能力轻松地部署一套 Payjoin 接收方案，但对热钱包的安全顾虑又令其望而却步。</p><p><strong>尽管几乎所有移动钱包都是热钱包，为其充值也很简单，但要专门运行一个在线服务器来进行 Payjoin 握手，无论在技术上还是实践中都颇具挑战。这或许是当前阻碍 Payjoin 获得支持和普及的最大障碍。</strong></p><h3 id=调研：-BTCPay-商户-接收端><a href=#调研：-BTCPay-商户-接收端 class=headerlink title="调研： BTCPay 商户&#x2F;接收端"></a>调研： BTCPay 商户&#x2F;接收端</h3><p>作者于 2023 年 2 月成功测试了 BTCPay v1.7.12 的 Payjoin 接收功能。</p><p>主要发现如下:</p><ul><li>一旦设置完成，系统会自动生成启用了 Payjoin 的链接。</li><li>如果用户选择添加一个已有的热钱包，BTCPay 不会像新建热钱包时一样在同一页面提供启用 Payjoin 的选项。</li><li>无论是在新建钱包还是添加已有钱包的设置中，如果用户选择了观察（冷）钱包，他们将永远不会接触到 Payjoin 功能（因为签署 Payjoin 交易的过程需要用到私钥）。</li><li>商户只能连接一个比特币钱包（除非通过 <a target=_blank rel=noopener href=https://docs.btcpayserver.org/HardwareWalletIntegration/ >BTCPay Vault</a>），因此使用了冷钱包就无法再设置热钱包（也就无法使用 Payjoin）。</li><li>如果热钱包中的余额不足以执行 Payjoin 交易，BTCPay 不会提示或警告用户，从而导致支付失败。</li><li>没有专门用于管理和监控 Payjoin 的地方。</li></ul><p><a target=_blank rel=noopener href="https://docs.google.com/document/d/1_de2pkMREGpZQwOefQdH-MZNSUPazObgRK1cruiWBmo/edit?usp=sharing">在 BTCPay 上接收 Payjoin 的完整调研见此分析报告</a>。</p><h3 id=建议的接收方流程><a href=#建议的接收方流程 class=headerlink title=建议的接收方流程></a>建议的接收方流程</h3><p>在此，我们将为可以始终在线的销售终端（POS，point-of-sale）系统设计一套用户流程。此流程不适用于移动钱包。</p><p>接收方应当能够在平台（应用或 POS 系统）的初始配置过程中、或之后任意时间点设置 Payjoin。以下展示的是一个独立的 Payjoin 设置流程。</p><p><img src=/../images/payjoin-experinence-by-bitcoin-design/payjoin-new-pos.svg alt=payjoin-new-pos></p><p>集成了初始配置过程的详细流程图见此 <a target=_blank rel=noopener href="https://www.figma.com/file/NzMvwyzP7x5jfGmwNUKRov/PayJoin-Process-Flows?node-id=0:1&t=wSwewTOkQddWhagl-1">Figjam 文件</a> 。</p><h3 id=请求-Payjoin><a href=#请求-Payjoin class=headerlink title="请求 Payjoin"></a>请求 Payjoin</h3><p>一旦 Payjoin 设置生效， 所有支付请求（BIP-21 支付链接或二维码） 都应该包含执行 Payjoin 交易所需的信息（包括端点地址），无需用户额外操作。</p><h3 id=Payjoin-状态-设置><a href=#Payjoin-状态-设置 class=headerlink title="Payjoin 状态&#x2F;设置"></a>Payjoin 状态&#x2F;设置</h3><p>在设置页面中开辟一个版块，提供一个用于管理 Payjoin 设置和监控其状态的专属空间，会是个不错的设计。这个版块还能为使用冷钱包的用户提供一个发现并设置 Payjoin 功能的入口。该版块可以包含以下内容：</p><ul><li>Payjoin 设置流程</li><li>其它 Payjoin 功能，例如：第三方端点、地址&#x2F;输出替换、补充冷钱包余额等</li><li>监控 Payjoin 就绪状态：热钱包状态、Payjoin 端点状态等</li></ul><h2 id=洞见><a href=#洞见 class=headerlink title=洞见></a>洞见</h2><p>在本案例研究的过程中，我们收获颇丰，而我们所设计的用户流程已经应用了其中的许多洞见。</p><ul><li>Payjoin 允许接收方整合 UTXO，长远来看，这让参与者能够支付更低的手续费。这一点对于交易所尤其有用，因为他们最需要这个功能，同时也完全具备部署一套稳健可靠的系统的技术实力。</li><li>考虑到交易双方可能需要经历多达数轮的迭代与协作，本案例研究引入了“Payjoin 握手” 这一术语，用来概括用户操作之间的所有自动化交互。</li><li>维护一个始终在线的端点似乎是 Payjoin 实现的最大障碍，文中也列出了一些替代方案。</li><li>Payjoin 虽然对接收方提出了更高的要求，但也为其带来了更多的好处和机会。</li><li>输出替换：这是源自 BIP-78 的一个强大构想。虽具风险，但也能成为 Payjoin 用户的有力助手。</li><li>输出替换：Payjoin 让接收方可以发布静态的支付信息，但在实际收款时使用不同的地址，避免了地址重用。</li><li>Payjoin 接收方无需额外设置钱包，可以直接使用其日常消费钱包作为 Payjoin 的热钱包。</li><li>Payjoin 实现需要留意用于识别 Payjoin 的“整数费率”分析法，应当自动化处理，无需用户干预。</li></ul><h2 id=新的可能><a href=#新的可能 class=headerlink title=新的可能></a>新的可能</h2><p>由于涉及多方协作和众多不确定的环节（如端点），无论是理解还是实现 Payjoin 都有着较高的门槛，但这也为各式各样的新功能和服务打开了大门。</p><p>以下是一些例子：</p><ul><li>接收方可以选择使用第三方端点（关闭地址替换），牺牲一部分隐私来换取便利性。</li><li>目前有一些激动人心的工作围绕 <a target=_blank rel=noopener href=https://gist.github.com/DanGould/243e418752fff760c9f6b23bba8a32f9>无服务端的</a> Payjoin 实现展开，这一方案非常适合同时支持比特币和闪电网络的平台。</li><li>接收端的实现方案可以使用地址替换，来让用户自行发起支付。</li><li>可以通过 NFC（或其它无线近场通讯技术）来进行 Payjoin 协作</li><li>可以利用 BIP-78 增加一轮额外的交互，允许发送方在“握手”后调整手续费，然后发回给接收方进行广播。</li></ul><p>本案例研究深入探讨了围绕 Payjoin 的设计问题，希望能借此激发社区对其多样化用例和潜在价值的兴趣。</p><p><em>致谢</em>:</p><ul><li>感谢 BTCPay 的 <a target=_blank rel=noopener href=https://pavlenex.com/ >Pavlenex</a> 提供的支持 Payjoin 的 BTCPay 实例，我们用它测试了接收流程。</li><li>感谢 <a target=_blank rel=noopener href=https://twitter.com/nicolasdorier>Nicolas Dorier</a> 审校本案例研究的内容并积极参与 Payjoin 的相关讨论。</li><li>最后，感谢 <a target=_blank rel=noopener href=https://twitter.com/bitgould>Dan Gould</a> 的宝贵指导、耐心和热情。</li></ul><h2 id=资源><a href=#资源 class=headerlink title=资源></a>资源</h2><ul><li><a target=_blank rel=noopener href=https://github.com/bitcoin/bips/blob/master/bip-0078.mediawiki>BIP-78</a></li><li><a target=_blank rel=noopener href=https://bitcoinops.org/en/topics/payjoin>Bitcoin Optech 主题：Payjoin</a></li><li><a target=_blank rel=noopener href="https://www.figma.com/file/NzMvwyzP7x5jfGmwNUKRov/PayJoin-Process-Flows?node-id=0:1&t=wSwewTOkQddWhagl-1">Payjoin 处理流程</a></li><li><a target=_blank rel=noopener href="https://www.figma.com/file/69uUDWVc8N9t5Bej8pZEsF/PayJoin-User-Flows?node-id=0:1&t=8F4jOa71i6X1Slbz-1">Payjoin 用户流程</a></li><li><a target=_blank rel=noopener href="https://docs.google.com/document/d/1_de2pkMREGpZQwOefQdH-MZNSUPazObgRK1cruiWBmo/edit?usp=sharing">调研报告: 在真实环境中测试 Payjoin</a></li><li><a target=_blank rel=noopener href=https://docs.btcpayserver.org/Payjoin/#btcpay-server-payjoin-guide>BTCPay Server Payjoin 指南</a></li></ul></article></div></div></main><script src="/js/post.js?v=1682773100887"></script><script src="/js/highlight.min.js?v=1682773100887"></script><script>var containerEl=document.querySelector(".post-container"),postFontSize=localStorage.getItem("post-font-size")||"16",inputEl=document.querySelector("#size-change-input"),inputEl2=document.querySelector("#size-change-input2");inputEl.value=postFontSize,inputEl2.value=postFontSize,containerEl.style.fontSize=postFontSize+"px",$(function(){function e(t){$(".post-container").css("font-size",t+"px"),localStorage.setItem("post-font-size",t),$("#size-change-input").val(t),$("#size-change-input2").val(t)}$("#size-change-input").on("input propertychange",function(t){e(t.target.value)}),$("#size-change-input2").on("input propertychange",function(t){e(t.target.value)})})</script><script>hljs.initHighlightingOnLoad()</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class=sns-container><a title=nostr target=_blank rel="noopener nofollow" href=https://iris.to/npub1g2qs0ca5kpwlrcfug2em4jelmh65clk3yccwjxrs6hvdpd9qj80q022j4m>Nostr</a><a title=rss target=_blank rel="noopener nofollow" href=/atom.xml>rss</a><a title=telegram target=_blank rel="noopener nofollow" href=//t.me/btcstudyorg>Telegram</a></section></footer><script async src="/js/buttons.js?v=1682773100887"></script><script async src="/js/index.js?v=1682773100887"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JVCJ9XXG1Z")</script><script>var _hmt=_hmt||[];(()=>{var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306",e.async=!0,e.defer=!0,document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)})()</script></body></html>