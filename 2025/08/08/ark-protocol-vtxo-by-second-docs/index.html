<!DOCTYPE html><html lang=zh-CN><head><meta charset=UTF-8><title>图解 Ark 协议：VTXO 的类型</title><meta name=keywords content="比特币, 中本聪, 比特币区块链, 闪电网络, 比特币 layer 2, 健全货币, 密码货币, 密码朋克, 学习比特币, BTC, BTC Study, Bitcoin, bitcoin, proof of work"><meta name=description content=比特币思想的中文集结地><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1"><link rel=icon href=/favicon.ico><link rel=stylesheet href="/style/common/bulma.css?v=1682773100887"><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href="/style/common/iconfont.css?v=1682773100887"><link rel=stylesheet href="/style/base.css?v=1682773100887"><link rel=stylesheet href="/style/common/helper.css?v=1682773100887"><link rel=stylesheet href="/style/themes/animation.css?v=1682773100887"><script>function ready(){var e=document.querySelector(".body-container"),t=localStorage.getItem("theme")||"light";["light","dark"].includes(t)||(t="light",localStorage.setItem("theme","light")),e.classList.remove("appearance-auto"),e.classList.add("appearance-"+t),quickInitialTheme()}function quickInitialTheme(){var e=localStorage.getItem("theme")||"light",t=document.querySelector(".logo-light"),o=document.querySelector(".logo-dark"),d=document.querySelector("#mobile-header-logo > .logo-light"),l=document.querySelector("#mobile-header-logo > .logo-dark"),a=document.getElementById("theme-btn"),i=document.querySelector(".slide-theme-light"),c=document.querySelector(".slide-theme-dark");document.body.classList.add(e),("dark"===e?(t.classList.add("hidden"),o.classList.remove("hidden"),d.classList.add("hidden"),l.classList.remove("hidden"),a.classList.remove("icon-icon_dark"),a.classList.add("icon-icon_light"),i):c).classList.remove("hidden")}document.addEventListener("DOMContentLoaded",ready)</script><script src="/js/common.js?v=1682773100887"></script><script src=/js/libs/zepto.min.js></script><link rel=stylesheet href="/style/post.css?v=1682773100887"><link rel=stylesheet href="/style/themes/highlight.css?v=1682773100887"><meta name=generator content="Hexo 6.3.0"><link rel=alternate href=/atom.xml title="BTC Study" type=application/atom+xml></head><body class="is-flex is-flex-direction-column" onload=initialTheme()><div class=clip></div><div class="body-container appearance-auto"><header class="header-widget is-hidden-mobile is-flex is-flex-shrink-0 is-align-items-center is-justify-content-center" id=header><div class="is-flex header-widget-container is-flex-shrink-0 is-align-items-center"><section class="is-hidden-mobile is-flex-shrink-0"><h1><a href=/ ><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></a></h1></section><div class="is-flex is-flex-direction-column header-menu-wrap"><aside class="is-flex-shrink-0 is-flex is-flex-direction-row is-align-items-center" id=header-menu><a class="is-inline-block header-activity mr-4" href=/ >首页</a><a class="is-inline-block mr-4" href=/archives>全站目录</a><a class="is-inline-block mr-4" href=/tags>标签</a><a class="is-inline-block mr-4" href=/maps>地图</a><a class="is-inline-block mr-4" href=/tools>工具</a><a class="is-inline-block mr-4" target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div class="right-content is-flex is-flex-direction-row is-align-items-center"><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input type=range min=12 max=32 step=2></div></div></div><i class="iconfont icon-icon_dark mr-1" id=theme-btn></i><div class=search-wrap><input class=pl-3 id=search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search" id=search-input-btn></i></div></div></aside><div class="header-title is-hidden-mobile is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopic><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">图解 Ark 协议：VTXO 的类型</p><div class="size-wrap mr-1"><i class="iconfont icon-a-bianzu5" id=change-size-btn2></i><div class=size-input-wrap><div class=input-wrap><input id=size-change-input2 type=range min=12 max=32 step=2></div></div></div></div></div></div></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-tablet" id=mobile-header><div class="is-flex is-flex-direction-row is-align-items-center"><i class="iconfont icon-icon_bar mobile-header-menu"></i><div id=mobile-header-logo><svg class=logo-light width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#000000></path></g></g></g></svg><svg class="logo-dark hidden" width=125px height=23px viewBox="0 0 125 23" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><title>BTCStudy</title><g id=页面-1 stroke=none stroke-width=1 fill=none fill-rule=evenodd><g id=首页-响应式 transform="translate(-249.000000, -23.000000)" fill-rule=nonzero><g id=BTCStudy transform="translate(249.680000, 23.192000)"><path d="M9.072,17.808 C11.312,17.808 13.024,17.408 14.208,16.608 C15.392,15.808 15.984,14.672 15.984,13.2 C15.984,12.192 15.712,11.332 15.168,10.62 C14.624,9.908 13.872,9.384 12.912,9.048 C13.632,8.68 14.188,8.18 14.58,7.548 C14.972,6.916 15.168,6.2 15.168,5.4 C15.168,4.056 14.608,2.988 13.488,2.196 C12.368,1.404 10.736,1.008 8.592,1.008 L8.592,1.008 L-5.68434189e-14,1.008 L-5.68434189e-14,17.808 L9.072,17.808 Z M7.968,7.68 L4.704,7.68 L4.704,4.44 L7.968,4.44 C9.568,4.44 10.368,4.976 10.368,6.048 C10.368,7.136 9.568,7.68 7.968,7.68 L7.968,7.68 Z M8.688,14.376 L4.704,14.376 L4.704,10.968 L8.688,10.968 C10.352,10.968 11.184,11.536 11.184,12.672 C11.184,13.808 10.352,14.376 8.688,14.376 L8.688,14.376 Z M26.544,17.808 L26.544,4.776 L31.68,4.776 L31.68,1.008 L16.632,1.008 L16.632,4.776 L21.792,4.776 L21.792,17.808 L26.544,17.808 Z M41.592,18.144 C43.128,18.144 44.512,17.872 45.744,17.328 C46.976,16.784 48,16 48.816,14.976 L48.816,14.976 L45.792,12.24 C44.704,13.552 43.384,14.208 41.832,14.208 C40.92,14.208 40.108,14.008 39.396,13.608 C38.684,13.208 38.132,12.644 37.74,11.916 C37.348,11.188 37.152,10.352 37.152,9.408 C37.152,8.464 37.348,7.628 37.74,6.9 C38.132,6.172 38.684,5.608 39.396,5.208 C40.108,4.808 40.92,4.608 41.832,4.608 C43.384,4.608 44.704,5.264 45.792,6.576 L45.792,6.576 L48.816,3.84 C48,2.816 46.976,2.032 45.744,1.488 C44.512,0.944 43.128,0.672 41.592,0.672 C39.832,0.672 38.252,1.044 36.852,1.788 C35.452,2.532 34.352,3.568 33.552,4.896 C32.752,6.224 32.352,7.728 32.352,9.408 C32.352,11.088 32.752,12.592 33.552,13.92 C34.352,15.248 35.452,16.284 36.852,17.028 C38.252,17.772 39.832,18.144 41.592,18.144 Z" id=BTC fill=#F2A900></path><path d="M56.64,18.144 C58.24,18.144 59.6,17.9 60.72,17.412 C61.84,16.924 62.68,16.272 63.24,15.456 C63.8,14.64 64.08,13.728 64.08,12.72 C64.08,11.552 63.772,10.628 63.156,9.948 C62.54,9.268 61.812,8.772 60.972,8.46 C60.132,8.148 59.072,7.856 57.792,7.584 C56.656,7.344 55.832,7.112 55.32,6.888 C54.808,6.664 54.552,6.328 54.552,5.88 C54.552,5.432 54.768,5.068 55.2,4.788 C55.632,4.508 56.32,4.368 57.264,4.368 C58.768,4.368 60.32,4.8 61.92,5.664 L61.92,5.664 L63.384,2.136 C62.568,1.656 61.624,1.292 60.552,1.044 C59.48,0.796 58.392,0.672 57.288,0.672 C55.672,0.672 54.308,0.912 53.196,1.392 C52.084,1.872 51.248,2.524 50.688,3.348 C50.128,4.172 49.848,5.096 49.848,6.12 C49.848,7.288 50.152,8.216 50.76,8.904 C51.368,9.592 52.096,10.092 52.944,10.404 C53.792,10.716 54.848,11.008 56.112,11.28 C57.264,11.536 58.1,11.78 58.62,12.012 C59.14,12.244 59.4,12.6 59.4,13.08 C59.4,13.992 58.488,14.448 56.664,14.448 C55.704,14.448 54.728,14.296 53.736,13.992 C52.744,13.688 51.872,13.288 51.12,12.792 L51.12,12.792 L49.56,16.296 C50.36,16.856 51.4,17.304 52.68,17.64 C53.96,17.976 55.28,18.144 56.64,18.144 Z M71.856,18.024 C72.48,18.024 73.068,17.96 73.62,17.832 C74.172,17.704 74.64,17.52 75.024,17.28 L75.024,17.28 L73.896,14.088 C73.496,14.36 73.032,14.496 72.504,14.496 C72.088,14.496 71.756,14.364 71.508,14.1 C71.26,13.836 71.136,13.472 71.136,13.008 L71.136,13.008 L71.136,8.688 L74.112,8.688 L74.112,5.28 L71.136,5.28 L71.136,1.896 L66.576,1.896 L66.576,5.28 L64.68,5.28 L64.68,8.688 L66.576,8.688 L66.576,13.056 C66.576,14.704 67.032,15.944 67.944,16.776 C68.856,17.608 70.16,18.024 71.856,18.024 Z M82.248,18.024 C83,18.024 83.712,17.888 84.384,17.616 C85.056,17.344 85.632,16.944 86.112,16.416 L86.112,16.416 L86.112,17.808 L90.456,17.808 L90.456,4.8 L85.896,4.8 L85.896,11.064 C85.896,12.104 85.668,12.876 85.212,13.38 C84.756,13.884 84.168,14.136 83.448,14.136 C82.744,14.136 82.208,13.912 81.84,13.464 C81.472,13.016 81.288,12.304 81.288,11.328 L81.288,11.328 L81.288,4.8 L76.728,4.8 L76.728,12.072 C76.728,14.056 77.228,15.544 78.228,16.536 C79.228,17.528 80.568,18.024 82.248,18.024 Z M99.048,18.024 C100.744,18.024 102.016,17.52 102.864,16.512 L102.864,16.512 L102.864,17.808 L107.208,17.808 L107.208,0 L102.648,0 L102.648,5.928 C101.8,5.032 100.6,4.584 99.048,4.584 C97.864,4.584 96.784,4.856 95.808,5.4 C94.832,5.944 94.06,6.724 93.492,7.74 C92.924,8.756 92.64,9.936 92.64,11.28 C92.64,12.624 92.924,13.808 93.492,14.832 C94.06,15.856 94.832,16.644 95.808,17.196 C96.784,17.748 97.864,18.024 99.048,18.024 Z M100.008,14.4 C99.208,14.4 98.552,14.124 98.04,13.572 C97.528,13.02 97.272,12.256 97.272,11.28 C97.272,10.32 97.528,9.568 98.04,9.024 C98.552,8.48 99.208,8.208 100.008,8.208 C100.808,8.208 101.46,8.48 101.964,9.024 C102.468,9.568 102.72,10.32 102.72,11.28 C102.72,12.256 102.464,13.02 101.952,13.572 C101.44,14.124 100.792,14.4 100.008,14.4 Z M112.368,22.68 C113.728,22.68 114.88,22.356 115.824,21.708 C116.768,21.06 117.568,19.936 118.224,18.336 L118.224,18.336 L123.84,4.8 L119.496,4.8 L116.28,12.744 L113.088,4.8 L108.408,4.8 L113.976,17.976 C113.784,18.36 113.548,18.64 113.268,18.816 C112.988,18.992 112.632,19.08 112.2,19.08 C111.832,19.08 111.468,19.012 111.108,18.876 C110.748,18.74 110.44,18.552 110.184,18.312 L110.184,18.312 L108.6,21.504 C109.032,21.856 109.596,22.14 110.292,22.356 C110.988,22.572 111.68,22.68 112.368,22.68 Z" id=Study fill-opacity=0.85 fill=#FFFFFF></path></g></g></g></svg></div><div class="mobile-header-title is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height hidden" id=postTopicMobile><p class=is-full-height>图解 Ark 协议：VTXO 的类型</p></div></div></div><i class="iconfont icon-icon_search mobile-header-searchIcon"></i><div class=mobile-search-wrap><div class=search-input><input class=pl-3 id=mobile-search-input placeholder=请输入搜索关键词><i class="iconfont icon-icon_search mobile-search-input-btn"></i><button class=mobile-search-input-btn>搜 索</button></div></div></header><div class=mobile-slide-menu><a class=header-activity href=/ >首页</a><a href=/archives>全站目录</a><a href=/tags>标签</a><a href=/maps>地图</a><a href=/tools>工具</a><a target=_blank rel=noopener href=https://123btc.org/ >123btc</a><div><p class="slide-menu-theme is-flex is-flex-direction-row is-justify-content-space-between is-align-items-center"><span>主题设置</span><span><i class="iconfont icon-icon_light slide-theme-light hidden"></i><i class="iconfont icon-icon_dark slide-theme-dark hidden"></i></span></p><p class=slide-menu-fontsize><span>字体设置</span><span><i class="iconfont icon-bianzubeifen"></i><i class="iconfont icon-bianzu"></i></span></p></div></div><div class="search-mask hidden"><script src="/js/header.js?v=1682773100887"></script></div><main><main class="container is-max-widescreen content section post-page pt-4"><div class="columns is-flex-desktop is-justify-content-center"><div class="column is-3 silde-bar is-hidden-mobile"><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#VTXO-%E7%B1%BB%E5%9E%8B%E6%A6%82%E8%BF%B0><span class=toc-text>VTXO 类型概述</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#VTXO-%E7%B1%BB%E5%9E%8B%E6%AF%94%E8%BE%83><span class=toc-text>VTXO 类型比较</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%BA%A4%E6%98%93%E6%A0%91><span class=toc-text>交易树</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%BA%A4%E6%98%93%E8%8A%B1%E8%B4%B9%E8%B7%AF%E5%BE%84><span class=toc-text>交易花费路径</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%85%A5%E5%9C%BA%E5%9E%8B-VTXO><span class=toc-text>入场型 VTXO</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E5%88%B7%E6%96%B0%E5%9E%8B-VTXO><span class=toc-text>刷新型 VTXO</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E6%94%AF%E5%87%BA%E5%9E%8B-VTXO><span class=toc-text>支出型 VTXO</span></a><ol class=toc-child><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%94%AF%E5%87%BA%E5%9E%8B-VTXO-%E7%9A%84%E9%93%BE%E6%9D%A1><span class=toc-text>支出型 VTXO 的链条</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%94%AF%E5%87%BA%E5%9E%8B-VTXO-%E6%89%BE%E9%9B%B6><span class=toc-text>支出型 VTXO 找零</span></a></li><li class="toc-item toc-level-3"><a class=toc-link href=#%E6%B6%89%E5%8F%8A%E5%A4%9A%E4%B8%AA-VTXO-%E7%9A%84%E5%A4%A7%E9%A2%9D%E6%94%AF%E4%BB%98><span class=toc-text>涉及多个 VTXO 的大额支付</span></a></li></ol></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E4%BA%A4%E6%98%93%E6%A0%91%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7><span class=toc-text>交易树可扩展性</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E7%94%A8%E6%88%B7%E5%A6%82%E4%BD%95%E4%B8%8E%E4%B8%8D%E5%90%8C%E7%9A%84-VTXO-%E4%BA%A4%E4%BA%92><span class=toc-text>用户如何与不同的 VTXO 交互</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#%E7%94%A8%E6%88%B7%E8%A6%81%E6%94%AF%E4%BB%98%E7%9A%84-VTXO-%E8%B4%B9%E7%94%A8><span class=toc-text>用户要支付的 VTXO 费用</span></a></li></ol></div><div class="column is-9 post-container"><h1 class="mt-0 mb-2" id=postTitle>图解 Ark 协议：VTXO 的类型</h1><div class=page-author><div class="is-flex is-flex-direction-row page-data mr-6"><img class=mr-1 src=/images/default_avatar.png alt="Second Docs"><div class=page-author-info><strong>Second Docs</strong><time class=has-text-grey datetime=2025-08-08T08:15:08.000Z>2025-08-08</time></div></div><div class=is-flex><a href=/tags/Ark><i class="page-tag mr-1 px-1">Ark</i></a></div></div><article class="mt-4 post-content"><blockquote><p><em>作者：Second Docs</em></p><p><em>来源：<a target=_blank rel=noopener href=https://docs.second.tech/ark-protocol/vtxo/ >https://docs.second.tech/ark-protocol/vtxo/</a></em></p></blockquote><p>“VTXO（虚拟交易输出）” 是 Ark 协议的基础模块。VTXO 对 Ark 协议的意义，就像 UTXO 对比特币协议的意义 —— 它是你持有资金的方式，也决定了协议中发起支付的方式。</p><p>当你在 Ark 协议中持有比特币时，这些比特币就表示为你的钱包中的一个乃至更多的 VTXO 。当你想给使用同一个 Ark 服务商的另一个人发送比特币时，你花费自己的 VTXO、为接收者创建新的 VTXO —— 也就类似于在比特币协议中，你花费自己的 UTXO，为支付的接收方创建新的 UTXO 。</p><p>一个 VTXO 的背后是一连串的尚未得到区块链确认（链下）的预签名交易，由用户持有，本质上是为了给用户提供在必要时创建一个链上 UTXO 的能力。将 VTXO 转化为 UTXO 的操作可以无需任何第三方参与，这就叫 “单方面退出”。这种单方面退出特性是极为重要的，它保证了 Ark 协议的用户总能完全控制自己的比特币。</p><blockquote><p><strong>离场 vs. 单方面退出</strong></p><p>在常规情况下，用户想把自己在某个 Ark 实例中的资金转移出来，可以跟对应的服务商一起执行离场操作（合作式退出），或发起闪电支付；只需放弃自己的 VTXO（而不像单方面退出那样，需要将一连串交易发送到链上）。这会更加高效，也会更加便宜。</p></blockquote><h2 id=VTXO-类型概述><a href=#VTXO-类型概述 class=headerlink title="VTXO 类型概述"></a>VTXO 类型概述</h2><p>Ark 协议中有三种 VTXO：</p><ul><li><strong>入场型 VTXO</strong>：最简单的类型，是用户将比特币存入一个 Ark 实例时创建的。完全免信任。</li><li><strong>刷新型 VTXO</strong>：在服务商周期性启动的回合中创建。与入场型 VTXO 一样，是免信任的，但带有更复杂的交易树，以便跟其他用户一起分摊成本。</li><li><strong>支出型 VTXO</strong>：用户向同一 Ark 实例中的另一用户支付时即时创建的。衍生自入场型 VTXO 或刷新型 VTXO 。此种 VTXO 的单方面退出能力要求信任支付的发送者不会跟服务商勾结（将来源的 VTXO 重复花费）。</li></ul><p>每一种 VTXO 类型都使用不同的交易构造，这就产生了不同的信任模式和成本属性。</p><p><img src=/images/ark-protocol-vtxo-by-second-docs/vtxo-types.svg alt="Diagram showing all three VTXO types side by side"></p><p style=text-align:center>- 对比入场型 VTXO、刷新型 VTXO 和支出型 VTXO 的构造 -</p><h2 id=VTXO-类型比较><a href=#VTXO-类型比较 class=headerlink title="VTXO 类型比较"></a>VTXO 类型比较</h2><table><thead><tr><th>侧面</th><th>入门型 VTXO</th><th>刷新型 VTXO</th><th>支出型 VTXO</th></tr></thead><tbody><tr><td><strong>构造</strong></td><td>树根 → 叶子（2 笔交易）</td><td>树根 → 分支 → 叶子（3 笔交易以上）</td><td>衍生自现有 VTXO（叶子）</td></tr><tr><td><strong>创建时机</strong></td><td>随时，需要区块确认</td><td>仅能在周期性启动的回合种创建</td><td>随时，即时</td></tr><tr><td><strong>信任假设</strong></td><td>免信任</td><td>免信任</td><td>假设支付发送者和服务商不会勾结</td></tr><tr><td><strong>代价</strong></td><td>全部交易确认手续费</td><td>部分交易确认手续费 + 流动性成本</td><td>微乎其微</td></tr><tr><td><strong>退出路径深度</strong></td><td>2 笔交易（树根交易 + 叶子交易）</td><td>3 笔交易以上（树根交易 + 分支交易 + 叶子）</td><td>来源的 VTXO 的退出深度 + 1</td></tr><tr><td><strong>过期时间</strong></td><td>大约 30 天</td><td>大约 30 天</td><td>沿袭来源 VTXO 的过期时间</td></tr><tr><td><strong>标准使用场景</strong></td><td>将比特币转入一个 Ark 实例</td><td>刷新 VTXO</td><td>在 Ark 实例内发送支付</td></tr></tbody></table><h2 id=交易树><a href=#交易树 class=headerlink title=交易树></a>交易树</h2><p>所有的 VTXO 都建立在 “交易树” 之上 —— 交易树结构让许多用户能共同容身于一个链上的 UTXO 中，同时保留个人的单方面退出权利。一棵交易树由许多尚未得到区块链确认的预签名交易组成，用户各自保管与自己有关的部分；这些交易用特殊的花费条件连接起来，形成一种 “准-限制条款”。</p><p><img src=/../images/ark-protocol-vtxo-by-second-docs/tx-tree-only.svg alt="Diagram of a simple transaction tree"></p><p style=text-align:center>- 一棵容纳了四个用户的交易树，每一个都拥有自己的余额；但它们都容身于一个链上 UTXO 中 -</p><p>树上的交易有三种类型：</p><ul><li><strong>树根交易</strong>：唯一一笔默认会得到区块确认的交易；一旦该交易得到确认，用户们的 VTXO 就被成功创建出来</li><li><strong>分支交易</strong>：用户在链下持有的交易，会在用户群间分割树根交易的价值</li><li><strong>叶子交易</strong>：单笔的退出交易，将比特币发送到用户控制的地址中</li></ul><h2 id=交易花费路径><a href=#交易花费路径 class=headerlink title=交易花费路径></a>交易花费路径</h2><p>交易树上的每一笔交易都强制执行两种互斥的花费路径：</p><p><strong>花费路径 1</strong>：用户（们）与服务商的合作式多签名。树根交易和分支交易使用 n-of-n 的多签名（基于 MuSig2），由共享该分支的用户以及服务商组成，为的是支持用户紧急退出。叶子交易使用 2-of-2 多签名，由一个用户和服务商组成，用于放弃 VTXO 和支付。</p><p><strong>花费路径 2</strong>：基于时间锁的复原机制。树根交易和分支交易使用 CLTV 绝对时间锁（<code>&lt;过期区块高度&gt; OP_CHECKLOCKTIMEVERIFY</code>），而叶子交易使用 CSV 相对时间锁（<code>&lt;144&gt; OP_CHECKSEQUENCEVERIFY</code>），以供用户单方面退出。</p><p><img src=/../images/ark-protocol-vtxo-by-second-docs/spend-paths-root-branch.svg alt="Diagram of a transaction tree output with two spending conditions"></p><p style=text-align:center>- 树根交易和分支交易输出中的花费条件 -</p><p>合作路径支持了常规情形下的 Ark 协议的操作，例如支付、刷新和离场。时间锁路径则用于不同的目的：树根交易和分支交易的时间锁让服务商可以在过期后以最小的链上手续费代价取回比特币，而叶子交易的时间锁则让用户可以单方面兑现自己的 VTXO 。</p><blockquote><p><strong>四叉交易树</strong></p><p><strong>上图锁展示的二叉树只是为了演示</strong>。在实际使用中，虽然概念是一样的，但我们使用四叉树（每一笔分支交易都会分裂出四个输出），因为减少用户必须广播的交易的数量，可以降低用户的单方退出成本。</p></blockquote><h2 id=入场型-VTXO><a href=#入场型-VTXO class=headerlink title="入场型 VTXO"></a>入场型 VTXO</h2><p>入场型 VTXO 是用户将比特币转移到某个 Ark 实例时创建的，它代表的是最简单的 VTXO 构造。</p><p><img src=/../images/ark-protocol-vtxo-by-second-docs/board-vtxo-alice.svg alt="Diagram of board VTXO structure"></p><p style=text-align:center>- 入场型 VTXO 的构造 -</p><p><strong>构造</strong>：最简单的交易树，只有两笔交易。用户的叶子交易直接花费树根交易，完全没有分支交易。</p><p><strong>信任模式</strong>：在创建之后，入场型 VTXO 是完全免信任的。用户可以随时单方面退出，只需广播自己的叶子交易，服务商无法交易阻止，除非用户此前已经签名了弃权交易或者支付交易。</p><p><strong>退出成本</strong>：用户支付让树根交易和叶子交易得到确认的全部链上手续费。</p><p><strong>过期</strong>：默认情况下，入场型 VTXO 使用跟刷新型 VTXO 相同的<a target=_blank rel=noopener href=https://docs.second.tech/ark-protocol/expiries/ >过期时间</a>（大约 30 天）。不过，理论上，用户可以在创建过程中自定义过期时间，这取决于服务商的服务条款。定制过期时间允许用户为预期的使用模式作出调整 —— 更短的过期时间，可以降低希望立即刷新的收款方的成本。</p><h2 id=刷新型-VTXO><a href=#刷新型-VTXO class=headerlink title="刷新型 VTXO"></a>刷新型 VTXO</h2><p>刷新型 VTXO 是在 Ark 服务商的回合中创建的，在用户不得不刷新过期 VTXO 的时候，或在他们收到支出型 VTXO 后希望获得免信任安全性的时候。回合被预期会每小时发生一次，虽然<a target=_blank rel=noopener href=https://docs.second.tech/ark-protocol/rounds/ >这是一个服务商可以自设的参数</a>。</p><p><img src=/../images/ark-protocol-vtxo-by-second-docs/refresh-vtxo.svg alt="Diagram of refresh VTXO structure within a transaction tree"></p><p style=text-align:center>- 交易树标记了 Alice 的刷新 VTXO -</p><p><strong>构造</strong>：完整的交易树有多层分支。用户的 VTXO 会跟同一树上的其他用户有重叠（共享分支交易，但不会共享叶子交易），每个用户都必须持有从树根交易到其叶子交易的预签名交易链条，以备自己可以单方面退出。</p><p><strong>信任模式</strong>：与入场型 VTXO 相似，在回合完成后，刷新型 VTXO 就是免信任的。用户可以通过广播交易树与自己有关的部分来单方面退出，服务商无从阻止，除非此前用户已经签名了弃权交易或者支付交易。</p><p><strong>退出成本</strong>：用户需要为每一笔分支交易和叶子交易支付链上手续费。在紧急情况下，如果许多用户同时想退出，那么第一个广播分支交易的用户，将会帮助同一分支上所有其他用户节约要确认的交易的数量。因此，先退出的用户会补贴晚退出的用户。</p><p><strong>过期</strong>：刷新型 VTXO 带有服务商设定的<a target=_blank rel=noopener href=https://docs.second.tech/ark-protocol/expiries/ >过期时间</a>，预期是大约 30 天。用户无法自己决定这个过期时间，它是由服务商的回合服务条款决定的。</p><blockquote><p><strong>用户不需要每一个回合都参与</strong></p><p>一种常见的误解是，一个 Ark 服务商的所有用户，在该服务商启动的 <em>每一个</em> 回合中都要参与。并非如此。用户只会持有自己参与了的回合的刷新型 VTXO 。</p></blockquote><h2 id=支出型-VTXO><a href=#支出型-VTXO class=headerlink title="支出型 VTXO"></a>支出型 VTXO</h2><p>支出型 VTXO 是在一个用户给同一 Ark 服务商的另一用户支付时即时创建的；这会用到一种叫做 “arkoor（Ark out-of-round）” 的技术。这一机制让资金可以即时转移，无需等待下一个服务商回合。预计，大部分用户收到的第一笔 Ark 资金都会是支出型 VTXO（来自朋友、客户或者交易所）。</p><p><img src=/../images/ark-protocol-vtxo-by-second-docs/spend-vtxo.svg alt="Diagram of spend VTXO structure within a transaction tree"></p><p style=text-align:center>- 交易树，标记了 Wendy 的支出型 VTXO -</p><p><strong>构造</strong>：支出型 VTXO 衍生自现有的交易树，做法是添加一个新的叶子交易。支出型 VTXO 的持有者若要单方面退出，必须广播构成原 VTXO 的所有交易，再加上使自己获得资金的支付交易。</p><p><strong>信任模式</strong>：支出型 VTXO 的信任模式<a target=_blank rel=noopener href=https://bitcoinops.org/en/topics/statechains/ >与 statechain 相同</a>。用户依然可以单方面退出，但必须信任支付发送者和服务商不会串通来重复花费。只要服务商或发送者任何一方是诚实的，支付就是安全的。<a target=_blank rel=noopener href=https://docs.second.tech/ark-protocol/payments/ >此处</a>有更详细的描述。</p><p><strong>退出成本</strong>：用户必须为完整的退出路径支付链上手续费：来自原 VTXO 树的所有交易（所有的分支交易和原本的叶子交易）加上（构成支付链条的）所有额外的 arkoor 交易。每一笔支付都会延长交易链条，因此会增加总的退出成本。比如说，如果你收到的支出型 VTXO 已经被花过两次了，那么你需要为最初的交易树支付手续费，还要为现有的三笔 arkoor 交易支付手续费。</p><p><strong>过期</strong>：支出型 UTXO 会继承其来源 VTXO 的<a target=_blank rel=noopener href=https://docs.second.tech/ark-protocol/expiries/ >过期时间</a>。支付不会刷新过期时间，所以，收到 “老旧” VTXO 的接收者必须尽快刷新它，但是，刷新要支付的费用会比较少，因为服务商很快就能回收垫付的<a target=_blank rel=noopener href=https://docs.second.tech/ark-protocol/liquidity/ >流动性</a>。“簇新” VTXO 的接收者可以等待更长时间，但如果要立即刷新，将需要支付更高的费用。</p><p>除了信任模式的差异，支出型 VTXO 与其它类型的 VTXO 一样，都可以作为后续的支付交易和刷新交易的输入，也就是说，可以转化为免信任的刷新型 VTXO、可以发起合作式退出，也可以发起闪电支付。一旦以某种方式花出去了，那么相关的安全性顾虑也就消散了，因为你已经把它交给了 Ark 服务商，换来了可验证的链上比特币，或者闪电支付。</p><h3 id=支出型-VTXO-的链条><a href=#支出型-VTXO-的链条 class=headerlink title="支出型 VTXO 的链条"></a>支出型 VTXO 的链条</h3><p>支出型 VTXO 可以串联起来，每一笔连续的花费都会增加退出路径深度。收到一个支出型 VTXO 的用户必须相信：没有任何一个前任发送者会跟服务商勾结。但是，单单发送者是无法单方面重复话费的 —— 需要与服务商勾结。</p><p><img src=/../images/ark-protocol-vtxo-by-second-docs/spend-vtxo-chain.svg alt="Diagram of a chain of spend VTXOs"></p><p style=text-align:center>- 支出型 VTXO（arkoor 交易）的链条 -</p><blockquote><p><strong>支出型 VTXO 链条长度顾虑</strong></p><p>长链条会增加退出成本、积累信任因素。钱包应用的开发者也许可以给用户提供限制支出型 VTXO 链条长度的工具。</p></blockquote><h3 id=支出型-VTXO-找零><a href=#支出型-VTXO-找零 class=headerlink title="支出型 VTXO 找零"></a>支出型 VTXO 找零</h3><p>跟链上的 UTXO 的花费一样，用户可能只需要花费一个 VTXO 的一部分，这就产生了两种新的支付型 UTXO：</p><ol><li><strong>支付</strong>：发送给接收方</li><li><strong>找零</strong>：返回给发送者</li></ol><p><img src=/../images/ark-protocol-vtxo-by-second-docs/spend-vtxo-change.svg alt="Diagram of spend VTXO change structure"></p><p style=text-align:center>- 在 Ark 协议中花费一个 VTXO 时，找零是怎么出现的 -</p><p>支出型 VTXO 找零会继承其来源的信任属性：</p><ul><li><strong>来自免信任 VTXO 的找零</strong>：来自入场型 VTXO 和刷新型 VTXO 的找零会保持免信任属性，因为用户总不能自己欺诈自己。</li><li><strong>来自自我控制链条的找零</strong>：如果链条上的每一笔交易都只跟用户自己有关（找零或者左手换右手），那找零也是免信任的，因为链条的源头是用户自己的入场型 VTXO 或者刷新型 VTXO 。</li><li><strong>第三方链条</strong>：一旦有第三方出现在花费链条中，找零就会继承跟常规的支出型 VTXO 相同的信任要求 —— 必须信任链条上的前任发送者不会跟服务商勾结。</li></ul><h3 id=涉及多个-VTXO-的大额支付><a href=#涉及多个-VTXO-的大额支付 class=headerlink title="涉及多个 VTXO 的大额支付"></a>涉及多个 VTXO 的大额支付</h3><p>用户可以同时发送多个 VTXO，以形成一笔更大数额的支付；还可以同时给接收者创建多个输出。这种办法比起在链上创建多个小额 UTXO，有巨大的好处。</p><p>首先，两者的缺点不同。在链上创建多个输出，链上手续费会随着输出的数量增加而线性上涨。而在 Ark 协议中，发送的成本是微不足道的；而且对于接收者来说，刷新 VTXO 的成本跟支付的数额和占用的流动性大小有关 —— 跟被刷新的 VTXO 的数量无关。</p><p>不过，也不是完全没有缺点：同时发送多个 VTXO 来形成一笔支付，会增加接收者的单方退出成本。如果接收者真的要执行单方退出，就必须为持有的每一个支出型 VTXO 广播额外的交易到链上，所以链上手续费会因此倍增。</p><h2 id=交易树可扩展性><a href=#交易树可扩展性 class=headerlink title=交易树可扩展性></a>交易树可扩展性</h2><p>交易树的规模可以随着用户数量的增加而高效扩大。在一个刷新型 VTXO 的单方退出中，一个用户必须广播的交易数量是一笔叶子交易，加上与自己相关的分支交易（这个数量由交易树的层级，或者说树高，决定）。层级的数量会随着用户数量增加而呈对数上升（<code>log base 4</code>）。比如说：</p><ul><li>4 名用户 &#x3D; 1 个层级（总共需要 2 笔交易来退出）</li><li>16 名用户 &#x3D; 2 个层级（总共需要 3 笔交易来退出）</li><li>64 名用户 &#x3D; 3 个层级（总共需要 4 笔交易来退出）</li><li>256 名用户 &#x3D; 4 个层级（总共需要 5 笔交易来退出）</li></ul><p>这种对数增长意味着，即使用户数量非常庞大，退出交易的数量也依然是可以承受的。</p><h2 id=用户如何与不同的-VTXO-交互><a href=#用户如何与不同的-VTXO-交互 class=headerlink title="用户如何与不同的 VTXO 交互"></a>用户如何与不同的 VTXO 交互</h2><p>用户不能直接选择自己要用的 VTXO 类型 —— VTXO 类型是由他们的行为和环境决定的：</p><ul><li><strong>支出型 VTXO</strong> 是某人在同一 Ark 实例中给你发送支付时，你收到的。大部分初次尝试 Ark 的用户，都是收到来自朋友、客户或者交易所的支出型 VTXO 。</li><li><strong>刷新型 VTXO</strong> 是用户在参加服务商回合时创建的，无论是通过刷新即将过期的 VTXO，还是将支出型 VTXO 转化为免信任形式。</li><li><strong>入场型 VTXO</strong> 是用户希望将链上比特币转移进入某 Ark 实例时创建的。大部分普通用户都不需要创建入场型 VTXO 。</li></ul><p>随着时间推移，用户会基于自己的使用模式，在支出型 VTXO 和刷新型 VTXO 之间不断切换。而在<a target=_blank rel=noopener href=https://docs.second.tech/ark-protocol/expiries/ >过期时间</a>（大约 30 天）之后，所有用户都必须持有刷新型 VTXO，因为过期的 VTXO 不能再花费。</p><h2 id=用户要支付的-VTXO-费用><a href=#用户要支付的-VTXO-费用 class=headerlink title="用户要支付的 VTXO 费用"></a>用户要支付的 VTXO 费用</h2><p>虽然每一种 VTXO 都有不同的费用构成，但向用户收取的手续费也许不会直接反映这些成本。服务商可能会选择抽象掉某些手续费，或者给用户补贴，作为商业模式的一部分。Second 的 Ark 服务商的手续费方案还在开发中，不过你可以通过我们的 “<a target=_blank rel=noopener href=https://docs.second.tech/ark-protocol/fees/ >手续费</a>” 页面了解更多。</p></article></div></div></main><script src="/js/post.js?v=1682773100887"></script><script src="/js/highlight.min.js?v=1682773100887"></script><script>var containerEl=document.querySelector(".post-container"),postFontSize=localStorage.getItem("post-font-size")||"16",inputEl=document.querySelector("#size-change-input"),inputEl2=document.querySelector("#size-change-input2");inputEl.value=postFontSize,inputEl2.value=postFontSize,containerEl.style.fontSize=postFontSize+"px",$(function(){function e(t){$(".post-container").css("font-size",t+"px"),localStorage.setItem("post-font-size",t),$("#size-change-input").val(t),$("#size-change-input2").val(t)}$("#size-change-input").on("input propertychange",function(t){e(t.target.value)}),$("#size-change-input2").on("input propertychange",function(t){e(t.target.value)})})</script><script>hljs.initHighlightingOnLoad()</script></main></div><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0"><section class=sns-container><a title=nostr target=_blank rel="noopener nofollow" href=https://iris.to/npub1g2qs0ca5kpwlrcfug2em4jelmh65clk3yccwjxrs6hvdpd9qj80q022j4m>Nostr</a><a title=rss target=_blank rel="noopener nofollow" href=/atom.xml>rss</a><a title=telegram target=_blank rel="noopener nofollow" href=//t.me/btcstudyorg>Telegram</a></section></footer><script async src="/js/buttons.js?v=1682773100887"></script><script async src="/js/index.js?v=1682773100887"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JVCJ9XXG1Z"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JVCJ9XXG1Z")</script><script>var _hmt=_hmt||[];(()=>{var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?c92c073c85be5be8d9b1b76f62a7e306",e.async=!0,e.defer=!0,document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)})()</script></body></html>